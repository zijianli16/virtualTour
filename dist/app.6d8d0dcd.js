parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"lNC2":[function(require,module,exports) {
"use strict";function t(){}function e(e){for(var o in t.prototype)t.prototype.hasOwnProperty(o)&&(e.prototype[o]=t.prototype[o])}t.prototype.addEventListener=function(t,e){var o=this.__events=this.__events||{},n=o[t]=o[t]||[];n.indexOf(e)<0&&n.push(e)},t.prototype.removeEventListener=function(t,e){var o=(this.__events=this.__events||{})[t];if(o){var n=o.indexOf(e);n>=0&&o.splice(n,1)}},t.prototype.emit=function(t,e){var o=(this.__events=this.__events||{})[t],n=Array.prototype.slice.call(arguments,1);if(o)for(var r=0;r<o.length;r++){o[r].apply(this,n)}},module.exports=e;
},{}],"fllL":[function(require,module,exports) {
"use strict";function n(){return"undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return Date.now()}}module.exports=n();
},{}],"fanG":[function(require,module,exports) {
"use strict";var t=require("../util/now");function e(t,e){this.fn=t,this.cb=e,this.cfn=null}function i(t){this._queue=[],this._delay=t&&t.delay||0,this._paused=t&&!!t.paused||!1,this._currentTask=null,this._lastFinished=null}i.prototype.length=function(){return this._queue.length},i.prototype.push=function(t,i){var s=new e(t,i),n=this._cancel.bind(this,s);return this._queue.push(s),this._next(),n},i.prototype.pause=function(){this._paused||(this._paused=!0)},i.prototype.resume=function(){this._paused&&(this._paused=!1,this._next())},i.prototype._start=function(t){if(this._currentTask)throw new Error("WorkQueue: called start while running task");this._currentTask=t;var e=this._finish.bind(this,t);if(t.cfn=t.fn(e),"function"!=typeof t.cfn)throw new Error("WorkQueue: function is not cancellable")},i.prototype._finish=function(e){var i=Array.prototype.slice.call(arguments,1);if(this._currentTask!==e)throw new Error("WorkQueue: called finish on wrong task");e.cb.apply(null,i),this._currentTask=null,this._lastFinished=t(),this._next()},i.prototype._cancel=function(t){var e=Array.prototype.slice.call(arguments,1);if(this._currentTask===t)t.cfn.apply(null,e);else{var i=this._queue.indexOf(t);i>=0&&(this._queue.splice(i,1),t.cb.apply(null,e))}},i.prototype._next=function(){if(!this._paused&&this._queue.length&&!this._currentTask){if(null!=this._lastFinished){var e=t()-this._lastFinished,i=this._delay-e;if(i>0)return void setTimeout(this._next.bind(this),i)}var s=this._queue.shift();this._start(s)}},module.exports=i;
},{"../util/now":"fllL"}],"kJmJ":[function(require,module,exports) {
"use strict";function l(l,e,t,u){var i,n,a,r;return u=u||{},i=null!=t&&null!=t.absoluteWidth?t.absoluteWidth/l:null!=t&&null!=t.relativeWidth?t.relativeWidth:1,n=t&&null!=t.absoluteHeight?t.absoluteHeight/e:null!=t&&null!=t.relativeHeight?t.relativeHeight:1,a=null!=t&&null!=t.absoluteX?t.absoluteX/l:null!=t&&null!=t.relativeX?t.relativeX:0,r=null!=t&&null!=t.absoluteY?t.absoluteY/e:null!=t&&null!=t.relativeY?t.relativeY:0,u.x=a,u.y=r,u.width=i,u.height=n,u}module.exports=l;
},{}],"ZYkB":[function(require,module,exports) {
"use strict";function t(t){return function(n){var r,u;try{u=t()}catch(c){r=c}finally{r?n(r):n(null,u)}}}module.exports=t;
},{}],"LMqo":[function(require,module,exports) {
"use strict";function n(n){var r,t=!1;return function(){return t||(t=!0,r=n.apply(null,arguments)),r}}module.exports=n;
},{}],"Kwxa":[function(require,module,exports) {
"use strict";var e=require("./once");function n(n){return function(){if(!arguments.length)throw new Error("cancelized: expected at least one argument");var r=Array.prototype.slice.call(arguments,0),t=r[r.length-1]=e(r[r.length-1]);return n.apply(null,r),function(){t.apply(null,arguments)}}}module.exports=n;
},{"./once":"LMqo"}],"lrIP":[function(require,module,exports) {
"use strict";function o(o){for(var r in o)o.hasOwnProperty(r)&&(o[r]=void 0)}module.exports=o;
},{}],"xb0c":[function(require,module,exports) {
"use strict";function e(){this._renderers={}}e.prototype.set=function(e,r,t){this._renderers[e]||(this._renderers[e]={}),this._renderers[e][r]=t},e.prototype.get=function(e,r){return this._renderers[e]&&this._renderers[e][r]||null},module.exports=e;
},{}],"xml0":[function(require,module,exports) {
"use strict";var e=require("minimal-event-emitter"),t=require("../collections/WorkQueue"),r=require("../util/calcRect"),i=require("../util/async"),n=require("../util/cancelize"),s=require("../util/clearOwnProperties"),o=require("./RendererRegistry");function h(e,t){return e.cmp(t)}function l(e,t){return-e.cmp(t)}function a(e){this._progressive=!(!e||!e.progressive),this._layers=[],this._renderers=[],this._tilesToLoad=[],this._tilesToRender=[],this._tmpVisible=[],this._tmpChildren=[],this._width=0,this._height=0,this._tmpRect={},this._tmpSize={},this._createTextureWorkQueue=new t,this._emitRenderInvalid=this._emitRenderInvalid.bind(this),this._rendererRegistry=new o}e(a),a.prototype.destroy=function(){this.removeAllLayers(),s(this)},a.prototype.registerRenderer=function(e,t,r){return this._rendererRegistry.set(e,t,r)},a.prototype.domElement=function(){throw new Error("Stage implementation must override domElement")},a.prototype.width=function(){return this._width},a.prototype.height=function(){return this._height},a.prototype.size=function(e){return(e=e||{}).width=this._width,e.height=this._height,e},a.prototype.setSize=function(e){this._width=e.width,this._height=e.height,this.setSizeForType(),this.emit("resize"),this._emitRenderInvalid()},a.prototype.setSizeForType=function(e){throw new Error("Stage implementation must override setSizeForType")},a.prototype.loadImage=function(){throw new Error("Stage implementation must override loadImage")},a.prototype._emitRenderInvalid=function(){this.emit("renderInvalid")},a.prototype.validateLayer=function(e){throw new Error("Stage implementation must override validateLayer")},a.prototype.listLayers=function(){return[].concat(this._layers)},a.prototype.hasLayer=function(e){return this._layers.indexOf(e)>=0},a.prototype.addLayer=function(e,t){if(this._layers.indexOf(e)>=0)throw new Error("Layer already in stage");if(null==t&&(t=this._layers.length),t<0||t>this._layers.length)throw new Error("Invalid layer position");this.validateLayer(e);var r=e.geometry().type,i=e.view().type,n=this._rendererRegistry.get(r,i);if(!n)throw new Error("No "+this.type+" renderer avaiable for "+r+" geometry and "+i+" view");var s=this.createRenderer(n);this._layers.splice(t,0,e),this._renderers.splice(t,0,s),e.addEventListener("viewChange",this._emitRenderInvalid),e.addEventListener("effectsChange",this._emitRenderInvalid),e.addEventListener("fixedLevelChange",this._emitRenderInvalid),e.addEventListener("textureStoreChange",this._emitRenderInvalid),this._emitRenderInvalid()},a.prototype.moveLayer=function(e,t){var r=this._layers.indexOf(e);if(r<0)throw new Error("No such layer in stage");if(t<0||t>=this._layers.length)throw new Error("Invalid layer position");e=this._layers.splice(r,1)[0];var i=this._renderers.splice(r,1)[0];this._layers.splice(t,0,e),this._renderers.splice(t,0,i),this._emitRenderInvalid()},a.prototype.removeLayer=function(e){var t=this._layers.indexOf(e);if(t<0)throw new Error("No such layer in stage");var r=this._layers.splice(t,1)[0],i=this._renderers.splice(t,1)[0];this.destroyRenderer(i),r.removeEventListener("viewChange",this._emitRenderInvalid),r.removeEventListener("effectsChange",this._emitRenderInvalid),r.removeEventListener("fixedLevelChange",this._emitRenderInvalid),r.removeEventListener("textureStoreChange",this._emitRenderInvalid),this._emitRenderInvalid()},a.prototype.removeAllLayers=function(){for(;this._layers.length>0;)this.removeLayer(this._layers[0])},a.prototype.startFrame=function(){throw new Error("Stage implementation must override startFrame")},a.prototype.endFrame=function(){throw new Error("Stage implementation must override endFrame")},a.prototype.render=function(){var e,t,i,n=this._tilesToLoad,s=this._tilesToRender,o=!0,h=this._width,l=this._height,a=this._tmpRect,d=this._tmpSize;if(!(h<=0||l<=0)){for(this.startFrame(),e=0;e<this._layers.length;e++)this._layers[e].textureStore().startFrame();for(e=0;e<this._layers.length;e++){var c,p,_=this._layers[e],u=_.effects(),y=_.view(),m=_.textureStore(),v=this._renderers[e],f=this._layers.length-e;if(r(h,l,u&&u.rect,a),!(a.width<=0||a.height<=0)){for(d.width=a.width*this._width,d.height=a.height*this._height,y.setSize(d),v.startLayer(_,a),i=this._collectTiles(_,m),t=0;t<n.length;t++)c=n[t],m.markTile(c);for(t=0;t<s.length;t++)c=s[t],p=m.texture(c),v.renderTile(c,p,_,f);_.emit("renderComplete",i),i||(o=!1),v.endLayer(_,a)}}for(e=0;e<this._layers.length;e++)this._layers[e].textureStore().endFrame();this.endFrame(),this.emit("renderComplete",o)}},a.prototype._collectTiles=function(e,t){var r=this._tilesToLoad,i=this._tilesToRender,n=this._tmpVisible;r.length=0,i.length=0,n.length=0,e.visibleTiles(n);for(var s=!0,o=0;o<n.length;o++){var a,d=n[o];this._collectTileToLoad(d),t.texture(d)?(a=!1,this._collectTileToRender(d)):(a=this._collectChildren(d,t),s=!1),this._collectParents(d,t,a)}return r.sort(h),i.sort(l),s},a.prototype._collectChildren=function(e,t){var r=this._tmpChildren,i=!0;do{if(r.length=0,!e.children(r))break;i=!1;for(var n=0;n<r.length;n++)e=r[n],t.texture(e)?(this._collectTileToLoad(e),this._collectTileToRender(e)):i=!0}while(i&&1===r.length);return i},a.prototype._collectParents=function(e,t,r){for(var i=this._progressive;(i||r)&&null!=(e=e.parent());){if(r)if(t.texture(e))this._collectTileToRender(e),r=!1;else if(!this._progressive)continue;this._collectTileToLoad(e)||(i=!1)}return r},a.prototype._collectTileToLoad=function(e){return this._collectTileIntoList(e,this._tilesToLoad)},a.prototype._collectTileToRender=function(e){return this._collectTileIntoList(e,this._tilesToRender)},a.prototype._collectTileIntoList=function(e,t){for(var r=!1,i=0;i<t.length;i++)if(e.equals(t[i])){r=!0;break}return r||t.push(e),!r},a.prototype.createTexture=function(e,t,r){var s=this;var o=n(i(function(){return new s.TextureClass(s,e,t)}));return this._createTextureWorkQueue.push(o,function(i,n){r(i,e,t,n)})},module.exports=a;
},{"minimal-event-emitter":"lNC2","../collections/WorkQueue":"fanG","../util/calcRect":"kJmJ","../util/async":"ZYkB","../util/cancelize":"Kwxa","../util/clearOwnProperties":"lrIP","./RendererRegistry":"xb0c"}],"RzSu":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],d="undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==e?e:null;module.exports=d;
},{}],"rzhm":[function(require,module,exports) {

"use strict";var t=require("../util/global"),e=require("minimal-event-emitter"),i=require("../util/clearOwnProperties"),r={HTMLImageElement:["naturalWidth","naturalHeight"],HTMLCanvasElement:["width","height"],ImageBitmap:["width","height"]};function n(e){var i=!1;for(var n in r)if(t[n]&&e instanceof t[n]){i=!0,this._widthProp=r[n][0],this._heightProp=r[n][1];break}if(!i)throw new Error("Unsupported pixel source");this._element=e}e(n),n.prototype.destroy=function(){i(this)},n.prototype.element=function(){return this._element},n.prototype.width=function(){return this._element[this._widthProp]},n.prototype.height=function(){return this._element[this._heightProp]},n.prototype.timestamp=function(){return 0},n.prototype.isDynamic=function(){return!1},module.exports=n;
},{"../util/global":"RzSu","minimal-event-emitter":"lNC2","../util/clearOwnProperties":"lrIP"}],"W3pH":[function(require,module,exports) {
"use strict";function t(t,o){t.super_=o;var p=function(){};p.prototype=o.prototype,t.prototype=new p,t.prototype.constructor=t}module.exports=t;
},{}],"WkWV":[function(require,module,exports) {
"use strict";var r=require("./util/inherits");function s(r){this.constructor.super_.apply(this,arguments),this.message=r}r(s,Error),module.exports=s;
},{"./util/inherits":"W3pH"}],"r9QZ":[function(require,module,exports) {
"use strict";var e=require("../assets/Static"),r=require("../NetworkError"),t=require("../util/once");function n(e){if("webgl"!==e.type&&"css"!==e.type)throw new Error("Stage type incompatible with loader");this._stage=e}n.prototype.loadImage=function(n,o,a){var i=new Image;i.crossOrigin="anonymous";var l=o&&o.x||0,u=o&&o.y||0,s=o&&o.width||1,c=o&&o.height||1;return a=t(a),i.onload=function(){if(0===l&&0===u&&1===s&&1===c)a(null,new e(i));else{l*=i.naturalWidth,u*=i.naturalHeight,s*=i.naturalWidth,c*=i.naturalHeight;var r=document.createElement("canvas");r.width=s,r.height=c,r.getContext("2d").drawImage(i,l,u,s,c,0,0,s,c),a(null,new e(r))}},i.onerror=function(){a(new r("Network error: "+n))},i.src=n,function(){i.onload=i.onerror=null,i.src="",a.apply(null,arguments)}},module.exports=n;
},{"../assets/Static":"rzhm","../NetworkError":"WkWV","../util/once":"LMqo"}],"y5Tq":[function(require,module,exports) {
"use strict";function e(){var e=document.createElement("canvas");return!!(e.getContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}var t;function n(){return void 0!==t?t:t=e()}module.exports=n;
},{}],"JSid":[function(require,module,exports) {
var define;
var e;!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof e&&e.amd?e([],r):"object"==typeof exports?exports.bowser=r():t.bowser=r()}(this,function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i=r(18),n=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,i){void 0===i&&(i=!1);var n=e.getVersionPrecision(t),s=e.getVersionPrecision(r),o=Math.max(n,s),a=0,u=e.map([t,r],function(t){var r=o-e.getVersionPrecision(t),i=t+new Array(r+1).join(".0");return e.map(i.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});for(i&&(a=o-Math.min(n,s)),o-=1;o>=a;){if(u[0][o]>u[1][o])return 1;if(u[0][o]===u[1][o]){if(o===a)return 0;o-=1}else if(u[0][o]<u[1][o])return-1}},e.map=function(e,t){var r,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)i.push(t(e[r]));return i},e.getBrowserAlias=function(e){return i.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return i.BROWSER_MAP[e]||""},e}();t.default=n,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(91))&&i.__esModule?i:{default:i},s=r(18);function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(){}var t,r;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new n.default(e,t)},e.parse=function(e){return new n.default(e).getResult()},t=e,r=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],null&&o(t.prototype,null),r&&o(t,r),e}();t.default=a,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i=u(r(92)),n=u(r(93)),s=u(r(94)),o=u(r(95)),a=u(r(17));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=i.default.find(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=n.default.find(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=o.default.find(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return Object.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},i=0,n={},s=0;if(Object.keys(e).forEach(function(t){var o=e[t];"string"==typeof o?(n[t]=o,s+=1):"object"==typeof o&&(r[t]=o,i+=1)}),i>0){var o=Object.keys(r),a=o.find(function(e){return t.isOS(e)});if(a){var u=this.satisfies(r[a]);if(void 0!==u)return u}var d=o.find(function(e){return t.isPlatform(e)});if(d){var c=this.satisfies(r[d]);if(void 0!==c)return c}}if(s>0){var f=Object.keys(n).find(function(e){return t.isBrowser(e,!0)});if(void 0!==f)return this.compareVersion(n[f])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),i=e.toLowerCase(),n=a.default.getBrowserTypeByAlias(i);return t&&n&&(i=n.toLowerCase()),i===r},t.compareVersion=function(e){var t=[0],r=e,i=!1,n=this.getBrowserVersion();if("string"==typeof n)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(i=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(i=!0,r=e.substr(1)),t.indexOf(a.default.compareVersions(n,r,i))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some(function(e){return t.is(e)})},e}();t.default=d,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=n.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=n.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=n.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=n.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=n.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=n.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=n.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=n.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=n.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=n.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=n.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=n.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=n.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=n.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=n.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=n.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=n.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=n.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=n.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=n.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=n.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=n.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=n.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=n.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:n.default.getFirstMatch(t,e),version:n.default.getSecondMatch(t,e)}}}];t.default=o,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18),o=[{test:[/Roku\/DVP/],describe:function(e){var t=n.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:s.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=n.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.WindowsPhone,version:t}}},{test:[/windows/i],describe:function(e){var t=n.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=n.default.getWindowsVersionName(t);return{name:s.OS_MAP.Windows,version:t,versionName:r}}},{test:[/macintosh/i],describe:function(e){var t=n.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=n.default.getMacOSVersionName(t),i={name:s.OS_MAP.MacOS,version:t};return r&&(i.versionName=r),i}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=n.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=n.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=n.default.getAndroidVersionName(t),i={name:s.OS_MAP.Android,version:t};return r&&(i.versionName=r),i}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=n.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:s.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=n.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||n.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||n.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:s.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=n.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=n.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=n.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.PlayStation4,version:t}}}];t.default=o,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=n.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=n.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];t.default=o,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18),o=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:s.ENGINE_MAP.Blink};var t=n.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:s.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:s.ENGINE_MAP.Trident},r=n.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:s.ENGINE_MAP.Presto},r=n.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:s.ENGINE_MAP.Gecko},r=n.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:s.ENGINE_MAP.WebKit},r=n.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=o,e.exports=t.default}})});
},{}],"AQTT":[function(require,module,exports) {
"use strict";var e=1;function i(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var i=window.screen;if(i&&i.deviceXDPI&&i.logicalXDPI)return i.deviceXDPI/i.logicalXDPI;if(i&&i.systemXDPI&&i.logicalXDPI)return i.systemXDPI/i.logicalXDPI}return e}module.exports=i;
},{}],"VDAB":[function(require,module,exports) {
"use strict";function t(t){return 0==(t&t-1)}module.exports=t;
},{}],"Dw5L":[function(require,module,exports) {
"use strict";function t(t){for(var e=document.documentElement.style,n=["Moz","Webkit","Khtml","O","ms"],i=0;i<n.length;i++){var o=n[i]+(t[0].toUpperCase()+t.slice(1));if(o in e)return o}return t}function e(e){var n=t(e);return function(t){return t.style[n]}}function n(e){var n=t(e);return function(t,e){return t.style[n]=e}}var i=n("transform"),o=n("transformOrigin");function r(t){i(t,"translateZ(0)")}function s(t){o(t,"0 0 0")}function l(t){t.style.position="absolute"}function f(t,e,n){t.style.left=e+"px",t.style.top=n+"px"}function u(t,e,n){t.style.width=e+"px",t.style.height=n+"px"}function c(t){t.style.width=t.style.height=0}function y(t){t.style.width=t.style.height="100%"}function a(t){t.style.overflow="hidden"}function h(t){t.style.overflow="visible"}function p(t){t.style.pointerEvents="none"}function d(t){t.style.backgroundColor="#000",t.style.opacity="0",t.style.filter="alpha(opacity=0)"}module.exports={prefixProperty:t,getWithVendorPrefix:e,setWithVendorPrefix:n,setTransform:i,setTransformOrigin:o,setNullTransform:r,setNullTransformOrigin:s,setAbsolute:l,setPixelPosition:f,setPixelSize:u,setNullSize:c,setFullSize:y,setOverflowHidden:a,setOverflowVisible:h,setNoPointerEvents:p,setBlocking:d};
},{}],"bnPS":[function(require,module,exports) {
"use strict";var e=require("./Stage"),t=require("../loaders/HtmlImage"),r=require("../support/WebGl"),i=require("bowser"),n=require("../util/inherits"),o=require("../util/pixelRatio"),s=require("../util/ispot"),a=require("../util/dom").setAbsolute,l=require("../util/dom").setFullSize,_=require("../util/clearOwnProperties"),u="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.webGl,h={videoUseTexImage2D:i.chrome};function E(e,t){var r={alpha:!0,premultipliedAlpha:!0,antialias:!(!t||!t.antialias),preserveDrawingBuffer:!(!t||!t.preserveDrawingBuffer)};u&&"undefined"!=typeof WebGLDebugUtils&&(console.log("Using WebGL lost context simulator"),e=WebGLDebugUtils.makeLostContextSimulatingCanvas(e));var i=e.getContext&&(e.getContext("webgl",r)||e.getContext("experimental-webgl",r));if(!i)throw new Error("Could not get WebGL context");return u&&"undefined"!=typeof WebGLDebugUtils&&(i=WebGLDebugUtils.makeDebugContext(i),console.log("Using WebGL debug context")),i}function m(e){e=e||{};var r=this;this.constructor.super_.call(this,e),this._generateMipmaps=null!=e.generateMipmaps&&e.generateMipmaps,this._loader=new t(this),this._domElement=document.createElement("canvas"),a(this._domElement),l(this._domElement),this._gl=E(this._domElement,e),this._handleContextLoss=function(){r.emit("webglcontextlost"),r._gl=null},this._domElement.addEventListener("webglcontextlost",this._handleContextLoss),this._rendererInstances=[]}function p(e,t,r){this._stage=e,this._gl=e._gl,this._texture=null,this._timestamp=null,this._width=this._height=null,this.refresh(t,r)}n(m,e),m.prototype.destroy=function(){this._domElement.removeEventListener("webglcontextlost",this._handleContextLoss),this.constructor.super_.prototype.destroy.call(this)},m.supported=function(){return r()},m.prototype.domElement=function(){return this._domElement},m.prototype.webGlContext=function(){return this._gl},m.prototype.setSizeForType=function(){var e=o();this._domElement.width=e*this._width,this._domElement.height=e*this._height},m.prototype.loadImage=function(e,t,r){return this._loader.loadImage(e,t,r)},m.prototype.maxTextureSize=function(){return this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE)},m.prototype.validateLayer=function(e){var t=e.geometry().maxTileSize(),r=this.maxTextureSize();if(t>r)throw new Error("Layer has level with tile size larger than maximum texture size ("+t+" vs. "+r+")")},m.prototype.createRenderer=function(e){for(var t=this._rendererInstances,r=0;r<t.length;r++)if(t[r]instanceof e)return t[r];var i=new e(this._gl);return t.push(i),i},m.prototype.destroyRenderer=function(e){var t=this._rendererInstances;if(this._renderers.indexOf(e)<0){e.destroy();var r=t.indexOf(e);r>=0&&t.splice(r,1)}},m.prototype.startFrame=function(){var e=this._gl;if(!e)throw new Error("Bad WebGL context - maybe context was lost?");e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.enable(e.DEPTH_TEST),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)},m.prototype.endFrame=function(){},m.prototype.takeSnapshot=function(e){"object"==typeof e&&null!=e||(e={});var t=e.quality;if(void 0===t&&(t=75),"number"!=typeof t||t<0||t>100)throw new Error("WebGLStage: Snapshot quality needs to be a number between 0 and 100");return this.render(),this._domElement.toDataURL("image/jpeg",t/100)},m.type=m.prototype.type="webgl",p.prototype.refresh=function(e,t){var r,i=this._gl,n=this._stage,o=t.timestamp();if(o!==this._timestamp){var a=t.element(),l=t.width(),_=t.height();if(l!==this._width||_!==this._height){var u=n.maxTextureSize();if(l>u)throw new Error("Texture width larger than max size ("+l+" vs. "+u+")");if(_>u)throw new Error("Texture height larger than max size ("+_+" vs. "+u+")");this._texture&&i.deleteTexture(r),r=this._texture=i.createTexture(),i.bindTexture(i.TEXTURE_2D,r),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,a)}else r=this._texture,i.bindTexture(i.TEXTURE_2D,r),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),a instanceof HTMLVideoElement&&h.videoUseTexImage2D?i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,a):i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,a);n._generateMipmaps&&s(l)&&s(_)?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR),i.generateMipmap(i.TEXTURE_2D)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR)),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_2D,null),this._timestamp=o,this._width=l,this._height=_}},p.prototype.destroy=function(){this._texture&&this._gl.deleteTexture(this._texture),_(this)},m.TextureClass=m.prototype.TextureClass=p,module.exports=m;
},{"./Stage":"xml0","../loaders/HtmlImage":"r9QZ","../support/WebGl":"y5Tq","bowser":"JSid","../util/inherits":"W3pH","../util/pixelRatio":"AQTT","../util/ispot":"VDAB","../util/dom":"Dw5L","../util/clearOwnProperties":"lrIP"}],"LPct":[function(require,module,exports) {
"use strict";var e,t=require("../util/dom").prefixProperty;function r(){var e=t("perspective"),r=document.createElement("div"),d=void 0!==r.style[e];if(d&&"WebkitPerspective"===e){var i="__marzipano_test_css3d_support__",o=document.createElement("style");o.textContent="@media(-webkit-transform-3d){#"+i+"{height: 3px;})",document.getElementsByTagName("head")[0].appendChild(o),r.id=i,document.body.appendChild(r),d=r.offsetHeight>0,o.parentNode.removeChild(o),r.parentNode.removeChild(r)}return d}function d(){return void 0!==e?e:e=r()}module.exports=d;
},{"../util/dom":"Dw5L"}],"iNYS":[function(require,module,exports) {
"use strict";var e=require("./Stage"),t=require("../loaders/HtmlImage"),r=require("../support/Css"),o=require("bowser"),i=require("../util/inherits"),s=require("../util/dom").setAbsolute,n=require("../util/dom").setFullSize,a=require("../util/dom").setNullTransformOrigin,p=require("../util/clearOwnProperties"),u={padSize:o.ios?0:3,reverseLevelDepth:o.ios,useNullTransform:o.ios,perspectiveNudge:o.webkit||o.gecko?.001:0};function m(e){this.constructor.super_.call(this,e),this._loader=new t(this),this._domElement=document.createElement("div"),s(this._domElement),n(this._domElement)}function d(e,t,r){var o=document.createElement("canvas");s(o),a(o),this._canvas=o,this._timestamp=null,this.refresh(t,r)}i(m,e),m.prototype.destroy=function(){this.constructor.super_.prototype.destroy.call(this)},m.supported=function(){return r()},m.prototype.domElement=function(){return this._domElement},m.prototype.setSizeForType=function(){},m.prototype.loadImage=function(e,t,r){return this._loader.loadImage(e,t,r)},m.prototype.validateLayer=function(e){},m.prototype.createRenderer=function(e){return new e(this._domElement,u)},m.prototype.destroyRenderer=function(e){e.destroy()},m.prototype.startFrame=function(){},m.prototype.endFrame=function(){},m.prototype.takeSnapshot=function(){throw new Error("CssStage: takeSnapshot not implemented")},m.type=m.prototype.type="css",d.prototype.refresh=function(e,t){var r=t.timestamp();if(r!==this._timestamp){this._timestamp=r;var o,i=this._canvas,s=i.getContext("2d"),n=t.element(),a=e.width(),p=e.height(),m=u.padSize,d=e.padTop()?m:0,l=e.padBottom()?m:0,c=e.padLeft()?m:0,h=e.padRight()?m:0;for(i.width=c+a+h,i.height=d+p+l,s.drawImage(n,c,d,a,p),o=0;o<d;o++)s.drawImage(i,c,d,a,1,c,o,a,1);for(o=0;o<c;o++)s.drawImage(i,c,d,1,p,o,d,1,p);for(o=0;o<l;o++)s.drawImage(i,c,d+p-1,a,1,c,d+p+o,a,1);for(o=0;o<h;o++)s.drawImage(i,c+a-1,d,1,p,c+a+o,d,1,p)}},d.prototype.destroy=function(){p(this)},m.TextureClass=m.prototype.TextureClass=d,module.exports=m;
},{"./Stage":"xml0","../loaders/HtmlImage":"r9QZ","../support/Css":"LPct","bowser":"JSid","../util/inherits":"W3pH","../util/dom":"Dw5L","../util/clearOwnProperties":"lrIP"}],"LgXy":[function(require,module,exports) {
"use strict";var t=require("minimal-event-emitter"),e=require("../util/clearOwnProperties");function i(t,e){this._flashElement=t,this._imageId=e}t(i),i.prototype.destroy=function(){this._flashElement.unloadImage(this._imageId),e(this)},i.prototype.element=function(){return this._imageId},i.prototype.width=function(){return 0},i.prototype.height=function(){return 0},i.prototype.timestamp=function(){return 0},i.prototype.isDynamic=function(){return!1},module.exports=i;
},{"minimal-event-emitter":"lNC2","../util/clearOwnProperties":"lrIP"}],"M0Qm":[function(require,module,exports) {
"use strict";var e=require("../assets/Flash"),a=require("../NetworkError"),r=require("../util/once");function t(e){if("flash"!==e.type)throw new Error("Stage type incompatible with loader");this._stage=e}t.prototype.loadImage=function(t,l,o){var i=this._stage,n=i.flashElement(),s=l&&l.x||0,d=l&&l.y||0,h=l&&l.width||1,u=l&&l.height||1,c=n.loadImage(t,h,u,s,d);function m(r,l){l===c&&(i.removeFlashCallbackListener("imageLoaded",m),r?o(new a("Network error: "+t)):o(null,new e(n,c)))}return o=r(o),i.addFlashCallbackListener("imageLoaded",m),function(){n.cancelImage(c),i.removeFlashCallbackListener("imageLoaded",m),o.apply(null,arguments)}},module.exports=t;
},{"../assets/Flash":"LgXy","../NetworkError":"WkWV","../util/once":"LMqo"}],"I0DC":[function(require,module,exports) {
"use strict";function e(){var e=null,a=navigator.plugins,t=navigator.mimeTypes,n=null;if(a&&a["Shockwave Flash"]&&t&&t["application/x-shockwave-flash"]&&t["application/x-shockwave-flash"].enabledPlugin)n=(n=a["Shockwave Flash"].description).replace(/^.*\s+(\S+\s+\S+$)/,"$1"),(e=[0,0,0])[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),e[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),e[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;else if(window.ActiveXObject)try{var r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");r&&(n=r.GetVariable("$version"))&&(n=n.split(" ")[1].split(","),e=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}catch(s){}return e}function a(){var a=e();return a&&(a[0]>=11||10===a[0]&&a[1]>=1)}var t;function n(){return void 0!==t?t:t=a()}module.exports=n;
},{}],"MKvs":[function(require,module,exports) {
"use strict";function t(t,e){setTimeout(function(){e&&e.length>0?t.apply(null,e):t()},0)}module.exports=t;
},{}],"bGJI":[function(require,module,exports) {
"use strict";var e=require("./Stage"),t=require("../loaders/FlashImage"),a=require("../support/Flash"),r=require("../collections/WorkQueue"),s=require("../util/inherits"),i=require("../util/defer"),n=require("../util/dom").setAbsolute,l=require("../util/dom").setFullSize,o=require("../util/dom").setBlocking,h=require("../util/clearOwnProperties"),c="transparent",u=function(){var e=document.currentScript;if(!e){var t=document.getElementsByTagName("script");e=t.length?t[t.length-1]:null}if(!e)return null;var a=e.src,r=a.lastIndexOf("/");return(a=r>=0?a.slice(0,r+1):"")+"marzipano.swf"}(),d="MarzipanoFlashCallbackMap";function p(){return window[d].__next++}d in window||(window[d]={__next:0});var m=["imageLoaded"],f={padSize:3};function _(e){if(this.constructor.super_.call(this,e),this._wmode=e&&e.wmode||c,this._swfPath=e&&e.swfPath||u,!u)throw new Error("Missing SWF path");this._flashStageId=p(),this._callbacksObj=window[d][this._flashStageId]={},this._stageCallbacksObjVarName=d+"["+this._flashStageId+"]",this._callbackListeners={};for(var a=0;a<m.length;a++)this._callbacksObj[m[a]]=this._callListeners(m[a]);this._loader=new t(this),this._loadImageQueue=new r,this._loadImageQueue.pause(),this._flashReady=!1,this._nextLayerId=0;var s=y(this._swfPath,this._flashStageId,this._stageCallbacksObjVarName);this._domElement=s.root,this._blockingElement=s.blocking,this._flashElement=s.flash,this._checkReadyTimer=setInterval(this._checkReady.bind(this),50)}function y(e,t,a){var r=document.createElement("div");n(r),l(r);var s="marzipano-flash-stage-"+t,i='<object id="'+s+'" name="'+s+'" type="application/x-shockwave-flash" data="'+e+'">',h="";h+='<param name="movie" value="'+e+'" />',h+='<param name="allowscriptaccess" value="always" />',h+='<param name="flashvars" value="callbacksObjName='+a+'" />',i+=h+='<param name="wmode" value="transparent" />',i+="</object>";var c=document.createElement("div");c.innerHTML=i;var u=c.firstChild;n(u),l(u),r.appendChild(u);var d=document.createElement("div");return n(d),l(d),o(d),r.appendChild(d),{root:r,flash:u,blocking:d}}function v(e,t,a){var r=a.element(),s=t.width(),i=t.height(),n=f.padSize,l=t.padTop()?n:0,o=t.padBottom()?n:0,h=t.padLeft()?n:0,c=t.padRight()?n:0,u=e._flashElement.createTexture(r,s,i,l,o,h,c);this._stage=e,this._textureId=u}s(_,e),_.prototype.destroy=function(){window[d][this._flashStageId]=null,null!=this._checkReadyTimer&&clearInterval(this._checkReadyTimer),this.constructor.super_.prototype.destroy.call(this)},_.supported=function(){return a()},_.prototype.domElement=function(){return this._domElement},_.prototype.flashElement=function(){return this._flashElement},_.prototype.setSizeForType=function(){},_.prototype.loadImage=function(e,t,a){var r=this._loader.loadImage.bind(this._loader,e,t);return this._loadImageQueue.push(r,a)},_.prototype.validateLayer=function(e){},_.prototype.addFlashCallbackListener=function(e,t){this._callbackListeners[e]=this._callbackListeners[e]||[],this._callbackListeners[e].push(t)},_.prototype.removeFlashCallbackListener=function(e,t){var a=this._callbackListeners[e]||[],r=a.indexOf(t);r>=0&&a.splice(r,1)},_.prototype._callListeners=function(e){var t=this;return function(){for(var a=t._callbackListeners[e]||[],r=0;r<a.length;r++){var s=a[r];i(s,arguments)}}},_.prototype._checkReady=function(){return!!(this._flashElement&&this._flashElement.isReady&&this._flashElement.isReady())&&(this._flashReady=!0,clearTimeout(this._checkReadyTimer),this._checkReadyTimer=null,this._loadImageQueue.resume(),this.emit("renderInvalid"),!0)},_.prototype.createRenderer=function(e){return new e(this._flashElement,++this._nextLayerId,f)},_.prototype.destroyRenderer=function(e){e.destroy()},_.prototype.startFrame=function(){},_.prototype.endFrame=function(){},_.prototype.takeSnapshot=function(e){"object"==typeof e&&null!=e||(e={});var t=e.quality;if(void 0===t&&(t=75),"number"!=typeof t||t<0||t>100)throw new Error("FlashStage: Snapshot quality needs to be a number between 0 and 100");return this._flashElement.takeSnapshot(t)},_.type=_.prototype.type="flash",v.prototype.refresh=function(e,t){},v.prototype.destroy=function(){this._stage._flashElement.destroyTexture(this._textureId),h(this)},_.TextureClass=_.prototype.TextureClass=v,module.exports=_;
},{"./Stage":"xml0","../loaders/FlashImage":"M0Qm","../support/Flash":"I0DC","../collections/WorkQueue":"fanG","../util/inherits":"W3pH","../util/defer":"MKvs","../util/dom":"Dw5L","../util/clearOwnProperties":"lrIP"}],"XJqx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setMatrixArrayType=e,exports.toRadian=s,exports.equals=n,exports.RANDOM=exports.ARRAY_TYPE=exports.EPSILON=void 0;var t=1e-6;exports.EPSILON=t;var r="undefined"!=typeof Float32Array?Float32Array:Array;exports.ARRAY_TYPE=r;var a=Math.random;function e(t){exports.ARRAY_TYPE=r=t}exports.RANDOM=a;var o=Math.PI/180;function s(t){return t*o}function n(r,a){return Math.abs(r-a)<=t*Math.max(1,Math.abs(r),Math.abs(a))}Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)});
},{}],"eN7R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.copy=a,exports.identity=u,exports.fromValues=s,exports.set=i,exports.transpose=c,exports.invert=p,exports.adjoint=f,exports.determinant=x,exports.multiply=l,exports.rotate=M,exports.scale=h,exports.fromRotation=b,exports.fromScaling=v,exports.str=y,exports.frob=d,exports.LDU=m,exports.add=P,exports.subtract=O,exports.exactEquals=A,exports.equals=j,exports.multiplyScalar=E,exports.multiplyScalarAndAdd=R,exports.sub=exports.mul=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r}function o(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function a(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function s(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function i(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function c(t,r){if(t===r){var e=r[1];t[1]=r[2],t[2]=e}else t[0]=r[0],t[1]=r[2],t[2]=r[1],t[3]=r[3];return t}function p(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],u=e*a-o*n;return u?(u=1/u,t[0]=a*u,t[1]=-n*u,t[2]=-o*u,t[3]=e*u,t):null}function f(t,r){var e=r[0];return t[0]=r[3],t[1]=-r[1],t[2]=-r[2],t[3]=e,t}function x(t){return t[0]*t[3]-t[2]*t[1]}function l(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],c=e[2],p=e[3];return t[0]=n*s+a*i,t[1]=o*s+u*i,t[2]=n*c+a*p,t[3]=o*c+u*p,t}function M(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=Math.sin(e),i=Math.cos(e);return t[0]=n*i+a*s,t[1]=o*i+u*s,t[2]=n*-s+a*i,t[3]=o*-s+u*i,t}function h(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1];return t[0]=n*s,t[1]=o*s,t[2]=a*i,t[3]=u*i,t}function b(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t}function v(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t}function y(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function d(t){return Math.hypot(t[0],t[1],t[2],t[3])}function m(t,r,e,n){return t[2]=n[2]/n[0],e[0]=n[0],e[1]=n[1],e[3]=n[3]-t[2]*e[1],[t,r,e]}function P(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function O(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function A(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function j(r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],c=e[2],p=e[3];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(u-p)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))}function E(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function R(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}var Y=l;exports.mul=Y;var _=O;exports.sub=_;
},{"./common.js":"XJqx"}],"M21d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=a,exports.copy=o,exports.identity=u,exports.fromValues=s,exports.set=i,exports.invert=c,exports.determinant=p,exports.multiply=f,exports.rotate=x,exports.scale=l,exports.translate=M,exports.fromRotation=h,exports.fromScaling=b,exports.fromTranslation=v,exports.str=m,exports.frob=y,exports.add=d,exports.subtract=P,exports.multiplyScalar=O,exports.multiplyScalarAndAdd=A,exports.exactEquals=E,exports.equals=R,exports.sub=exports.mul=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=a?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(6);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[4]=0,r[5]=0),r[0]=1,r[3]=1,r}function a(r){var e=new t.ARRAY_TYPE(6);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e}function o(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s(r,e,n,a,o,u){var s=new t.ARRAY_TYPE(6);return s[0]=r,s[1]=e,s[2]=n,s[3]=a,s[4]=o,s[5]=u,s}function i(t,r,e,n,a,o,u){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t[4]=o,t[5]=u,t}function c(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],u=r[4],s=r[5],i=e*o-n*a;return i?(i=1/i,t[0]=o*i,t[1]=-n*i,t[2]=-a*i,t[3]=e*i,t[4]=(a*s-o*u)*i,t[5]=(n*u-e*s)*i,t):null}function p(t){return t[0]*t[3]-t[1]*t[2]}function f(t,r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=e[0],p=e[1],f=e[2],x=e[3],l=e[4],M=e[5];return t[0]=n*c+o*p,t[1]=a*c+u*p,t[2]=n*f+o*x,t[3]=a*f+u*x,t[4]=n*l+o*M+s,t[5]=a*l+u*M+i,t}function x(t,r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=Math.sin(e),p=Math.cos(e);return t[0]=n*p+o*c,t[1]=a*p+u*c,t[2]=n*-c+o*p,t[3]=a*-c+u*p,t[4]=s,t[5]=i,t}function l(t,r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=e[0],p=e[1];return t[0]=n*c,t[1]=a*c,t[2]=o*p,t[3]=u*p,t[4]=s,t[5]=i,t}function M(t,r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=e[0],p=e[1];return t[0]=n,t[1]=a,t[2]=o,t[3]=u,t[4]=n*c+o*p+s,t[5]=a*c+u*p+i,t}function h(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t[4]=0,t[5]=0,t}function b(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t[4]=0,t[5]=0,t}function v(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=r[0],t[5]=r[1],t}function m(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function y(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function d(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t}function P(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t}function O(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t}function A(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t[4]=r[4]+e[4]*n,t[5]=r[5]+e[5]*n,t}function E(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]}function R(r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=e[0],p=e[1],f=e[2],x=e[3],l=e[4],M=e[5];return Math.abs(n-c)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-p)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-f)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(u-x)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(s-l)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-M)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))}var S=f;exports.mul=S;var j=P;exports.sub=j;
},{"./common.js":"XJqx"}],"vtQf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=a,exports.fromMat4=e,exports.clone=o,exports.copy=u,exports.fromValues=s,exports.set=i,exports.identity=c,exports.transpose=f,exports.invert=p,exports.adjoint=M,exports.determinant=x,exports.multiply=h,exports.translate=b,exports.rotate=l,exports.scale=m,exports.fromTranslation=v,exports.fromRotation=P,exports.fromScaling=O,exports.fromMat2d=d,exports.fromQuat=y,exports.normalFromMat4=E,exports.projection=S,exports.str=A,exports.frob=j,exports.add=I,exports.subtract=L,exports.multiplyScalar=N,exports.multiplyScalarAndAdd=R,exports.exactEquals=Y,exports.equals=_,exports.sub=exports.mul=void 0;var t=n(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r();if(n&&n.has(t))return n.get(t);var a={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=e?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=t[o]}return a.default=t,n&&n.set(t,a),a}function a(){var r=new t.ARRAY_TYPE(9);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function e(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function o(r){var n=new t.ARRAY_TYPE(9);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function s(r,n,a,e,o,u,s,i,c){var f=new t.ARRAY_TYPE(9);return f[0]=r,f[1]=n,f[2]=a,f[3]=e,f[4]=o,f[5]=u,f[6]=s,f[7]=i,f[8]=c,f}function i(t,r,n,a,e,o,u,s,i,c){return t[0]=r,t[1]=n,t[2]=a,t[3]=e,t[4]=o,t[5]=u,t[6]=s,t[7]=i,t[8]=c,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function f(t,r){if(t===r){var n=r[1],a=r[2],e=r[5];t[1]=r[3],t[2]=r[6],t[3]=n,t[5]=r[7],t[6]=a,t[7]=e}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function p(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8],p=f*u-s*c,M=-f*o+s*i,x=c*o-u*i,h=n*p+a*M+e*x;return h?(h=1/h,t[0]=p*h,t[1]=(-f*a+e*c)*h,t[2]=(s*a-e*u)*h,t[3]=M*h,t[4]=(f*n-e*i)*h,t[5]=(-s*n+e*o)*h,t[6]=x*h,t[7]=(-c*n+a*i)*h,t[8]=(u*n-a*o)*h,t):null}function M(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8];return t[0]=u*f-s*c,t[1]=e*c-a*f,t[2]=a*s-e*u,t[3]=s*i-o*f,t[4]=n*f-e*i,t[5]=e*o-n*s,t[6]=o*c-u*i,t[7]=a*i-n*c,t[8]=n*u-a*o,t}function x(t){var r=t[0],n=t[1],a=t[2],e=t[3],o=t[4],u=t[5],s=t[6],i=t[7],c=t[8];return r*(c*o-u*i)+n*(-c*e+u*s)+a*(i*e-o*s)}function h(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1],h=n[2],b=n[3],l=n[4],m=n[5],v=n[6],P=n[7],O=n[8];return t[0]=M*a+x*u+h*c,t[1]=M*e+x*s+h*f,t[2]=M*o+x*i+h*p,t[3]=b*a+l*u+m*c,t[4]=b*e+l*s+m*f,t[5]=b*o+l*i+m*p,t[6]=v*a+P*u+O*c,t[7]=v*e+P*s+O*f,t[8]=v*o+P*i+O*p,t}function b(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1];return t[0]=a,t[1]=e,t[2]=o,t[3]=u,t[4]=s,t[5]=i,t[6]=M*a+x*u+c,t[7]=M*e+x*s+f,t[8]=M*o+x*i+p,t}function l(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=Math.sin(n),x=Math.cos(n);return t[0]=x*a+M*u,t[1]=x*e+M*s,t[2]=x*o+M*i,t[3]=x*u-M*a,t[4]=x*s-M*e,t[5]=x*i-M*o,t[6]=c,t[7]=f,t[8]=p,t}function m(t,r,n){var a=n[0],e=n[1];return t[0]=a*r[0],t[1]=a*r[1],t[2]=a*r[2],t[3]=e*r[3],t[4]=e*r[4],t[5]=e*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function v(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function P(t,r){var n=Math.sin(r),a=Math.cos(r);return t[0]=a,t[1]=n,t[2]=0,t[3]=-n,t[4]=a,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function O(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function d(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t}function y(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=n+n,s=a+a,i=e+e,c=n*u,f=a*u,p=a*s,M=e*u,x=e*s,h=e*i,b=o*u,l=o*s,m=o*i;return t[0]=1-p-h,t[3]=f-m,t[6]=M+l,t[1]=f+m,t[4]=1-c-h,t[7]=x-b,t[2]=M-l,t[5]=x+b,t[8]=1-c-p,t}function E(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8],p=r[9],M=r[10],x=r[11],h=r[12],b=r[13],l=r[14],m=r[15],v=n*s-a*u,P=n*i-e*u,O=n*c-o*u,d=a*i-e*s,y=a*c-o*s,E=e*c-o*i,S=f*b-p*h,A=f*l-M*h,j=f*m-x*h,I=p*l-M*b,L=p*m-x*b,N=M*m-x*l,R=v*N-P*L+O*I+d*j-y*A+E*S;return R?(R=1/R,t[0]=(s*N-i*L+c*I)*R,t[1]=(i*j-u*N-c*A)*R,t[2]=(u*L-s*j+c*S)*R,t[3]=(e*L-a*N-o*I)*R,t[4]=(n*N-e*j+o*A)*R,t[5]=(a*j-n*L-o*S)*R,t[6]=(b*E-l*y+m*d)*R,t[7]=(l*O-h*E-m*P)*R,t[8]=(h*y-b*O+m*v)*R,t):null}function S(t,r,n){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function A(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function j(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function I(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t[4]=r[4]+n[4],t[5]=r[5]+n[5],t[6]=r[6]+n[6],t[7]=r[7]+n[7],t[8]=r[8]+n[8],t}function L(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t[4]=r[4]-n[4],t[5]=r[5]-n[5],t[6]=r[6]-n[6],t[7]=r[7]-n[7],t[8]=r[8]-n[8],t}function N(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=r[7]*n,t[8]=r[8]*n,t}function R(t,r,n,a){return t[0]=r[0]+n[0]*a,t[1]=r[1]+n[1]*a,t[2]=r[2]+n[2]*a,t[3]=r[3]+n[3]*a,t[4]=r[4]+n[4]*a,t[5]=r[5]+n[5]*a,t[6]=r[6]+n[6]*a,t[7]=r[7]+n[7]*a,t[8]=r[8]+n[8]*a,t}function Y(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]}function _(r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1],h=n[2],b=n[3],l=n[4],m=n[5],v=n[6],P=n[7],O=n[8];return Math.abs(a-M)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(e-x)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(o-h)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(u-b)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(s-l)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-m)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(c-v)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(f-P)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(p-O)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(O))}var w=h;exports.mul=w;var g=L;exports.sub=g;
},{"./common.js":"XJqx"}],"w3aR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=e,exports.copy=o,exports.fromValues=s,exports.set=u,exports.identity=h,exports.transpose=M,exports.invert=i,exports.adjoint=c,exports.determinant=p,exports.multiply=f,exports.translate=x,exports.scale=b,exports.rotate=l,exports.rotateX=v,exports.rotateY=m,exports.rotateZ=P,exports.fromTranslation=O,exports.fromScaling=E,exports.fromRotation=S,exports.fromXRotation=y,exports.fromYRotation=I,exports.fromZRotation=L,exports.fromRotationTranslation=N,exports.fromQuat2=R,exports.getTranslation=d,exports.getScaling=g,exports.getRotation=A,exports.fromRotationTranslationScale=Y,exports.fromRotationTranslationScaleOrigin=T,exports.fromQuat=w,exports.frustum=_,exports.perspective=j,exports.perspectiveFromFieldOfView=q,exports.ortho=D,exports.lookAt=k,exports.targetTo=F,exports.str=Q,exports.frob=V,exports.add=W,exports.subtract=X,exports.multiplyScalar=Z,exports.multiplyScalarAndAdd=z,exports.exactEquals=B,exports.equals=C,exports.sub=exports.mul=void 0;var t=r(require("./common.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=e?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}function n(){var a=new t.ARRAY_TYPE(16);return t.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a}function e(a){var r=new t.ARRAY_TYPE(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r}function o(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function s(a,r,n,e,o,s,u,h,M,i,c,p,f,x,b,l){var v=new t.ARRAY_TYPE(16);return v[0]=a,v[1]=r,v[2]=n,v[3]=e,v[4]=o,v[5]=s,v[6]=u,v[7]=h,v[8]=M,v[9]=i,v[10]=c,v[11]=p,v[12]=f,v[13]=x,v[14]=b,v[15]=l,v}function u(t,a,r,n,e,o,s,u,h,M,i,c,p,f,x,b,l){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t[4]=o,t[5]=s,t[6]=u,t[7]=h,t[8]=M,t[9]=i,t[10]=c,t[11]=p,t[12]=f,t[13]=x,t[14]=b,t[15]=l,t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,a){if(t===a){var r=a[1],n=a[2],e=a[3],o=a[6],s=a[7],u=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=o,t[11]=a[14],t[12]=e,t[13]=s,t[14]=u}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t}function i(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=a[4],u=a[5],h=a[6],M=a[7],i=a[8],c=a[9],p=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15],m=r*u-n*s,P=r*h-e*s,O=r*M-o*s,E=n*h-e*u,S=n*M-o*u,y=e*M-o*h,I=i*b-c*x,L=i*l-p*x,N=i*v-f*x,R=c*l-p*b,d=c*v-f*b,g=p*v-f*l,A=m*g-P*d+O*R+E*N-S*L+y*I;return A?(A=1/A,t[0]=(u*g-h*d+M*R)*A,t[1]=(e*d-n*g-o*R)*A,t[2]=(b*y-l*S+v*E)*A,t[3]=(p*S-c*y-f*E)*A,t[4]=(h*N-s*g-M*L)*A,t[5]=(r*g-e*N+o*L)*A,t[6]=(l*O-x*y-v*P)*A,t[7]=(i*y-p*O+f*P)*A,t[8]=(s*d-u*N+M*I)*A,t[9]=(n*N-r*d-o*I)*A,t[10]=(x*S-b*O+v*m)*A,t[11]=(c*O-i*S-f*m)*A,t[12]=(u*L-s*R-h*I)*A,t[13]=(r*R-n*L+e*I)*A,t[14]=(b*P-x*E-l*m)*A,t[15]=(i*E-c*P+p*m)*A,t):null}function c(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=a[4],u=a[5],h=a[6],M=a[7],i=a[8],c=a[9],p=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15];return t[0]=u*(p*v-f*l)-c*(h*v-M*l)+b*(h*f-M*p),t[1]=-(n*(p*v-f*l)-c*(e*v-o*l)+b*(e*f-o*p)),t[2]=n*(h*v-M*l)-u*(e*v-o*l)+b*(e*M-o*h),t[3]=-(n*(h*f-M*p)-u*(e*f-o*p)+c*(e*M-o*h)),t[4]=-(s*(p*v-f*l)-i*(h*v-M*l)+x*(h*f-M*p)),t[5]=r*(p*v-f*l)-i*(e*v-o*l)+x*(e*f-o*p),t[6]=-(r*(h*v-M*l)-s*(e*v-o*l)+x*(e*M-o*h)),t[7]=r*(h*f-M*p)-s*(e*f-o*p)+i*(e*M-o*h),t[8]=s*(c*v-f*b)-i*(u*v-M*b)+x*(u*f-M*c),t[9]=-(r*(c*v-f*b)-i*(n*v-o*b)+x*(n*f-o*c)),t[10]=r*(u*v-M*b)-s*(n*v-o*b)+x*(n*M-o*u),t[11]=-(r*(u*f-M*c)-s*(n*f-o*c)+i*(n*M-o*u)),t[12]=-(s*(c*l-p*b)-i*(u*l-h*b)+x*(u*p-h*c)),t[13]=r*(c*l-p*b)-i*(n*l-e*b)+x*(n*p-e*c),t[14]=-(r*(u*l-h*b)-s*(n*l-e*b)+x*(n*h-e*u)),t[15]=r*(u*p-h*c)-s*(n*p-e*c)+i*(n*h-e*u),t}function p(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],s=t[5],u=t[6],h=t[7],M=t[8],i=t[9],c=t[10],p=t[11],f=t[12],x=t[13],b=t[14],l=t[15];return(a*s-r*o)*(c*l-p*b)-(a*u-n*o)*(i*l-p*x)+(a*h-e*o)*(i*b-c*x)+(r*u-n*s)*(M*l-p*f)-(r*h-e*s)*(M*b-c*f)+(n*h-e*u)*(M*x-i*f)}function f(t,a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3];return t[0]=P*n+O*u+E*c+S*b,t[1]=P*e+O*h+E*p+S*l,t[2]=P*o+O*M+E*f+S*v,t[3]=P*s+O*i+E*x+S*m,P=r[4],O=r[5],E=r[6],S=r[7],t[4]=P*n+O*u+E*c+S*b,t[5]=P*e+O*h+E*p+S*l,t[6]=P*o+O*M+E*f+S*v,t[7]=P*s+O*i+E*x+S*m,P=r[8],O=r[9],E=r[10],S=r[11],t[8]=P*n+O*u+E*c+S*b,t[9]=P*e+O*h+E*p+S*l,t[10]=P*o+O*M+E*f+S*v,t[11]=P*s+O*i+E*x+S*m,P=r[12],O=r[13],E=r[14],S=r[15],t[12]=P*n+O*u+E*c+S*b,t[13]=P*e+O*h+E*p+S*l,t[14]=P*o+O*M+E*f+S*v,t[15]=P*s+O*i+E*x+S*m,t}function x(t,a,r){var n,e,o,s,u,h,M,i,c,p,f,x,b=r[0],l=r[1],v=r[2];return a===t?(t[12]=a[0]*b+a[4]*l+a[8]*v+a[12],t[13]=a[1]*b+a[5]*l+a[9]*v+a[13],t[14]=a[2]*b+a[6]*l+a[10]*v+a[14],t[15]=a[3]*b+a[7]*l+a[11]*v+a[15]):(n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],t[0]=n,t[1]=e,t[2]=o,t[3]=s,t[4]=u,t[5]=h,t[6]=M,t[7]=i,t[8]=c,t[9]=p,t[10]=f,t[11]=x,t[12]=n*b+u*l+c*v+a[12],t[13]=e*b+h*l+p*v+a[13],t[14]=o*b+M*l+f*v+a[14],t[15]=s*b+i*l+x*v+a[15]),t}function b(t,a,r){var n=r[0],e=r[1],o=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function l(a,r,n,e){var o,s,u,h,M,i,c,p,f,x,b,l,v,m,P,O,E,S,y,I,L,N,R,d,g=e[0],A=e[1],Y=e[2],T=Math.hypot(g,A,Y);return T<t.EPSILON?null:(g*=T=1/T,A*=T,Y*=T,o=Math.sin(n),u=1-(s=Math.cos(n)),h=r[0],M=r[1],i=r[2],c=r[3],p=r[4],f=r[5],x=r[6],b=r[7],l=r[8],v=r[9],m=r[10],P=r[11],O=g*g*u+s,E=A*g*u+Y*o,S=Y*g*u-A*o,y=g*A*u-Y*o,I=A*A*u+s,L=Y*A*u+g*o,N=g*Y*u+A*o,R=A*Y*u-g*o,d=Y*Y*u+s,a[0]=h*O+p*E+l*S,a[1]=M*O+f*E+v*S,a[2]=i*O+x*E+m*S,a[3]=c*O+b*E+P*S,a[4]=h*y+p*I+l*L,a[5]=M*y+f*I+v*L,a[6]=i*y+x*I+m*L,a[7]=c*y+b*I+P*L,a[8]=h*N+p*R+l*d,a[9]=M*N+f*R+v*d,a[10]=i*N+x*R+m*d,a[11]=c*N+b*R+P*d,r!==a&&(a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a)}function v(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[4],s=a[5],u=a[6],h=a[7],M=a[8],i=a[9],c=a[10],p=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*e+M*n,t[5]=s*e+i*n,t[6]=u*e+c*n,t[7]=h*e+p*n,t[8]=M*e-o*n,t[9]=i*e-s*n,t[10]=c*e-u*n,t[11]=p*e-h*n,t}function m(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],s=a[1],u=a[2],h=a[3],M=a[8],i=a[9],c=a[10],p=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e-M*n,t[1]=s*e-i*n,t[2]=u*e-c*n,t[3]=h*e-p*n,t[8]=o*n+M*e,t[9]=s*n+i*e,t[10]=u*n+c*e,t[11]=h*n+p*e,t}function P(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],s=a[1],u=a[2],h=a[3],M=a[4],i=a[5],c=a[6],p=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e+M*n,t[1]=s*e+i*n,t[2]=u*e+c*n,t[3]=h*e+p*n,t[4]=M*e-o*n,t[5]=i*e-s*n,t[6]=c*e-u*n,t[7]=p*e-h*n,t}function O(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function E(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(a,r,n){var e,o,s,u=n[0],h=n[1],M=n[2],i=Math.hypot(u,h,M);return i<t.EPSILON?null:(u*=i=1/i,h*=i,M*=i,e=Math.sin(r),s=1-(o=Math.cos(r)),a[0]=u*u*s+o,a[1]=h*u*s+M*e,a[2]=M*u*s-h*e,a[3]=0,a[4]=u*h*s-M*e,a[5]=h*h*s+o,a[6]=M*h*s+u*e,a[7]=0,a[8]=u*M*s+h*e,a[9]=h*M*s-u*e,a[10]=M*M*s+o,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}function y(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=n+n,h=e+e,M=o+o,i=n*u,c=n*h,p=n*M,f=e*h,x=e*M,b=o*M,l=s*u,v=s*h,m=s*M;return t[0]=1-(f+b),t[1]=c+m,t[2]=p-v,t[3]=0,t[4]=c-m,t[5]=1-(i+b),t[6]=x+l,t[7]=0,t[8]=p+v,t[9]=x-l,t[10]=1-(i+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function R(a,r){var n=new t.ARRAY_TYPE(3),e=-r[0],o=-r[1],s=-r[2],u=r[3],h=r[4],M=r[5],i=r[6],c=r[7],p=e*e+o*o+s*s+u*u;return p>0?(n[0]=2*(h*u+c*e+M*s-i*o)/p,n[1]=2*(M*u+c*o+i*e-h*s)/p,n[2]=2*(i*u+c*s+h*o-M*e)/p):(n[0]=2*(h*u+c*e+M*s-i*o),n[1]=2*(M*u+c*o+i*e-h*s),n[2]=2*(i*u+c*s+h*o-M*e)),N(a,r,n),a}function d(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t}function g(t,a){var r=a[0],n=a[1],e=a[2],o=a[4],s=a[5],u=a[6],h=a[8],M=a[9],i=a[10];return t[0]=Math.hypot(r,n,e),t[1]=Math.hypot(o,s,u),t[2]=Math.hypot(h,M,i),t}function A(a,r){var n=new t.ARRAY_TYPE(3);g(n,r);var e=1/n[0],o=1/n[1],s=1/n[2],u=r[0]*e,h=r[1]*o,M=r[2]*s,i=r[4]*e,c=r[5]*o,p=r[6]*s,f=r[8]*e,x=r[9]*o,b=r[10]*s,l=u+c+b,v=0;return l>0?(v=2*Math.sqrt(l+1),a[3]=.25*v,a[0]=(p-x)/v,a[1]=(f-M)/v,a[2]=(h-i)/v):u>c&&u>b?(v=2*Math.sqrt(1+u-c-b),a[3]=(p-x)/v,a[0]=.25*v,a[1]=(h+i)/v,a[2]=(f+M)/v):c>b?(v=2*Math.sqrt(1+c-u-b),a[3]=(f-M)/v,a[0]=(h+i)/v,a[1]=.25*v,a[2]=(p+x)/v):(v=2*Math.sqrt(1+b-u-c),a[3]=(h-i)/v,a[0]=(f+M)/v,a[1]=(p+x)/v,a[2]=.25*v),a}function Y(t,a,r,n){var e=a[0],o=a[1],s=a[2],u=a[3],h=e+e,M=o+o,i=s+s,c=e*h,p=e*M,f=e*i,x=o*M,b=o*i,l=s*i,v=u*h,m=u*M,P=u*i,O=n[0],E=n[1],S=n[2];return t[0]=(1-(x+l))*O,t[1]=(p+P)*O,t[2]=(f-m)*O,t[3]=0,t[4]=(p-P)*E,t[5]=(1-(c+l))*E,t[6]=(b+v)*E,t[7]=0,t[8]=(f+m)*S,t[9]=(b-v)*S,t[10]=(1-(c+x))*S,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function T(t,a,r,n,e){var o=a[0],s=a[1],u=a[2],h=a[3],M=o+o,i=s+s,c=u+u,p=o*M,f=o*i,x=o*c,b=s*i,l=s*c,v=u*c,m=h*M,P=h*i,O=h*c,E=n[0],S=n[1],y=n[2],I=e[0],L=e[1],N=e[2],R=(1-(b+v))*E,d=(f+O)*E,g=(x-P)*E,A=(f-O)*S,Y=(1-(p+v))*S,T=(l+m)*S,w=(x+P)*y,_=(l-m)*y,j=(1-(p+b))*y;return t[0]=R,t[1]=d,t[2]=g,t[3]=0,t[4]=A,t[5]=Y,t[6]=T,t[7]=0,t[8]=w,t[9]=_,t[10]=j,t[11]=0,t[12]=r[0]+I-(R*I+A*L+w*N),t[13]=r[1]+L-(d*I+Y*L+_*N),t[14]=r[2]+N-(g*I+T*L+j*N),t[15]=1,t}function w(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=r+r,u=n+n,h=e+e,M=r*s,i=n*s,c=n*u,p=e*s,f=e*u,x=e*h,b=o*s,l=o*u,v=o*h;return t[0]=1-c-x,t[1]=i+v,t[2]=p-l,t[3]=0,t[4]=i-v,t[5]=1-M-x,t[6]=f+b,t[7]=0,t[8]=p+l,t[9]=f-b,t[10]=1-M-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,a,r,n,e,o,s){var u=1/(r-a),h=1/(e-n),M=1/(o-s);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*h,t[6]=0,t[7]=0,t[8]=(r+a)*u,t[9]=(e+n)*h,t[10]=(s+o)*M,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*M,t[15]=0,t}function j(t,a,r,n,e){var o,s=1/Math.tan(a/2);return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=e&&e!==1/0?(o=1/(n-e),t[10]=(e+n)*o,t[14]=2*e*n*o):(t[10]=-1,t[14]=-2*n),t}function q(t,a,r,n){var e=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),s=Math.tan(a.leftDegrees*Math.PI/180),u=Math.tan(a.rightDegrees*Math.PI/180),h=2/(s+u),M=2/(e+o);return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=M,t[6]=0,t[7]=0,t[8]=-(s-u)*h*.5,t[9]=(e-o)*M*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function D(t,a,r,n,e,o,s){var u=1/(a-r),h=1/(n-e),M=1/(o-s);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*M,t[11]=0,t[12]=(a+r)*u,t[13]=(e+n)*h,t[14]=(s+o)*M,t[15]=1,t}function k(a,r,n,e){var o,s,u,M,i,c,p,f,x,b,l=r[0],v=r[1],m=r[2],P=e[0],O=e[1],E=e[2],S=n[0],y=n[1],I=n[2];return Math.abs(l-S)<t.EPSILON&&Math.abs(v-y)<t.EPSILON&&Math.abs(m-I)<t.EPSILON?h(a):(p=l-S,f=v-y,x=m-I,o=O*(x*=b=1/Math.hypot(p,f,x))-E*(f*=b),s=E*(p*=b)-P*x,u=P*f-O*p,(b=Math.hypot(o,s,u))?(o*=b=1/b,s*=b,u*=b):(o=0,s=0,u=0),M=f*u-x*s,i=x*o-p*u,c=p*s-f*o,(b=Math.hypot(M,i,c))?(M*=b=1/b,i*=b,c*=b):(M=0,i=0,c=0),a[0]=o,a[1]=M,a[2]=p,a[3]=0,a[4]=s,a[5]=i,a[6]=f,a[7]=0,a[8]=u,a[9]=c,a[10]=x,a[11]=0,a[12]=-(o*l+s*v+u*m),a[13]=-(M*l+i*v+c*m),a[14]=-(p*l+f*v+x*m),a[15]=1,a)}function F(t,a,r,n){var e=a[0],o=a[1],s=a[2],u=n[0],h=n[1],M=n[2],i=e-r[0],c=o-r[1],p=s-r[2],f=i*i+c*c+p*p;f>0&&(i*=f=1/Math.sqrt(f),c*=f,p*=f);var x=h*p-M*c,b=M*i-u*p,l=u*c-h*i;return(f=x*x+b*b+l*l)>0&&(x*=f=1/Math.sqrt(f),b*=f,l*=f),t[0]=x,t[1]=b,t[2]=l,t[3]=0,t[4]=c*l-p*b,t[5]=p*x-i*l,t[6]=i*b-c*x,t[7]=0,t[8]=i,t[9]=c,t[10]=p,t[11]=0,t[12]=e,t[13]=o,t[14]=s,t[15]=1,t}function Q(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function V(t){return Math.hypot(t[0],t[1],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function W(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t}function X(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t}function Z(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t}function z(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t[9]=a[9]+r[9]*n,t[10]=a[10]+r[10]*n,t[11]=a[11]+r[11]*n,t[12]=a[12]+r[12]*n,t[13]=a[13]+r[13]*n,t[14]=a[14]+r[14]*n,t[15]=a[15]+r[15]*n,t}function B(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]}function C(a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3],y=r[4],I=r[5],L=r[6],N=r[7],R=r[8],d=r[9],g=r[10],A=r[11],Y=r[12],T=r[13],w=r[14],_=r[15];return Math.abs(n-P)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(e-O)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(O))&&Math.abs(o-E)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-S)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-y)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(h-I)<=t.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(M-L)<=t.EPSILON*Math.max(1,Math.abs(M),Math.abs(L))&&Math.abs(i-N)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(N))&&Math.abs(c-R)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(p-d)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(d))&&Math.abs(f-g)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(x-A)<=t.EPSILON*Math.max(1,Math.abs(x),Math.abs(A))&&Math.abs(b-Y)<=t.EPSILON*Math.max(1,Math.abs(b),Math.abs(Y))&&Math.abs(l-T)<=t.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(v-w)<=t.EPSILON*Math.max(1,Math.abs(v),Math.abs(w))&&Math.abs(m-_)<=t.EPSILON*Math.max(1,Math.abs(m),Math.abs(_))}var G=f;exports.mul=G;var H=X;exports.sub=H;
},{"./common.js":"XJqx"}],"AWBd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.length=a,exports.fromValues=s,exports.copy=u,exports.set=i,exports.add=c,exports.subtract=p,exports.multiply=f,exports.divide=x,exports.ceil=h,exports.floor=M,exports.min=v,exports.max=l,exports.round=d,exports.scale=m,exports.scaleAndAdd=b,exports.distance=y,exports.squaredDistance=P,exports.squaredLength=O,exports.negate=A,exports.inverse=q,exports.normalize=g,exports.dot=E,exports.cross=R,exports.lerp=Y,exports.hermite=j,exports.bezier=_,exports.random=w,exports.transformMat4=D,exports.transformMat3=L,exports.transformQuat=I,exports.rotateX=N,exports.rotateY=T,exports.rotateZ=z,exports.angle=S,exports.zero=k,exports.str=W,exports.exactEquals=F,exports.equals=Q,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(3);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function o(r){var e=new t.ARRAY_TYPE(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function a(t){var r=t[0],e=t[1],n=t[2];return Math.hypot(r,e,n)}function s(r,e,n){var o=new t.ARRAY_TYPE(3);return o[0]=r,o[1]=e,o[2]=n,o}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function i(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t}function c(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t}function p(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function f(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function x(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}function h(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function M(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function v(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t}function l(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t}function d(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function m(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t}function b(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t}function y(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return Math.hypot(e,n,o)}function P(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return e*e+n*n+o*o}function O(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function A(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function q(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function g(t,r){var e=r[0],n=r[1],o=r[2],a=e*e+n*n+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function R(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return t[0]=o*i-a*u,t[1]=a*s-n*i,t[2]=n*u-o*s,t}function Y(t,r,e,n){var o=r[0],a=r[1],s=r[2];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=s+n*(e[2]-s),t}function j(t,r,e,n,o,a){var s=a*a,u=s*(2*a-3)+1,i=s*(a-2)+a,c=s*(a-1),p=s*(3-2*a);return t[0]=r[0]*u+e[0]*i+n[0]*c+o[0]*p,t[1]=r[1]*u+e[1]*i+n[1]*c+o[1]*p,t[2]=r[2]*u+e[2]*i+n[2]*c+o[2]*p,t}function _(t,r,e,n,o,a){var s=1-a,u=s*s,i=a*a,c=u*s,p=3*a*u,f=3*i*s,x=i*a;return t[0]=r[0]*c+e[0]*p+n[0]*f+o[0]*x,t[1]=r[1]*c+e[1]*p+n[1]*f+o[1]*x,t[2]=r[2]*c+e[2]*p+n[2]*f+o[2]*x,t}function w(r,e){e=e||1;var n=2*t.RANDOM()*Math.PI,o=2*t.RANDOM()-1,a=Math.sqrt(1-o*o)*e;return r[0]=Math.cos(n)*a,r[1]=Math.sin(n)*a,r[2]=o*e,r}function D(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[3]*n+e[7]*o+e[11]*a+e[15];return s=s||1,t[0]=(e[0]*n+e[4]*o+e[8]*a+e[12])/s,t[1]=(e[1]*n+e[5]*o+e[9]*a+e[13])/s,t[2]=(e[2]*n+e[6]*o+e[10]*a+e[14])/s,t}function L(t,r,e){var n=r[0],o=r[1],a=r[2];return t[0]=n*e[0]+o*e[3]+a*e[6],t[1]=n*e[1]+o*e[4]+a*e[7],t[2]=n*e[2]+o*e[5]+a*e[8],t}function I(t,r,e){var n=e[0],o=e[1],a=e[2],s=e[3],u=r[0],i=r[1],c=r[2],p=o*c-a*i,f=a*u-n*c,x=n*i-o*u,h=o*x-a*f,M=a*p-n*x,v=n*f-o*p,l=2*s;return p*=l,f*=l,x*=l,h*=2,M*=2,v*=2,t[0]=u+p+h,t[1]=i+f+M,t[2]=c+x+v,t}function N(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0],a[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),a[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function T(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),a[1]=o[1],a[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function z(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),a[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),a[2]=o[2],t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function S(t,r){var e=s(t[0],t[1],t[2]),n=s(r[0],r[1],r[2]);g(e,e),g(n,n);var o=E(e,n);return o>1?0:o<-1?Math.PI:Math.acos(o)}function k(t){return t[0]=0,t[1]=0,t[2]=0,t}function W(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function F(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function Q(r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-i)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))}var V=p;exports.sub=V;var X=f;exports.mul=X;var Z=x;exports.div=Z;var B=y;exports.dist=B;var C=P;exports.sqrDist=C;var G=a;exports.len=G;var H=O;exports.sqrLen=H;var J=function(){var t=n();return function(r,e,n,o,a,s){var u,i;for(e||(e=3),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,u=n;u<i;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],a(t,t,s),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2];return r}}();exports.forEach=J;
},{"./common.js":"XJqx"}],"zWbG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.fromValues=a,exports.copy=u,exports.set=s,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=f,exports.ceil=x,exports.floor=h,exports.min=M,exports.max=l,exports.round=v,exports.scale=d,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=O,exports.length=y,exports.squaredLength=A,exports.negate=P,exports.inverse=R,exports.normalize=q,exports.dot=E,exports.cross=g,exports.lerp=w,exports.random=D,exports.transformMat4=j,exports.transformQuat=N,exports.zero=Y,exports.str=_,exports.exactEquals=L,exports.equals=I,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function o(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function a(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function s(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function i(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function c(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function p(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t[3]=r[3]*e[3],t}function f(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t[3]=r[3]/e[3],t}function x(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t}function h(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t}function M(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t[3]=Math.min(r[3],e[3]),t}function l(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t[3]=Math.max(r[3],e[3]),t}function v(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t}function d(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function m(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return Math.hypot(e,n,o,a)}function O(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return e*e+n*n+o*o+a*a}function y(t){var r=t[0],e=t[1],n=t[2],o=t[3];return Math.hypot(r,e,n,o)}function A(t){var r=t[0],e=t[1],n=t[2],o=t[3];return r*r+e*e+n*n+o*o}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t}function R(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t}function q(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],u=e*e+n*n+o*o+a*a;return u>0&&(u=1/Math.sqrt(u)),t[0]=e*u,t[1]=n*u,t[2]=o*u,t[3]=a*u,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]}function g(t,r,e,n){var o=e[0]*n[1]-e[1]*n[0],a=e[0]*n[2]-e[2]*n[0],u=e[0]*n[3]-e[3]*n[0],s=e[1]*n[2]-e[2]*n[1],i=e[1]*n[3]-e[3]*n[1],c=e[2]*n[3]-e[3]*n[2],p=r[0],f=r[1],x=r[2],h=r[3];return t[0]=f*c-x*i+h*s,t[1]=-p*c+x*u-h*a,t[2]=p*i-f*u+h*o,t[3]=-p*s+f*a-x*o,t}function w(t,r,e,n){var o=r[0],a=r[1],u=r[2],s=r[3];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=u+n*(e[2]-u),t[3]=s+n*(e[3]-s),t}function D(r,e){var n,o,a,u,s,i;e=e||1;do{s=(n=2*t.RANDOM()-1)*n+(o=2*t.RANDOM()-1)*o}while(s>=1);do{i=(a=2*t.RANDOM()-1)*a+(u=2*t.RANDOM()-1)*u}while(i>=1);var c=Math.sqrt((1-s)/i);return r[0]=e*n,r[1]=e*o,r[2]=e*a*c,r[3]=e*u*c,r}function j(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3];return t[0]=e[0]*n+e[4]*o+e[8]*a+e[12]*u,t[1]=e[1]*n+e[5]*o+e[9]*a+e[13]*u,t[2]=e[2]*n+e[6]*o+e[10]*a+e[14]*u,t[3]=e[3]*n+e[7]*o+e[11]*a+e[15]*u,t}function N(t,r,e){var n=r[0],o=r[1],a=r[2],u=e[0],s=e[1],i=e[2],c=e[3],p=c*n+s*a-i*o,f=c*o+i*n-u*a,x=c*a+u*o-s*n,h=-u*n-s*o-i*a;return t[0]=p*c+h*-u+f*-i-x*-s,t[1]=f*c+h*-s+x*-u-p*-i,t[2]=x*c+h*-i+p*-s-f*-u,t[3]=r[3],t}function Y(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function _(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function L(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function I(r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],c=e[2],p=e[3];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(u-p)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))}var S=c;exports.sub=S;var T=p;exports.mul=T;var k=f;exports.div=k;var z=b;exports.dist=z;var W=O;exports.sqrDist=W;var F=y;exports.len=F;var Q=A;exports.sqrLen=Q;var V=function(){var t=n();return function(r,e,n,o,a,u){var s,i;for(e||(e=4),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,s=n;s<i;s+=e)t[0]=r[s],t[1]=r[s+1],t[2]=r[s+2],t[3]=r[s+3],a(t,t,u),r[s]=t[0],r[s+1]=t[1],r[s+2]=t[2],r[s+3]=t[3];return r}}();exports.forEach=V;
},{"./common.js":"XJqx"}],"KdRW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=s,exports.identity=u,exports.setAxisAngle=p,exports.getAxisAngle=c,exports.getAngle=i,exports.multiply=x,exports.rotateX=l,exports.rotateY=f,exports.rotateZ=v,exports.calculateW=h,exports.exp=M,exports.ln=q,exports.pow=d,exports.slerp=m,exports.random=g,exports.invert=y,exports.conjugate=P,exports.fromMat3=A,exports.fromEuler=O,exports.str=j,exports.setAxes=exports.sqlerp=exports.rotationTo=exports.equals=exports.exactEquals=exports.normalize=exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.lerp=exports.dot=exports.scale=exports.mul=exports.add=exports.set=exports.copy=exports.fromValues=exports.clone=void 0;var t=n(require("./common.js")),r=n(require("./mat3.js")),e=n(require("./vec3.js")),o=n(require("./vec4.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var e={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var s=o?Object.getOwnPropertyDescriptor(t,n):null;s&&(s.get||s.set)?Object.defineProperty(e,n,s):e[n]=t[n]}return e.default=t,r&&r.set(t,e),e}function s(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function u(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function p(t,r,e){e*=.5;var o=Math.sin(e);return t[0]=o*r[0],t[1]=o*r[1],t[2]=o*r[2],t[3]=Math.cos(e),t}function c(r,e){var o=2*Math.acos(e[3]),a=Math.sin(o/2);return a>t.EPSILON?(r[0]=e[0]/a,r[1]=e[1]/a,r[2]=e[2]/a):(r[0]=1,r[1]=0,r[2]=0),o}function i(t,r){var e=D(t,r);return Math.acos(2*e*e-1)}function x(t,r,e){var o=r[0],a=r[1],n=r[2],s=r[3],u=e[0],p=e[1],c=e[2],i=e[3];return t[0]=o*i+s*u+a*c-n*p,t[1]=a*i+s*p+n*u-o*c,t[2]=n*i+s*c+o*p-a*u,t[3]=s*i-o*u-a*p-n*c,t}function l(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p+s*u,t[1]=a*p+n*u,t[2]=n*p-a*u,t[3]=s*p-o*u,t}function f(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p-n*u,t[1]=a*p+s*u,t[2]=n*p+o*u,t[3]=s*p-a*u,t}function v(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p+a*u,t[1]=a*p-o*u,t[2]=n*p+s*u,t[3]=s*p-n*u,t}function h(t,r){var e=r[0],o=r[1],a=r[2];return t[0]=e,t[1]=o,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-o*o-a*a)),t}function M(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=Math.sqrt(e*e+o*o+a*a),u=Math.exp(n),p=s>0?u*Math.sin(s)/s:0;return t[0]=e*p,t[1]=o*p,t[2]=a*p,t[3]=u*Math.cos(s),t}function q(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=Math.sqrt(e*e+o*o+a*a),u=s>0?Math.atan2(s,n)/s:0;return t[0]=e*u,t[1]=o*u,t[2]=a*u,t[3]=.5*Math.log(e*e+o*o+a*a+n*n),t}function d(t,r,e){return q(t,r),_(t,t,e),M(t,t),t}function m(r,e,o,a){var n,s,u,p,c,i=e[0],x=e[1],l=e[2],f=e[3],v=o[0],h=o[1],M=o[2],q=o[3];return(s=i*v+x*h+l*M+f*q)<0&&(s=-s,v=-v,h=-h,M=-M,q=-q),1-s>t.EPSILON?(n=Math.acos(s),u=Math.sin(n),p=Math.sin((1-a)*n)/u,c=Math.sin(a*n)/u):(p=1-a,c=a),r[0]=p*i+c*v,r[1]=p*x+c*h,r[2]=p*l+c*M,r[3]=p*f+c*q,r}function g(r){var e=t.RANDOM(),o=t.RANDOM(),a=t.RANDOM(),n=Math.sqrt(1-e),s=Math.sqrt(e);return r[0]=n*Math.sin(2*Math.PI*o),r[1]=n*Math.cos(2*Math.PI*o),r[2]=s*Math.sin(2*Math.PI*a),r[3]=s*Math.cos(2*Math.PI*a),r}function y(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=e*e+o*o+a*a+n*n,u=s?1/s:0;return t[0]=-e*u,t[1]=-o*u,t[2]=-a*u,t[3]=n*u,t}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t}function A(t,r){var e,o=r[0]+r[4]+r[8];if(o>0)e=Math.sqrt(o+1),t[3]=.5*e,e=.5/e,t[0]=(r[5]-r[7])*e,t[1]=(r[6]-r[2])*e,t[2]=(r[1]-r[3])*e;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[3*a+a]&&(a=2);var n=(a+1)%3,s=(a+2)%3;e=Math.sqrt(r[3*a+a]-r[3*n+n]-r[3*s+s]+1),t[a]=.5*e,e=.5/e,t[3]=(r[3*n+s]-r[3*s+n])*e,t[n]=(r[3*n+a]+r[3*a+n])*e,t[s]=(r[3*s+a]+r[3*a+s])*e}return t}function O(t,r,e,o){var a=.5*Math.PI/180;r*=a,e*=a,o*=a;var n=Math.sin(r),s=Math.cos(r),u=Math.sin(e),p=Math.cos(e),c=Math.sin(o),i=Math.cos(o);return t[0]=n*p*i-s*u*c,t[1]=s*u*i+n*p*c,t[2]=s*p*c-n*u*i,t[3]=s*p*i+n*u*c,t}function j(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var b=o.clone;exports.clone=b;var E=o.fromValues;exports.fromValues=E;var I=o.copy;exports.copy=I;var L=o.set;exports.set=L;var R=o.add;exports.add=R;var w=x;exports.mul=w;var _=o.scale;exports.scale=_;var D=o.dot;exports.dot=D;var N=o.lerp;exports.lerp=N;var V=o.length;exports.length=V;var Y=V;exports.len=Y;var z=o.squaredLength;exports.squaredLength=z;var T=z;exports.sqrLen=T;var W=o.normalize;exports.normalize=W;var k=o.exactEquals;exports.exactEquals=k;var S=o.equals;exports.equals=S;var F=function(){var t=e.create(),r=e.fromValues(1,0,0),o=e.fromValues(0,1,0);return function(a,n,s){var u=e.dot(n,s);return u<-.999999?(e.cross(t,r,n),e.len(t)<1e-6&&e.cross(t,o,n),e.normalize(t,t),p(a,t,Math.PI),a):u>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(e.cross(t,n,s),a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=1+u,W(a,a))}}();exports.rotationTo=F;var X=function(){var t=s(),r=s();return function(e,o,a,n,s,u){return m(t,o,s,u),m(r,a,n,u),m(e,t,r,2*u*(1-u)),e}}();exports.sqlerp=X;var Z=function(){var t=r.create();return function(r,e,o,a){return t[0]=o[0],t[3]=o[1],t[6]=o[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],W(r,A(r,t))}}();exports.setAxes=Z;
},{"./common.js":"XJqx","./mat3.js":"vtQf","./vec3.js":"AWBd","./vec4.js":"zWbG"}],"buGF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=o,exports.clone=s,exports.fromValues=u,exports.fromRotationTranslationValues=p,exports.fromRotationTranslation=i,exports.fromTranslation=c,exports.fromRotation=f,exports.fromMat4=x,exports.copy=h,exports.identity=l,exports.set=M,exports.getDual=b,exports.setDual=m,exports.getTranslation=d,exports.translate=R,exports.rotateX=y,exports.rotateY=O,exports.rotateZ=g,exports.rotateByQuatAppend=A,exports.rotateByQuatPrepend=E,exports.rotateAroundAxis=L,exports.add=Y,exports.multiply=q,exports.scale=T,exports.lerp=w,exports.invert=I,exports.conjugate=N,exports.normalize=Q,exports.str=V,exports.exactEquals=W,exports.equals=X,exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.dot=exports.mul=exports.setReal=exports.getReal=void 0;var t=n(require("./common.js")),r=n(require("./quat.js")),e=n(require("./mat4.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var e={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=n?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(e,o,s):e[o]=t[o]}return e.default=t,r&&r.set(t,e),e}function o(){var r=new t.ARRAY_TYPE(8);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0),r[3]=1,r}function s(r){var e=new t.ARRAY_TYPE(8);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e}function u(r,e,a,n,o,s,u,p){var i=new t.ARRAY_TYPE(8);return i[0]=r,i[1]=e,i[2]=a,i[3]=n,i[4]=o,i[5]=s,i[6]=u,i[7]=p,i}function p(r,e,a,n,o,s,u){var p=new t.ARRAY_TYPE(8);p[0]=r,p[1]=e,p[2]=a,p[3]=n;var i=.5*o,c=.5*s,f=.5*u;return p[4]=i*n+c*a-f*e,p[5]=c*n+f*r-i*a,p[6]=f*n+i*e-c*r,p[7]=-i*r-c*e-f*a,p}function i(t,r,e){var a=.5*e[0],n=.5*e[1],o=.5*e[2],s=r[0],u=r[1],p=r[2],i=r[3];return t[0]=s,t[1]=u,t[2]=p,t[3]=i,t[4]=a*i+n*p-o*u,t[5]=n*i+o*s-a*p,t[6]=o*i+a*u-n*s,t[7]=-a*s-n*u-o*p,t}function c(t,r){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*r[0],t[5]=.5*r[1],t[6]=.5*r[2],t[7]=0,t}function f(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function x(a,n){var o=r.create();e.getRotation(o,n);var s=new t.ARRAY_TYPE(3);return e.getTranslation(s,n),i(a,o,s),a}function h(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t}function l(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function M(t,r,e,a,n,o,s,u,p){return t[0]=r,t[1]=e,t[2]=a,t[3]=n,t[4]=o,t[5]=s,t[6]=u,t[7]=p,t}var v=r.copy;function b(t,r){return t[0]=r[4],t[1]=r[5],t[2]=r[6],t[3]=r[7],t}exports.getReal=v;var P=r.copy;function m(t,r){return t[4]=r[0],t[5]=r[1],t[6]=r[2],t[7]=r[3],t}function d(t,r){var e=r[4],a=r[5],n=r[6],o=r[7],s=-r[0],u=-r[1],p=-r[2],i=r[3];return t[0]=2*(e*i+o*s+a*p-n*u),t[1]=2*(a*i+o*u+n*s-e*p),t[2]=2*(n*i+o*p+e*u-a*s),t}function R(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=.5*e[0],p=.5*e[1],i=.5*e[2],c=r[4],f=r[5],x=r[6],h=r[7];return t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=s*u+n*i-o*p+c,t[5]=s*p+o*u-a*i+f,t[6]=s*i+a*p-n*u+x,t[7]=-a*u-n*p-o*i+h,t}function y(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],c=e[6],f=e[7],x=p*u+f*n+i*s-c*o,h=i*u+f*o+c*n-p*s,l=c*u+f*s+p*o-i*n,M=f*u-p*n-i*o-c*s;return r.rotateX(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=x*u+M*n+h*s-l*o,t[5]=h*u+M*o+l*n-x*s,t[6]=l*u+M*s+x*o-h*n,t[7]=M*u-x*n-h*o-l*s,t}function O(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],c=e[6],f=e[7],x=p*u+f*n+i*s-c*o,h=i*u+f*o+c*n-p*s,l=c*u+f*s+p*o-i*n,M=f*u-p*n-i*o-c*s;return r.rotateY(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=x*u+M*n+h*s-l*o,t[5]=h*u+M*o+l*n-x*s,t[6]=l*u+M*s+x*o-h*n,t[7]=M*u-x*n-h*o-l*s,t}function g(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],c=e[6],f=e[7],x=p*u+f*n+i*s-c*o,h=i*u+f*o+c*n-p*s,l=c*u+f*s+p*o-i*n,M=f*u-p*n-i*o-c*s;return r.rotateZ(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=x*u+M*n+h*s-l*o,t[5]=h*u+M*o+l*n-x*s,t[6]=l*u+M*s+x*o-h*n,t[7]=M*u-x*n-h*o-l*s,t}function A(t,r,e){var a=e[0],n=e[1],o=e[2],s=e[3],u=r[0],p=r[1],i=r[2],c=r[3];return t[0]=u*s+c*a+p*o-i*n,t[1]=p*s+c*n+i*a-u*o,t[2]=i*s+c*o+u*n-p*a,t[3]=c*s-u*a-p*n-i*o,u=r[4],p=r[5],i=r[6],c=r[7],t[4]=u*s+c*a+p*o-i*n,t[5]=p*s+c*n+i*a-u*o,t[6]=i*s+c*o+u*n-p*a,t[7]=c*s-u*a-p*n-i*o,t}function E(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=e[0],p=e[1],i=e[2],c=e[3];return t[0]=a*c+s*u+n*i-o*p,t[1]=n*c+s*p+o*u-a*i,t[2]=o*c+s*i+a*p-n*u,t[3]=s*c-a*u-n*p-o*i,u=e[4],p=e[5],i=e[6],c=e[7],t[4]=a*c+s*u+n*i-o*p,t[5]=n*c+s*p+o*u-a*i,t[6]=o*c+s*i+a*p-n*u,t[7]=s*c-a*u-n*p-o*i,t}function L(r,e,a,n){if(Math.abs(n)<t.EPSILON)return h(r,e);var o=Math.hypot(a[0],a[1],a[2]);n*=.5;var s=Math.sin(n),u=s*a[0]/o,p=s*a[1]/o,i=s*a[2]/o,c=Math.cos(n),f=e[0],x=e[1],l=e[2],M=e[3];r[0]=f*c+M*u+x*i-l*p,r[1]=x*c+M*p+l*u-f*i,r[2]=l*c+M*i+f*p-x*u,r[3]=M*c-f*u-x*p-l*i;var v=e[4],b=e[5],P=e[6],m=e[7];return r[4]=v*c+m*u+b*i-P*p,r[5]=b*c+m*p+P*u-v*i,r[6]=P*c+m*i+v*p-b*u,r[7]=m*c-v*u-b*p-P*i,r}function Y(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t[6]=r[6]+e[6],t[7]=r[7]+e[7],t}function q(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=e[4],p=e[5],i=e[6],c=e[7],f=r[4],x=r[5],h=r[6],l=r[7],M=e[0],v=e[1],b=e[2],P=e[3];return t[0]=a*P+s*M+n*b-o*v,t[1]=n*P+s*v+o*M-a*b,t[2]=o*P+s*b+a*v-n*M,t[3]=s*P-a*M-n*v-o*b,t[4]=a*c+s*u+n*i-o*p+f*P+l*M+x*b-h*v,t[5]=n*c+s*p+o*u-a*i+x*P+l*v+h*M-f*b,t[6]=o*c+s*i+a*p-n*u+h*P+l*b+f*v-x*M,t[7]=s*c-a*u-n*p-o*i+l*P-f*M-x*v-h*b,t}exports.setReal=P;var j=q;function T(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t}exports.mul=j;var _=r.dot;function w(t,r,e,a){var n=1-a;return _(r,e)<0&&(a=-a),t[0]=r[0]*n+e[0]*a,t[1]=r[1]*n+e[1]*a,t[2]=r[2]*n+e[2]*a,t[3]=r[3]*n+e[3]*a,t[4]=r[4]*n+e[4]*a,t[5]=r[5]*n+e[5]*a,t[6]=r[6]*n+e[6]*a,t[7]=r[7]*n+e[7]*a,t}function I(t,r){var e=k(r);return t[0]=-r[0]/e,t[1]=-r[1]/e,t[2]=-r[2]/e,t[3]=r[3]/e,t[4]=-r[4]/e,t[5]=-r[5]/e,t[6]=-r[6]/e,t[7]=r[7]/e,t}function N(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t[4]=-r[4],t[5]=-r[5],t[6]=-r[6],t[7]=r[7],t}exports.dot=_;var S=r.length;exports.length=S;var D=S;exports.len=D;var k=r.squaredLength;exports.squaredLength=k;var B=k;function Q(t,r){var e=k(r);if(e>0){e=Math.sqrt(e);var a=r[0]/e,n=r[1]/e,o=r[2]/e,s=r[3]/e,u=r[4],p=r[5],i=r[6],c=r[7],f=a*u+n*p+o*i+s*c;t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=(u-a*f)/e,t[5]=(p-n*f)/e,t[6]=(i-o*f)/e,t[7]=(c-s*f)/e}return t}function V(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function W(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]}function X(r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],c=r[7],f=e[0],x=e[1],h=e[2],l=e[3],M=e[4],v=e[5],b=e[6],P=e[7];return Math.abs(a-f)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(n-x)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(o-h)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-l)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(u-M)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(p-v)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(v))&&Math.abs(i-b)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(c-P)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))}exports.sqrLen=B;
},{"./common.js":"XJqx","./quat.js":"KdRW","./mat4.js":"w3aR"}],"XSo1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.fromValues=a,exports.copy=u,exports.set=s,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=f,exports.ceil=x,exports.floor=v,exports.min=h,exports.max=M,exports.round=l,exports.scale=d,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=y,exports.length=P,exports.squaredLength=q,exports.negate=A,exports.inverse=O,exports.normalize=g,exports.dot=E,exports.cross=R,exports.lerp=j,exports.random=Y,exports.transformMat2=_,exports.transformMat2d=w,exports.transformMat3=D,exports.transformMat4=L,exports.rotate=I,exports.angle=T,exports.zero=N,exports.str=k,exports.exactEquals=z,exports.equals=S,exports.forEach=exports.sqrLen=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=exports.len=void 0;var r=e(require("./common.js"));function t(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return t=function(){return r},r}function e(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=t();if(e&&e.has(r))return e.get(r);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)){var u=o?Object.getOwnPropertyDescriptor(r,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=r[a]}return n.default=r,e&&e.set(r,n),n}function n(){var t=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function o(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function a(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function u(r,t){return r[0]=t[0],r[1]=t[1],r}function s(r,t,e){return r[0]=t,r[1]=e,r}function i(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r}function c(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r}function p(r,t,e){return r[0]=t[0]*e[0],r[1]=t[1]*e[1],r}function f(r,t,e){return r[0]=t[0]/e[0],r[1]=t[1]/e[1],r}function x(r,t){return r[0]=Math.ceil(t[0]),r[1]=Math.ceil(t[1]),r}function v(r,t){return r[0]=Math.floor(t[0]),r[1]=Math.floor(t[1]),r}function h(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r}function M(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r}function l(r,t){return r[0]=Math.round(t[0]),r[1]=Math.round(t[1]),r}function d(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r}function m(r,t,e,n){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r}function b(r,t){var e=t[0]-r[0],n=t[1]-r[1];return Math.hypot(e,n)}function y(r,t){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}function P(r){var t=r[0],e=r[1];return Math.hypot(t,e)}function q(r){var t=r[0],e=r[1];return t*t+e*e}function A(r,t){return r[0]=-t[0],r[1]=-t[1],r}function O(r,t){return r[0]=1/t[0],r[1]=1/t[1],r}function g(r,t){var e=t[0],n=t[1],o=e*e+n*n;return o>0&&(o=1/Math.sqrt(o)),r[0]=t[0]*o,r[1]=t[1]*o,r}function E(r,t){return r[0]*t[0]+r[1]*t[1]}function R(r,t,e){var n=t[0]*e[1]-t[1]*e[0];return r[0]=r[1]=0,r[2]=n,r}function j(r,t,e,n){var o=t[0],a=t[1];return r[0]=o+n*(e[0]-o),r[1]=a+n*(e[1]-a),r}function Y(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function _(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[2]*o,r[1]=e[1]*n+e[3]*o,r}function w(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[2]*o+e[4],r[1]=e[1]*n+e[3]*o+e[5],r}function D(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[3]*o+e[6],r[1]=e[1]*n+e[4]*o+e[7],r}function L(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[4]*o+e[12],r[1]=e[1]*n+e[5]*o+e[13],r}function I(r,t,e,n){var o=t[0]-e[0],a=t[1]-e[1],u=Math.sin(n),s=Math.cos(n);return r[0]=o*s-a*u+e[0],r[1]=o*u+a*s+e[1],r}function T(r,t){var e=r[0],n=r[1],o=t[0],a=t[1],u=e*e+n*n;u>0&&(u=1/Math.sqrt(u));var s=o*o+a*a;s>0&&(s=1/Math.sqrt(s));var i=(e*o+n*a)*u*s;return i>1?0:i<-1?Math.PI:Math.acos(i)}function N(r){return r[0]=0,r[1]=0,r}function k(r){return"vec2("+r[0]+", "+r[1]+")"}function z(r,t){return r[0]===t[0]&&r[1]===t[1]}function S(t,e){var n=t[0],o=t[1],a=e[0],u=e[1];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))}var W=P;exports.len=W;var F=c;exports.sub=F;var V=p;exports.mul=V;var B=f;exports.div=B;var C=b;exports.dist=C;var G=y;exports.sqrDist=G;var H=q;exports.sqrLen=H;var J=function(){var r=n();return function(t,e,n,o,a,u){var s,i;for(e||(e=2),n||(n=0),i=o?Math.min(o*e+n,t.length):t.length,s=n;s<i;s+=e)r[0]=t[s],r[1]=t[s+1],a(r,r,u),t[s]=r[0],t[s+1]=r[1];return t}}();exports.forEach=J;
},{"./common.js":"XJqx"}],"IF0X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vec4=exports.vec3=exports.vec2=exports.quat2=exports.quat=exports.mat4=exports.mat3=exports.mat2d=exports.mat2=exports.glMatrix=void 0;var e=v(require("./common.js"));exports.glMatrix=e;var r=v(require("./mat2.js"));exports.mat2=r;var t=v(require("./mat2d.js"));exports.mat2d=t;var o=v(require("./mat3.js"));exports.mat3=o;var a=v(require("./mat4.js"));exports.mat4=a;var s=v(require("./quat.js"));exports.quat=s;var u=v(require("./quat2.js"));exports.quat2=u;var p=v(require("./vec2.js"));exports.vec2=p;var i=v(require("./vec3.js"));exports.vec3=i;var n=v(require("./vec4.js"));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function v(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(t,a,s):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}exports.vec4=n;
},{"./common.js":"XJqx","./mat2.js":"eN7R","./mat2d.js":"M21d","./mat3.js":"vtQf","./mat4.js":"w3aR","./quat.js":"KdRW","./quat2.js":"buGF","./vec2.js":"XSo1","./vec3.js":"AWBd","./vec4.js":"zWbG"}],"qqzv":[function(require,module,exports) {
"use strict";function t(t,e,n){return Math.min(Math.max(t,e),n)}module.exports=t;
},{}],"sO46":[function(require,module,exports) {
"use strict";var r=256,e=256,t=require("../util/clamp"),a=require("gl-matrix").vec4,i=require("gl-matrix").vec3,o=require("gl-matrix").mat4;function n(r,e,t){var a=r.createShader(e);if(r.shaderSource(a,t),r.compileShader(a),!r.getShaderParameter(a,r.COMPILE_STATUS))throw r.getShaderInfoLog(a);return a}function f(r,e,t,a,i){var o=n(r,r.VERTEX_SHADER,e),f=n(r,r.FRAGMENT_SHADER,t),u=r.createProgram();if(r.attachShader(u,o),r.attachShader(u,f),r.linkProgram(u),!r.getProgramParameter(u,r.LINK_STATUS))throw r.getProgramInfoLog(u);for(var d=0;d<a.length;d++){var h=a[d];if(u[h]=r.getAttribLocation(u,h),-1===u[h])throw new Error("Shader program has no "+h+" attribute")}for(var c=0;c<i.length;c++){var g=i[c];if(u[g]=r.getUniformLocation(u,g),-1===u[g])throw new Error("Shader program has no "+g+" uniform")}return u}function u(r,e){for(var t=r.getAttachedShaders(e),a=0;a<t.length;a++){var i=t[a];r.detachShader(e,i),r.deleteShader(i)}r.deleteProgram(e)}function d(r,e,t,a){var i=r.createBuffer();return r.bindBuffer(e,i),r.bufferData(e,a,t),i}function h(r,e,t,a){return{vertexIndices:d(r,r.ELEMENT_ARRAY_BUFFER,r.STATIC_DRAW,new Uint16Array(e)),vertexPositions:d(r,r.ARRAY_BUFFER,r.STATIC_DRAW,new Float32Array(t)),textureCoords:d(r,r.ARRAY_BUFFER,r.STATIC_DRAW,new Float32Array(a))}}function c(r,e){r.deleteBuffer(e.vertexIndices),r.deleteBuffer(e.vertexPositions),r.deleteBuffer(e.textureCoords)}function g(r,e){for(var t=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES),a=0;a<t;a++)r.enableVertexAttribArray(a)}function s(r,e){for(var t=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES),a=0;a<t;a++)r.disableVertexAttribArray(a)}function l(r,e,t){r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t._texture),r.uniform1i(e.uSampler,0)}function A(t,a,i,o){var n=((i+1)*e-o)/(e*r);t.uniform1f(a.uDepth,n)}var m=1,v=a.create(),T=o.create();function S(r,e,t){var a=m;e&&null!=e.opacity&&(a=e.opacity),r.uniform1f(t.opacity,a);var i=v;e&&e.colorOffset&&(i=e.colorOffset),r.uniform4fv(t.colorOffset,i);var o=T;e&&e.colorMatrix&&(o=e.colorMatrix),r.uniformMatrix4fv(t.colorMatrix,!1,o)}o.identity(T);var x=i.create(),E=i.create();function w(r,e,a,n){if(0===a.x&&1===a.width&&0===a.y&&1===a.height)return r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),void o.identity(n);var f=a.x,u=t(f,0,1),d=u-f,h=1-u,c=t(a.width-d,0,h),g=a.width-c,s=1-a.height-a.y,l=t(s,0,1),A=l-s,m=1-l,v=t(a.height-A,0,m),T=a.height-v;i.set(E,a.width/c,a.height/v,1),i.set(x,(g-d)/c,(T-A)/v,0),o.identity(n),o.translate(n,n,x),o.scale(n,n,E),r.viewport(r.drawingBufferWidth*u,r.drawingBufferHeight*l,r.drawingBufferWidth*c,r.drawingBufferHeight*v)}module.exports={createShaderProgram:f,destroyShaderProgram:u,createConstantBuffers:h,destroyConstantBuffers:c,enableAttributes:g,disableAttributes:s,setTexture:l,setDepth:A,setViewport:w,setupPixelEffectUniforms:S};
},{"../util/clamp":"qqzv","gl-matrix":"IF0X"}],"aKvv":[function(require,module,exports) {
"use strict";module.exports=["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float uDepth;","uniform mat4 uViewportMatrix;","uniform mat4 uProjMatrix;","varying vec2 vTextureCoord;","void main(void) {","  gl_Position = uViewportMatrix * uProjMatrix * vec4(aVertexPosition.xy, 0.0, 1.0);","  gl_Position.z = uDepth * gl_Position.w;","  vTextureCoord = aTextureCoord;","}"].join("\n");
},{}],"H2a0":[function(require,module,exports) {
"use strict";module.exports=["#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uSampler;","uniform float uOpacity;","uniform vec4 uColorOffset;","uniform mat4 uColorMatrix;","varying vec2 vTextureCoord;","void main(void) {","  vec4 color = texture2D(uSampler, vTextureCoord) * uColorMatrix + uColorOffset;","  gl_FragColor = vec4(color.rgba * uOpacity);","}"].join("\n");
},{}],"a2IN":[function(require,module,exports) {
"use strict";var t=require("gl-matrix").mat4,r=require("gl-matrix").vec3,e=require("../util/clearOwnProperties"),o=require("./WebGlCommon"),i=o.createConstantBuffers,s=o.destroyConstantBuffers,a=o.createShaderProgram,n=o.destroyShaderProgram,u=o.enableAttributes,c=o.disableAttributes,f=o.setViewport,h=o.setupPixelEffectUniforms,l=o.setDepth,x=o.setTexture,p=require("../shaders/vertexNormal"),d=require("../shaders/fragmentNormal"),m=[0,1,2,0,2,3],g=[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],P=[0,0,1,0,1,1,0,1],v=["aVertexPosition","aTextureCoord"],A=["uDepth","uOpacity","uSampler","uProjMatrix","uViewportMatrix","uColorOffset","uColorMatrix"];function M(e){this.gl=e,this.projMatrix=t.create(),this.viewportMatrix=t.create(),this.translateVector=r.create(),this.scaleVector=r.create(),this.constantBuffers=i(e,m,g,P),this.shaderProgram=a(e,p,d,v,A)}M.prototype.destroy=function(){s(this.gl,this.constantBuffers),n(this.gl,this.shaderProgram),e(this)},M.prototype.startLayer=function(t,r){var e=this.gl,o=this.shaderProgram,i=this.constantBuffers,s=this.viewportMatrix;e.useProgram(o),u(e,o),f(e,t,r,s),e.uniformMatrix4fv(o.uViewportMatrix,!1,s),e.bindBuffer(e.ARRAY_BUFFER,i.vertexPositions),e.vertexAttribPointer(o.aVertexPosition,3,e.FLOAT,e.FALSE,0,0),e.bindBuffer(e.ARRAY_BUFFER,i.textureCoords),e.vertexAttribPointer(o.aTextureCoord,2,e.FLOAT,e.FALSE,0,0),h(e,t.effects(),{opacity:o.uOpacity,colorOffset:o.uColorOffset,colorMatrix:o.uColorMatrix})},M.prototype.endLayer=function(t,r){var e=this.gl,o=this.shaderProgram;c(e,o)},M.prototype.renderTile=function(r,e,o,i){var s=this.gl,a=this.shaderProgram,n=this.constantBuffers,u=this.projMatrix,c=this.translateVector,f=this.scaleVector;c[0]=r.centerX(),c[1]=r.centerY(),c[2]=-.5,f[0]=r.scaleX(),f[1]=r.scaleY(),f[2]=1,t.copy(u,o.view().projection()),t.rotateX(u,u,r.rotX()),t.rotateY(u,u,r.rotY()),t.translate(u,u,c),t.scale(u,u,f),s.uniformMatrix4fv(a.uProjMatrix,!1,u),l(s,a,i,r.z),x(s,a,e),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,n.vertexIndices),s.drawElements(s.TRIANGLES,m.length,s.UNSIGNED_SHORT,0)},module.exports=M;
},{"gl-matrix":"IF0X","../util/clearOwnProperties":"lrIP","./WebGlCommon":"sO46","../shaders/vertexNormal":"aKvv","../shaders/fragmentNormal":"H2a0"}],"WZBv":[function(require,module,exports) {
"use strict";var e=require("./WebGlBase"),r=require("../util/inherits");function t(){this.constructor.super_.apply(this,arguments)}r(t,e),module.exports=t;
},{"./WebGlBase":"a2IN","../util/inherits":"W3pH"}],"mrQn":[function(require,module,exports) {
"use strict";module.exports=["attribute vec3 aVertexPosition;","uniform float uDepth;","uniform mat4 uViewportMatrix;","uniform mat4 uInvProjMatrix;","varying vec4 vRay;","void main(void) {","  vRay = uInvProjMatrix * vec4(aVertexPosition.xy, 1.0, 1.0);","  gl_Position = uViewportMatrix * vec4(aVertexPosition.xy, uDepth, 1.0);","}"].join("\n");
},{}],"onbI":[function(require,module,exports) {
"use strict";module.exports=["#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float","#endif","uniform sampler2D uSampler;","uniform float uOpacity;","uniform float uTextureX;","uniform float uTextureY;","uniform float uTextureWidth;","uniform float uTextureHeight;","uniform vec4 uColorOffset;","uniform mat4 uColorMatrix;","varying vec4 vRay;","const float PI = 3.14159265358979323846264;","void main(void) {","  float r = inversesqrt(vRay.x * vRay.x + vRay.y * vRay.y + vRay.z * vRay.z);","  float phi  = acos(vRay.y * r);","  float theta = atan(vRay.x, -1.0*vRay.z);","  float s = 0.5 + 0.5 * theta / PI;","  float t = 1.0 - phi / PI;","  s = s * uTextureWidth + uTextureX;","  t = t * uTextureHeight + uTextureY;","  vec4 color = texture2D(uSampler, vec2(s, t)) * uColorMatrix + uColorOffset;","  gl_FragColor = vec4(color.rgba * uOpacity);","}"].join("\n");
},{}],"jXcL":[function(require,module,exports) {
"use strict";var t=require("gl-matrix").mat4,r=require("../util/clearOwnProperties"),e=require("./WebGlCommon"),i=e.createConstantBuffers,o=e.destroyConstantBuffers,s=e.createShaderProgram,u=e.destroyShaderProgram,a=e.enableAttributes,n=e.disableAttributes,f=e.setViewport,h=e.setupPixelEffectUniforms,x=e.setDepth,l=e.setTexture,c=require("../shaders/vertexEquirect"),d=require("../shaders/fragmentEquirect"),p=[0,1,2,0,2,3],m=[-1,-1,0,1,-1,0,1,1,0,-1,1,0],g=[0,0,1,0,1,1,0,1],v=["aVertexPosition"],P=["uDepth","uOpacity","uSampler","uInvProjMatrix","uViewportMatrix","uColorOffset","uColorMatrix","uTextureX","uTextureY","uTextureWidth","uTextureHeight"];function y(r){this.gl=r,this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.constantBuffers=i(r,p,m,g),this.shaderProgram=s(r,c,d,v,P)}y.prototype.destroy=function(){o(this.gl,this.constantBuffers),u(this.gl,this.shaderProgram),r(this)},y.prototype.startLayer=function(r,e){var i=this.gl,o=this.shaderProgram,s=this.constantBuffers,u=this.invProjMatrix,n=this.viewportMatrix;i.useProgram(o),a(i,o),f(i,r,e,n),i.uniformMatrix4fv(o.uViewportMatrix,!1,n),i.bindBuffer(i.ARRAY_BUFFER,s.vertexPositions),i.vertexAttribPointer(o.aVertexPosition,3,i.FLOAT,i.FALSE,0,0),i.bindBuffer(i.ARRAY_BUFFER,s.textureCoords),t.copy(u,r.view().projection()),t.invert(u,u),i.uniformMatrix4fv(o.uInvProjMatrix,!1,u);var x=r.effects().textureCrop||{},l=null!=x.x?x.x:0,c=null!=x.y?x.y:0,d=null!=x.width?x.width:1,p=null!=x.height?x.height:1;i.uniform1f(o.uTextureX,l),i.uniform1f(o.uTextureY,c),i.uniform1f(o.uTextureWidth,d),i.uniform1f(o.uTextureHeight,p),h(i,r.effects(),{opacity:o.uOpacity,colorOffset:o.uColorOffset,colorMatrix:o.uColorMatrix})},y.prototype.endLayer=function(t,r){var e=this.gl,i=this.shaderProgram;n(e,i)},y.prototype.renderTile=function(t,r,e,i){var o=this.gl,s=this.shaderProgram,u=this.constantBuffers;x(o,s,i,t.z),l(o,s,r),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,u.vertexIndices),o.drawElements(o.TRIANGLES,p.length,o.UNSIGNED_SHORT,0)},module.exports=y;
},{"gl-matrix":"IF0X","../util/clearOwnProperties":"lrIP","./WebGlCommon":"sO46","../shaders/vertexEquirect":"mrQn","../shaders/fragmentEquirect":"onbI"}],"ja5q":[function(require,module,exports) {
"use strict";function r(){for(var r=0,t=0;t<arguments.length;t++){var e=arguments[t];r+=e,r+=e<<10,r^=e>>6}return r+=r<<3,r^=r>>11,(r+=r<<15)>=0?r:-r}module.exports=r;
},{}],"iEu3":[function(require,module,exports) {
"use strict";function t(t,e){return(+t%(e=+e)+e)%e}module.exports=t;
},{}],"NjuQ":[function(require,module,exports) {
"use strict";var t=require("../util/mod"),i=64;function r(t){if(null!=t&&(!isFinite(t)||Math.floor(t)!==t||t<1))throw new Error("Set: invalid capacity");this._capacity=this._capacity||i,this._buckets=[];for(var r=0;r<this._capacity;r++)this._buckets.push([]);this._size=0}r.prototype.add=function(i){for(var r=t(i.hash(),this._capacity),e=this._buckets[r],s=0;s<e.length;s++){var a=e[s];if(i.equals(a))return e[s]=i,a}return e.push(i),this._size++,null},r.prototype.remove=function(i){for(var r=t(i.hash(),this._capacity),e=this._buckets[r],s=0;s<e.length;s++){var a=e[s];if(i.equals(a)){for(var h=s;h<e.length-1;h++)e[h]=e[h+1];return e.length=e.length-1,this._size--,a}}return null},r.prototype.has=function(i){for(var r=t(i.hash(),this._capacity),e=this._buckets[r],s=0;s<e.length;s++){var a=e[s];if(i.equals(a))return!0}return!1},r.prototype.size=function(){return this._size},r.prototype.clear=function(){for(var t=0;t<this._capacity;t++)this._buckets[t].length=0;this._size=0},r.prototype.forEach=function(t){for(var i=0,r=0;r<this._capacity;r++)for(var e=this._buckets[r],s=0;s<e.length;s++)t(e[s]),i+=1;return i},module.exports=r;
},{"../util/mod":"iEu3"}],"nxci":[function(require,module,exports) {
"use strict";var t=require("./collections/Set");function e(){this._stack=[],this._visited=new t,this._vertices=null}e.prototype.search=function(t,e,s){var i=this._stack,r=this._visited,h=this._vertices,c=0;for(this._clear(),i.push(e);i.length>0;){var n=i.pop();if(!r.has(n)&&t.intersects(n.vertices(h))){r.add(n);for(var o=n.neighbors(),a=0;a<o.length;a++)i.push(o[a]);s.push(n),c++}}return this._vertices=h,this._clear(),c},e.prototype._clear=function(){this._stack.length=0,this._visited.clear()},module.exports=e;
},{"./collections/Set":"NjuQ"}],"dWxv":[function(require,module,exports) {
"use strict";var t=require("../util/mod");function i(t){if(!isFinite(t)||Math.floor(t)!==t||t<0)throw new Error("LruMap: invalid capacity");this._capacity=t,this._keys=new Array(this._capacity),this._values=new Array(this._capacity),this._start=0,this._size=0}i.prototype._index=function(i){return t(this._start+i,this._capacity)},i.prototype.get=function(t){for(var i=0;i<this._size;i++){var s=this._keys[this._index(i)];if(t.equals(s))return this._values[this._index(i)]}return null},i.prototype.set=function(t,i){if(0===this._capacity)return t;this.del(t);var s=this._size===this._capacity?this._keys[this._index(0)]:null;return this._keys[this._index(this._size)]=t,this._values[this._index(this._size)]=i,this._size<this._capacity?this._size++:this._start=this._index(1),s},i.prototype.del=function(t){for(var i=0;i<this._size;i++)if(t.equals(this._keys[this._index(i)])){for(var s=this._values[this._index(i)],e=i;e<this._size-1;e++)this._keys[this._index(e)]=this._keys[this._index(e+1)],this._values[this._index(e)]=this._values[this._index(e+1)];return this._size--,s}return null},i.prototype.has=function(t){for(var i=0;i<this._size;i++)if(t.equals(this._keys[this._index(i)]))return!0;return!1},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._start=0,this._size=0},i.prototype.forEach=function(t){for(var i=0,s=0;s<this._size;s++)t(this._keys[this._index(s)],this._values[this._index(s)]),i+=1;return i},module.exports=i;
},{"../util/mod":"iEu3"}],"FevE":[function(require,module,exports) {
"use strict";function t(t){this._fallbackOnly=!!t.fallbackOnly}t.prototype.numHorizontalTiles=function(){return Math.ceil(this.width()/this.tileWidth())},t.prototype.numVerticalTiles=function(){return Math.ceil(this.height()/this.tileHeight())},t.prototype.fallbackOnly=function(){return this._fallbackOnly},module.exports=t;
},{}],"DMww":[function(require,module,exports) {
"use strict";function t(t,e){return t<e?-1:t>e?1:0}module.exports=t;
},{}],"TOoo":[function(require,module,exports) {
"use strict";var e=require("../util/cmp");function t(t,r){for(var l=[],n=0;n<t.length;n++)l.push(new r(t[n]));return l.sort(function(t,r){return e(t.width(),r.width())}),l}function r(e){for(var t=[],r=0;r<e.length;r++)e[r]._fallbackOnly||t.push(e[r]);if(!t.length)throw new Error("No selectable levels in list");return t}module.exports={makeLevelList:t,makeSelectableLevelList:r};
},{"../util/cmp":"DMww"}],"HgvH":[function(require,module,exports) {
"use strict";function t(t){var r=typeof t;if("object"===r){if(null===t)return"null";if("[object Array]"===Object.prototype.toString.call(t))return"array";if("[object RegExp]"===Object.prototype.toString.call(t))return"regexp"}return r}module.exports=t;
},{}],"hMCd":[function(require,module,exports) {
"use strict";var t=require("../util/inherits"),e=require("../util/hash"),i=require("../TileSearcher"),r=require("../collections/LruMap"),o=require("./Level"),l=require("./common").makeLevelList,s=require("./common").makeSelectableLevelList,n=require("../util/clamp"),h=require("../util/cmp"),a=require("../util/type"),u=require("gl-matrix").vec3,c=require("gl-matrix").vec4,f=64,p="fudlrb",v={f:{x:0,y:0},b:{x:0,y:Math.PI},l:{x:0,y:Math.PI/2},r:{x:0,y:-Math.PI/2},u:{x:Math.PI/2,y:0},d:{x:-Math.PI/2,y:0}},y=u.create();function m(t,e,i,r){e&&u.rotateZ(t,t,y,e),i&&u.rotateX(t,t,y,i),r&&u.rotateY(t,t,y,r)}for(var d={},g=0;g<p.length;g++){var z=p[g],_=v[z],T=u.fromValues(0,0,-1);m(T,0,_.x,_.y),d[z]=T}var x={f:["l","r","u","d"],b:["r","l","u","d"],l:["b","f","u","d"],r:["f","b","u","d"],u:["l","r","b","f"],d:["l","r","f","b"]},L=[[0,1],[1,0],[0,-1],[-1,0]];function w(t,e,i,r,o){this.face=t,this.x=e,this.y=i,this.z=r,this._geometry=o,this._level=o.levelList[r]}function b(t){if(this.constructor.super_.call(this,t),this._size=t.size,this._tileSize=t.tileSize,this._size%this._tileSize!=0)throw new Error("Level size is not multiple of tile size: "+this._size+" "+this._tileSize)}function H(t){if("array"!==a(t))throw new Error("Level list must be an array");this.levelList=l(t,b),this.selectableLevelList=s(this.levelList);for(var e=1;e<this.levelList.length;e++)this.levelList[e]._validateWithParentLevel(this.levelList[e-1]);this._tileSearcher=new i(this),this._neighborsCache=new r(f),this._vec=c.create(),this._viewSize={}}w.prototype.rotX=function(){return v[this.face].x},w.prototype.rotY=function(){return v[this.face].y},w.prototype.centerX=function(){return(this.x+.5)/this._level.numHorizontalTiles()-.5},w.prototype.centerY=function(){return.5-(this.y+.5)/this._level.numVerticalTiles()},w.prototype.scaleX=function(){return 1/this._level.numHorizontalTiles()},w.prototype.scaleY=function(){return 1/this._level.numVerticalTiles()},w.prototype.width=function(){return this._level.tileWidth()},w.prototype.height=function(){return this._level.tileHeight()},w.prototype.levelWidth=function(){return this._level.width()},w.prototype.levelHeight=function(){return this._level.height()},w.prototype.atTopLevel=function(){return 0===this.z},w.prototype.atBottomLevel=function(){return this.z===this._geometry.levelList.length-1},w.prototype.atTopEdge=function(){return 0===this.y},w.prototype.atBottomEdge=function(){return this.y===this._level.numVerticalTiles()-1},w.prototype.atLeftEdge=function(){return 0===this.x},w.prototype.atRightEdge=function(){return this.x===this._level.numHorizontalTiles()-1},w.prototype.padTop=function(){return this.atTopEdge()&&/[fu]/.test(this.face)},w.prototype.padBottom=function(){return!this.atBottomEdge()||/[fd]/.test(this.face)},w.prototype.padLeft=function(){return this.atLeftEdge()&&/[flud]/.test(this.face)},w.prototype.padRight=function(){return!this.atRightEdge()||/[frud]/.test(this.face)},w.prototype.vertices=function(t){t||(t=[u.create(),u.create(),u.create(),u.create()]);var e=v[this.face];function i(t,i,r){u.set(t,i,r,-.5),m(t,0,e.x,e.y)}var r=this.centerX()-this.scaleX()/2,o=this.centerX()+this.scaleX()/2,l=this.centerY()-this.scaleY()/2,s=this.centerY()+this.scaleY()/2;return i(t[0],r,s),i(t[1],o,s),i(t[2],o,l),i(t[3],r,l),t},w.prototype.parent=function(){if(this.atTopLevel())return null;var t=this.face,e=this.z,i=this.x,r=this.y,o=this._geometry,l=o.levelList[e],s=o.levelList[e-1];return new w(t,Math.floor(i/l.numHorizontalTiles()*s.numHorizontalTiles()),Math.floor(r/l.numVerticalTiles()*s.numVerticalTiles()),e-1,o)},w.prototype.children=function(t){if(this.atBottomLevel())return null;var e=this.face,i=this.z,r=this.x,o=this.y,l=this._geometry,s=l.levelList[i],n=l.levelList[i+1],h=n.numHorizontalTiles()/s.numHorizontalTiles(),a=n.numVerticalTiles()/s.numVerticalTiles();t=t||[];for(var u=0;u<h;u++)for(var c=0;c<a;c++){var f=h*r+u,p=a*o+c,v=i+1;t.push(new w(e,f,p,v,l))}return t},w.prototype.neighbors=function(){var t=this._geometry,e=t._neighborsCache,i=e.get(this);if(i)return i;for(var r=t._vec,o=this.face,l=this.x,s=this.y,h=this.z,a=this._level,c=a.numHorizontalTiles(),f=a.numVerticalTiles(),p=[],y=0;y<L.length;y++){var d=l+L[y][0],g=s+L[y][1],z=h,_=o;if(d<0||d>=c||g<0||g>=f){var T,b=this.centerX(),H=this.centerY();d<0?(u.set(r,-.5,H,-.5),_=x[o][0]):d>=c?(u.set(r,.5,H,-.5),_=x[o][1]):g<0?(u.set(r,b,.5,-.5),_=x[o][2]):g>=f&&(u.set(r,b,-.5,-.5),_=x[o][3]),m(r,0,(T=v[o]).x,T.y),m(r,0,-(T=v[_]).x,-T.y),d=n(Math.floor((.5+r[0])*c),0,c-1),g=n(Math.floor((.5-r[1])*f),0,f-1)}p.push(new w(_,d,g,z,t))}return e.set(this,p),p},w.prototype.hash=function(){return e(p.indexOf(this.face),this.z,this.y,this.x)},w.prototype.equals=function(t){return this.geometry===t.geometry&&this.face===t.face&&this.z===t.z&&this.y===t.y&&this.x===t.x},w.prototype.cmp=function(t){return h(this.z,t.z)||h(p.indexOf(this.face),p.indexOf(t.face))||h(this.y,t.y)||h(this.x,t.x)},w.prototype.str=function(){return"CubeTile("+tile.face+", "+tile.x+", "+tile.y+", "+tile.z+")"},t(b,o),b.prototype.width=function(){return this._size},b.prototype.height=function(){return this._size},b.prototype.tileWidth=function(){return this._tileSize},b.prototype.tileHeight=function(){return this._tileSize},b.prototype._validateWithParentLevel=function(t){var e=this.width(),i=this.height(),r=this.tileWidth(),o=this.tileHeight(),l=this.numHorizontalTiles(),s=this.numVerticalTiles(),n=t.width(),h=t.height(),a=t.tileWidth(),u=t.tileHeight(),c=t.numHorizontalTiles(),f=t.numVerticalTiles();if(e%n!=0)throw new Error("Level width must be multiple of parent level: "+e+" vs. "+n);if(i%h!=0)throw new Error("Level height must be multiple of parent level: "+i+" vs. "+h);if(l%c!=0)throw new Error("Number of horizontal tiles must be multiple of parent level: "+l+" ("+e+"/"+r+") vs. "+c+" ("+n+"/"+a+")");if(s%f!=0)throw new Error("Number of vertical tiles must be multiple of parent level: "+s+" ("+i+"/"+o+") vs. "+f+" ("+h+"/"+u+")")},H.prototype.maxTileSize=function(){for(var t=0,e=0;e<this.levelList.length;e++){var i=this.levelList[e];t=Math.max(t,i.tileWidth,i.tileHeight)}return t},H.prototype.levelTiles=function(t,e){var i=this.levelList.indexOf(t),r=t.numHorizontalTiles()-1,o=t.numVerticalTiles()-1;e=e||[];for(var l=0;l<p.length;l++)for(var s=p[l],n=0;n<=r;n++)for(var h=0;h<=o;h++)e.push(new w(s,n,h,i,this));return e},H.prototype._closestTile=function(t,e){var i=this._vec;c.set(i,0,0,1,1),c.transformMat4(i,i,t.inverseProjection());var r=1/0,o=null;for(var l in d){var s=d[l],h=1-u.dot(s,i);h<r&&(r=h,o=l)}for(var a=Math.max(Math.abs(i[0]),Math.abs(i[1]),Math.abs(i[2]))/.5,f=0;f<3;f++)i[f]=i[f]/a;var p=v[o];m(i,0,-p.x,-p.y);var y=this.levelList.indexOf(e),g=e.numHorizontalTiles(),z=e.numVerticalTiles();return new w(o,n(Math.floor((.5+i[0])*g),0,g-1),n(Math.floor((.5-i[1])*z),0,z-1),y,this)},H.prototype.visibleTiles=function(t,e,i){var r=this._viewSize,o=this._tileSearcher;if(i=i||[],t.size(r),0===r.width||0===r.height)return i;var l=this._closestTile(t,e);if(!o.search(t,l,i))throw new Error("Starting tile is not visible");return i},H.Tile=H.prototype.Tile=w,H.type=H.prototype.type="cube",w.type=w.prototype.type="cube",module.exports=H;
},{"../util/inherits":"W3pH","../util/hash":"ja5q","../TileSearcher":"nxci","../collections/LruMap":"dWxv","./Level":"FevE","./common":"TOoo","../util/clamp":"qqzv","../util/cmp":"DMww","../util/type":"HgvH","gl-matrix":"IF0X"}],"tgQa":[function(require,module,exports) {
"use strict";var t=require("../util/mod"),e=64;function s(t){if(null!=t&&(!isFinite(t)||Math.floor(t)!==t||t<1))throw new Error("Map: invalid capacity");this._capacity=t||e,this._keyBuckets=[],this._valBuckets=[];for(var s=0;s<this._capacity;s++)this._keyBuckets.push([]),this._valBuckets.push([]);this._size=0}s.prototype.get=function(e){for(var s=t(e.hash(),this._capacity),i=this._keyBuckets[s],r=0;r<i.length;r++){var h=i[r];if(e.equals(h))return this._valBuckets[s][r]}return null},s.prototype.set=function(e,s){for(var i=t(e.hash(),this._capacity),r=this._keyBuckets[i],h=this._valBuckets[i],a=0;a<r.length;a++){var u=r[a];if(e.equals(u)){var n=h[a];return r[a]=e,h[a]=s,n}}return r.push(e),h.push(s),this._size++,null},s.prototype.del=function(e){for(var s=t(e.hash(),this._capacity),i=this._keyBuckets[s],r=this._valBuckets[s],h=0;h<i.length;h++){var a=i[h];if(e.equals(a)){for(var u=r[h],n=h;n<i.length-1;n++)i[n]=i[n+1],r[n]=r[n+1];return i.length=i.length-1,r.length=r.length-1,this._size--,u}}return null},s.prototype.has=function(e){for(var s=t(e.hash(),this._capacity),i=this._keyBuckets[s],r=0;r<i.length;r++){var h=i[r];if(e.equals(h))return!0}return!1},s.prototype.size=function(){return this._size},s.prototype.clear=function(){for(var t=0;t<this._capacity;t++)this._keyBuckets[t].length=0,this._valBuckets[t].length=0;this._size=0},s.prototype.forEach=function(t){for(var e=0,s=0;s<this._capacity;s++)for(var i=this._keyBuckets[s],r=this._valBuckets[s],h=0;h<i.length;h++)t(i[h],r[h]),e+=1;return e},module.exports=s;
},{"../util/mod":"iEu3"}],"NsFD":[function(require,module,exports) {
"use strict";function t(t){return t.toPrecision(15)}module.exports=t;
},{}],"KtHo":[function(require,module,exports) {
"use strict";var t=require("../collections/Map"),e=require("../util/decimal"),i=require("../util/dom").setOverflowHidden,r=require("../util/dom").setNoPointerEvents,s=require("../util/dom").setNullTransform,l=require("../util/dom").setTransform,n=require("../util/clearOwnProperties"),o="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.css;function h(t,e){return t.cmp(e)}function u(e,l,n){this._root=e,this._browserQuirks=l;var o=document.createElement("div");e.appendChild(o),o.style.position="absolute",i(o),r(o),this._browserQuirks.useNullTransform&&s(o),this.domElement=o,this._oldTileList=[],this._newTileList=[],this._textureMap=new t}u.prototype.destroy=function(){this._root.removeChild(this.domElement),n(this)},u.prototype.startLayer=function(t,i){var r=this.domElement,s=this._root.clientWidth,l=this._root.clientHeight;r.style.left=e(s*i.left)+"px",r.style.top=e(l*i.top)+"px",r.style.width=e(s*i.width)+"px",r.style.height=e(l*i.height)+"px";var n=1,o=t.effects();o&&null!=o.opacity&&(n=o.opacity),r.style.opacity=n,this._newTileList.length=0,this._textureMap.clear()},u.prototype.renderTile=function(t,e){this._newTileList.push(t),this._textureMap.set(t,e)},u.prototype.endLayer=function(t,e){var i,r,s,n,u,d,a,c,p=this.domElement,f=this._oldTileList,m=this._newTileList,w=this._textureMap,_=t.view();if(p.children.length!==f.length)throw new Error("DOM not in sync with tile list");for(m.sort(h),s=f[i=0],a=p.firstChild,r=0;r<m.length;r++){for(n=m[r];i<f.length&&!(s.cmp(n)>=0);)c=a.nextSibling,p.removeChild(a),a=c,s=f[++i];if(!(d=(u=w.get(n))?u._canvas:null))throw new Error("Rendering tile with missing texture");if(s&&0===s.cmp(n)){if(d!=a)throw new Error("DOM not in sync with tile list");a=a.nextSibling,s=f[++i]}else p.insertBefore(d,a);l(d,this.calculateTransform(n,u,_)),o&&d.setAttribute("data-tile",n.str())}for(;a;)c=a.nextSibling,p.removeChild(a),a=c;if(p.children.length!==m.length)throw new Error("DOM not in sync with tile list");var y=this._oldTileList;this._oldTileList=this._newTileList,this._newTileList=y},module.exports=u;
},{"../collections/Map":"tgQa","../util/decimal":"NsFD","../util/dom":"Dw5L","../util/clearOwnProperties":"lrIP"}],"NKKo":[function(require,module,exports) {
"use strict";var e=require("../geometries/Cube").Tile,r=require("./CssBase"),t=require("../util/decimal"),a=require("../util/inherits");function s(r,t){this.constructor.super_.call(this,r,t,e)}a(s,r),s.prototype.calculateTransform=function(e,r,a){var s=this._browserQuirks.padSize,i=this._browserQuirks.reverseLevelDepth,p=this._browserQuirks.perspectiveNudge,l="",o=i?256-e.z:e.levelWidth(),c=a.size(),u=c.width,d=c.height;l+="translate3d("+t(u/2)+"px, "+t(d/2)+"px, 0px) ";var h=.5*d/Math.tan(a.fov()/2),n=h+p;l+="perspective("+t(h)+"px) translateZ("+t(n)+"px) ";var v=-a.roll(),x=-a.pitch(),f=a.yaw();l+="rotateZ("+t(v)+"rad) rotateX("+t(x)+"rad) rotateY("+t(f)+"rad) ";var w=-e.rotX(),X=e.rotY();l+="rotateX("+t(w)+"rad) rotateY("+t(X)+"rad) ";var Y=e.centerX()-e.scaleX()/2,b=-(e.centerY()+e.scaleY()/2)*o,g=-o/2;if(l+="translate3d("+t(Y*o)+"px, "+t(b)+"px, "+t(g)+"px) ",i){var m=o*e.scaleX()/e.width(),q=o*e.scaleY()/e.height();l+="scale("+t(m)+", "+t(q)+") "}var _=e.padLeft()?s:0,k=e.padTop()?s:0;return 0===_&&0===k||(l+="translate3d("+t(-_)+"px, "+t(-k)+"px, 0) "),l},module.exports=s;
},{"../geometries/Cube":"hMCd","./CssBase":"KtHo","../util/decimal":"NsFD","../util/inherits":"W3pH"}],"uFqj":[function(require,module,exports) {
"use strict";var t=require("../util/inherits"),e=require("../util/hash"),i=require("../TileSearcher"),r=require("../collections/LruMap"),h=require("./Level"),o=require("./common").makeLevelList,l=require("./common").makeSelectableLevelList,s=require("../util/clamp"),n=require("../util/mod"),u=require("../util/cmp"),p=require("../util/type"),a=require("gl-matrix").vec2,v=require("gl-matrix").vec4,c=64,y=[[0,1],[1,0],[0,-1],[-1,0]];function f(t,e,i,r){this.x=t,this.y=e,this.z=i,this._geometry=r,this._level=r.levelList[i]}function g(t){this.constructor.super_.call(this,t),this._width=t.width,this._height=t.height,this._tileWidth=t.tileWidth,this._tileHeight=t.tileHeight}function d(t){if("array"!==p(t))throw new Error("Level list must be an array");this.levelList=o(t,g),this.selectableLevelList=l(this.levelList);for(var e=1;e<this.levelList.length;e++)this.levelList[e]._validateWithParentLevel(this.levelList[e-1]);this._tileSearcher=new i(this),this._neighborsCache=new r(c),this._vec=v.create(),this._viewSize={}}f.prototype.rotX=function(){return 0},f.prototype.rotY=function(){return 0},f.prototype.centerX=function(){var t=this._level.width(),e=this._level.tileWidth();return(this.x*e+.5*this.width())/t-.5},f.prototype.centerY=function(){var t=this._level.height(),e=this._level.tileHeight();return.5-(this.y*e+.5*this.height())/t},f.prototype.scaleX=function(){var t=this._level.width();return this.width()/t},f.prototype.scaleY=function(){var t=this._level.height();return this.height()/t},f.prototype.width=function(){var t=this._level.width(),e=this._level.tileWidth();return this.atRightEdge()&&n(t,e)||e},f.prototype.height=function(){var t=this._level.height(),e=this._level.tileHeight();return this.atBottomEdge()&&n(t,e)||e},f.prototype.levelWidth=function(){return this._level.width()},f.prototype.levelHeight=function(){return this._level.height()},f.prototype.atTopLevel=function(){return 0===this.z},f.prototype.atBottomLevel=function(){return this.z===this._geometry.levelList.length-1},f.prototype.atTopEdge=function(){return 0===this.y},f.prototype.atBottomEdge=function(){return this.y===this._level.numVerticalTiles()-1},f.prototype.atLeftEdge=function(){return 0===this.x},f.prototype.atRightEdge=function(){return this.x===this._level.numHorizontalTiles()-1},f.prototype.padTop=function(){return!1},f.prototype.padBottom=function(){return!this.atBottomEdge()},f.prototype.padLeft=function(){return!1},f.prototype.padRight=function(){return!this.atRightEdge()},f.prototype.vertices=function(t){t||(t=[a.create(),a.create(),a.create(),a.create()]);var e=this.centerX()-this.scaleX()/2,i=this.centerX()+this.scaleX()/2,r=this.centerY()-this.scaleY()/2,h=this.centerY()+this.scaleY()/2;return a.set(t[0],e,h),a.set(t[1],i,h),a.set(t[2],i,r),a.set(t[3],e,r),t},f.prototype.parent=function(){if(this.atTopLevel())return null;var t=this._geometry,e=this.z-1;return new f(Math.floor(this.x/2),Math.floor(this.y/2),e,t)},f.prototype.children=function(t){if(this.atBottomLevel())return null;var e=this._geometry,i=this.z+1;return(t=t||[]).push(new f(2*this.x,2*this.y,i,e)),t.push(new f(2*this.x,2*this.y+1,i,e)),t.push(new f(2*this.x+1,2*this.y,i,e)),t.push(new f(2*this.x+1,2*this.y+1,i,e)),t},f.prototype.neighbors=function(){var t=this._geometry,e=t._neighborsCache,i=e.get(this);if(i)return i;for(var r=this.x,h=this.y,o=this.z,l=this._level,s=l.numHorizontalTiles()-1,n=l.numVerticalTiles()-1,u=[],p=0;p<y.length;p++){var a=r+y[p][0],v=h+y[p][1],c=o;0<=a&&a<=s&&0<=v&&v<=n&&u.push(new f(a,v,c,t))}return e.set(this,u),u},f.prototype.hash=function(){return e(this.z,this.y,this.x)},f.prototype.equals=function(t){return this.geometry===t.geometry&&this.z===t.z&&this.y===t.y&&this.x===t.x},f.prototype.cmp=function(t){return u(this.z,t.z)||u(this.y,t.y)||u(this.x,t.x)},f.prototype.str=function(){return"FlatTile("+tile.x+", "+tile.y+", "+tile.z+")"},t(g,h),g.prototype.width=function(){return this._width},g.prototype.height=function(){return this._height},g.prototype.tileWidth=function(){return this._tileWidth},g.prototype.tileHeight=function(){return this._tileHeight},g.prototype._validateWithParentLevel=function(t){var e=this.width(),i=this.height(),r=this.tileWidth(),h=this.tileHeight(),o=t.width(),l=t.height(),s=t.tileWidth(),n=t.tileHeight();return e%o!=0?new Error("Level width must be multiple of parent level: "+e+" vs. "+o):i%l!=0?new Error("Level height must be multiple of parent level: "+i+" vs. "+l):r%s!=0?new Error("Level tile width must be multiple of parent level: "+r+" vs. "+s):h%n!=0?new Error("Level tile height must be multiple of parent level: "+h+" vs. "+n):void 0},d.prototype.maxTileSize=function(){for(var t=0,e=0;e<this.levelList.length;e++){var i=this.levelList[e];t=Math.max(t,i.tileWidth,i.tileHeight)}return t},d.prototype.levelTiles=function(t,e){var i=this.levelList.indexOf(t),r=t.numHorizontalTiles()-1,h=t.numVerticalTiles()-1;e||(e=[]);for(var o=0;o<=r;o++)for(var l=0;l<=h;l++)e.push(new f(o,l,i,this));return e},d.prototype._closestTile=function(t,e){var i=this._vec;v.set(i,0,0,1,1),v.transformMat4(i,i,t.inverseProjection());var r=.5+i[0],h=.5-i[1],o=this.levelList.indexOf(e),l=e.width(),n=e.height(),u=e.tileWidth(),p=e.tileHeight(),a=e.numHorizontalTiles(),c=e.numVerticalTiles();return new f(s(Math.floor(r*l/u),0,a-1),s(Math.floor(h*n/p),0,c-1),o,this)},d.prototype.visibleTiles=function(t,e,i){var r=this._viewSize,h=this._tileSearcher;if(i=i||[],t.size(r),0===r.width||0===r.height)return i;var o=this._closestTile(t,e);if(!h.search(t,o,i))throw new Error("Starting tile is not visible");return i},d.Tile=d.prototype.Tile=f,d.type=d.prototype.type="flat",f.type=f.prototype.type="flat",module.exports=d;
},{"../util/inherits":"W3pH","../util/hash":"ja5q","../TileSearcher":"nxci","../collections/LruMap":"dWxv","./Level":"FevE","./common":"TOoo","../util/clamp":"qqzv","../util/mod":"iEu3","../util/cmp":"DMww","../util/type":"HgvH","gl-matrix":"IF0X"}],"ibYP":[function(require,module,exports) {
"use strict";var e=require("../geometries/Flat").Tile,t=require("./CssBase"),r=require("../util/decimal"),a=require("../util/inherits");function s(t,r){this.constructor.super_.call(this,t,r,e)}a(s,t),s.prototype.calculateTransform=function(e,t,a){var s=this._browserQuirks.padSize,l="",i=a.width(),n=a.height();l+="translateX("+r(i/2)+"px) translateY("+r(n/2)+"px) ";var o=i/a._zoomX(),p=n/a._zoomY(),u=e.centerX()-e.scaleX()/2+.5,c=(.5-e.centerY()-e.scaleY()/2)*p;l+="translateX("+r(u*o)+"px) translateY("+r(c)+"px) ";var x=-a.x()*o,h=-a.y()*p;l+="translateX("+r(x)+"px) translateY("+r(h)+"px) ";var v=e.padLeft()?s:0,d=e.padTop()?s:0;0===v&&0===d||(l+="translateX("+r(-v)+"px) translateY("+r(-d)+"px) ");var X=o/e.levelWidth(),Y=p/e.levelHeight();return l+="scale("+r(X)+", "+r(Y)+") "},module.exports=s;
},{"../geometries/Flat":"uFqj","./CssBase":"KtHo","../util/decimal":"NsFD","../util/inherits":"W3pH"}],"UxGI":[function(require,module,exports) {
"use strict";var t=require("../collections/Map"),e=require("../util/clearOwnProperties");function s(t,e){return t.cmp(e)}function i(e,s,i,r){this._flashElement=e,this._layerId=s,this._quirks=i,this._tileList=[],this._textureMap=new t,this._layerCreated=!1}i.prototype.destroy=function(){this._layerCreated&&this._flashElement.destroyLayer(this._layerId),e(this)},i.prototype.startLayer=function(t,e){this._flashElement.isReady&&this._flashElement.isReady()&&(this._layerCreated||(this._flashElement.createLayer(this._layerId),this._layerCreated=!0),this._tileList.length=0,this._textureMap.clear())},i.prototype.renderTile=function(t,e){this._tileList.push(t),this._textureMap.set(t,e)},i.prototype.endLayer=function(t,e){this._flashElement.isReady&&this._flashElement.isReady()&&(this._tileList.sort(s),this._renderOnFlash(t,e))},module.exports=i;
},{"../collections/Map":"tgQa","../util/clearOwnProperties":"lrIP"}],"xiJL":[function(require,module,exports) {
"use strict";function t(t){return 180*t/Math.PI}module.exports=t;
},{}],"rp01":[function(require,module,exports) {
"use strict";var e=require("./FlashBase"),t=require("../geometries/Cube").Tile,i=require("../util/inherits"),r=require("../util/radToDeg");function h(e,i,r){this.constructor.super_.call(this,e,i,r,t),this._flashTileList=[]}i(h,e),h.prototype._renderOnFlash=function(e,t){var i=this._flashElement,h=this._layerId,s=this._quirks.padSize,a=this._tileList,l=this._textureMap,o=this._flashTileList;o.length=0;for(var n=0;n<a.length;n++){var d=a[n],u=l.get(d);if(!u)throw new Error("Rendering tile with missing texture");var p=d.padTop()?s:0,c=d.padBottom()?s:0,f=d.padLeft()?s:0,g=d.padRight()?s:0;o.push({textureId:u._textureId,face:d.face,width:d.width(),height:d.height(),centerX:d.centerX(),centerY:d.centerY(),rotX:r(d.rotX()),rotY:r(d.rotY()),levelSize:d.levelWidth(),padTop:p,padBottom:c,padLeft:f,padRight:g})}var _=this._flashElement.clientWidth,v=this._flashElement.clientHeight,w=_*t.x,m=v*t.y,T=_*t.width,x=v*t.height,y=1,q=e.effects();q&&null!=q.opacity&&(y=q.opacity);var L=e.view(),E=L.yaw(),X=L.pitch(),Y=L.roll(),B=L.fov();i.drawCubeTiles(h,T,x,w,m,y,E,X,Y,B,o)},module.exports=h;
},{"./FlashBase":"UxGI","../geometries/Cube":"hMCd","../util/inherits":"W3pH","../util/radToDeg":"xiJL"}],"PbPy":[function(require,module,exports) {
"use strict";var e=require("./FlashBase"),t=require("../geometries/Flat").Tile,i=require("../util/inherits");function h(e,i,h){this.constructor.super_.call(this,e,i,h,t),this._flashTileList=[]}i(h,e),h.prototype._renderOnFlash=function(e,t){var i=this._flashElement,h=this._layerId,l=this._quirks.padSize,r=this._tileList,s=this._textureMap,a=this._flashTileList;a.length=0;for(var n=0;n<r.length;n++){var o=r[n],d=s.get(o);if(!d)throw new Error("Rendering tile with missing texture");var c=o.padTop()?l:0,p=o.padBottom()?l:0,u=o.padLeft()?l:0,g=o.padRight()?l:0;a.push({textureId:d._textureId,width:o.width(),height:o.height(),centerX:o.centerX(),centerY:o.centerY(),scaleX:o.scaleX(),scaleY:o.scaleY(),levelWidth:o.levelWidth(),levelHeight:o.levelHeight(),padTop:c,padBottom:p,padLeft:u,padRight:g})}var _=this._flashElement.clientWidth,f=this._flashElement.clientHeight,v=_*t.x,m=f*t.y,w=_*t.width,x=f*t.height,y=1,T=e.effects();T&&null!=T.opacity&&(y=T.opacity);var L=e.view(),X=L.x(),Y=L.y(),q=L._zoomX(),E=L._zoomY();i.drawFlatTiles(h,w,x,v,m,y,X,Y,q,E,a)},module.exports=h;
},{"./FlashBase":"UxGI","../geometries/Flat":"uFqj","../util/inherits":"W3pH"}],"BE7j":[function(require,module,exports) {
"use strict";var e=require("./WebGlCube"),r=require("./WebGlFlat"),t=require("./WebGlEquirect"),i=require("./CssCube"),a=require("./CssFlat"),s=require("./FlashCube"),l=require("./FlashFlat");function u(u){switch(u.type){case"webgl":u.registerRenderer("flat","flat",r),u.registerRenderer("cube","rectilinear",e),u.registerRenderer("equirect","rectilinear",t);break;case"css":u.registerRenderer("flat","flat",a),u.registerRenderer("cube","rectilinear",i);break;case"flash":u.registerRenderer("flat","flat",l),u.registerRenderer("cube","rectilinear",s);break;default:throw new Error("Unknown stage type: "+u.type)}}module.exports=u;
},{"./WebGlCube":"WZBv","./WebGlFlat":"WZBv","./WebGlEquirect":"jXcL","./CssCube":"NKKo","./CssFlat":"ibYP","./FlashCube":"rp01","./FlashFlat":"PbPy"}],"Dcnk":[function(require,module,exports) {
"use strict";var t=require("../util/inherits"),e=require("../util/hash"),r=require("../util/cmp"),i=require("./common"),o=require("./Level"),n=require("../util/type");function p(t,e){this.z=t,this._geometry=e,this._level=e.levelList[t]}function u(t){this.constructor.super_.call(this,t),this._width=t.width}function l(t){if("array"!==n(t))throw new Error("Level list must be an array");this.levelList=i.makeLevelList(t,u),this.selectableLevelList=i.makeSelectableLevelList(this.levelList)}p.prototype.rotX=function(){return 0},p.prototype.rotY=function(){return 0},p.prototype.centerX=function(){return.5},p.prototype.centerY=function(){return.5},p.prototype.scaleX=function(){return 1},p.prototype.scaleY=function(){return 1},p.prototype.width=function(){return this._level.tileWidth()},p.prototype.height=function(){return this._level.tileHeight()},p.prototype.levelWidth=function(){return this._level.width()},p.prototype.levelHeight=function(){return this._level.height()},p.prototype.atTopLevel=function(){return 0===this.z},p.prototype.atBottomLevel=function(){return this.z===this._geometry.levelList.length-1},p.prototype.atTopEdge=function(){return!0},p.prototype.atBottomEdge=function(){return!0},p.prototype.atLeftEdge=function(){return!0},p.prototype.atRightEdge=function(){return!0},p.prototype.padTop=function(){return!1},p.prototype.padBottom=function(){return!1},p.prototype.padLeft=function(){return!1},p.prototype.padRight=function(){return!1},p.prototype.parent=function(){return this.atTopLevel()?null:new p(this.z-1,this._geometry)},p.prototype.children=function(t){return this.atBottomLevel()?null:((t=t||[]).push(new p(this.z+1,this._geometry)),t)},p.prototype.neighbors=function(){return[]},p.prototype.hash=function(){return e(this.z)},p.prototype.equals=function(t){return this.geometry===t.geometry&&this.z===t.z},p.prototype.cmp=function(t){return r(this.z,t.z)},p.prototype.str=function(){return"EquirectTile("+tile.z+")"},t(u,o),u.prototype.width=function(){return this._width},u.prototype.height=function(){return this._width/2},u.prototype.tileWidth=function(){return this._width},u.prototype.tileHeight=function(){return this._width/2},l.prototype.maxTileSize=function(){for(var t=0,e=0;e<this.levelList.length;e++){var r=this.levelList[e];t=Math.max(t,r.tileWidth,r.tileHeight)}return t},l.prototype.levelTiles=function(t,e){var r=this.levelList.indexOf(t);return(e=e||[]).push(new p(r,this)),e},l.prototype.visibleTiles=function(t,e,r){var i=new p(this.levelList.indexOf(e),this);(r=r||[]).length=0,r.push(i)},l.Tile=l.prototype.Tile=p,l.type=l.prototype.type="equirect",p.type=p.prototype.type="equirect",module.exports=l;
},{"../util/inherits":"W3pH","../util/hash":"ja5q","../util/cmp":"DMww","./common":"TOoo","./Level":"FevE","../util/type":"HgvH"}],"d8NZ":[function(require,module,exports) {
"use strict";function t(t,n,r){return 2*Math.atan(r*Math.tan(t/2)/n)}function n(n,r,o){return t(n,r,o)}function r(n,r,o){return t(n,r,Math.sqrt(r*r+o*o))}function o(n,r,o){return t(n,o,r)}function u(n,r,o){return t(n,o,Math.sqrt(r*r+o*o))}function e(n,r,o){return t(n,Math.sqrt(r*r+o*o),r)}function h(n,r,o){return t(n,Math.sqrt(r*r+o*o),o)}module.exports={convert:t,htov:n,htod:r,vtoh:o,vtod:u,dtoh:e,dtov:h};
},{}],"bQI0":[function(require,module,exports) {
"use strict";function e(e){return"number"==typeof e&&isFinite(e)}module.exports=e;
},{}],"Ejq7":[function(require,module,exports) {
"use strict";function r(){var r=arguments;return function(n){for(var t=n,u=0;u<r.length;u++){t=r[u].call(null,t)}return t}}module.exports=r;
},{}],"Q7EF":[function(require,module,exports) {
"use strict";var t=require("minimal-event-emitter"),i=require("gl-matrix").mat4,e=require("gl-matrix").vec4,r=require("../util/pixelRatio"),o=require("../util/convertFov"),h=require("../util/mod"),n=require("../util/real"),a=require("../util/clamp"),s=require("../util/decimal"),p=require("../util/compose"),l=require("../util/clearOwnProperties"),c=0,u=0,_=0,f=0,v=0,m=Math.PI/4,y=0,w=0,d=1e-6;function M(t,r){this._yaw=t&&null!=t.yaw?t.yaw:_,this._pitch=t&&null!=t.pitch?t.pitch:f,this._roll=t&&null!=t.roll?t.roll:v,this._fov=t&&null!=t.fov?t.fov:m,this._width=t&&null!=t.width?t.width:c,this._height=t&&null!=t.height?t.height:u,this._projectionCenterX=t&&null!=t.projectionCenterX?t.projectionCenterX:y,this._projectionCenterY=t&&null!=t.projectionCenterY?t.projectionCenterY:w,this._limiter=r||null,this._projMatrix=i.create(),this._invProjMatrix=i.create(),this._frustum=[e.create(),e.create(),e.create(),e.create(),e.create()],this._projectionChanged=!0,this._params={},this._fovs={},this._tmpVec=e.create(),this._update()}t(M),M.prototype.destroy=function(){l(this)},M.prototype.yaw=function(){return this._yaw},M.prototype.pitch=function(){return this._pitch},M.prototype.roll=function(){return this._roll},M.prototype.projectionCenterX=function(){return this._projectionCenterX},M.prototype.projectionCenterY=function(){return this._projectionCenterY},M.prototype.fov=function(){return this._fov},M.prototype.width=function(){return this._width},M.prototype.height=function(){return this._height},M.prototype.size=function(t){return(t=t||{}).width=this._width,t.height=this._height,t},M.prototype.parameters=function(t){return(t=t||{}).yaw=this._yaw,t.pitch=this._pitch,t.roll=this._roll,t.fov=this._fov,t},M.prototype.limiter=function(){return this._limiter},M.prototype.setYaw=function(t){this._resetParams(),this._params.yaw=t,this._update(this._params)},M.prototype.setPitch=function(t){this._resetParams(),this._params.pitch=t,this._update(this._params)},M.prototype.setRoll=function(t){this._resetParams(),this._params.roll=t,this._update(this._params)},M.prototype.setFov=function(t){this._resetParams(),this._params.fov=t,this._update(this._params)},M.prototype.setProjectionCenterX=function(t){this._resetParams(),this._params.projectionCenterX=t,this._update(this._params)},M.prototype.setProjectionCenterY=function(t){this._resetParams(),this._params.projectionCenterY=t,this._update(this._params)},M.prototype.offsetYaw=function(t){this.setYaw(this._yaw+t)},M.prototype.offsetPitch=function(t){this.setPitch(this._pitch+t)},M.prototype.offsetRoll=function(t){this.setRoll(this._roll+t)},M.prototype.offsetFov=function(t){this.setFov(this._fov+t)},M.prototype.setSize=function(t){this._resetParams(),this._params.width=t.width,this._params.height=t.height,this._update(this._params)},M.prototype.setParameters=function(t){this._resetParams(),this._params.yaw=t.yaw,this._params.pitch=t.pitch,this._params.roll=t.roll,this._params.fov=t.fov,this._params.projectionCenterX=t.projectionCenterX,this._params.projectionCenterY=t.projectionCenterY,this._update(this._params)},M.prototype.setLimiter=function(t){this._limiter=t||null,this._update()},M.prototype._resetParams=function(){var t=this._params;t.yaw=null,t.pitch=null,t.roll=null,t.fov=null,t.width=null,t.height=null},M.prototype._update=function(t){null==t&&(this._resetParams(),t=this._params);var i=this._yaw,e=this._pitch,r=this._roll,o=this._fov,h=this._projectionCenterX,a=this._projectionCenterY,s=this._width,p=this._height;if(t.yaw=null!=t.yaw?t.yaw:i,t.pitch=null!=t.pitch?t.pitch:e,t.roll=null!=t.roll?t.roll:r,t.fov=null!=t.fov?t.fov:o,t.width=null!=t.width?t.width:s,t.height=null!=t.height?t.height:p,t.projectionCenterX=null!=t.projectionCenterX?t.projectionCenterX:h,t.projectionCenterY=null!=t.projectionCenterY?t.projectionCenterY:a,this._limiter&&!(t=this._limiter(t)))throw new Error("Bad view limiter");var l=(t=this._normalize(t)).yaw,c=t.pitch,u=t.roll,_=t.fov,f=t.width,v=t.height,m=t.projectionCenterX,y=t.projectionCenterY;if(!(n(l)&&n(c)&&n(u)&&n(_)&&n(f)&&n(v)&&n(m)&&n(y)))throw new Error("Bad view - suspect a broken limiter");this._yaw=l,this._pitch=c,this._roll=u,this._fov=_,this._width=f,this._height=v,this._projectionCenterX=m,this._projectionCenterY=y,l===i&&c===e&&u===r&&_===o&&f===s&&v===p&&m===h&&y===a||(this._projectionChanged=!0,this.emit("change")),f===s&&v===p||this.emit("resize")},M.prototype._normalize=function(t){this._normalizeCoordinates(t);var i=o.htov(Math.PI,t.width,t.height),e=isNaN(i)?Math.PI:Math.min(Math.PI,i);return t.fov=a(t.fov,d,e-d),t},M.prototype._normalizeCoordinates=function(t){return"yaw"in t&&(t.yaw=h(t.yaw-Math.PI,-2*Math.PI)+Math.PI),"pitch"in t&&(t.pitch=h(t.pitch-Math.PI,-2*Math.PI)+Math.PI),"roll"in t&&(t.roll=h(t.roll-Math.PI,-2*Math.PI)+Math.PI),t},M.prototype.normalizeToClosest=function(t,i){var e=this._yaw,r=this._pitch,o=t.yaw,h=t.pitch,n=o-2*Math.PI,a=o+2*Math.PI;Math.abs(n-e)<Math.abs(o-e)?o=n:Math.abs(a-e)<Math.abs(o-e)&&(o=a);var s=h-2*Math.PI,p=h+2*Math.PI;return Math.abs(s-r)<Math.abs(h-r)?h=s:Math.abs(s-r)<Math.abs(h-r)&&(h=p),(i=i||{}).yaw=o,i.pitch=h,i},M.prototype.updateWithControlParameters=function(t){var i=this._fov,e=o.vtoh(i,this._width,this._height);isNaN(e)&&(e=i),this.offsetYaw(t.axisScaledX*e+2*t.x*e+t.yaw),this.offsetPitch(t.axisScaledY*i+2*t.y*e+t.pitch),this.offsetRoll(-t.roll),this.offsetFov(t.zoom*i)},M.prototype._updateProjection=function(){var t=this._projMatrix,e=this._invProjMatrix,r=this._frustum;if(this._projectionChanged){var h=this._width,n=this._height,a=this._fov,s=o.vtoh(a,h,n),p=h/n,l=this._projectionCenterX,c=this._projectionCenterY;if(0!==l||0!==c){var u=Math.atan(2*l*Math.tan(s/2)),_=Math.atan(2*c*Math.tan(a/2)),f=this._fovs;f.leftDegrees=180*(s/2+u)/Math.PI,f.rightDegrees=180*(s/2-u)/Math.PI,f.upDegrees=180*(a/2+_)/Math.PI,f.downDegrees=180*(a/2-_)/Math.PI,i.perspectiveFromFieldOfView(t,f,-1,1)}else i.perspective(t,a,p,-1,1);i.rotateZ(t,t,this._roll),i.rotateX(t,t,this._pitch),i.rotateY(t,t,this._yaw),i.invert(e,t),this._matrixToFrustum(t,r),this._projectionChanged=!1}},M.prototype._matrixToFrustum=function(t,i){e.set(i[0],t[3]+t[0],t[7]+t[4],t[11]+t[8],0),e.set(i[1],t[3]-t[0],t[7]-t[4],t[11]-t[8],0),e.set(i[2],t[3]+t[1],t[7]+t[5],t[11]+t[9],0),e.set(i[3],t[3]-t[1],t[7]-t[5],t[11]-t[9],0),e.set(i[4],t[3]+t[2],t[7]+t[6],t[11]+t[10],0)},M.prototype.projection=function(){return this._updateProjection(),this._projMatrix},M.prototype.inverseProjection=function(){return this._updateProjection(),this._invProjMatrix},M.prototype.intersects=function(t){this._updateProjection();for(var i=this._frustum,r=this._tmpVec,o=0;o<i.length;o++){for(var h=i[o],n=!1,a=0;a<t.length;a++){var s=t[a];e.set(r,s[0],s[1],s[2],0),e.dot(h,r)>=0&&(n=!0)}if(!n)return!1}return!0},M.prototype.selectLevel=function(t){for(var i=r()*this._height,e=Math.tan(.5*this._fov),o=0;o<t.length;o++){var h=t[o];if(e*h.height()>=i)return h}return t[t.length-1]},M.prototype.coordinatesToScreen=function(t,i){var r=this._tmpVec;i||(i={});var o=this._width,h=this._height;if(o<=0||h<=0)return i.x=null,i.y=null,null;var n=t.yaw,a=t.pitch,s=Math.sin(n)*Math.cos(a),p=-Math.sin(t.pitch),l=-Math.cos(n)*Math.cos(a);return e.set(r,s,p,l,1),e.transformMat4(r,r,this.projection()),r[3]>=0?(i.x=o*(r[0]/r[3]+1)/2,i.y=h*(1-r[1]/r[3])/2,i):(i.x=null,i.y=null,null)},M.prototype.screenToCoordinates=function(t,i){var r=this._tmpVec;i||(i={});var o=this._width,h=this._height,n=2*t.x/o-1,a=1-2*t.y/h;e.set(r,n,a,1,1),e.transformMat4(r,r,this.inverseProjection());var s=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);return i.yaw=Math.atan2(r[0],-r[2]),i.pitch=Math.acos(r[1]/s)-Math.PI/2,this._normalizeCoordinates(i),i},M.prototype.coordinatesToPerspectiveTransform=function(t,i,e){e=e||"";var r=this._height,o=this._width,h=this._fov,n=.5*r/Math.tan(h/2),a="";return a+="translateX("+s(o/2)+"px) ",a+="translateY("+s(r/2)+"px) ",a+="translateX(-50%) translateY(-50%) ",a+="perspective("+s(n)+"px) ",a+="translateZ("+s(n)+"px) ",a+="rotateZ("+s(-this._roll)+"rad) ",a+="rotateX("+s(-this._pitch)+"rad) ",a+="rotateY("+s(this._yaw)+"rad) ",a+="rotateY("+s(-t.yaw)+"rad) ",a+="rotateX("+s(t.pitch)+"rad) ",a+="translateZ("+s(-i)+"px) ",a+=e+" "},M.limit={yaw:function(t,i){return function(e){return e.yaw=a(e.yaw,t,i),e}},pitch:function(t,i){return function(e){return e.pitch=a(e.pitch,t,i),e}},roll:function(t,i){return function(e){return e.roll=a(e.roll,t,i),e}},hfov:function(t,i){return function(e){var r=e.width,h=e.height;if(r>0&&h>0){var n=o.htov(t,r,h),s=o.htov(i,r,h);e.fov=a(e.fov,n,s)}return e}},vfov:function(t,i){return function(e){return e.fov=a(e.fov,t,i),e}},resolution:function(t){return function(i){var e=i.height;if(e){var o=r()*e,h=2*Math.atan(o/t);i.fov=a(i.fov,h,1/0)}return i}},traditional:function(t,i,e){return e=null!=e?e:i,p(M.limit.resolution(t),M.limit.vfov(0,i),M.limit.hfov(0,e),M.limit.pitch(-Math.PI/2,Math.PI/2))}},M.type=M.prototype.type="rectilinear",module.exports=M;
},{"minimal-event-emitter":"lNC2","gl-matrix":"IF0X","../util/pixelRatio":"AQTT","../util/convertFov":"d8NZ","../util/mod":"iEu3","../util/real":"bQI0","../util/clamp":"qqzv","../util/decimal":"NsFD","../util/compose":"Ejq7","../util/clearOwnProperties":"lrIP"}],"p35M":[function(require,module,exports) {
"use strict";var t=require("minimal-event-emitter"),i=require("gl-matrix").mat4,o=require("gl-matrix").vec4,e=require("../util/pixelRatio"),r=require("../util/real"),s=require("../util/clamp"),h=require("../util/clearOwnProperties"),n=0,a=0,u=.5,p=.5,m=1,_=[1,0,1,0],c=[-1,-1,1,1],l=1e-6;function f(t,e){if(!t||null==t.mediaAspectRatio)throw new Error("mediaAspectRatio must be defined");this._x=t&&null!=t.x?t.x:u,this._y=t&&null!=t.y?t.y:p,this._zoom=t&&null!=t.zoom?t.zoom:m,this._mediaAspectRatio=t.mediaAspectRatio,this._width=t&&null!=t.width?t.width:n,this._height=t&&null!=t.height?t.height:a,this._limiter=e||null,this._projMatrix=i.create(),this._invProjMatrix=i.create(),this._frustum=[0,0,0,0],this._projectionChanged=!0,this._params={},this._vec=o.create(),this._update()}t(f),f.prototype.destroy=function(){h(this)},f.prototype.x=function(){return this._x},f.prototype.y=function(){return this._y},f.prototype.zoom=function(){return this._zoom},f.prototype.mediaAspectRatio=function(){return this._mediaAspectRatio},f.prototype.width=function(){return this._width},f.prototype.height=function(){return this._height},f.prototype.size=function(t){return(t=t||{}).width=this._width,t.height=this._height,t},f.prototype.parameters=function(t){return(t=t||{}).x=this._x,t.y=this._y,t.zoom=this._zoom,t.mediaAspectRatio=this._mediaAspectRatio,t},f.prototype.limiter=function(){return this._limiter},f.prototype.setX=function(t){this._resetParams(),this._params.x=t,this._update(this._params)},f.prototype.setY=function(t){this._resetParams(),this._params.y=t,this._update(this._params)},f.prototype.setZoom=function(t){this._resetParams(),this._params.zoom=t,this._update(this._params)},f.prototype.offsetX=function(t){this.setX(this._x+t)},f.prototype.offsetY=function(t){this.setY(this._y+t)},f.prototype.offsetZoom=function(t){this.setZoom(this._zoom+t)},f.prototype.setMediaAspectRatio=function(t){this._resetParams(),this._params.mediaAspectRatio=t,this._update(this._params)},f.prototype.setSize=function(t){this._resetParams(),this._params.width=t.width,this._params.height=t.height,this._update(this._params)},f.prototype.setParameters=function(t){this._resetParams(),this._params.x=t.x,this._params.y=t.y,this._params.zoom=t.zoom,this._params.mediaAspectRatio=t.mediaAspectRatio,this._update(this._params)},f.prototype.setLimiter=function(t){this._limiter=t||null,this._update()},f.prototype._resetParams=function(){var t=this._params;t.x=null,t.y=null,t.zoom=null,t.mediaAspectRatio=null,t.width=null,t.height=null},f.prototype._update=function(t){null==t&&(this._resetParams(),t=this._params);var i=this._x,o=this._y,e=this._zoom,h=this._mediaAspectRatio,n=this._width,a=this._height;if(t.x=null!=t.x?t.x:i,t.y=null!=t.y?t.y:o,t.zoom=null!=t.zoom?t.zoom:e,t.mediaAspectRatio=null!=t.mediaAspectRatio?t.mediaAspectRatio:h,t.width=null!=t.width?t.width:n,t.height=null!=t.height?t.height:a,this._limiter&&!(t=this._limiter(t)))throw new Error("Bad view limiter");var u=t.x,p=t.y,m=t.zoom,_=t.mediaAspectRatio,c=t.width,f=t.height;if(!(r(u)&&r(p)&&r(m)&&r(_)&&r(c)&&r(f)))throw new Error("Bad view - suspect a broken limiter");m=s(m,l,1/0),this._x=u,this._y=p,this._zoom=m,this._mediaAspectRatio=_,this._width=c,this._height=f,u===i&&p===o&&m===e&&_===h&&c===n&&f===a||(this._projectionChanged=!0,this.emit("change")),c===n&&f===a||this.emit("resize")},f.prototype._zoomX=function(){return this._zoom},f.prototype._zoomY=function(){var t=this._mediaAspectRatio,i=this._width/this._height,o=this._zoom,e=o*t/i;return isNaN(e)&&(e=o),e},f.prototype.updateWithControlParameters=function(t){var i=this.zoom(),o=this._zoomX(),e=this._zoomY();this.offsetX(t.axisScaledX*o+t.x*i),this.offsetY(t.axisScaledY*e+t.y*i),this.offsetZoom(t.zoom*i)},f.prototype._updateProjection=function(){var t=this._projMatrix,o=this._invProjMatrix,e=this._frustum;if(this._projectionChanged){var r=this._x,s=this._y,h=this._zoomX(),n=this._zoomY(),a=e[0]=.5-s+.5*n,u=e[1]=r-.5+.5*h,p=e[2]=.5-s-.5*n,m=e[3]=r-.5-.5*h;i.ortho(t,m,u,p,a,-1,1),i.invert(o,t),this._projectionChanged=!1}},f.prototype.projection=function(){return this._updateProjection(),this._projMatrix},f.prototype.inverseProjection=function(){return this._updateProjection(),this._invProjMatrix},f.prototype.intersects=function(t){this._updateProjection();for(var i=this._frustum,o=0;o<i.length;o++){for(var e=i[o],r=_[o],s=c[o],h=!1,n=0;n<t.length;n++){var a=t[n];if(s<0&&a[r]<e||s>0&&a[r]>e){h=!0;break}}if(!h)return!1}return!0},f.prototype.selectLevel=function(t){for(var i=e()*this.width(),o=this._zoom,r=0;r<t.length;r++){var s=t[r];if(o*s.width()>=i)return s}return t[t.length-1]},f.prototype.coordinatesToScreen=function(t,i){var e=this._vec;i||(i={});var r=this._width,s=this._height;if(r<=0||s<=0)return i.x=null,i.y=null,null;var h=t&&null!=t.x?t.x:u,n=t&&null!=t.y?t.y:p;o.set(e,h-.5,.5-n,-1,1),o.transformMat4(e,e,this.projection());for(var a=0;a<3;a++)e[a]/=e[3];return i.x=r*(e[0]+1)/2,i.y=s*(1-e[1])/2,i},f.prototype.screenToCoordinates=function(t,i){var e=this._vec;i||(i={});var r=this._width,s=this._height,h=2*t.x/r-1,n=1-2*t.y/s;return o.set(e,h,n,1,1),o.transformMat4(e,e,this.inverseProjection()),i.x=.5+e[0],i.y=.5-e[1],i},f.limit={x:function(t,i){return function(o){return o.x=s(o.x,t,i),o}},y:function(t,i){return function(o){return o.y=s(o.y,t,i),o}},zoom:function(t,i){return function(o){return o.zoom=s(o.zoom,t,i),o}},resolution:function(t){return function(i){if(i.width<=0||i.height<=0)return i;var o=i.width,r=e()*o/t;return i.zoom=s(i.zoom,r,1/0),i}},visibleX:function(t,i){return function(o){var e=i-t;o.zoom>e&&(o.zoom=e);var r=t+.5*o.zoom,h=i-.5*o.zoom;return o.x=s(o.x,r,h),o}},visibleY:function(t,i){return function(o){if(o.width<=0||o.height<=0)return o;var e=o.width/o.height/o.mediaAspectRatio,r=(i-t)*e;o.zoom>r&&(o.zoom=r);var h=t+.5*o.zoom/e,n=i-.5*o.zoom/e;return o.y=s(o.y,h,n),o}},letterbox:function(){return function(t){if(t.width<=0||t.height<=0)return t;var i,o,e,r,h=t.width/t.height,n=h/t.mediaAspectRatio;return t.mediaAspectRatio>=h&&(t.zoom=Math.min(t.zoom,1)),t.mediaAspectRatio<=h&&(t.zoom=Math.min(t.zoom,n)),t.zoom>1?i=o=.5:(i=0+.5*t.zoom/1,o=1-.5*t.zoom/1),t.zoom>n?e=r=.5:(e=0+.5*t.zoom/n,r=1-.5*t.zoom/n),t.x=s(t.x,i,o),t.y=s(t.y,e,r),t}}},f.type=f.prototype.type="flat",module.exports=f;
},{"minimal-event-emitter":"lNC2","gl-matrix":"IF0X","../util/pixelRatio":"AQTT","../util/real":"bQI0","../util/clamp":"qqzv","../util/clearOwnProperties":"lrIP"}],"BtbP":[function(require,module,exports) {
"use strict";var t=require("./WorkQueue"),e=require("../util/mod");function o(e){this._concurrency=e&&e.concurrency||1,this._paused=e&&!!e.paused||!1,this._pool=[];for(var o=0;o<this._concurrency;o++)this._pool.push(new t(e));this._next=0}o.prototype.length=function(){for(var t=0,e=0;e<this._pool.length;e++)t+=this._pool[e].length();return t},o.prototype.push=function(t,o){var r=this._next,s=this._pool[r].push(t,o);return this._next=e(this._next+1,this._concurrency),s},o.prototype.pause=function(){if(!this._paused){this._paused=!0;for(var t=0;t<this._concurrency;t++)this._pool[t].pause()}},o.prototype.resume=function(){if(this._paused){this._paused=!1;for(var t=0;t<this._concurrency;t++)this._pool[t].resume()}},module.exports=o;
},{"./WorkQueue":"fanG","../util/mod":"iEu3"}],"Sw6I":[function(require,module,exports) {
"use strict";function t(){}module.exports=t;
},{}],"XUgy":[function(require,module,exports) {
"use strict";var l=require("./noop");function n(){var n=Array.prototype.slice.call(arguments,0);return function(){var r=n.slice(0),t=null,e=null,u=arguments.length?Array.prototype.slice.call(arguments,0,arguments.length-1):[],i=arguments.length?arguments[arguments.length-1]:l;return u.unshift(null),function l(){if(arguments[0])return t=e=null,void i.apply(null,arguments);if(!r.length)return t=e=null,void i.apply(null,arguments);var n=t=r.shift(),u=Array.prototype.slice.call(arguments,1);u.push(l);var o=t.apply(null,u);if(n===t){if("function"!=typeof o)throw new Error("chain: chaining on non-cancellable function");e=o}}.apply(null,u),function(){e&&e.apply(null,arguments)}}}module.exports=n;
},{"./noop":"Sw6I"}],"MjRO":[function(require,module,exports) {
"use strict";function l(l,u){var n=null;return n=setTimeout(function(){null!=n&&(n=null,u(null))},l),function(){null!=n&&(clearTimeout(n),n=null,u.apply(null,arguments))}}module.exports=l;
},{}],"rSzd":[function(require,module,exports) {
"use strict";var r=require("minimal-event-emitter"),e=require("../NetworkError"),t=require("../collections/WorkPool"),n=require("../util/chain"),i=require("../util/delay"),u=require("../util/now"),o={x:"x",y:"y",z:"z",f:"face"},l="bdflru",a=4,c=1e4;function s(r,e){e=e||{},this._loadPool=new t({concurrency:e.concurrency||a}),this._retryDelay=e.retryDelay||c,this._retryMap={},this._sourceFromTile=r}function f(r){return new RegExp("\\{("+r+")\\}","g")}r(s),s.prototype.loadAsset=function(r,t,o){var l,a=this,c=this._retryDelay,s=this._retryMap,f=this._sourceFromTile(t),y=f.url,d=f.rect,h=r.loadImage.bind(r,y,d),v=s[y];if(null!=v){var p=u()-v;p<c?l=c-p:(l=0,delete s[y])}var w=i.bind(null,l);return n(w,function(r){return a._loadPool.push(h,function(n,i){n?(n instanceof e&&(s[y]=u(),a.emit("networkError",i,n)),r(n,t)):(delete s[y],r(null,t,i))})})(o)},s.fromString=function(r,e){var t=(e=e||{})&&e.cubeMapPreviewFaceOrder||l;return new s(e.cubeMapPreviewUrl?function(r){return 0===r.z?function(r){var n=t.indexOf(r.face)/6;return{url:e.cubeMapPreviewUrl,rect:{x:0,y:n,width:1,height:1/6}}}(r):n(r)}:n,e);function n(e){var t=r;for(var n in o){var i=o[n],u=f(n),l=e.hasOwnProperty(i)?e[i]:"";t=t.replace(u,l)}return{url:t}}},module.exports=s;
},{"minimal-event-emitter":"lNC2","../NetworkError":"WkWV","../collections/WorkPool":"BtbP","../util/chain":"XUgy","../util/delay":"MjRO","../util/now":"fllL"}],"oQsd":[function(require,module,exports) {
"use strict";function t(t){this._asset=t}t.prototype.asset=function(){return this._asset},t.prototype.loadAsset=function(t,s,e){var n=this,o=setTimeout(function(){e(null,s,n._asset)},0);return function(){clearTimeout(o),e.apply(null,arguments)}},module.exports=t;
},{}],"RMLf":[function(require,module,exports) {
"use strict";var t=require("./Static"),i=require("../util/inherits"),e=require("minimal-event-emitter"),r=require("../util/clearOwnProperties");function s(t){this.constructor.super_.call(this,t),this._timestamp=0}i(s,t),e(s),s.prototype.destroy=function(){r(this)},s.prototype.timestamp=function(){return this._timestamp},s.prototype.isDynamic=function(){return!0},s.prototype.markDirty=function(){this._timestamp++,this.emit("change")},module.exports=s;
},{"./Static":"rzhm","../util/inherits":"W3pH","minimal-event-emitter":"lNC2","../util/clearOwnProperties":"lrIP"}],"IVzu":[function(require,module,exports) {
"use strict";var t=require("../util/mod");function i(t){if(!isFinite(t)||Math.floor(t)!==t||t<0)throw new Error("LruSet: invalid capacity");this._capacity=t,this._elements=new Array(this._capacity),this._start=0,this._size=0}i.prototype._index=function(i){return t(this._start+i,this._capacity)},i.prototype.add=function(t){if(0===this._capacity)return t;this.remove(t);var i=this._size===this._capacity?this._elements[this._index(0)]:null;return this._elements[this._index(this._size)]=t,this._size<this._capacity?this._size++:this._start=this._index(1),i},i.prototype.remove=function(t){for(var i=0;i<this._size;i++){var e=this._elements[this._index(i)];if(t.equals(e)){for(var s=i;s<this._size-1;s++)this._elements[this._index(s)]=this._elements[this._index(s+1)];return this._size--,e}}return null},i.prototype.has=function(t){for(var i=0;i<this._size;i++)if(t.equals(this._elements[this._index(i)]))return!0;return!1},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._elements.length=0,this._start=0,this._size=0},i.prototype.forEach=function(t){for(var i=0,e=0;e<this._size;e++)t(this._elements[this._index(e)]),i+=1;return i},module.exports=i;
},{"../util/mod":"iEu3"}],"IcBt":[function(require,module,exports) {
"use strict";function r(r,n){for(var t in n)t in r||(r[t]=n[t]);return r}module.exports=r;
},{}],"rngS":[function(require,module,exports) {
"use strict";var l=require("./noop");function n(n){return function(){var t=arguments.length?Array.prototype.slice.call(arguments,0,arguments.length-1):[],u=arguments.length?arguments[arguments.length-1]:l,e=null,r=!1;function p(){!arguments[0]||r?u.apply(null,arguments):e=n.apply(null,t)}return t.push(p),p(!0),function(){r=!0,e.apply(null,arguments)}}}module.exports=n;
},{"./noop":"Sw6I"}],"oEpT":[function(require,module,exports) {
"use strict";var e=require("./collections/Map"),t=require("./collections/Set"),i=require("./collections/LruSet"),n=require("minimal-event-emitter"),r=require("./util/defaults"),s=require("./util/retry"),o=require("./util/chain"),l=require("./util/inherits"),a=require("./util/clearOwnProperties"),u="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.textureStore,h={IDLE:0,START:1,MARK:2,END:3},_={previouslyVisibleCacheSize:512},c=0;function p(){}function d(e,t){var i=this,n=c++;i._id=n,i._store=e,i._tile=t,i._asset=null,i._texture=null,i._changeHandler=function(){e.emit("textureInvalid",t)};var r=e.source(),l=e.stage(),a=r.loadAsset.bind(r),h=l.createTexture.bind(l),_=o(s(a),h);e.emit("textureStartLoad",t),u&&console.log("loading",n,t),i._cancel=_(l,t,function(r,s,o,l){if(i._cancel=null,r)return o&&o.destroy(),l&&l.destroy(),void(r instanceof p?(e.emit("textureCancel",t),u&&console.log("cancel",n,t)):(e.emit("textureError",t,r),u&&console.log("error",n,t)));i._texture=l,o.isDynamic()?(i._asset=o,o.addEventListener("change",i._changeHandler)):o.destroy(),e.emit("textureLoad",t),u&&console.log("load",n,t)})}function v(n,s,o){o=r(o||{},_),this._source=n,this._stage=s,this._state=h.IDLE,this._delimCount=0,this._itemMap=new e,this._visible=new t,this._previouslyVisible=new i(o.previouslyVisibleCacheSize),this._pinMap=new e,this._newVisible=new t,this._noLongerVisible=[],this._visibleAgain=[],this._evicted=[]}l(p,Error),d.prototype.asset=function(){return this._asset},d.prototype.texture=function(){return this._texture},d.prototype.destroy=function(){var e=this._id,t=this._store,i=this._tile,n=this._asset,r=this._texture,s=this._cancel;s?s(new p("Texture load cancelled")):(n&&(n.removeEventListener("change",this._changeHandler),n.destroy()),r&&r.destroy(),t.emit("textureUnload",i),u&&console.log("unload",e,i),a(this))},n(d),n(v),v.prototype.destroy=function(){this.clear(),a(this)},v.prototype.stage=function(){return this._stage},v.prototype.source=function(){return this._source},v.prototype.clear=function(){var e=this;e._evicted.length=0,e._itemMap.forEach(function(t){e._evicted.push(t)}),e._evicted.forEach(function(t){e._unloadTile(t)}),e._itemMap.clear(),e._visible.clear(),e._previouslyVisible.clear(),e._pinMap.clear(),e._newVisible.clear(),e._noLongerVisible.length=0,e._visibleAgain.length=0,e._evicted.length=0},v.prototype.clearNotPinned=function(){var e=this;e._evicted.length=0,e._itemMap.forEach(function(t){e._pinMap.has(t)||e._evicted.push(t)}),e._evicted.forEach(function(t){e._unloadTile(t)}),e._visible.clear(),e._previouslyVisible.clear(),e._evicted.length=0},v.prototype.startFrame=function(){if(this._state!==h.IDLE&&this._state!==h.START)throw new Error("TextureStore: startFrame called out of sequence");this._state=h.START,this._delimCount++},v.prototype.markTile=function(e){if(this._state!==h.START&&this._state!==h.MARK)throw new Error("TextureStore: markTile called out of sequence");this._state=h.MARK;var t=this._itemMap.get(e),i=t&&t.texture(),n=t&&t.asset();i&&n&&i.refresh(e,n),this._newVisible.add(e)},v.prototype.endFrame=function(){if(this._state!==h.START&&this._state!==h.MARK&&this._state!==h.END)throw new Error("TextureStore: endFrame called out of sequence");this._state=h.END,this._delimCount--,this._delimCount||(this._update(),this._state=h.IDLE)},v.prototype._update=function(){var e=this;e._noLongerVisible.length=0,e._visible.forEach(function(t){e._newVisible.has(t)||e._noLongerVisible.push(t)}),e._visibleAgain.length=0,e._newVisible.forEach(function(t){e._previouslyVisible.has(t)&&e._visibleAgain.push(t)}),e._visibleAgain.forEach(function(t){e._previouslyVisible.remove(t)}),e._evicted.length=0,e._noLongerVisible.forEach(function(t){var i=e._itemMap.get(t);if(i&&i.texture()){var n=e._previouslyVisible.add(t);null!=n&&e._evicted.push(n)}else i&&e._unloadTile(t)}),e._evicted.forEach(function(t){e._pinMap.has(t)||e._unloadTile(t)}),e._newVisible.forEach(function(t){e._itemMap.get(t)||e._loadTile(t)});var t=e._visible;e._visible=e._newVisible,e._newVisible=t,e._newVisible.clear(),e._noLongerVisible.length=0,e._visibleAgain.length=0,e._evicted.length=0},v.prototype._loadTile=function(e){if(this._itemMap.has(e))throw new Error("TextureStore: loading texture already in cache");var t=new d(this,e);this._itemMap.set(e,t)},v.prototype._unloadTile=function(e){var t=this._itemMap.del(e);if(!t)throw new Error("TextureStore: unloading texture not in cache");t.destroy()},v.prototype.asset=function(e){var t=this._itemMap.get(e);return t?t.asset():null},v.prototype.texture=function(e){var t=this._itemMap.get(e);return t?t.texture():null},v.prototype.pin=function(e){var t=(this._pinMap.get(e)||0)+1;return this._pinMap.set(e,t),this._itemMap.has(e)||this._loadTile(e),t},v.prototype.unpin=function(e){var t=this._pinMap.get(e);if(!t)throw new Error("TextureStore: unpin when not pinned");return--t>0?this._pinMap.set(e,t):(this._pinMap.del(e),this._visible.has(e)||this._previouslyVisible.has(e)||this._unloadTile(e)),t},v.prototype.query=function(e){var t=this._itemMap.get(e),i=this._pinMap.get(e)||0;return{visible:this._visible.has(e),previouslyVisible:this._previouslyVisible.has(e),hasAsset:null!=t&&null!=t.asset(),hasTexture:null!=t&&null!=t.texture(),pinned:0!==i,pinCount:i}},module.exports=v;
},{"./collections/Map":"tgQa","./collections/Set":"NjuQ","./collections/LruSet":"IVzu","minimal-event-emitter":"lNC2","./util/defaults":"IcBt","./util/retry":"rngS","./util/chain":"XUgy","./util/inherits":"W3pH","./util/clearOwnProperties":"lrIP"}],"o5ow":[function(require,module,exports) {
"use strict";function r(r,t){for(var e in t)r[e]=t[e];return r}module.exports=r;
},{}],"mzUT":[function(require,module,exports) {
"use strict";var e=require("minimal-event-emitter"),t=require("./util/extend"),r=require("./util/clearOwnProperties");function i(e,t,r,i,n){n=n||{};var s=this;this._source=e,this._geometry=t,this._view=r,this._textureStore=i,this._effects=n.effects||{},this._fixedLevelIndex=null,this._viewChangeHandler=function(){s.emit("viewChange",s.view())},this._view.addEventListener("change",this._viewChangeHandler),this._textureStoreChangeHandler=function(){s.emit("textureStoreChange",s.textureStore())},this._textureStore.addEventListener("textureLoad",this._textureStoreChangeHandler),this._textureStore.addEventListener("textureError",this._textureStoreChangeHandler),this._textureStore.addEventListener("textureInvalid",this._textureStoreChangeHandler)}e(i),i.prototype.destroy=function(){this._view.removeEventListener("change",this._viewChangeHandler),this._textureStore.removeEventListener("textureLoad",this._textureStoreChangeHandler),this._textureStore.removeEventListener("textureError",this._textureStoreChangeHandler),this._textureStore.removeEventListener("textureInvalid",this._textureStoreChangeHandler),r(this)},i.prototype.source=function(){return this._source},i.prototype.geometry=function(){return this._geometry},i.prototype.view=function(){return this._view},i.prototype.textureStore=function(){return this._textureStore},i.prototype.effects=function(){return this._effects},i.prototype.setEffects=function(e){this._effects=e,this.emit("effectsChange",this._effects)},i.prototype.mergeEffects=function(e){t(this._effects,e),this.emit("effectsChange",this._effects)},i.prototype.fixedLevel=function(){return this._fixedLevelIndex},i.prototype.setFixedLevel=function(e){if(e!==this._fixedLevelIndex){if(null!=e&&(e>=this._geometry.levelList.length||e<0))throw new Error("Level index out of range: "+e);this._fixedLevelIndex=e,this.emit("fixedLevelChange",this._fixedLevelIndex)}},i.prototype._selectLevel=function(){return null!=this._fixedLevelIndex?this._geometry.levelList[this._fixedLevelIndex]:this._view.selectLevel(this._geometry.selectableLevelList)},i.prototype.visibleTiles=function(e){var t=this._selectLevel();return this._geometry.visibleTiles(this._view,t,e)},i.prototype.pinLevel=function(e){for(var t=this._geometry.levelList[e],r=this._geometry.levelTiles(t),i=0;i<r.length;i++)this._textureStore.pin(r[i])},i.prototype.unpinLevel=function(e){for(var t=this._geometry.levelList[e],r=this._geometry.levelTiles(t),i=0;i<r.length;i++)this._textureStore.unpin(r[i])},i.prototype.pinFirstLevel=function(){return this.pinLevel(0)},i.prototype.unpinFirstLevel=function(){return this.unpinLevel(0)},module.exports=i;
},{"minimal-event-emitter":"lNC2","./util/extend":"o5ow","./util/clearOwnProperties":"lrIP"}],"M9KN":[function(require,module,exports) {
"use strict";var e=require("minimal-event-emitter"),t=require("./util/clearOwnProperties");function n(e){var t=this;this._stage=e,this._running=!1,this._rendering=!1,this._requestHandle=null,this._boundLoop=this._loop.bind(this),this._renderInvalidHandler=function(){t._rendering||t.renderOnNextFrame()},this._stage.addEventListener("renderInvalid",this._renderInvalidHandler)}e(n),n.prototype.destroy=function(){this.stop(),this._stage.removeEventListener("renderInvalid",this._renderInvalidHandler),t(this)},n.prototype.stage=function(){return this._stage},n.prototype.start=function(){this._running=!0,this.renderOnNextFrame()},n.prototype.stop=function(){this._requestHandle&&(window.cancelAnimationFrame(this._requestHandle),this._requestHandle=null),this._running=!1},n.prototype.renderOnNextFrame=function(){this._running&&!this._requestHandle&&(this._requestHandle=window.requestAnimationFrame(this._boundLoop))},n.prototype._loop=function(){if(!this._running)throw new Error("Render loop running while in stopped state");this._requestHandle=null,this._rendering=!0,this.emit("beforeRender"),this._rendering=!1,this._stage.render(),this.emit("afterRender")},module.exports=n;
},{"minimal-event-emitter":"lNC2","./util/clearOwnProperties":"lrIP"}],"CzyW":[function(require,module,exports) {
"use strict";function t(){this.velocity=null,this.friction=null,this.offset=null}function i(t,i){return t<0?Math.min(0,t+i):t>0?Math.max(0,t-i):0}t.equals=function(t,i){return t.velocity===i.velocity&&t.friction===i.friction&&t.offset===i.offset},t.prototype.equals=function(i){return t.equals(this,i)},t.prototype.update=function(t,i){t.offset&&(this.offset=this.offset||0,this.offset+=t.offset);var o=this.offsetFromVelocity(i);o&&(this.offset=this.offset||0,this.offset+=o),this.velocity=t.velocity,this.friction=t.friction},t.prototype.reset=function(){this.velocity=null,this.friction=null,this.offset=null},t.prototype.velocityAfter=function(t){return this.velocity?this.friction?i(this.velocity,this.friction*t):this.velocity:null},t.prototype.offsetFromVelocity=function(t){t=Math.min(t,this.nullVelocityTime());var i=this.velocityAfter(t);return(this.velocity+i)/2*t},t.prototype.nullVelocityTime=function(){return null==this.velocity?0:this.velocity&&!this.friction?1/0:Math.abs(this.velocity/this.friction)},module.exports=t;
},{}],"x80R":[function(require,module,exports) {
"use strict";var e=require("minimal-event-emitter"),t=require("./Dynamics"),i=require("../util/clearOwnProperties");function s(e,i,s,n,r){if(!e)throw new Error("KeyControlMethod: keyCode must be defined");if(!i)throw new Error("KeyControlMethod: parameter must be defined");if(!s)throw new Error("KeyControlMethod: velocity must be defined");if(!n)throw new Error("KeyControlMethod: friction must be defined");r=r||document,this._keyCode=e,this._parameter=i,this._velocity=s,this._friction=n,this._element=r,this._keydownHandler=this._handlePress.bind(this),this._keyupHandler=this._handleRelease.bind(this),this._blurHandler=this._handleBlur.bind(this),this._element.addEventListener("keydown",this._keydownHandler),this._element.addEventListener("keyup",this._keyupHandler),window.addEventListener("blur",this._blurHandler),this._dynamics=new t,this._pressing=!1}e(s),s.prototype.destroy=function(){this._element.removeEventListener("keydown",this._keydownHandler),this._element.removeEventListener("keyup",this._keyupHandler),window.removeEventListener("blur",this._blurHandler),i(this)},s.prototype._handlePress=function(e){e.keyCode===this._keyCode&&(this._pressing=!0,this._dynamics.velocity=this._velocity,this._dynamics.friction=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("active"))},s.prototype._handleRelease=function(e){e.keyCode===this._keyCode&&(this._pressing&&(this._dynamics.friction=this._friction,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive")),this._pressing=!1)},s.prototype._handleBlur=function(){this._dynamics.velocity=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive"),this._pressing=!1},module.exports=s;
},{"minimal-event-emitter":"lNC2","./Dynamics":"CzyW","../util/clearOwnProperties":"lrIP"}],"K0KY":[function(require,module,exports) {
var define;
var t;!function(e,i,n,r){"use strict";var s=["","webkit","moz","MS","ms","o"],o=i.createElement("div"),a="function",h=Math.round,u=Math.abs,c=Date.now;function l(t,e,i){return setTimeout(g(t,i),e)}function p(t,e,i){return!!Array.isArray(t)&&(f(t,i[e],i),!0)}function f(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==r)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function d(t,e,i){for(var n=Object.keys(e),s=0;s<n.length;)(!i||i&&t[n[s]]===r)&&(t[n[s]]=e[n[s]]),s++;return t}function v(t,e){return d(t,e,!0)}function m(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&d(n,i)}function g(t,e){return function(){return t.apply(e,arguments)}}function T(t,e){return typeof t==a?t.apply(e&&e[0]||r,e):t}function y(t,e){return t===r?e:t}function E(t,e,i){f(D(e),function(e){t.addEventListener(e,i,!1)})}function I(t,e,i){f(D(e),function(e){t.removeEventListener(e,i,!1)})}function A(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function _(t,e){return t.indexOf(e)>-1}function D(t){return t.trim().split(/\s+/g)}function S(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function w(t){return Array.prototype.slice.call(t,0)}function b(t,e,i){for(var n=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];S(r,o)<0&&n.push(t[s]),r[s]=o,s++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function C(t,e){for(var i,n,o=e[0].toUpperCase()+e.slice(1),a=0;a<s.length;){if((n=(i=s[a])?i+o:e)in t)return n;a++}return r}var R=1;function z(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}var N="ontouchstart"in e,P=C(e,"PointerEvent")!==r,M=N&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),O=25,x=1,X=2,Y=4,F=8,W=1,q=2,L=4,H=8,k=16,U=q|L,G=H|k,V=U|G,j=["x","y"],Z=["clientX","clientY"];function B(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){T(t.options.enable,[t])&&i.handler(e)},this.init()}function J(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,o=e&x&&n-s==0,a=e&(Y|F)&&n-s==0;i.isFirst=!!o,i.isFinal=!!a,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=K(e));s>1&&!i.firstMultiple?i.firstMultiple=K(e):1===s&&(i.firstMultiple=!1);var o=i.firstInput,a=i.firstMultiple,h=a?a.center:o.center,l=e.center=Q(n);e.timeStamp=c(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=et(h,l),e.distance=tt(h,l),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==x&&s.eventType!==Y||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=$(e.deltaX,e.deltaY),e.scale=a?(p=a.pointers,f=n,tt(f[0],f[1],Z)/tt(p[0],p[1],Z)):1,e.rotation=a?function(t,e){return et(e[1],e[0],Z)-et(t[1],t[0],Z)}(a.pointers,n):0,function(t,e){var i,n,s,o,a=t.lastInterval||e,h=e.timeStamp-a.timeStamp;if(e.eventType!=F&&(h>O||a.velocity===r)){var c=a.deltaX-e.deltaX,l=a.deltaY-e.deltaY,p=function(t,e,i){return{x:e/t||0,y:i/t||0}}(h,c,l);n=p.x,s=p.y,i=u(p.x)>u(p.y)?p.x:p.y,o=$(c,l),t.lastInterval=e}else i=a.velocity,n=a.velocityX,s=a.velocityY,o=a.direction;e.velocity=i,e.velocityX=n,e.velocityY=s,e.direction=o}(i,e);var p,f;var d=t.element;A(e.srcEvent.target,d)&&(d=e.srcEvent.target);e.target=d}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function K(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:h(t.pointers[i].clientX),clientY:h(t.pointers[i].clientY)},i++;return{timeStamp:c(),pointers:e,center:Q(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Q(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:h(i/e),y:h(n/e)}}function $(t,e){return t===e?W:u(t)>=u(e)?t>0?q:L:e>0?H:k}function tt(t,e,i){i||(i=j);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function et(t,e,i){i||(i=j);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}B.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&I(this.element,this.evEl,this.domHandler),this.evTarget&&I(this.target,this.evTarget,this.domHandler),this.evWin&&I(z(this.element),this.evWin,this.domHandler)}};var it={mousedown:x,mousemove:X,mouseup:Y},nt="mousedown",rt="mousemove mouseup";function st(){this.evEl=nt,this.evWin=rt,this.allow=!0,this.pressed=!1,B.apply(this,arguments)}m(st,B,{handler:function(t){var e=it[t.type];e&x&&0===t.button&&(this.pressed=!0),e&X&&1!==t.which&&(e=Y),this.pressed&&this.allow&&(e&Y&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var ot={pointerdown:x,pointermove:X,pointerup:Y,pointercancel:F,pointerout:F},at={2:"touch",3:"pen",4:"mouse",5:"kinect"},ht="pointerdown",ut="pointermove pointerup pointercancel";function ct(){this.evEl=ht,this.evWin=ut,B.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&(ht="MSPointerDown",ut="MSPointerMove MSPointerUp MSPointerCancel"),m(ct,B,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=ot[n],s=at[t.pointerType]||t.pointerType,o="touch"==s,a=S(e,t.pointerId,"pointerId");r&x&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):r&(Y|F)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var lt={touchstart:x,touchmove:X,touchend:Y,touchcancel:F},pt="touchstart",ft="touchstart touchmove touchend touchcancel";function dt(){this.evTarget=pt,this.evWin=ft,this.started=!1,B.apply(this,arguments)}m(dt,B,{handler:function(t){var e=lt[t.type];if(e===x&&(this.started=!0),this.started){var i=function(t,e){var i=w(t.touches),n=w(t.changedTouches);e&(Y|F)&&(i=b(i.concat(n),"identifier",!0));return[i,n]}.call(this,t,e);e&(Y|F)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var vt={touchstart:x,touchmove:X,touchend:Y,touchcancel:F},mt="touchstart touchmove touchend touchcancel";function gt(){this.evTarget=mt,this.targetIds={},B.apply(this,arguments)}function Tt(){B.apply(this,arguments);var t=g(this.handler,this);this.touch=new gt(this.manager,t),this.mouse=new st(this.manager,t)}m(gt,B,{handler:function(t){var e=vt[t.type],i=function(t,e){var i=w(t.touches),n=this.targetIds;if(e&(x|X)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=w(t.changedTouches),a=[],h=this.target;if(s=i.filter(function(t){return A(t.target,h)}),e===x)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;r=0;for(;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(Y|F)&&delete n[o[r].identifier],r++;if(!a.length)return;return[b(s.concat(a),"identifier",!0),a]}.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}),m(Tt,B,{handler:function(t,e,i){var n="touch"==i.pointerType,r="mouse"==i.pointerType;if(n)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;e&(Y|F)&&(this.mouse.allow=!0),this.callback(t,e,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var yt=C(o.style,"touchAction"),Et=yt!==r,It="auto",At="manipulation",_t="none",Dt="pan-x",St="pan-y";function wt(t,e){this.manager=t,this.set(e)}wt.prototype={set:function(t){"compute"==t&&(t=this.compute()),Et&&(this.manager.element.style[yt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return f(this.manager.recognizers,function(e){T(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(_(t,_t))return _t;var e=_(t,Dt),i=_(t,St);if(e&&i)return Dt+" "+St;if(e||i)return e?Dt:St;if(_(t,At))return At;return It}(t.join(" "))},preventDefaults:function(t){if(!Et){var e=t.srcEvent,i=t.offsetDirection;if(!this.manager.session.prevented){var n=this.actions,r=_(n,_t),s=_(n,St),o=_(n,Dt);return r||s&&i&U||o&&i&G?this.preventSrc(e):void 0}e.preventDefault()}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var bt=1,Ct=2,Rt=4,zt=8,Nt=zt,Pt=16;function Mt(t){this.id=R++,this.manager=null,this.options=v(t||{},this.defaults),this.options.enable=y(this.options.enable,!0),this.state=bt,this.simultaneous={},this.requireFail=[]}function Ot(t){return t==k?"down":t==H?"up":t==q?"left":t==L?"right":""}function xt(t,e){var i=e.manager;return i?i.get(t):t}function Xt(){Mt.apply(this,arguments)}function Yt(){Xt.apply(this,arguments),this.pX=null,this.pY=null}function Ft(){Xt.apply(this,arguments)}function Wt(){Mt.apply(this,arguments),this._timer=null,this._input=null}function qt(){Xt.apply(this,arguments)}function Lt(){Xt.apply(this,arguments)}function Ht(){Mt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function kt(t,e){return(e=e||{}).recognizers=y(e.recognizers,kt.defaults.preset),new Ut(t,e)}Mt.prototype={defaults:{},set:function(t){return d(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(p(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=xt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return p(t,"dropRecognizeWith",this)?this:(t=xt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(p(t,"requireFailure",this))return this;var e=this.requireFail;return-1===S(e,t=xt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(p(t,"dropRequireFailure",this))return this;t=xt(t,this);var e=S(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(n){e.manager.emit(e.options.event+(n?function(t){if(t&Pt)return"cancel";if(t&zt)return"end";if(t&Rt)return"move";if(t&Ct)return"start";return""}(i):""),t)}i<zt&&n(!0),n(),i>=zt&&n(!0)},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|bt)))return!1;t++}return!0},recognize:function(t){var e=d({},t);if(!T(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Nt|Pt|32)&&(this.state=bt),this.state=this.process(e),this.state&(Ct|Rt|zt|Pt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},m(Xt,Mt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(Ct|Rt),r=this.attrTest(t);return n&&(i&F||!r)?e|Pt:n||r?i&Y?e|zt:e&Ct?e|Rt:Ct:32}}),m(Yt,Xt,{defaults:{event:"pan",threshold:10,pointers:1,direction:V},getTouchAction:function(){var t=this.options.direction,e=[];return t&U&&e.push(St),t&G&&e.push(Dt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&U?(r=0===s?W:s<0?q:L,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?W:o<0?H:k,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return Xt.prototype.attrTest.call(this,t)&&(this.state&Ct||!(this.state&Ct)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ot(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),m(Ft,Xt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[_t]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Ct)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),m(Wt,Mt,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[It]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(Y|F)&&!r)this.reset();else if(t.eventType&x)this.reset(),this._timer=l(function(){this.state=Nt,this.tryEmit()},e.time,this);else if(t.eventType&Y)return Nt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Nt&&(t&&t.eventType&Y?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}}),m(qt,Xt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[_t]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Ct)}}),m(Lt,Xt,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:U|G,pointers:1},getTouchAction:function(){return Yt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(U|G)?e=t.velocity:i&U?e=t.velocityX:i&G&&(e=t.velocityY),this._super.attrTest.call(this,t)&&i&t.direction&&t.distance>this.options.threshold&&u(e)>this.options.velocity&&t.eventType&Y},emit:function(t){var e=Ot(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),m(Ht,Mt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[At]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&x&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=Y)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||tt(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=l(function(){this.state=Nt,this.tryEmit()},e.interval,this),Ct):Nt}return 32},failTimeout:function(){return this._timer=l(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Nt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),kt.VERSION="2.0.4",kt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[qt,{enable:!1}],[Ft,{enable:!1},["rotate"]],[Lt,{direction:U}],[Yt,{direction:U},["swipe"]],[Ht],[Ht,{event:"doubletap",taps:2},["tap"]],[Wt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Ut(t,e){var i;e=e||{},this.options=v(e,kt.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=new((i=this).options.inputClass||(P?ct:M?gt:N?Tt:st))(i,J),this.touchAction=new wt(this,this.options.touchAction),Gt(this,!0),f(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Gt(t,e){var i=t.element;f(t.options.cssProps,function(t,n){i.style[C(i.style,n)]=e?t:""})}Ut.prototype={set:function(t){return d(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Nt)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(Ct|Rt|zt)&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof Mt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(p(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(p(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(S(e,t),1),this.touchAction.update(),this},on:function(t,e){var i=this.handlers;return f(D(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this},off:function(t,e){var i=this.handlers;return f(D(t),function(t){e?i[t].splice(S(i[t],e),1):delete i[t]}),this},emit:function(t,e){this.options.domEvents&&function(t,e){var n=i.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Gt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},d(kt,{INPUT_START:x,INPUT_MOVE:X,INPUT_END:Y,INPUT_CANCEL:F,STATE_POSSIBLE:bt,STATE_BEGAN:Ct,STATE_CHANGED:Rt,STATE_ENDED:zt,STATE_RECOGNIZED:Nt,STATE_CANCELLED:Pt,STATE_FAILED:32,DIRECTION_NONE:W,DIRECTION_LEFT:q,DIRECTION_RIGHT:L,DIRECTION_UP:H,DIRECTION_DOWN:k,DIRECTION_HORIZONTAL:U,DIRECTION_VERTICAL:G,DIRECTION_ALL:V,Manager:Ut,Input:B,TouchAction:wt,TouchInput:gt,MouseInput:st,PointerEventInput:ct,TouchMouseInput:Tt,SingleTouchInput:dt,Recognizer:Mt,AttrRecognizer:Xt,Tap:Ht,Pan:Yt,Swipe:Lt,Pinch:Ft,Rotate:qt,Press:Wt,on:E,off:I,each:f,merge:v,extend:d,inherit:m,bindFn:g,prefixed:C}),typeof t==a&&t.amd?t(function(){return kt}):"undefined"!=typeof module&&module.exports?module.exports=kt:e.Hammer=kt}(window,document);
},{}],"wUQV":[function(require,module,exports) {
"use strict";var e=require("hammerjs"),t=require("bowser"),n=1,r="MarzipanoHammerElementId";function s(e,t){return e[r]||(e[r]=n++),t+e[r]}function a(){this._managers={},this._refCount={}}function i(e,t,n,r){this._manager=t,this._element=n,this._type=r,this._hammerGestures=e,this._eventHandlers=[]}a.prototype.get=function(e,t){var n=s(e,t);return this._managers[n]||(this._managers[n]=this._createManager(e,t),this._refCount[n]=0),this._refCount[n]++,new i(this,this._managers[n],e,t)},a.prototype._createManager=function(n,r){var s=new e.Manager(n);return"mouse"===r?s.add(new e.Pan({direction:e.DIRECTION_ALL,threshold:0})):"touch"!==r&&"pen"!==r&&"kinect"!==r||(s.add(new e.Pan({direction:e.DIRECTION_ALL,threshold:20,pointers:1})),t.msie&&parseFloat(t.version)<10||s.add(new e.Pinch)),s},a.prototype._releaseHandle=function(e,t){var n=s(e,t);this._refCount[n]&&(this._refCount[n]--,this._refCount[n]||(this._managers[n].destroy(),delete this._managers[n],delete this._refCount[n]))},i.prototype.on=function(e,t){var n=this._type,r=function(e){n===e.pointerType&&t(e)};this._eventHandlers.push({events:e,handler:r}),this._manager.on(e,r)},i.prototype.release=function(){for(var e=0;e<this._eventHandlers.length;e++){var t=this._eventHandlers[e];this._manager.off(t.events,t.handler)}this._hammerGestures._releaseHandle(this._element,this._type),this._manager=null,this._element=null,this._type=null,this._hammerGestures=null},i.prototype.manager=function(){return this._manager},module.exports=new a;
},{"hammerjs":"K0KY","bowser":"JSid"}],"JgBV":[function(require,module,exports) {
"use strict";function a(a,h,o,M,n){var r=Math.sqrt(Math.pow(h,2)+Math.pow(o,2));t(h,o,a=Math.max(a,r/M),n),n[0]=Math.abs(n[0]),n[1]=Math.abs(n[1])}function t(a,t,h,o){var M=Math.atan(t/a);o[0]=h*Math.cos(M),o[1]=h*Math.sin(M)}module.exports={maxFriction:a,changeVectorNorm:t};
},{}],"pTkP":[function(require,module,exports) {
"use strict";var t=require("minimal-event-emitter"),e=require("./Dynamics"),i=require("./HammerGestures"),s=require("../util/defaults"),n=require("./util").maxFriction,a=require("../util/clearOwnProperties"),r={friction:6,maxFrictionTime:.3},h="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.controls;function o(t,n,a){this._element=t,this._opts=s(a||{},r),this._startEvent=null,this._lastEvent=null,this._active=!1,this._dynamics={x:new e,y:new e},this._hammer=i.get(t,n),this._hammer.on("hammer.input",this._handleHammerEvent.bind(this)),this._hammer.on("panstart",this._handleStart.bind(this)),this._hammer.on("panmove",this._handleMove.bind(this)),this._hammer.on("panend",this._handleEnd.bind(this)),this._hammer.on("pancancel",this._handleEnd.bind(this))}t(o),o.prototype.destroy=function(){this._hammer.release(),a(this)},o.prototype._handleHammerEvent=function(t){if(t.isFirst){if(h&&this._active)throw new Error("DragControlMethod active detected when already active");this._active=!0,this.emit("active")}if(t.isFinal){if(h&&!this._active)throw new Error("DragControlMethod inactive detected when already inactive");this._active=!1,this.emit("inactive")}},o.prototype._handleStart=function(t){t.preventDefault(),this._startEvent=t},o.prototype._handleMove=function(t){t.preventDefault(),this._startEvent&&(this._updateDynamicsMove(t),this.emit("parameterDynamics","axisScaledX",this._dynamics.x),this.emit("parameterDynamics","axisScaledY",this._dynamics.y))},o.prototype._handleEnd=function(t){t.preventDefault(),this._startEvent&&(this._updateDynamicsRelease(t),this.emit("parameterDynamics","axisScaledX",this._dynamics.x),this.emit("parameterDynamics","axisScaledY",this._dynamics.y)),this._startEvent=!1,this._lastEvent=!1},o.prototype._updateDynamicsMove=function(t){var e=t.deltaX,i=t.deltaY,s=this._lastEvent||this._startEvent;s&&(e-=s.deltaX,i-=s.deltaY);var n=this._element.getBoundingClientRect();e/=n.right-n.left,i/=n.bottom-n.top,this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.offset=-e,this._dynamics.y.offset=-i,this._lastEvent=t};var m=[null,null];o.prototype._updateDynamicsRelease=function(t){var e=this._element.getBoundingClientRect(),i=e.right-e.left,s=e.bottom-e.top,a=1e3*t.velocityX/i,r=1e3*t.velocityY/s;this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.velocity=a,this._dynamics.y.velocity=r,n(this._opts.friction,this._dynamics.x.velocity,this._dynamics.y.velocity,this._opts.maxFrictionTime,m),this._dynamics.x.friction=m[0],this._dynamics.y.friction=m[1]},module.exports=o;
},{"minimal-event-emitter":"lNC2","./Dynamics":"CzyW","./HammerGestures":"wUQV","../util/defaults":"IcBt","./util":"JgBV","../util/clearOwnProperties":"lrIP"}],"qnVO":[function(require,module,exports) {
"use strict";var t=require("minimal-event-emitter"),e=require("./Dynamics"),i=require("./HammerGestures"),s=require("../util/defaults"),a=require("./util").maxFriction,n=require("../util/clearOwnProperties"),h={speed:8,friction:6,maxFrictionTime:.3};function r(t,a,n){this._element=t,this._opts=s(n||{},h),this._active=!1,this._hammer=i.get(t,a),this._dynamics={x:new e,y:new e},this._hammer.on("panstart",this._handleStart.bind(this)),this._hammer.on("panmove",this._handleMove.bind(this)),this._hammer.on("panend",this._handleRelease.bind(this)),this._hammer.on("pancancel",this._handleRelease.bind(this))}t(r),r.prototype.destroy=function(){this._hammer.release(),n(this)},r.prototype._handleStart=function(t){t.preventDefault(),this._active||(this._active=!0,this.emit("active"))},r.prototype._handleMove=function(t){t.preventDefault(),this._updateDynamics(t,!1)},r.prototype._handleRelease=function(t){t.preventDefault(),this._updateDynamics(t,!0),this._active&&(this._active=!1,this.emit("inactive"))};var m=[null,null];r.prototype._updateDynamics=function(t,e){var i=this._element.getBoundingClientRect(),s=i.right-i.left,n=i.bottom-i.top,h=Math.max(s,n),r=t.deltaX/h*this._opts.speed,o=t.deltaY/h*this._opts.speed;this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.velocity=r,this._dynamics.y.velocity=o,e&&(a(this._opts.friction,this._dynamics.x.velocity,this._dynamics.y.velocity,this._opts.maxFrictionTime,m),this._dynamics.x.friction=m[0],this._dynamics.y.friction=m[1]),this.emit("parameterDynamics","x",this._dynamics.x),this.emit("parameterDynamics","y",this._dynamics.y)},module.exports=r;
},{"minimal-event-emitter":"lNC2","./Dynamics":"CzyW","./HammerGestures":"wUQV","../util/defaults":"IcBt","./util":"JgBV","../util/clearOwnProperties":"lrIP"}],"fujn":[function(require,module,exports) {
"use strict";var e,t=require("../util/clearOwnProperties");function n(e,t,n){var i=r();if("wheel"===i)this._fun=t,this._elem=e,this._elem.addEventListener("wheel",this._fun,n);else{if("mousewheel"!==i)throw new Error("Browser does not support mouse wheel events");this._fun=l(t),this._elem=e,this._elem.addEventListener("mousewheel",this._fun,n)}}function l(e){return function(t){t||(t=window.event);var n={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:1,deltaX:0,deltaZ:0,timeStamp:t.timeStamp||Date.now(),preventDefault:t.preventDefault.bind(t)};return n.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(n.deltaX=-.025*t.wheelDeltaX),e(n)}}function r(){return void 0!==e?e:e="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":null}n.prototype.destroy=function(){this._elem.removeEventListener(r(),this._fun),t(this)},module.exports=n;
},{"../util/clearOwnProperties":"lrIP"}],"W6zF":[function(require,module,exports) {
"use strict";var t=require("minimal-event-emitter"),i=require("./Dynamics"),e=require("./WheelListener"),s=require("../util/defaults"),o=require("../util/clearOwnProperties"),n={frictionTime:.2,zoomDelta:.001};function h(t,o){this._opts=s(o||{},n),this._dynamics=new i,this._eventList=[];var h=this._opts.frictionTime?this.withSmoothing:this.withoutSmoothing;this._wheelListener=new e(t,h.bind(this))}function r(t){var i=1==t.deltaMode?20:1;return t.deltaY*i}t(h),h.prototype.destroy=function(){this._wheelListener.destroy(),o(this)},h.prototype.withoutSmoothing=function(t){this._dynamics.offset=r(t)*this._opts.zoomDelta,this.emit("parameterDynamics","zoom",this._dynamics),t.preventDefault(),this.emit("active"),this.emit("inactive")},h.prototype.withSmoothing=function(t){var i=t.timeStamp;for(this._eventList.push(t);this._eventList[0].timeStamp<i-1e3*this._opts.frictionTime;)this._eventList.shift(0);for(var e=0,s=0;s<this._eventList.length;s++){e+=r(this._eventList[s])*this._opts.zoomDelta/this._opts.frictionTime}this._dynamics.velocity=e,this._dynamics.friction=Math.abs(e)/this._opts.frictionTime,this.emit("parameterDynamics","zoom",this._dynamics),t.preventDefault(),this.emit("active"),this.emit("inactive")},module.exports=h;
},{"minimal-event-emitter":"lNC2","./Dynamics":"CzyW","./WheelListener":"fujn","../util/defaults":"IcBt","../util/clearOwnProperties":"lrIP"}],"Zl1s":[function(require,module,exports) {
"use strict";var t=require("minimal-event-emitter"),i=require("./Dynamics"),e=require("./HammerGestures"),n=require("../util/clearOwnProperties");function s(t,n,s){this._hammer=e.get(t,n),this._lastEvent=null,this._active=!1,this._dynamics=new i,this._hammer.on("pinchstart",this._handleStart.bind(this)),this._hammer.on("pinch",this._handleEvent.bind(this)),this._hammer.on("pinchend",this._handleEnd.bind(this)),this._hammer.on("pinchcancel",this._handleEnd.bind(this))}t(s),s.prototype.destroy=function(){this._hammer.release(),n(this)},s.prototype._handleStart=function(){this._active||(this._active=!0,this.emit("active"))},s.prototype._handleEnd=function(){this._lastEvent=null,this._active&&(this._active=!1,this.emit("inactive"))},s.prototype._handleEvent=function(t){var i=t.scale;this._lastEvent&&(i/=this._lastEvent.scale),this._dynamics.offset=-1*(i-1),this.emit("parameterDynamics","zoom",this._dynamics),this._lastEvent=t},module.exports=s;
},{"minimal-event-emitter":"lNC2","./Dynamics":"CzyW","./HammerGestures":"wUQV","../util/clearOwnProperties":"lrIP"}],"tHhx":[function(require,module,exports) {
"use strict";var t=require("minimal-event-emitter"),e=require("./Dynamics"),i=require("../util/clearOwnProperties");function r(t){if(!t)throw new Error("VelocityControlMethod: parameter must be defined");this._parameter=t,this._dynamics=new e}t(r),r.prototype.destroy=function(){i(this)},r.prototype.setVelocity=function(t){this._dynamics.velocity=t,this.emit("parameterDynamics",this._parameter,this._dynamics)},r.prototype.setFriction=function(t){this._dynamics.friction=t,this.emit("parameterDynamics",this._parameter,this._dynamics)},module.exports=r;
},{"minimal-event-emitter":"lNC2","./Dynamics":"CzyW","../util/clearOwnProperties":"lrIP"}],"Kjuf":[function(require,module,exports) {
"use strict";var e=require("minimal-event-emitter"),t=require("./Dynamics"),s=require("../util/clearOwnProperties");function i(e,s,i,r){if(!e)throw new Error("ElementPressControlMethod: element must be defined");if(!s)throw new Error("ElementPressControlMethod: parameter must be defined");if(!i)throw new Error("ElementPressControlMethod: velocity must be defined");if(!r)throw new Error("ElementPressControlMethod: friction must be defined");this._element=e,this._pressHandler=this._handlePress.bind(this),this._releaseHandler=this._handleRelease.bind(this),e.addEventListener("mousedown",this._pressHandler),e.addEventListener("mouseup",this._releaseHandler),e.addEventListener("mouseleave",this._releaseHandler),e.addEventListener("touchstart",this._pressHandler),e.addEventListener("touchmove",this._releaseHandler),e.addEventListener("touchend",this._releaseHandler),this._parameter=s,this._velocity=i,this._friction=r,this._dynamics=new t,this._pressing=!1}e(i),i.prototype.destroy=function(){this._element.removeEventListener("mousedown",this._pressHandler),this._element.removeEventListener("mouseup",this._releaseHandler),this._element.removeEventListener("mouseleave",this._releaseHandler),this._element.removeEventListener("touchstart",this._pressHandler),this._element.removeEventListener("touchmove",this._releaseHandler),this._element.removeEventListener("touchend",this._releaseHandler),s(this)},i.prototype._handlePress=function(){this._pressing=!0,this._dynamics.velocity=this._velocity,this._dynamics.friction=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("active")},i.prototype._handleRelease=function(){this._pressing&&(this._dynamics.friction=this._friction,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive")),this._pressing=!1},module.exports=i;
},{"minimal-event-emitter":"lNC2","./Dynamics":"CzyW","../util/clearOwnProperties":"lrIP"}],"M1N0":[function(require,module,exports) {
"use strict";var t=require("minimal-event-emitter"),e=require("./Dynamics"),s=require("../util/now"),i=require("../util/clearOwnProperties");function r(t){t=t||{},this._methods=[],this._parameters=["x","y","axisScaledX","axisScaledY","zoom","yaw","pitch","roll"],this._now=t.nowForTesting||s,this._composedOffsets={},this._composeReturn={offsets:this._composedOffsets,changing:null}}t(r),r.prototype.add=function(t){if(!this.has(t)){var s={};this._parameters.forEach(function(t){s[t]={dynamics:new e,time:null}});var i=this._updateDynamics.bind(this,s),r={instance:t,dynamics:s,parameterDynamicsHandler:i};t.addEventListener("parameterDynamics",i),this._methods.push(r)}},r.prototype.remove=function(t){var e=this._indexOfInstance(t);if(e>=0){var s=this._methods.splice(e,1)[0];s.instance.removeEventListener("parameterDynamics",s.parameterDynamicsHandler)}},r.prototype.has=function(t){return this._indexOfInstance(t)>=0},r.prototype._indexOfInstance=function(t){for(var e=0;e<this._methods.length;e++)if(this._methods[e].instance===t)return e;return-1},r.prototype.list=function(){for(var t=[],e=0;e<this._methods.length;e++)t.push(this._methods[e].instance);return t},r.prototype._updateDynamics=function(t,e,s){var i=t[e];if(!i)throw new Error("Unknown control parameter "+e);var r=this._now();i.dynamics.update(s,(r-i.time)/1e3),i.time=r,this.emit("change")},r.prototype._resetComposedOffsets=function(){for(var t=0;t<this._parameters.length;t++)this._composedOffsets[this._parameters[t]]=0},r.prototype.offsets=function(){var t,e=!1,s=this._now();this._resetComposedOffsets();for(var i=0;i<this._methods.length;i++)for(var r=this._methods[i].dynamics,n=0;n<this._parameters.length;n++){var o=r[t=this._parameters[n]],a=o.dynamics;null!=a.offset&&(this._composedOffsets[t]+=a.offset,a.offset=null);var h=(s-o.time)/1e3,m=a.offsetFromVelocity(h);m&&(this._composedOffsets[t]+=m);var c=a.velocityAfter(h);a.velocity=c,c&&(e=!0),o.time=s}return this._composeReturn.changing=e,this._composeReturn},r.prototype.destroy=function(){for(var t=this.list(),e=0;e<t.length;e++)this.remove(t[e]);i(this)},module.exports=r;
},{"minimal-event-emitter":"lNC2","./Dynamics":"CzyW","../util/now":"fllL","../util/clearOwnProperties":"lrIP"}],"aEXo":[function(require,module,exports) {
"use strict";var e=require("minimal-event-emitter"),t=require("./Composer"),o=require("../util/clearOwnProperties"),i="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.controls;function n(e){e=e||{},this._methods={},this._methodGroups={},this._composer=new t,this._enabled=!e||!e.enabled||!!e.enabled,this._activeCount=0,this.updatedViews_=[],this._attachedRenderLoop=null}e(n),n.prototype.destroy=function(){this.detach(),this._composer.destroy(),o(this)},n.prototype.methods=function(){var e={};for(var t in this._methods)e[t]=this._methods[t];return e},n.prototype.method=function(e){return this._methods[e]},n.prototype.registerMethod=function(e,t,o){if(this._methods[e])throw new Error("Control method already registered with id "+e);this._methods[e]={instance:t,enabled:!1,active:!1,activeHandler:this._handleActive.bind(this,e),inactiveHandler:this._handleInactive.bind(this,e)},o&&this.enableMethod(e,t)},n.prototype.unregisterMethod=function(e){var t=this._methods[e];if(!t)throw new Error("No control method registered with id "+e);t.enabled&&this.disableMethod(e),delete this._methods[e]},n.prototype.enableMethod=function(e){var t=this._methods[e];if(!t)throw new Error("No control method registered with id "+e);t.enabled||(t.enabled=!0,t.active&&this._incrementActiveCount(),this._listen(e),this._updateComposer(),this.emit("methodEnabled",e))},n.prototype.disableMethod=function(e){var t=this._methods[e];if(!t)throw new Error("No control method registered with id "+e);t.enabled&&(t.enabled=!1,t.active&&this._decrementActiveCount(),this._unlisten(e),this._updateComposer(),this.emit("methodDisabled",e))},n.prototype.addMethodGroup=function(e,t){this._methodGroups[e]=t},n.prototype.removeMethodGroup=function(e){delete this._methodGroups[e]},n.prototype.methodGroups=function(){var e={};for(var t in this._methodGroups)e[t]=this._methodGroups[t];return e},n.prototype.enableMethodGroup=function(e){var t=this;t._methodGroups[e].forEach(function(e){t.enableMethod(e)})},n.prototype.disableMethodGroup=function(e){var t=this;t._methodGroups[e].forEach(function(e){t.disableMethod(e)})},n.prototype.enabled=function(){return this._enabled},n.prototype.enable=function(){this._enabled||(this._enabled=!0,this._activeCount>0&&this.emit("active"),this.emit("enabled"),this._updateComposer())},n.prototype.disable=function(){this._enabled&&(this._enabled=!1,this._activeCount>0&&this.emit("inactive"),this.emit("disabled"),this._updateComposer())},n.prototype.attach=function(e){this._attachedRenderLoop&&this.detach(),this._attachedRenderLoop=e,this._beforeRenderHandler=this._updateViewsWithControls.bind(this),this._changeHandler=e.renderOnNextFrame.bind(e),this._attachedRenderLoop.addEventListener("beforeRender",this._beforeRenderHandler),this._composer.addEventListener("change",this._changeHandler)},n.prototype.detach=function(){this._attachedRenderLoop&&(this._attachedRenderLoop.removeEventListener("beforeRender",this._beforeRenderHandler),this._composer.removeEventListener("change",this._changeHandler),this._beforeRenderHandler=null,this._changeHandler=null,this._attachedRenderLoop=null)},n.prototype.attached=function(){return null!=this._attachedRenderLoop},n.prototype._listen=function(e){var t=this._methods[e];if(!t)throw new Error("Bad method id");t.instance.addEventListener("active",t.activeHandler),t.instance.addEventListener("inactive",t.inactiveHandler)},n.prototype._unlisten=function(e){var t=this._methods[e];if(!t)throw new Error("Bad method id");t.instance.removeEventListener("active",t.activeHandler),t.instance.removeEventListener("inactive",t.inactiveHandler)},n.prototype._handleActive=function(e){var t=this._methods[e];if(!t)throw new Error("Bad method id");if(!t.enabled)throw new Error("Should not receive event from disabled control method");t.active||(t.active=!0,this._incrementActiveCount())},n.prototype._handleInactive=function(e){var t=this._methods[e];if(!t)throw new Error("Bad method id");if(!t.enabled)throw new Error("Should not receive event from disabled control method");t.active&&(t.active=!1,this._decrementActiveCount())},n.prototype._incrementActiveCount=function(){this._activeCount++,i&&this._checkActiveCount(),this._enabled&&1===this._activeCount&&this.emit("active")},n.prototype._decrementActiveCount=function(){this._activeCount--,i&&this._checkActiveCount(),this._enabled&&0===this._activeCount&&this.emit("inactive")},n.prototype._checkActiveCount=function(){var e=0;for(var t in this._methods){var o=this._methods[t];o.enabled&&o.active&&e++}if(e!=this._activeCount)throw new Error("Bad control state")},n.prototype._updateComposer=function(){var e=this._composer;for(var t in this._methods){var o=this._methods[t],i=this._enabled&&o.enabled;i&&!e.has(o.instance)&&e.add(o.instance),!i&&e.has(o.instance)&&e.remove(o.instance)}},n.prototype._updateViewsWithControls=function(){var e=this._composer.offsets();e.changing&&this._attachedRenderLoop.renderOnNextFrame(),this.updatedViews_.length=0;for(var t=this._attachedRenderLoop.stage().listLayers(),o=0;o<t.length;o++){var i=t[o].view();this.updatedViews_.indexOf(i)<0&&(t[o].view().updateWithControlParameters(e.offsets),this.updatedViews_.push(i))}},module.exports=n;
},{"minimal-event-emitter":"lNC2","./Composer":"M1N0","../util/clearOwnProperties":"lrIP"}],"AA1V":[function(require,module,exports) {
"use strict";var e=require("../support/Css"),r=require("./dom").setTransform,s=require("./dom").setPixelPosition,t=require("./decimal");function i(i,a,o,u){if(u=u||"",e()){var l="translateX("+t(a)+"px) translateY("+t(o)+"px) translateZ(0) "+u;r(i,l)}else s(i,a,o)}module.exports=i;
},{"../support/Css":"LPct","./dom":"Dw5L","./decimal":"NsFD"}],"wXOZ":[function(require,module,exports) {
"use strict";var t=require("minimal-event-emitter"),e=require("./support/Css"),i=require("./util/positionAbsolutely"),s=require("./util/dom").setTransform,o=require("./util/clearOwnProperties");function r(t,i,s,o,r){if((r=r||{}).perspective=r.perspective||{},r.perspective.extraTransforms=null!=r.perspective.extraTransforms?r.perspective.extraTransforms:"",(r.perspective.radius||r.perspective.extraTransforms)&&!e())throw new Error("CSS transforms on hotspots are not supported on this browser");this._domElement=t,this._parentDomElement=i,this._view=s,this._coords={},this._perspective={},this.setPosition(o),this._parentDomElement.appendChild(this._domElement),this.setPerspective(r.perspective),this._visible=!0,this._position={x:0,y:0}}t(r),r.prototype.destroy=function(){this._parentDomElement.removeChild(this._domElement),o(this)},r.prototype.domElement=function(){return this._domElement},r.prototype.position=function(){return this._coords},r.prototype.setPosition=function(t){for(var e in t)this._coords[e]=t[e];this._update()},r.prototype.perspective=function(){return this._perspective},r.prototype.setPerspective=function(t){for(var e in t)this._perspective[e]=t[e];this._update()},r.prototype.show=function(){this._visible||(this._visible=!0,this._update())},r.prototype.hide=function(){this._visible&&(this._visible=!1,this._update())},r.prototype._update=function(){var t,e,i=this._domElement,s=this._coords,o=this._position,r=!1;if(this._visible){var p=this._view;this._perspective.radius?(r=!0,this._setEmbeddedPosition(p,s)):(p.coordinatesToScreen(s,o),t=o.x,e=o.y,null!=t&&null!=e&&(r=!0,this._setPosition(t,e)))}r?(i.style.display="block",i.style.position="absolute"):(i.style.display="none",i.style.position="")},r.prototype._setEmbeddedPosition=function(t,e){var i=t.coordinatesToPerspectiveTransform(e,this._perspective.radius,this._perspective.extraTransforms);s(this._domElement,i)},r.prototype._setPosition=function(t,e){i(this._domElement,t,e,this._perspective.extraTransforms)},module.exports=r;
},{"minimal-event-emitter":"lNC2","./support/Css":"LPct","./util/positionAbsolutely":"AA1V","./util/dom":"Dw5L","./util/clearOwnProperties":"lrIP"}],"MGo6":[function(require,module,exports) {
"use strict";var e,t=require("bowser");function r(){var e=document.createElement("a").style;e.cssText="pointer-events:auto";var r="auto"===e.pointerEvents,n=t.msie&&parseFloat(t.version)<11;return r&&!n}function n(){return void 0!==e?e:e=r()}module.exports=n;
},{"bowser":"JSid"}],"pIYi":[function(require,module,exports) {
"use strict";var t=require("minimal-event-emitter"),e=require("./Hotspot"),i=require("./util/calcRect"),s=require("./support/cssPointerEvents"),o=require("./util/positionAbsolutely"),r=require("./util/dom").setAbsolute,h=require("./util/dom").setOverflowHidden,n=require("./util/dom").setOverflowVisible,p=require("./util/dom").setNullSize,a=require("./util/dom").setPixelSize,_=require("./util/dom").setWithVendorPrefix("pointer-events"),l=require("./util/clearOwnProperties");function d(t,e,i,s,o){o=o||{},this._parentDomElement=t,this._stage=e,this._view=i,this._renderLoop=s,this._hotspots=[],this._visible=!0,this._rect=o.rect,this._visibilityOrRectChanged=!0,this._stageWidth=null,this._stageHeight=null,this._tmpRect={},this._hotspotContainerWrapper=document.createElement("div"),r(this._hotspotContainerWrapper),_(this._hotspotContainerWrapper,"none"),this._parentDomElement.appendChild(this._hotspotContainerWrapper),this._hotspotContainer=document.createElement("div"),r(this._hotspotContainer),_(this._hotspotContainer,"all"),this._hotspotContainerWrapper.appendChild(this._hotspotContainer),this._updateHandler=this._update.bind(this),this._renderLoop.addEventListener("afterRender",this._updateHandler)}t(d),d.prototype.destroy=function(){for(;this._hotspots.length;)this.destroyHotspot(this._hotspots[0]);this._parentDomElement.removeChild(this._hotspotContainerWrapper),this._renderLoop.removeEventListener("afterRender",this._updateHandler),l(this)},d.prototype.domElement=function(){return this._hotspotContainer},d.prototype.setRect=function(t){t&&!s()&&"undefined"!=typeof console&&console.warn("Using a rect effect is not fully supported on this browser. Hotspots may not be shown."),this._rect=t,this._visibilityOrRectChanged=!0},d.prototype.rect=function(){return this._rect},d.prototype.createHotspot=function(t,i,s){i=i||{};var o=new e(t,this._hotspotContainer,this._view,i,s);return this._hotspots.push(o),o._update(),this.emit("hotspotsChange"),o},d.prototype.hasHotspot=function(t){return this._hotspots.indexOf(t)>=0},d.prototype.listHotspots=function(){return[].concat(this._hotspots)},d.prototype.destroyHotspot=function(t){var e=this._hotspots.indexOf(t);if(e<0)throw new Error("No such hotspot");this._hotspots.splice(e,1),t.destroy(),this.emit("hotspotsChange")},d.prototype.hide=function(){this._visible&&(this._visible=!1,this._visibilityOrRectChanged=!0,this._update())},d.prototype.show=function(){this._visible||(this._visible=!0,this._visibilityOrRectChanged=!0,this._update())},d.prototype._update=function(){var t=this._hotspotContainerWrapper,e=this._stage.width(),r=this._stage.height(),_=this._tmpRect;if(this._visibilityOrRectChanged||this._rect&&(e!==this._stageWidth||r!==this._stageHeight)){var l=this._visible&&!(this._rect&&!s());t.style.display=l?"block":"none",l&&(this._rect?(i(e,r,this._rect,_),o(t,e*_.x,r*_.y),a(t,e*_.width,r*_.height),h(t)):(o(t,0,0),p(t),n(t))),this._stageWidth=e,this._stageHeight=r,this._visibilityOrRectChanged=!1}for(var d=0;d<this._hotspots.length;d++)this._hotspots[d]._update()},module.exports=d;
},{"minimal-event-emitter":"lNC2","./Hotspot":"wXOZ","./util/calcRect":"kJmJ","./support/cssPointerEvents":"MGo6","./util/positionAbsolutely":"AA1V","./util/dom":"Dw5L","./util/clearOwnProperties":"lrIP"}],"dm4L":[function(require,module,exports) {
"use strict";var e=require("./Layer"),t=require("./TextureStore"),r=require("./HotspotContainer"),n=require("minimal-event-emitter"),i=require("./util/now"),o=require("./util/noop"),s=require("./util/type"),a=require("./util/defaults"),h=require("./util/clearOwnProperties");function l(e,t){this._viewer=e,this._view=t,this._layers=[],this._hotspotContainer=new r(e._controlContainer,e.stage(),this._view,e.renderLoop()),this._movement=null,this._movementStartTime=null,this._movementStep=null,this._movementParams=null,this._movementCallback=null,this._updateMovementHandler=this._updateMovement.bind(this),this._updateHotspotContainerHandler=this._updateHotspotContainer.bind(this),this._viewer.addEventListener("sceneChange",this._updateHotspotContainerHandler),this._viewChangeHandler=this.emit.bind(this,"viewChange"),this._view.addEventListener("change",this._viewChangeHandler),this._updateHotspotContainer()}n(l),l.prototype.destroy=function(){this._view.removeEventListener("change",this._viewChangeHandler),this._viewer.removeEventListener("sceneChange",this._updateHotspotContainerHandler),this._movement&&this.stopMovement(),this._hotspotContainer.destroy(),this.destroyAllLayers(),h(this)},l.prototype.hotspotContainer=function(){return this._hotspotContainer},l.prototype.layer=function(){return this._layers[0]},l.prototype.listLayers=function(){return[].concat(this._layers)},l.prototype.view=function(){return this._view},l.prototype.viewer=function(){return this._viewer},l.prototype.visible=function(){return this._viewer.scene()===this},l.prototype.createLayer=function(r){var n=(r=r||{}).textureStoreOpts||{},i=r.layerOpts||{},o=r.source,s=r.geometry,a=this._view,h=this._viewer.stage(),l=new t(o,h,n),m=new e(o,s,a,l,i);return this._layers.push(m),r.pinFirstLevel&&m.pinFirstLevel(),this.emit("layerChange"),m},l.prototype.destroyLayer=function(e){var t=this._layers.indexOf(e);if(t<0)throw new Error("No such layer in scene");this._layers.splice(t,1),this.emit("layerChange"),e.textureStore().destroy(),e.destroy()},l.prototype.destroyAllLayers=function(){for(;this._layers.length>0;)this.destroyLayer(this._layers[0])},l.prototype.switchTo=function(e,t){return this._viewer.switchScene(this,e,t)},l.prototype.lookTo=function(e,t,r){if(t=t||{},r=r||o,"object"!==s(e))throw new Error("Target view parameters must be an object");var n=null!=t.ease?t.ease:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},i=null!=t.controlsInterrupt&&t.controlsInterrupt,h=null!=t.transitionDuration?t.transitionDuration:1e3,l=null==t.shortest||t.shortest,m=this._view,u=m.parameters(),v={};a(v,e),a(v,u),l&&m.normalizeToClosest&&m.normalizeToClosest(v,v);var p=this._viewer.controls().enabled();i||this._viewer.controls().disable(),this.startMovement(function(){var e=!1;return function(t,r){if(r>=h&&e)return null;var i=Math.min(r/h,1);for(var o in t){var s=u[o],a=v[o];t[o]=s+n(i)*(a-s)}return e=r>=h,t}},function(){p&&this._viewer.controls().enable(),r()})},l.prototype.startMovement=function(e,t){var r=this._viewer.renderLoop();this._movement&&this.stopMovement();var n=e();if("function"!=typeof n)throw new Error("Bad movement");this._movement=e,this._movementStep=n,this._movementStartTime=i(),this._movementParams={},this._movementCallback=t,r.addEventListener("beforeRender",this._updateMovementHandler),r.renderOnNextFrame()},l.prototype.stopMovement=function(){var e=this._viewer.renderLoop();this._movement&&(this._movementCallback&&this._movementCallback(),e.removeEventListener("beforeRender",this._updateMovementHandler),this._movement=null,this._movementStep=null,this._movementStartTime=null,this._movementParams=null,this._movementCallback=null)},l.prototype.movement=function(){return this._movement},l.prototype._updateMovement=function(){if(!this._movement)throw new Error("Should not call update");var e=this._viewer.renderLoop(),t=this._view,r=i()-this._movementStartTime,n=this._movementStep,o=this._movementParams;null==(o=n(o=t.parameters(o),r))?this.stopMovement():(t.setParameters(o),e.renderOnNextFrame())},l.prototype._updateHotspotContainer=function(){this.visible()?this._hotspotContainer.show():this._hotspotContainer.hide()},module.exports=l;
},{"./Layer":"mzUT","./TextureStore":"oEpT","./HotspotContainer":"pIYi","minimal-event-emitter":"lNC2","./util/now":"fllL","./util/noop":"Sw6I","./util/type":"HgvH","./util/defaults":"IcBt","./util/clearOwnProperties":"lrIP"}],"eKy6":[function(require,module,exports) {
"use strict";var t=require("minimal-event-emitter"),i=require("./util/defaults"),e=require("./util/now"),n={duration:1/0};function s(t){t=i(t||{},n),this._duration=t.duration,this._startTime=null,this._handle=null,this._check=this._check.bind(this)}t(s),s.prototype.start=function(){this._startTime=e(),null==this._handle&&this._duration<1/0&&this._setup(this._duration)},s.prototype.started=function(){return null!=this._startTime},s.prototype.stop=function(){this._startTime=null,null!=this._handle&&(clearTimeout(this._handle),this._handle=null)},s.prototype._setup=function(t){this._handle=setTimeout(this._check,t)},s.prototype._teardown=function(){clearTimeout(this._handle),this._handle=null},s.prototype._check=function(){var t=e()-this._startTime,i=this._duration-t;this._teardown(),i<=0?(this.emit("timeout"),this._startTime=null):i<1/0&&this._setup(i)},s.prototype.duration=function(){return this._duration},s.prototype.setDuration=function(t){this._duration=t,null!=this._startTime&&this._check()},module.exports=s;
},{"minimal-event-emitter":"lNC2","./util/defaults":"IcBt","./util/now":"fllL"}],"lTz2":[function(require,module,exports) {
"use strict";var t=require("../util/defaults"),e=require("../util/clearOwnProperties"),s={active:"move",inactive:"default",disabled:"default"};function i(e,i,n,r){r=t(r||{},s),this._element=n,this._controls=e,this._id=i,this._attached=!1,this._setActiveCursor=this._setCursor.bind(this,r.active),this._setInactiveCursor=this._setCursor.bind(this,r.inactive),this._setDisabledCursor=this._setCursor.bind(this,r.disabled),this._setOriginalCursor=this._setCursor.bind(this,this._element.style.cursor),this._updateAttachmentHandler=this._updateAttachment.bind(this),e.addEventListener("methodEnabled",this._updateAttachmentHandler),e.addEventListener("methodDisabled",this._updateAttachmentHandler),e.addEventListener("enabled",this._updateAttachmentHandler),e.addEventListener("disabled",this._updateAttachmentHandler),this._updateAttachment()}i.prototype.destroy=function(){this._detachFromControlMethod(this._controls.method(this._id)),this._setOriginalCursor(),this._controls.removeEventListener("methodEnabled",this._updateAttachmentHandler),this._controls.removeEventListener("methodDisabled",this._updateAttachmentHandler),this._controls.removeEventListener("enabled",this._updateAttachmentHandler),this._controls.removeEventListener("disabled",this._updateAttachmentHandler),e(this)},i.prototype._updateAttachment=function(){var t=this._controls,e=this._id;t.enabled()&&t.method(e).enabled?this._attachToControlMethod(t.method(e)):this._detachFromControlMethod(t.method(e))},i.prototype._attachToControlMethod=function(t){this._attached||(t.instance.addEventListener("active",this._setActiveCursor),t.instance.addEventListener("inactive",this._setInactiveCursor),t.active?this._setActiveCursor():this._setInactiveCursor(),this._attached=!0)},i.prototype._detachFromControlMethod=function(t){this._attached&&(t.instance.removeEventListener("active",this._setActiveCursor),t.instance.removeEventListener("inactive",this._setInactiveCursor),this._setDisabledCursor(),this._attached=!1)},i.prototype._setCursor=function(t){this._element.style.cursor=t},module.exports=i;
},{"../util/defaults":"IcBt","../util/clearOwnProperties":"lrIP"}],"yz0j":[function(require,module,exports) {
"use strict";var e=require("../util/defaults"),r=require("./Drag"),o=require("./Qtvr"),w=require("./ScrollZoom"),u=require("./PinchZoom"),n=require("./Key"),s={mouseViewMode:"drag"};function y(y,i,K){K=e(K||{},s);var t={mouseViewDrag:new r(i,"mouse"),mouseViewQtvr:new o(i,"mouse"),touchView:new r(i,"touch"),pinch:new u(i,"touch"),leftArrowKey:new n(37,"x",-.7,3),rightArrowKey:new n(39,"x",.7,3),upArrowKey:new n(38,"y",-.7,3),downArrowKey:new n(40,"y",.7,3),plusKey:new n(107,"zoom",-.7,3),minusKey:new n(109,"zoom",.7,3),wKey:new n(87,"y",-.7,3),aKey:new n(65,"x",-.7,3),sKey:new n(83,"y",.7,3),dKey:new n(68,"x",.7,3),qKey:new n(81,"roll",.7,3),eKey:new n(69,"roll",-.7,3)};!1!==K.scrollZoom&&(t.scrollZoom=new w(i));var a={arrowKeys:["leftArrowKey","rightArrowKey","upArrowKey","downArrowKey"],plusMinusKeys:["plusKey","minusKey"],wasdKeys:["wKey","aKey","sKey","dKey"],qeKeys:["qKey","eKey"]},l=["scrollZoom","touchView","pinch"];switch(K.mouseViewMode){case"drag":l.push("mouseViewDrag");break;case"qtvr":l.push("mouseViewQtvr");break;default:throw new Error("Unknown mouse view mode: "+K.mouseViewMode)}for(var m in t){var d=t[m];y.registerMethod(m,d),l.indexOf(m)>=0&&y.enableMethod(m)}for(var c in a){var h=a[c];y.addMethodGroup(c,h)}return t}module.exports=y;
},{"../util/defaults":"IcBt","./Drag":"pTkP","./Qtvr":"qnVO","./ScrollZoom":"W6zF","./PinchZoom":"Zl1s","./Key":"x80R"}],"TMDN":[function(require,module,exports) {
"use strict";var n=require("./now");function r(r,e,t){var i=!1,u=n();return e(0),requestAnimationFrame(function a(){if(!i){var o=(n()-u)/r;o<1?(e(o),requestAnimationFrame(a)):(e(1),t())}}),function(){i=!0,t.apply(null,arguments)}}module.exports=r;
},{"./now":"fllL"}],"KTop":[function(require,module,exports) {
"use strict";var e=require("bowser"),t=require("minimal-event-emitter"),r=require("./RenderLoop"),n=require("./controls/Controls"),i=require("./Scene"),s=require("./Timer"),o=require("./stages/WebGl"),a=require("./stages/Css"),h=require("./stages/Flash"),c=require("./controls/ControlCursor"),l=require("./controls/HammerGestures"),u=require("./controls/registerDefaultControls"),d=require("./renderers/registerDefaultRenderers"),_=require("./util/dom").setOverflowHidden,p=require("./util/dom").setAbsolute,m=require("./util/dom").setFullSize,v=require("./util/dom").setBlocking,g=require("./util/tween"),y=require("./util/noop"),f=require("./util/clearOwnProperties"),S={webgl:o,css:a,flash:h},w=[o,a,h];function L(t,i){var o;if(i=i||{},this._domElement=t,_(t),i.stageType){if(!(o=S[i.stageType]))throw new Error("Unknown stage type: "+i.stageType)}else{for(var a=0;a<w.length;a++)if(w[a].supported()){o=w[a];break}if(!o)throw new Error("None of the stage types are supported")}this._stage=new o(i.stage),d(this._stage),this._domElement.appendChild(this._stage.domElement()),this._controlContainer=document.createElement("div"),p(this._controlContainer),m(this._controlContainer),e.ios&&this._controlContainer.addEventListener("touchmove",function(e){e.preventDefault()});var h=document.createElement("div");p(h),m(h),v(h),this._controlContainer.appendChild(h),t.appendChild(this._controlContainer),this._size={},this.updateSize(),this._updateSizeListener=this.updateSize.bind(this),window.addEventListener("resize",this._updateSizeListener),this._renderLoop=new r(this._stage),this._controls=new n,this._controlMethods=u(this._controls,this._controlContainer,i.controls),this._controls.attach(this._renderLoop),this._hammerManagerTouch=l.get(this._controlContainer,"touch"),this._hammerManagerMouse=l.get(this._controlContainer,"mouse"),this._dragCursor=new c(this._controls,"mouseViewDrag",t,i.cursors&&i.cursors.drag||{}),this._renderLoop.start(),this._scenes=[],this._currentScene=null,this._replacedScene=null,this._cancelCurrentTween=null,this._layerChangeHandler=this._updateSceneLayers.bind(this),this._viewChangeHandler=this.emit.bind(this,"viewChange"),this._idleTimer=new s,this._idleTimer.start(),this._resetIdleTimerHandler=this._resetIdleTimer.bind(this),this.addEventListener("viewChange",this._resetIdleTimerHandler),this._triggerIdleTimerHandler=this._triggerIdleTimer.bind(this),this._idleTimer.addEventListener("timeout",this._triggerIdleTimerHandler),this._stopMovementHandler=this.stopMovement.bind(this),this._controls.addEventListener("active",this._stopMovementHandler),this.addEventListener("sceneChange",this._stopMovementHandler),this._idleMovement=null}t(L),L.prototype.destroy=function(){for(var e in window.removeEventListener("resize",this._updateSizeListener),this._currentScene&&this._removeSceneEventListeners(this._currentScene),this._replacedScene&&this._removeSceneEventListeners(this._replacedScene),this._dragCursor.destroy(),this._controlMethods)this._controlMethods[e].destroy();for(;this._scenes.length;)this.destroyScene(this._scenes[0]);this._domElement.removeChild(this._stage.domElement()),this._stage.destroy(),this._renderLoop.destroy(),this._controls.destroy(),this._controls=null,this._cancelCurrentTween&&this._cancelCurrentTween(),f(this)},L.prototype.updateSize=function(){var e=this._size;e.width=this._domElement.clientWidth,e.height=this._domElement.clientHeight,this._stage.setSize(e)},L.prototype.stage=function(){return this._stage},L.prototype.renderLoop=function(){return this._renderLoop},L.prototype.controls=function(){return this._controls},L.prototype.domElement=function(){return this._domElement},L.prototype.createScene=function(e){e=e||{};var t=this.createEmptyScene({view:e.view});return t.createLayer({source:e.source,geometry:e.geometry,pinFirstLevel:e.pinFirstLevel,textureStoreOpts:e.textureStoreOpts,layerOpts:e.layerOpts}),t},L.prototype.createEmptyScene=function(e){var t=new i(this,(e=e||{}).view);return this._scenes.push(t),t},L.prototype._updateSceneLayers=function(){var e,t,r=this._stage,n=this._currentScene,i=this._replacedScene,s=r.listLayers(),o=[];if(i&&(o=o.concat(i.listLayers())),n&&(o=o.concat(n.listLayers())),1!==Math.abs(s.length-o.length))throw new Error("Stage and scene out of sync");if(o.length<s.length)for(e=0;e<s.length;e++)if(t=s[e],o.indexOf(t)<0){this._removeLayerFromStage(t);break}if(o.length>s.length)for(e=0;e<o.length;e++)t=o[e],s.indexOf(t)<0&&this._addLayerToStage(t,e)},L.prototype._addLayerToStage=function(e,t){e.pinFirstLevel(),this._stage.addLayer(e,t)},L.prototype._removeLayerFromStage=function(e){this._stage.removeLayer(e),e.unpinFirstLevel(),e.textureStore().clearNotPinned()},L.prototype._addSceneEventListeners=function(e){e.addEventListener("layerChange",this._layerChangeHandler),e.addEventListener("viewChange",this._viewChangeHandler)},L.prototype._removeSceneEventListeners=function(e){e.removeEventListener("layerChange",this._layerChangeHandler),e.removeEventListener("viewChange",this._viewChangeHandler)},L.prototype.destroyScene=function(e){var t,r,n=this._scenes.indexOf(e);if(n<0)throw new Error("No such scene in viewer");if(this._currentScene===e){for(this._removeSceneEventListeners(e),r=e.listLayers(),t=0;t<r.length;t++)this._removeLayerFromStage(r[t]);this._cancelCurrentTween&&(this._cancelCurrentTween(),this._cancelCurrentTween=null),this._currentScene=null,this.emit("sceneChange")}if(this._replacedScene===e){for(this._removeSceneEventListeners(e),r=e.listLayers(),t=0;t<r.length;t++)this._removeLayerFromStage(r[t]);this._replacedScene=null}this._scenes.splice(n,1),e.destroy()},L.prototype.destroyAllScenes=function(){for(;this._scenes.length>0;)this.destroyScene(this._scenes[0])},L.prototype.hasScene=function(e){return this._scenes.indexOf(e)>=0},L.prototype.listScenes=function(){return[].concat(this._scenes)},L.prototype.scene=function(){return this._currentScene},L.prototype.view=function(){var e=this._currentScene;return e?e.view():null},L.prototype.lookTo=function(e,t,r){var n=this._currentScene;n&&n.lookTo(e,t,r)},L.prototype.startMovement=function(e,t){var r=this._currentScene;r&&r.startMovement(e,t)},L.prototype.stopMovement=function(){var e=this._currentScene;e&&e.stopMovement()},L.prototype.movement=function(){var e=this._currentScene;if(e)return e.movement()},L.prototype.setIdleMovement=function(e,t){this._idleTimer.setDuration(e),this._idleMovement=t},L.prototype.breakIdleMovement=function(){this.stopMovement(),this._resetIdleTimer()},L.prototype._resetIdleTimer=function(){this._idleTimer.start()},L.prototype._triggerIdleTimer=function(){var e=this._idleMovement;e&&this.startMovement(e)};var C=1e3;function E(e,t,r){t.listLayers().forEach(function(t){t.mergeEffects({opacity:e})}),t._hotspotContainer.domElement().style.opacity=e}L.prototype.switchScene=function(e,t,r){var n=this;t=t||{},r=r||y;var i=this._stage,s=this._currentScene;if(s!==e){if(this._scenes.indexOf(e)<0)throw new Error("No such scene in viewer");this._cancelCurrentTween&&(this._cancelCurrentTween(),this._cancelCurrentTween=null);var o=s?s.listLayers():[],a=e.listLayers(),h=i.listLayers();if(s&&(h.length!==o.length||h.length>1&&h[0]!=o[0]))throw new Error("Stage not in sync with viewer");for(var c=null!=t.transitionDuration?t.transitionDuration:C,l=null!=t.transitionUpdate?t.transitionUpdate:E,u=0;u<a.length;u++)this._addLayerToStage(a[u]);this._cancelCurrentTween=g(c,function(t){l(t,e,s)},function(){if(n._replacedScene){n._removeSceneEventListeners(n._replacedScene),o=n._replacedScene.listLayers();for(var e=0;e<o.length;e++)n._removeLayerFromStage(o[e]);n._replacedScene=null}n._cancelCurrentTween=null,r()}),this._currentScene=e,this._replacedScene=s,this.emit("sceneChange"),this.emit("viewChange"),this._addSceneEventListeners(e)}else r()},module.exports=L;
},{"bowser":"JSid","minimal-event-emitter":"lNC2","./RenderLoop":"M9KN","./controls/Controls":"aEXo","./Scene":"dm4L","./Timer":"eKy6","./stages/WebGl":"bnPS","./stages/Css":"iNYS","./stages/Flash":"bGJI","./controls/ControlCursor":"lTz2","./controls/HammerGestures":"wUQV","./controls/registerDefaultControls":"yz0j","./renderers/registerDefaultRenderers":"BE7j","./util/dom":"Dw5L","./util/tween":"TMDN","./util/noop":"Sw6I","./util/clearOwnProperties":"lrIP"}],"ivfL":[function(require,module,exports) {
"use strict";var r=require("gl-matrix").vec4,t=require("gl-matrix").mat4;function e(e){var a=e||{};return a.colorOffset=a.colorOffset||r.create(),a.colorMatrix=a.colorMatrix||t.create(),a}function a(t,e,a){o(a,t,e.colorMatrix),r.add(a,a,e.colorOffset)}function o(r,t,e){var a=t[0],o=t[1],i=t[2],c=t[3];return r[0]=e[0]*a+e[1]*o+e[2]*i+e[3]*c,r[1]=e[4]*a+e[5]*o+e[6]*i+e[7]*c,r[2]=e[8]*a+e[9]*o+e[10]*i+e[11]*c,r[3]=e[12]*a+e[13]*o+e[14]*i+e[15]*c,r}var i=r.create();function c(t,e){for(var o=t.width,c=t.height,l=t.data,f=0;f<o*c;f++)r.set(i,l[4*f+0]/255,l[4*f+1]/255,l[4*f+2]/255,l[4*f+3]/255),a(i,e,i),l[4*f+0]=255*i[0],l[4*f+1]=255*i[1],l[4*f+2]=255*i[2],l[4*f+3]=255*i[3]}module.exports={identity:e,applyToPixel:a,applyToImageData:c};
},{"gl-matrix":"IF0X"}],"Td3y":[function(require,module,exports) {
"use strict";var t=require("./util/defaults"),a=.1,e=.01,c={yawSpeed:a,pitchSpeed:a,fovSpeed:a,yawAccel:e,pitchAccel:e,fovAccel:e,targetPitch:0,targetFov:null};function i(a){var e=(a=t(a||{},c)).yawSpeed,i=a.pitchSpeed,h=a.fovSpeed,o=a.yawAccel,p=a.pitchAccel,r=a.fovAccel,v=a.targetPitch,f=a.targetFov;return function(){var t,a,c,n,l=0,u=0,M=0,m=0,d=0,s=0,w=0;return function(y,A){if(t=(A-l)/1e3,d=Math.min(u+t*o,e),a=d*t,y.yaw=y.yaw+a,null!=v&&y.pitch!==v){var S=.5*M*M/p;s=Math.abs(v-y.pitch)>S?Math.min(M+t*p,i):Math.max(M-t*p,0),c=s*t,v<y.pitch&&(y.pitch=Math.max(v,y.pitch-c)),v>y.pitch&&(y.pitch=Math.min(v,y.pitch+c))}if(null!=f&&y.fov!==v){var x=.5*m*m/r;w=Math.abs(f-y.fov)>x?Math.min(m+t*r,h):Math.max(m-t*r,0),n=w*t,f<y.fov&&(y.fov=Math.max(f,y.fov-n)),f>y.fov&&(y.fov=Math.min(f,y.fov+n))}return l=A,u=d,M=s,m=w,y}}}module.exports=i;
},{"./util/defaults":"IcBt"}],"UljT":[function(require,module,exports) {
"use strict";function t(t){return t*Math.PI/180}module.exports=t;
},{}],"CTat":[function(require,module,exports) {
"use strict";module.exports={WebGlStage:require("./stages/WebGl"),CssStage:require("./stages/Css"),FlashStage:require("./stages/Flash"),WebGlCubeRenderer:require("./renderers/WebGlCube"),WebGlFlatRenderer:require("./renderers/WebGlFlat"),WebGlEquirectRenderer:require("./renderers/WebGlEquirect"),CssCubeRenderer:require("./renderers/CssCube"),CssFlatRenderer:require("./renderers/CssFlat"),FlashCubeRenderer:require("./renderers/FlashCube"),FlashFlatRenderer:require("./renderers/FlashFlat"),registerDefaultRenderers:require("./renderers/registerDefaultRenderers"),CubeGeometry:require("./geometries/Cube"),FlatGeometry:require("./geometries/Flat"),EquirectGeometry:require("./geometries/Equirect"),RectilinearView:require("./views/Rectilinear"),FlatView:require("./views/Flat"),ImageUrlSource:require("./sources/ImageUrl"),SingleAssetSource:require("./sources/SingleAsset"),StaticAsset:require("./assets/Static"),DynamicAsset:require("./assets/Dynamic"),TextureStore:require("./TextureStore"),Layer:require("./Layer"),RenderLoop:require("./RenderLoop"),KeyControlMethod:require("./controls/Key"),DragControlMethod:require("./controls/Drag"),QtvrControlMethod:require("./controls/Qtvr"),ScrollZoomControlMethod:require("./controls/ScrollZoom"),PinchZoomControlMethod:require("./controls/PinchZoom"),VelocityControlMethod:require("./controls/Velocity"),ElementPressControlMethod:require("./controls/ElementPress"),Controls:require("./controls/Controls"),Dynamics:require("./controls/Dynamics"),Viewer:require("./Viewer"),Scene:require("./Scene"),Hotspot:require("./Hotspot"),HotspotContainer:require("./HotspotContainer"),colorEffects:require("./colorEffects"),registerDefaultControls:require("./controls/registerDefaultControls"),autorotate:require("./autorotate"),util:{async:require("./util/async"),cancelize:require("./util/cancelize"),chain:require("./util/chain"),clamp:require("./util/clamp"),clearOwnProperties:require("./util/clearOwnProperties"),cmp:require("./util/cmp"),compose:require("./util/compose"),convertFov:require("./util/convertFov"),decimal:require("./util/decimal"),defaults:require("./util/defaults"),defer:require("./util/defer"),degToRad:require("./util/degToRad"),delay:require("./util/delay"),dom:require("./util/dom"),extend:require("./util/extend"),hash:require("./util/hash"),inherits:require("./util/inherits"),mod:require("./util/mod"),noop:require("./util/noop"),now:require("./util/now"),once:require("./util/once"),pixelRatio:require("./util/pixelRatio"),radToDeg:require("./util/radToDeg"),real:require("./util/real"),retry:require("./util/retry"),tween:require("./util/tween"),type:require("./util/type")},dependencies:{bowser:require("bowser"),glMatrix:require("gl-matrix"),eventEmitter:require("minimal-event-emitter"),hammerjs:require("hammerjs")}};
},{"./stages/WebGl":"bnPS","./stages/Css":"iNYS","./stages/Flash":"bGJI","./renderers/WebGlCube":"WZBv","./renderers/WebGlFlat":"WZBv","./renderers/WebGlEquirect":"jXcL","./renderers/CssCube":"NKKo","./renderers/CssFlat":"ibYP","./renderers/FlashCube":"rp01","./renderers/FlashFlat":"PbPy","./renderers/registerDefaultRenderers":"BE7j","./geometries/Cube":"hMCd","./geometries/Flat":"uFqj","./geometries/Equirect":"Dcnk","./views/Rectilinear":"Q7EF","./views/Flat":"p35M","./sources/ImageUrl":"rSzd","./sources/SingleAsset":"oQsd","./assets/Static":"rzhm","./assets/Dynamic":"RMLf","./TextureStore":"oEpT","./Layer":"mzUT","./RenderLoop":"M9KN","./controls/Key":"x80R","./controls/Drag":"pTkP","./controls/Qtvr":"qnVO","./controls/ScrollZoom":"W6zF","./controls/PinchZoom":"Zl1s","./controls/Velocity":"tHhx","./controls/ElementPress":"Kjuf","./controls/Controls":"aEXo","./controls/Dynamics":"CzyW","./Viewer":"KTop","./Scene":"dm4L","./Hotspot":"wXOZ","./HotspotContainer":"pIYi","./colorEffects":"ivfL","./controls/registerDefaultControls":"yz0j","./autorotate":"Td3y","./util/async":"ZYkB","./util/cancelize":"Kwxa","./util/chain":"XUgy","./util/clamp":"qqzv","./util/clearOwnProperties":"lrIP","./util/cmp":"DMww","./util/compose":"Ejq7","./util/convertFov":"d8NZ","./util/decimal":"NsFD","./util/defaults":"IcBt","./util/defer":"MKvs","./util/degToRad":"UljT","./util/delay":"MjRO","./util/dom":"Dw5L","./util/extend":"o5ow","./util/hash":"ja5q","./util/inherits":"W3pH","./util/mod":"iEu3","./util/noop":"Sw6I","./util/now":"fllL","./util/once":"LMqo","./util/pixelRatio":"AQTT","./util/radToDeg":"xiJL","./util/real":"bQI0","./util/retry":"rngS","./util/tween":"TMDN","./util/type":"HgvH","bowser":"JSid","gl-matrix":"IF0X","minimal-event-emitter":"lNC2","hammerjs":"K0KY"}],"VrMo":[function(require,module,exports) {
!function(){"use strict";var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},n="undefined"!=typeof module&&module.exports,r=function(){for(var n,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],l=0,t=r.length,u={};l<t;l++)if((n=r[l])&&n[1]in e){for(l=0;l<n.length;l++)u[r[0][l]]=n[l];return u}return!1}(),l={change:r.fullscreenchange,error:r.fullscreenerror},t={request:function(n){return new Promise(function(l,t){var u=function(){this.off("change",u),l()}.bind(this);this.on("change",u);var c=(n=n||e.documentElement)[r.requestFullscreen]();c instanceof Promise&&c.then(u).catch(t)}.bind(this))},exit:function(){return new Promise(function(n,l){if(this.isFullscreen){var t=function(){this.off("change",t),n()}.bind(this);this.on("change",t);var u=e[r.exitFullscreen]();u instanceof Promise&&u.then(t).catch(l)}else n()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(n,r){var t=l[n];t&&e.addEventListener(t,r,!1)},off:function(n,r){var t=l[n];t&&e.removeEventListener(t,r,!1)},raw:r};r?(Object.defineProperties(t,{isFullscreen:{get:function(){return Boolean(e[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(e[r.fullscreenEnabled])}}}),n?module.exports=t:window.screenfull=t):n?module.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}();
},{}],"paDP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={scenes:[{id:"0-room01_dirts",name:"Room01_Dirts",levels:[{tileSize:256,size:256,fallbackOnly:!0},{tileSize:512,size:512},{tileSize:512,size:1024},{tileSize:512,size:2048}],faceSize:1728,initialViewParameters:{yaw:-2.807950514771427,pitch:.546950964339004,fov:1.3834918748083818},linkHotspots:[{yaw:-.9850157473897845,pitch:.014431965914120326,rotation:0,target:"2-room01_sink"}],infoHotspots:[{yaw:2.9875888884264983,pitch:.5774747948526766,title:"Dirt Samples",text:"Discription goes here:&nbsp;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.&nbsp;"},{yaw:-.02391572681892029,pitch:.18620421504768103,title:"Samples",text:"Discription goes here:&nbsp;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.&nbsp;"}]},{id:"1-room01_samples",name:"Room01_Samples",levels:[{tileSize:256,size:256,fallbackOnly:!0},{tileSize:512,size:512},{tileSize:512,size:1024},{tileSize:512,size:2048}],faceSize:1728,initialViewParameters:{yaw:2.2539633342168344,pitch:1.0132976473766462,fov:1.3834918748083818},linkHotspots:[{yaw:-2.0363503970074994,pitch:.445336706720596,rotation:0,target:"0-room01_dirts"},{yaw:-.08944806103964531,pitch:.19510184853116286,rotation:0,target:"2-room01_sink"}],infoHotspots:[{yaw:-3.0482887995547365,pitch:.9093130504504909,title:"Three Samples",text:"Discription goes here:&nbsp;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."},{yaw:-.7878686702052615,pitch:.4639815378663368,title:"Operation Table",text:"Discription goes here: Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.&nbsp;"}]},{id:"2-room01_sink",name:"Room01_Sink",levels:[{tileSize:256,size:256,fallbackOnly:!0},{tileSize:512,size:512},{tileSize:512,size:1024},{tileSize:512,size:2048}],faceSize:1728,initialViewParameters:{yaw:-2.7413008054283967,pitch:.21126501293331046,fov:1.3834918748083818},linkHotspots:[{yaw:-1.6518739527670032,pitch:.14602027549817187,rotation:0,target:"0-room01_dirts"},{yaw:-1.870162892216845,pitch:.3220386674455664,rotation:0,target:"1-room01_samples"},{yaw:-2.24731812845865,pitch:.08723079616738616,rotation:0,target:"4-room02_rightside"}],infoHotspots:[{yaw:3.101000401838757,pitch:.24833444529191695,title:"Machine",text:"Discription goes here:&nbsp;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.&nbsp;"}]},{id:"3-room02_operationside",name:"Room02_operationSide",levels:[{tileSize:256,size:256,fallbackOnly:!0},{tileSize:512,size:512},{tileSize:512,size:1024},{tileSize:512,size:2048}],faceSize:1728,initialViewParameters:{pitch:0,yaw:0,fov:1.5707963267948966},linkHotspots:[{yaw:-1.8765195182101593,pitch:.2502993331103909,rotation:0,target:"1-room01_samples"},{yaw:-2.061443207535925,pitch:.5429849080188749,rotation:0,target:"4-room02_rightside"}],infoHotspots:[{yaw:-2.6565479498938753,pitch:.08227744642221779,title:"Samples",text:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English.&nbsp;"},{yaw:.27605150217843644,pitch:.27273705089885425,title:"Operation Table",text:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English.&nbsp;"}]},{id:"4-room02_rightside",name:"Room02_rightSide",levels:[{tileSize:256,size:256,fallbackOnly:!0},{tileSize:512,size:512},{tileSize:512,size:1024},{tileSize:512,size:2048}],faceSize:1728,initialViewParameters:{yaw:.37105829916129096,pitch:.5936090840828641,fov:1.3834918748083818},linkHotspots:[{yaw:.29541070429976557,pitch:.008774865175208646,rotation:0,target:"3-room02_operationside"}],infoHotspots:[{yaw:.5360967565832375,pitch:.7561237995898242,title:'<div style="font-family: &quot;Segoe UI&quot;, system-ui, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, sans-serif; font-size: 14px;">Cyanobacteria</div>',text:"Discription goes here:&nbsp;It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English."}]}],name:"BioLab",settings:{mouseViewMode:"drag",autorotateEnabled:!1,fullscreenButton:!1,viewControlButtons:!1}};exports.default=e;
},{}],"A2T1":[function(require,module,exports) {
"use strict";var e=o(require("marzipano")),t=o(require("screenfull")),n=o(require("./data"));function o(e){return e&&e.__esModule?e:{default:e}}console.log(n.default);var a=n.default,s=document.querySelector("#pano"),i=document.querySelector("#titleBar .sceneName"),d=document.querySelector("#sceneList"),r=document.querySelectorAll("#sceneList .scene"),c=document.querySelector("#sceneListToggle"),l=document.querySelector("#autorotateToggle"),u=document.querySelector("#fullscreenToggle");if(window.matchMedia){var m=function(){p.matches?(document.body.classList.remove("desktop"),document.body.classList.add("mobile")):(document.body.classList.remove("mobile"),document.body.classList.add("desktop"))},p=matchMedia("(max-width: 500px), (max-height: 500px)");m(),p.addListener(m)}else document.body.classList.add("desktop");document.body.classList.add("no-touch"),window.addEventListener("touchstart",function(){document.body.classList.remove("no-touch"),document.body.classList.add("touch")});var f={controls:{mouseViewMode:a.settings.mouseViewMode,scrollZoom:!1}},h=new e.default.Viewer(s,f),v=a.scenes.map(function(t){var n="prod"===window.vt_env?"https://www.gannett-cdn.com/labs/dev/virtualTour/tiles":"tiles",o=e.default.ImageUrlSource.fromString(n+"/"+t.id+"/{z}/{f}/{y}/{x}.jpg",{cubeMapPreviewUrl:n+"/"+t.id+"/preview.jpg"}),a=new e.default.CubeGeometry(t.levels),s=e.default.RectilinearView.limit.traditional(t.faceSize,100*Math.PI/180,120*Math.PI/180),i=new e.default.RectilinearView(t.initialViewParameters,s),d=h.createScene({source:o,geometry:a,view:i,pinFirstLevel:!0});return t.linkHotspots.forEach(function(e){var t=U(e);d.hotspotContainer().createHotspot(t,{yaw:e.yaw,pitch:e.pitch})}),t.infoHotspots.forEach(function(e){var t=_(e);d.hotspotContainer().createHotspot(t,{yaw:e.yaw,pitch:e.pitch})}),{data:t,scene:d,view:i}}),L=e.default.autorotate({yawSpeed:.03,targetPitch:0,targetFov:Math.PI/2});a.settings.autorotateEnabled&&l.classList.add("enabled"),l.addEventListener("click",R),t.default.enabled&&a.settings.fullscreenButton?(document.body.classList.add("fullscreen-enabled"),u.addEventListener("click",function(){t.default.toggle()}),t.default.on("change",function(){t.default.isFullscreen?u.classList.add("enabled"):u.classList.remove("enabled")})):document.body.classList.add("fullscreen-disabled"),c.addEventListener("click",V),document.body.classList.contains("mobile")||x(),v.forEach(function(e){document.querySelector('#sceneList .scene[data-id="'+e.data.id+'"]').addEventListener("click",function(){P(e),document.body.classList.contains("mobile")&&I()})});var g=document.querySelector("#viewUp"),w=document.querySelector("#viewDown"),b=document.querySelector("#viewLeft"),y=document.querySelector("#viewRight"),E=document.querySelector("#viewIn"),M=document.querySelector("#viewOut"),S=.7,q=3,C=h.controls();function k(e){return e.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;")}function P(e){F(),e.view.setParameters(e.data.initialViewParameters),e.scene.switchTo(),z(),T(e),H(e)}function T(e){i.innerHTML=k(e.data.name)}function H(e){for(var t=0;t<r.length;t++){var n=r[t];n.getAttribute("data-id")===e.data.id?n.classList.add("current"):n.classList.remove("current")}}function x(){d.classList.add("enabled"),c.classList.add("enabled")}function I(){d.classList.remove("enabled"),c.classList.remove("enabled")}function V(){d.classList.toggle("enabled"),c.classList.toggle("enabled")}function z(){l.classList.contains("enabled")&&(h.startMovement(L),h.setIdleMovement(3e3,L))}function F(){h.stopMovement(),h.setIdleMovement(1/0)}function R(){l.classList.contains("enabled")?(l.classList.remove("enabled"),F()):(l.classList.add("enabled"),z())}function U(e){var t=document.createElement("div");t.classList.add("hotspot"),t.classList.add("link-hotspot");var n=document.createElement("img");n.src="img/link.png",n.classList.add("link-hotspot-icon");for(var o=["-ms-transform","-webkit-transform","transform"],a=0;a<o.length;a++){var s=o[a];n.style[s]="rotate("+e.rotation+"rad)"}t.addEventListener("click",function(){P(A(e.target))}),j(t);var i=document.createElement("div");return i.classList.add("hotspot-tooltip"),i.classList.add("link-hotspot-tooltip"),i.innerHTML=B(e.target).name,t.appendChild(n),t.appendChild(i),t}function _(e){var t=document.createElement("div");t.classList.add("hotspot"),t.classList.add("info-hotspot");var n=document.createElement("div");n.classList.add("info-hotspot-header");var o=document.createElement("div");o.classList.add("info-hotspot-icon-wrapper");var a=document.createElement("img");a.src="img/info.png",a.classList.add("info-hotspot-icon"),o.appendChild(a);var s=document.createElement("div");s.classList.add("info-hotspot-title-wrapper");var i=document.createElement("div");i.classList.add("info-hotspot-title"),i.innerHTML=e.title,s.appendChild(i);var d=document.createElement("div");d.classList.add("info-hotspot-close-wrapper");var r=document.createElement("img");r.src="img/close.png",r.classList.add("info-hotspot-close-icon"),d.appendChild(r),n.appendChild(o),n.appendChild(s),n.appendChild(d);var c=document.createElement("div");c.classList.add("info-hotspot-text"),c.innerHTML=e.text,t.appendChild(n),t.appendChild(c);var l=document.querySelector("#virtual-tour-container"),u=document.createElement("div");u.innerHTML=t.innerHTML,u.classList.add("info-hotspot-modal"),l.appendChild(u);var m=function(){t.classList.toggle("visible"),u.classList.toggle("visible")};return t.querySelector(".info-hotspot-header").addEventListener("click",m),u.querySelector(".info-hotspot-close-wrapper").addEventListener("click",m),j(t),t}function j(e,t){t=["touchstart","touchmove","touchend","touchcancel","wheel","mousewheel"];for(var n=0;n<t.length;n++)e.addEventListener(t[n],function(e){e.stopPropagation()})}function A(e){for(var t=0;t<v.length;t++)if(v[t].data.id===e)return v[t];return null}function B(e){for(var t=0;t<a.scenes.length;t++)if(a.scenes[t].id===e)return a.scenes[t];return null}C.registerMethod("upElement",new e.default.ElementPressControlMethod(g,"y",-S,q),!0),C.registerMethod("downElement",new e.default.ElementPressControlMethod(w,"y",S,q),!0),C.registerMethod("leftElement",new e.default.ElementPressControlMethod(b,"x",-S,q),!0),C.registerMethod("rightElement",new e.default.ElementPressControlMethod(y,"x",S,q),!0),C.registerMethod("inElement",new e.default.ElementPressControlMethod(E,"zoom",-S,q),!0),C.registerMethod("outElement",new e.default.ElementPressControlMethod(M,"zoom",S,q),!0),P(v[0]);
},{"marzipano":"CTat","screenfull":"VrMo","./data":"paDP"}]},{},["A2T1"], null)
//# sourceMappingURL=https://www.gannett-cdn.com/labs/dev/virtualTour/app.6d8d0dcd.js.map