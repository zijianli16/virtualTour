{"version":3,"sources":["node_modules/minimal-event-emitter/index.js","node_modules/marzipano/src/util/now.js","node_modules/marzipano/src/collections/WorkQueue.js","node_modules/marzipano/src/util/calcRect.js","node_modules/marzipano/src/util/async.js","node_modules/marzipano/src/util/once.js","node_modules/marzipano/src/util/cancelize.js","node_modules/marzipano/src/util/clearOwnProperties.js","node_modules/marzipano/src/stages/RendererRegistry.js","node_modules/marzipano/src/stages/Stage.js","node_modules/marzipano/src/util/global.js","node_modules/marzipano/src/assets/Static.js","node_modules/marzipano/src/util/inherits.js","node_modules/marzipano/src/NetworkError.js","node_modules/marzipano/src/loaders/HtmlImage.js","node_modules/marzipano/src/support/WebGl.js","node_modules/bowser/es5.js","node_modules/marzipano/src/util/pixelRatio.js","node_modules/marzipano/src/util/ispot.js","node_modules/marzipano/src/util/dom.js","node_modules/marzipano/src/stages/WebGl.js","node_modules/marzipano/src/support/Css.js","node_modules/marzipano/src/stages/Css.js","node_modules/marzipano/src/assets/Flash.js","node_modules/marzipano/src/loaders/FlashImage.js","node_modules/marzipano/src/support/Flash.js","node_modules/marzipano/src/util/defer.js","node_modules/marzipano/src/stages/Flash.js","node_modules/gl-matrix/esm/common.js","node_modules/gl-matrix/esm/mat2.js","node_modules/gl-matrix/esm/mat2d.js","node_modules/gl-matrix/esm/mat3.js","node_modules/gl-matrix/esm/mat4.js","node_modules/gl-matrix/esm/vec3.js","node_modules/gl-matrix/esm/vec4.js","node_modules/gl-matrix/esm/quat.js","node_modules/gl-matrix/esm/quat2.js","node_modules/gl-matrix/esm/vec2.js","node_modules/gl-matrix/esm/index.js","node_modules/marzipano/src/util/clamp.js","node_modules/marzipano/src/renderers/WebGlCommon.js","node_modules/marzipano/src/shaders/vertexNormal.js","node_modules/marzipano/src/shaders/fragmentNormal.js","node_modules/marzipano/src/renderers/WebGlBase.js","node_modules/marzipano/src/renderers/WebGlCube.js","node_modules/marzipano/src/renderers/WebGlFlat.js","node_modules/marzipano/src/shaders/vertexEquirect.js","node_modules/marzipano/src/shaders/fragmentEquirect.js","node_modules/marzipano/src/renderers/WebGlEquirect.js","node_modules/marzipano/src/util/hash.js","node_modules/marzipano/src/util/mod.js","node_modules/marzipano/src/collections/Set.js","node_modules/marzipano/src/TileSearcher.js","node_modules/marzipano/src/collections/LruMap.js","node_modules/marzipano/src/geometries/Level.js","node_modules/marzipano/src/util/cmp.js","node_modules/marzipano/src/geometries/common.js","node_modules/marzipano/src/util/type.js","node_modules/marzipano/src/geometries/Cube.js","node_modules/marzipano/src/collections/Map.js","node_modules/marzipano/src/util/decimal.js","node_modules/marzipano/src/renderers/CssBase.js","node_modules/marzipano/src/renderers/CssCube.js","node_modules/marzipano/src/geometries/Flat.js","node_modules/marzipano/src/renderers/CssFlat.js","node_modules/marzipano/src/renderers/FlashBase.js","node_modules/marzipano/src/util/radToDeg.js","node_modules/marzipano/src/renderers/FlashCube.js","node_modules/marzipano/src/renderers/FlashFlat.js","node_modules/marzipano/src/renderers/registerDefaultRenderers.js","node_modules/marzipano/src/geometries/Equirect.js","node_modules/marzipano/src/util/convertFov.js","node_modules/marzipano/src/util/real.js","node_modules/marzipano/src/util/compose.js","node_modules/marzipano/src/views/Rectilinear.js","node_modules/marzipano/src/views/Flat.js","node_modules/marzipano/src/collections/WorkPool.js","node_modules/marzipano/src/util/noop.js","node_modules/marzipano/src/util/chain.js","node_modules/marzipano/src/util/delay.js","node_modules/marzipano/src/sources/ImageUrl.js","node_modules/marzipano/src/sources/SingleAsset.js","node_modules/marzipano/src/assets/Dynamic.js","node_modules/marzipano/src/collections/LruSet.js","node_modules/marzipano/src/util/defaults.js","node_modules/marzipano/src/util/retry.js","node_modules/marzipano/src/TextureStore.js","node_modules/marzipano/src/util/extend.js","node_modules/marzipano/src/Layer.js","node_modules/marzipano/src/RenderLoop.js","node_modules/marzipano/src/controls/Dynamics.js","node_modules/marzipano/src/controls/Key.js","node_modules/hammerjs/hammer.js","node_modules/marzipano/src/controls/HammerGestures.js","node_modules/marzipano/src/controls/util.js","node_modules/marzipano/src/controls/Drag.js","node_modules/marzipano/src/controls/Qtvr.js","node_modules/marzipano/src/controls/WheelListener.js","node_modules/marzipano/src/controls/ScrollZoom.js","node_modules/marzipano/src/controls/PinchZoom.js","node_modules/marzipano/src/controls/Velocity.js","node_modules/marzipano/src/controls/ElementPress.js","node_modules/marzipano/src/controls/Composer.js","node_modules/marzipano/src/controls/Controls.js","node_modules/marzipano/src/util/positionAbsolutely.js","node_modules/marzipano/src/Hotspot.js","node_modules/marzipano/src/support/cssPointerEvents.js","node_modules/marzipano/src/HotspotContainer.js","node_modules/marzipano/src/Scene.js","node_modules/marzipano/src/Timer.js","node_modules/marzipano/src/controls/ControlCursor.js","node_modules/marzipano/src/controls/registerDefaultControls.js","node_modules/marzipano/src/util/tween.js","node_modules/marzipano/src/Viewer.js","node_modules/marzipano/src/colorEffects.js","node_modules/marzipano/src/autorotate.js","node_modules/marzipano/src/util/degToRad.js","node_modules/marzipano/src/index.js","node_modules/screenfull/dist/screenfull.js","data.js","app.js"],"names":["EPSILON","ARRAY_TYPE","Float32Array","Array","RANDOM","Math","random","setMatrixArrayType","type","degree","PI","toRadian","a","equals","b","abs","max","hypot","i","y","arguments","length","sqrt","create","out","glMatrix","clone","copy","identity","fromValues","m00","m01","m10","m11","set","transpose","a1","invert","a0","a2","a3","det","adjoint","determinant","multiply","b0","b1","b2","b3","rotate","rad","s","sin","c","cos","scale","v","v0","v1","fromRotation","fromScaling","str","frob","LDU","L","D","U","add","subtract","exactEquals","multiplyScalar","multiplyScalarAndAdd","mul","sub","d","tx","ty","aa","ab","ac","ad","atx","aty","a4","a5","b4","b5","translate","fromTranslation","fromMat4","m02","m12","m20","m21","m22","a01","a02","a12","a00","a10","a11","a20","a21","a22","b01","b11","b21","b00","b02","b10","b12","b20","b22","x","fromMat2d","fromQuat","q","z","w","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","normalFromMat4","a03","a13","a23","a30","a31","a32","a33","b03","b04","b05","b06","b07","b08","b09","projection","width","height","a6","a7","a8","b6","b7","b8","m03","m13","m23","m30","m31","m32","m33","axis","t","len","rotateX","rotateY","rotateZ","fromXRotation","fromYRotation","fromZRotation","fromRotationTranslation","xy","xz","yz","fromQuat2","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","getTranslation","mat","getScaling","getRotation","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","fromRotationTranslationScale","sx","sy","sz","fromRotationTranslationScaleOrigin","o","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","frustum","left","right","bottom","top","near","far","rl","tb","nf","perspective","fovy","aspect","f","tan","Infinity","perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","ortho","lr","bt","lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","targetTo","target","a9","a14","a15","b9","b13","b14","b15","divide","ceil","floor","min","round","scaleAndAdd","distance","squaredDistance","squaredLength","negate","inverse","normalize","dot","cross","lerp","hermite","factorTimes2","factor1","factor2","factor3","factor4","bezier","inverseFactor","inverseFactorTimesTwo","r","zScale","transformMat4","m","transformMat3","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","p","angle","tempA","tempB","cosine","acos","zero","div","dist","sqrDist","sqrLen","forEach","vec","stride","offset","count","fn","arg","l","u","A","B","C","E","F","G","H","I","J","v2","v3","v4","s1","s2","ix","iy","iz","iw","setAxisAngle","getAxisAngle","out_axis","getAngle","dotproduct","calculateW","exp","et","ln","atan2","log","pow","slerp","omega","cosom","sinom","scale0","scale1","u1","u2","u3","sqrt1MinusU1","sqrtU1","invDot","conjugate","fromMat3","fTrace","fRoot","j","k","fromEuler","halfToRad","cx","cy","cz","vec4","rotationTo","tmpvec3","vec3","xUnitVec3","yUnitVec3","sqlerp","temp1","temp2","setAxes","matr","mat3","view","dq","w1","fromRotationTranslationValues","outer","quat","mat4","getReal","getDual","setReal","setDual","ax1","ay1","az1","aw1","bx1","by1","bz1","ax2","ay2","az2","aw2","rotateByQuatAppend","rotateByQuatPrepend","rotateAroundAxis","axisLength","ax0","ay0","az0","aw0","bw1","bx0","by0","bz0","bw0","mt","sqlen","a_dot_b","transformMat2","transformMat2d","p0","p1","sinC","cosC","len1","len2","window","document","exportName","undefined","VENDOR_PREFIXES","TEST_ELEMENT","createElement","TYPE_FUNCTION","now","Date","setTimeoutContext","timeout","context","setTimeout","bindFn","invokeArrayArg","isArray","each","obj","iterator","call","hasOwnProperty","extend","dest","src","merge","keys","Object","inherit","child","base","properties","baseP","childP","prototype","constructor","_super","apply","boolOrFn","val","args","ifUndefined","val1","val2","addEventListeners","types","handler","splitStr","addEventListener","removeEventListeners","removeEventListener","hasParent","node","parent","parentNode","inStr","find","indexOf","trim","split","inArray","findByKey","toArray","slice","uniqueArray","key","sort","results","values","push","prefixed","property","prefix","prop","camelProp","toUpperCase","_uniqueId","getWindowForElement","element","doc","ownerDocument","defaultView","parentWindow","MOBILE_REGEX","SUPPORT_TOUCH","SUPPORT_POINTER_EVENTS","SUPPORT_ONLY_TOUCH","test","navigator","userAgent","COMPUTE_INTERVAL","INPUT_START","INPUT_MOVE","INPUT_END","INPUT_CANCEL","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","DIRECTION_ALL","PROPS_XY","PROPS_CLIENT_XY","Input","manager","callback","self","options","inputTarget","domHandler","ev","enable","init","inputHandler","eventType","input","pointersLen","pointers","changedPointersLen","changedPointers","isFirst","isFinal","session","computeInputData","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","getCenter","timeStamp","deltaTime","getDistance","computeDeltaXY","offsetDelta","prevDelta","prevInput","deltaX","deltaY","offsetDirection","getDirection","start","end","rotation","computeIntervalInputData","last","velocity","velocityX","velocityY","direction","lastInterval","getVelocity","getScale","srcEvent","emit","recognize","clientX","clientY","p2","props","evEl","evTarget","evWin","destroy","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","MOUSE_ELEMENT_EVENTS","MOUSE_WINDOW_EVENTS","MouseInput","allow","pressed","button","which","pointerType","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","INPUT_TYPE_TOUCH","INPUT_TYPE_PEN","INPUT_TYPE_MOUSE","INPUT_TYPE_KINECT","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","PointerEventInput","store","pointerEvents","MSPointerEvent","removePointer","eventTypeNormalized","toLowerCase","replace","isTouch","storeIndex","pointerId","splice","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","SINGLE_TOUCH_TARGET_EVENTS","SINGLE_TOUCH_WINDOW_EVENTS","SingleTouchInput","started","touches","normalizeSingleTouches","all","changed","changedTouches","concat","TOUCH_INPUT_MAP","TOUCH_TARGET_EVENTS","TouchInput","targetIds","TouchMouseInput","touch","mouse","getTouches","allTouches","identifier","targetTouches","changedTargetTouches","filter","inputEvent","inputData","isMouse","PREFIXED_TOUCH_ACTION","style","NATIVE_TOUCH_ACTION","TOUCH_ACTION_AUTO","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_NONE","TOUCH_ACTION_PAN_X","TOUCH_ACTION_PAN_Y","TouchAction","value","compute","actions","update","touchAction","cleanTouchActions","recognizers","recognizer","getTouchAction","hasPanX","hasPanY","join","preventDefaults","prevented","hasNone","preventSrc","preventDefault","STATE_POSSIBLE","STATE_BEGAN","STATE_CHANGED","STATE_ENDED","STATE_RECOGNIZED","STATE_CANCELLED","Recognizer","id","defaults","state","simultaneous","requireFail","directionStr","getRecognizerByNameIfManager","otherRecognizer","get","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","Hammer","preset","Manager","recognizeWith","dropRecognizeWith","requireFailure","dropRequireFailure","index","hasRequireFailures","canRecognizeWith","withState","event","stateStr","tryEmit","canEmit","inputDataClone","reset","process","attrTest","optionPointers","isRecognized","isValid","threshold","directionTest","hasMoved","inOut","time","validPointers","validMovement","validTime","STATE_FAILED","clearTimeout","taps","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","VERSION","domEvents","inputClass","cssProps","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","createInputInstance","handlers","toggleCssProps","item","name","stop","force","stopped","curRecognizer","existing","remove","on","events","off","data","triggerDomEvent","gestureEvent","createEvent","initEvent","gesture","dispatchEvent","Tap","Pan","Swipe","Pinch","Rotate","Press","define","amd","module","exports","isCommonjs","fnMap","ret","eventNameMap","change","fullscreenchange","error","fullscreenerror","screenfull","request","Promise","resolve","reject","onFullScreenEntered","bind","returnPromise","documentElement","requestFullscreen","then","catch","exit","isFullscreen","onFullScreenExit","exitFullscreen","toggle","onchange","onerror","eventName","raw","defineProperties","Boolean","fullscreenElement","enumerable","isEnabled","fullscreenEnabled","console","APP_DATA","panoElement","querySelector","sceneNameElement","sceneListElement","sceneElements","querySelectorAll","sceneListToggleElement","autorotateToggleElement","fullscreenToggleElement","matchMedia","setMode","mql","matches","body","classList","addListener","viewerOpts","controls","mouseViewMode","settings","scrollZoom","viewer","Marzipano","Viewer","scenes","map","urlPrefix","vt_env","source","ImageUrlSource","fromString","cubeMapPreviewUrl","geometry","CubeGeometry","levels","limiter","RectilinearView","limit","traditional","faceSize","initialViewParameters","scene","createScene","pinFirstLevel","linkHotspots","hotspot","createLinkHotspotElement","hotspotContainer","createHotspot","yaw","pitch","infoHotspots","createInfoHotspotElement","autorotate","yawSpeed","targetPitch","targetFov","autorotateEnabled","toggleAutorotate","enabled","fullscreenButton","toggleSceneList","contains","showSceneList","switchScene","hideSceneList","viewUpElement","viewDownElement","viewLeftElement","viewRightElement","viewInElement","viewOutElement","friction","sanitize","stopAutorotate","setParameters","switchTo","startAutorotate","updateSceneName","updateSceneList","innerHTML","el","getAttribute","startMovement","setIdleMovement","stopMovement","wrapper","icon","transformProperties","findSceneById","stopTouchAndScrollEventPropagation","tooltip","findSceneDataById","appendChild","header","iconWrapper","titleWrapper","title","closeWrapper","closeIcon","text","embedWrapper","modal","eventList","stopPropagation","registerMethod","ElementPressControlMethod"],"mappings":"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","file":"app.6d8d0dcd.js","sourceRoot":"..","sourcesContent":["'use strict';\n\n/**\n * @class\n * @classdesc Minimalistic event emitter mixin.\n */\nfunction EventEmitter() {}\n\n/**\n * Registers an event listener for the specified event. If the listener has\n * already been registered for the event, this is a no-op.\n *\n * @param {string} name The event name.\n * @param {function} fn The listener function.\n */\nEventEmitter.prototype.addEventListener = function(name, fn) {\n  var eventMap = this.__events = this.__events || {};\n  var handlerList = eventMap[name] = eventMap[name] || [];\n  if (handlerList.indexOf(fn) < 0) {\n    handlerList.push(fn);\n  }\n};\n\n/**\n * Unregisters an event listener from the specified event. If the listener\n * hasn't been registered for the event, this is a no-op.\n *\n * @param {string} name The event name.\n * @param {function} fn The listener function.\n */\nEventEmitter.prototype.removeEventListener = function(name, fn) {\n  var eventMap = this.__events = this.__events || {};\n  var handlerList = eventMap[name];\n  if (handlerList) {\n    var index = handlerList.indexOf(fn);\n    if (index >= 0) {\n      handlerList.splice(index, 1);\n    }\n  }\n};\n\n/**\n * Emits an event, causing all registered event listeners for that event to be\n * called in registration order.\n *\n * @param {string} name The event name.\n * @param {...*} var_args Arguments to call listeners with.\n */\nEventEmitter.prototype.emit = function(name, var_args) {\n  var eventMap = this.__events = this.__events || {};\n  var handlerList = eventMap[name];\n  var args = Array.prototype.slice.call(arguments, 1);\n  if (handlerList) {\n    for (var i = 0; i < handlerList.length; i++) {\n      var fn = handlerList[i];\n      fn.apply(this, args);\n    }\n  }\n};\n\n/**\n * Mixes in {@link EventEmitter} into a constructor function.\n *\n * @param {function} ctor The constructor function.\n */\nfunction eventEmitter(ctor) {\n  for (var prop in EventEmitter.prototype) {\n    if (EventEmitter.prototype.hasOwnProperty(prop)) {\n      ctor.prototype[prop] = EventEmitter.prototype[prop];\n    }\n  }\n}\n\nmodule.exports = eventEmitter;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nfunction getNow() {\n  if (typeof performance !== 'undefined' && performance.now) {\n    return function performanceNow() {\n      return performance.now();\n    };\n  }\n  return function dateNow() {\n    return Date.now();\n  };\n}\n\nmodule.exports = getNow();\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar now = require('../util/now');\n\n\nfunction WorkTask(fn, cb) {\n  this.fn = fn;\n  this.cb = cb;\n  this.cfn = null;\n}\n\n\nfunction WorkQueue(opts) {\n  this._queue = [];\n  this._delay = opts && opts.delay || 0;\n  this._paused = opts && !!opts.paused || false;\n  this._currentTask = null;\n  this._lastFinished = null;\n}\n\n\nWorkQueue.prototype.length = function() {\n  return this._queue.length;\n};\n\n\nWorkQueue.prototype.push = function(fn, cb) {\n\n  var task = new WorkTask(fn, cb);\n\n  var cancel = this._cancel.bind(this, task);\n\n  // Push the task into the queue.\n  this._queue.push(task);\n\n  // Run the task if idle.\n  this._next();\n\n  return cancel;\n\n};\n\n\nWorkQueue.prototype.pause = function() {\n  if (!this._paused) {\n    this._paused = true;\n  }\n};\n\n\nWorkQueue.prototype.resume = function() {\n  if (this._paused) {\n    this._paused = false;\n    this._next();\n  }\n};\n\n\nWorkQueue.prototype._start = function(task) {\n\n  // Consistency check.\n  if (this._currentTask) {\n    throw new Error('WorkQueue: called start while running task');\n  }\n\n  // Mark queue as busy, so that concurrent tasks wait.\n  this._currentTask = task;\n\n  // Execute the task.\n  var finish = this._finish.bind(this, task);\n  task.cfn = task.fn(finish);\n\n  // Detect when a non-cancellable function has been queued.\n  if (typeof task.cfn !== 'function') {\n    throw new Error('WorkQueue: function is not cancellable');\n  }\n\n};\n\n\nWorkQueue.prototype._finish = function(task) {\n\n  var args = Array.prototype.slice.call(arguments, 1);\n\n  // Consistency check.\n  if (this._currentTask !== task) {\n    throw new Error('WorkQueue: called finish on wrong task');\n  }\n\n  // Call the task callback on the return values.\n  task.cb.apply(null, args);\n\n  // Mark as not busy and record task finish time, then advance to next task.\n  this._currentTask = null;\n  this._lastFinished = now();\n  this._next();\n\n};\n\n\nWorkQueue.prototype._cancel = function(task) {\n\n  var args = Array.prototype.slice.call(arguments, 1);\n\n  if (this._currentTask === task) {\n\n    // Cancel running task. Because cancel passes control to the _finish\n    // callback we passed into fn, the cleanup logic will be handled there.\n    task.cfn.apply(null, args);\n\n  } else {\n\n    // Remove task from queue.\n    var pos = this._queue.indexOf(task);\n    if (pos >= 0) {\n      this._queue.splice(pos, 1);\n      task.cb.apply(null, args);\n    }\n\n  }\n\n};\n\n\nWorkQueue.prototype._next = function() {\n\n  if (this._paused) {\n    // Do not start tasks while paused.\n    return;\n  }\n\n  if (!this._queue.length) {\n    // No tasks to run.\n    return;\n  }\n\n  if (this._currentTask) {\n    // Will be called again when the current task finishes.\n    return;\n  }\n\n  if (this._lastFinished != null) {\n    var elapsed = now() - this._lastFinished;\n    var remaining = this._delay - elapsed;\n    if (remaining > 0) {\n      // Too soon. Run again after the inter-task delay.\n      setTimeout(this._next.bind(this), remaining);\n      return;\n    }\n  }\n\n  // Run the next task.\n  var task = this._queue.shift();\n  this._start(task);\n\n};\n\n\nmodule.exports = WorkQueue;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n/**\n * Converts a {@link RectSpec} into an equivalent {@link Rect}.\n *\n * A {@link RectSpec} is a convenient user API format, providing default values\n * and the flexibility of specifying absolute, relative or mixed dimensions.\n *\n * A {@link Rect} is a more convenient format for the rendering pipeline. It is\n * always expressed in normalized coordinates, and all its properties are\n * guaranteed to be present.\n *\n * @param {number} totalWidth The total width of the rendering area in pixels.\n * @param {number} totalHeight The total height of the rendering area in pixels.\n * @param {RectSpec} spec The input spec, defaulting to the full rendering area\n *     if null or undefined.\n * @param {Rect} result The output spec. If the argument is present, it is\n *     filled in and returned; otherwise, a fresh object is returned.\n */\nfunction calcRect(totalWidth, totalHeight, spec, result) {\n\n  result = result || {};\n\n  var width;\n  if (spec != null && spec.absoluteWidth != null) {\n    width = spec.absoluteWidth / totalWidth;\n  } else if (spec != null && spec.relativeWidth != null) {\n    width = spec.relativeWidth;\n  } else {\n    width = 1;\n  }\n\n  var height;\n  if (spec && spec.absoluteHeight != null) {\n    height = spec.absoluteHeight / totalHeight;\n  } else if (spec != null && spec.relativeHeight != null) {\n    height = spec.relativeHeight;\n  } else {\n    height = 1;\n  }\n\n  var x;\n  if (spec != null && spec.absoluteX != null) {\n    x = spec.absoluteX / totalWidth;\n  } else if (spec != null && spec.relativeX != null) {\n    x = spec.relativeX;\n  } else {\n    x = 0;\n  }\n\n  var y;\n  if (spec != null && spec.absoluteY != null) {\n    y = spec.absoluteY / totalHeight;\n  } else if (spec != null && spec.relativeY != null) {\n    y = spec.relativeY;\n  } else {\n    y = 0;\n  }\n\n  result.x = x;\n  result.y = y;\n  result.width = width;\n  result.height = height;\n\n  return result;\n}\n\nmodule.exports = calcRect;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n// Transform a synchronous function into an asynchronous one.\nfunction async(fn) {\n  return function asynced(done) {\n    var err, ret;\n    try {\n      ret = fn();\n    } catch (e) {\n      err = e;\n    } finally {\n      if (err) {\n        done(err);\n      } else {\n        done(null, ret);\n      }\n    }\n  };\n}\n\nmodule.exports = async;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nfunction once(fn) {\n  var called = false;\n  var value;\n  return function onced() {\n    if (!called) {\n      called = true;\n      value = fn.apply(null, arguments);\n    }\n    return value;\n  };\n}\n\nmodule.exports = once;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar once = require('./once');\n\n// A cancelable function is an asynchronous function (i.e., one whose last\n// argument is a callback receiving an error plus zero or more return values)\n// that (synchronously) returns a cancel() function. Calling cancel() should\n// abort the asynchronous operation and call the callback with the arguments\n// that were passed into cancel(). Calling cancel() twice, as with callbacks,\n// is not guaranteed to be safe.\n\n// Wrap a non-cancellable asynchronous function into a cancelable one.\n//\n// Calling cancel() on the returned function will not interrupt the execution\n// of the original function; it will merely ignore its return value.\n//\n// Usually, instead of wrapping your function, you want to implement cancel()\n// yourself in order to have some abort logic. This utility function provides a\n// straighforward solution for cases in which no custom abort logic is required.\nfunction cancelize(fn) {\n  return function cancelized() {\n    if (!arguments.length) {\n      throw new Error('cancelized: expected at least one argument');\n    }\n    var args = Array.prototype.slice.call(arguments, 0);\n    var done = args[args.length - 1] = once(args[args.length - 1]);\n\n    function cancel() {\n      done.apply(null, arguments);\n    }\n\n    fn.apply(null, args);\n\n    return cancel;\n  };\n}\n\nmodule.exports = cancelize;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n// Sets an object's own properties to undefined. This may be called by\n// destructors to avoid retaining references and help detect incorrect use of\n// destroyed instances.\nfunction clearOwnProperties(obj) {\n  for (var prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      obj[prop] = undefined;\n    }\n  }\n}\n\nmodule.exports = clearOwnProperties;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n/**\n * @class RendererRegistry\n * @classdesc\n *\n * A RendererRegistry maps pairs of {@link Geometry} and {@link View} type into\n * the appropriate {@link Renderer} class. It is used by a {@link Stage} to\n * determine the appropriate renderer for a {@link Layer}.\n *\n * See also {@link Stage#registerRenderer}.\n */\nfunction RendererRegistry() {\n  this._renderers = {};\n}\n\n/**\n * Registers a renderer for the given geometry and view type.\n * @param {string} geometryType The geometry type, as given by\n *     {@link Geometry#type}.\n * @param {string} viewType The view type, as given by {@link View#type}.\n * @param {*} Renderer The renderer class.\n */\nRendererRegistry.prototype.set = function(geometryType, viewType, Renderer) {\n  if (!this._renderers[geometryType]) {\n    this._renderers[geometryType] = {};\n  }\n  this._renderers[geometryType][viewType] = Renderer;\n};\n\n/**\n * Retrieves the renderer for the given geometry and view type.\n * @param {string} geometryType The geometry type, as given by\n *     {@link Geometry#type}.\n * @param {string} viewType The view type, as given by {@link View#type}.\n * @param {*} Renderer The renderer class, or null if no such renderer has been\n * registered.\n */\nRendererRegistry.prototype.get = function(geometryType, viewType) {\n  var Renderer = this._renderers[geometryType] &&\n      this._renderers[geometryType][viewType];\n  return Renderer || null;\n};\n\nmodule.exports = RendererRegistry;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar WorkQueue = require('../collections/WorkQueue');\nvar calcRect = require('../util/calcRect');\nvar async = require('../util/async');\nvar cancelize = require('../util/cancelize');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\nvar RendererRegistry = require('./RendererRegistry');\n\nfunction forwardTileCmp(t1, t2) {\n  return t1.cmp(t2);\n}\n\nfunction reverseTileCmp(t1, t2) {\n  return -t1.cmp(t2);\n}\n\n/**\n * Signals that the stage has been rendered.\n *\n * @param {boolean} stable Whether all tiles were successfully rendered without\n *     missing textures or resorting to fallbacks.\n * @event Stage#renderComplete\n */\n\n/**\n * Signals that the contents of the stage have been invalidated and must be\n * rendered again.\n *\n * This is used by the {@link RenderLoop} implementation.\n *\n * @event Stage#renderInvalid\n */\n\n/**\n * @interface Stage\n * @classdesc\n *\n * A Stage is a container with the ability to render a stack of\n * {@link Layer layers}.\n *\n * This is a superclass containing logic that is common to all implementations;\n * it should never be instantiated directly. Instead, use one of the\n * subclasses: {@link WebGlStage}, {@link CssStage} or {@link FlashStage}.\n *\n * @param {Object} opts\n * @param {boolean} [opts.progressive=false]\n *\n * Options listed here may be passed into the `opts` constructor argument of\n * subclasses.\n *\n * The `progressive` option controls whether resolution levels are loaded in\n * order, from lowest to highest. This results in a more pleasing effect when\n * zooming past several levels in a large panoramas, but consumes additional\n * bandwidth.\n */\nfunction Stage(opts) {\n  this._progressive = !!(opts && opts.progressive);\n\n  // The list of layers in display order (background to foreground).\n  this._layers = [];\n\n  // The list of renderers; the i-th renderer is for the i-th layer.\n  this._renderers = [];\n\n  // The lists of tiles to load and render, populated during render().\n  this._tilesToLoad = [];\n  this._tilesToRender = [];\n\n  // Temporary tile lists.\n  this._tmpVisible = [];\n  this._tmpChildren = [];\n\n  // Cached stage dimensions.\n  // Start with zero, which inhibits rendering until setSize() is called.\n  this._width = 0;\n  this._height = 0;\n\n  // Temporary variable for rect.\n  this._tmpRect = {};\n\n  // Temporary variable for size.\n  this._tmpSize = {};\n\n  // Work queue for createTexture.\n  this._createTextureWorkQueue = new WorkQueue();\n\n  // Function to emit event when render parameters have changed.\n  this._emitRenderInvalid = this._emitRenderInvalid.bind(this);\n\n  // The renderer registry maps each geometry/view pair into the respective\n  // Renderer class.\n  this._rendererRegistry = new RendererRegistry();\n}\n\neventEmitter(Stage);\n\n\n/**\n * Destructor.\n */\nStage.prototype.destroy = function() {\n  this.removeAllLayers();\n  clearOwnProperties(this);\n};\n\n\n/**\n * Registers a {@link Renderer} for the given {@link Geometry} and {@link View}\n * type.\n *\n * The {@link registerDefaultRenderers} utility function may be used to\n * register all known renderers for a stage type into that stage. Most users\n * will not need to register renderers, as {@link Viewer} does it for them.\n *\n * @param {string} geometryType The geometry type, as given by\n *     {@link Geometry#type}.\n * @param {string} viewType The view type, as given by {@link View#type}.\n * @param {*} Renderer The renderer class.\n */\nStage.prototype.registerRenderer = function(geometryType, viewType, Renderer) {\n  return this._rendererRegistry.set(geometryType, viewType, Renderer);\n};\n\n\n/**\n * Returns the underlying DOM element.\n *\n * Must be overridden by subclasses.\n *\n * @return {Element}\n */\nStage.prototype.domElement = function() {\n  throw new Error('Stage implementation must override domElement');\n};\n\n\n/**\n * Get the stage width.\n * @return {number}\n */\nStage.prototype.width = function() {\n  return this._width;\n};\n\n\n/**\n * Get the stage height.\n * @return {number}\n */\nStage.prototype.height = function() {\n  return this._height;\n};\n\n\n/**\n * Get the stage dimensions. If an argument is supplied, it is filled in with\n * the result and returned. Otherwise, a fresh object is filled in and returned.\n *\n * @param {Size=} size\n */\nStage.prototype.size = function(size) {\n  size = size || {};\n  size.width = this._width;\n  size.height = this._height;\n  return size;\n};\n\n\n/**\n * Set the stage dimensions.\n *\n * This contains the size update logic common to all stage types. Subclasses\n * must define the {@link Stage#setSizeForType} method to perform their own\n * logic.\n *\n * @param {Size} size\n */\nStage.prototype.setSize = function(size) {\n  this._width = size.width;\n  this._height = size.height;\n\n  this.setSizeForType(); // must be defined by subclasses.\n\n  this.emit('resize');\n  this._emitRenderInvalid();\n};\n\n\n/**\n * Call {@link Stage#setSize} instead.\n *\n * This contains the size update logic specific to a stage type. It is called by\n * {@link Stage#setSize} after the base class has been updated to reflect the\n * new size, but before any events are emitted.\n *\n * @param {Size} size\n */\nStage.prototype.setSizeForType = function(size) {\n  throw new Error('Stage implementation must override setSizeForType');\n};\n\n\n/**\n * Loads an {@link Asset} from an image.\n * @param {string} url The image URL.\n * @param {?Rect} rect A {@link Rect} describing a portion of the image, or null\n *     to use the full image.\n * @param {function(?Error, Asset)} done The callback.\n * @return {function()} A function to cancel loading.\n */\nStage.prototype.loadImage = function() {\n  throw new Error('Stage implementation must override loadImage');\n};\n\n\nStage.prototype._emitRenderInvalid = function() {\n  this.emit('renderInvalid');\n};\n\n\n/**\n * Verifies that the layer is valid for this stage, throwing an exception\n * otherwise.\n *\n * @param {Layer} layer\n * @throws {Error} If the layer is not valid for this stage.\n */\nStage.prototype.validateLayer = function(layer) {\n  throw new Error('Stage implementation must override validateLayer');\n};\n\n\n/**\n * Returns a list of all {@link Layer layers} belonging to the stage. The\n * returned list is in display order, background to foreground.\n * @return {Layer[]}\n */\nStage.prototype.listLayers = function() {\n  // Return a copy to prevent unintended mutation by the caller.\n  return [].concat(this._layers);\n};\n\n\n/**\n * Return whether a {@link Layer layer} belongs to the stage.\n * @param {Layer} layer\n * @return {boolean}\n */\nStage.prototype.hasLayer = function(layer) {\n  return this._layers.indexOf(layer) >= 0;\n};\n\n\n/**\n * Adds a {@link Layer layer} into the stage.\n * @param {Layer} layer The layer to add.\n * @param {number|undefined} i The optional position, where 0  i  n and n is\n *     the current number of layers. The default is n, which inserts at the\n *     top of the display stack.\n * @throws An error if the layer already belongs to the stage or if the position\n *     is invalid.\n */\nStage.prototype.addLayer = function(layer, i) {\n  if (this._layers.indexOf(layer) >= 0) {\n    throw new Error('Layer already in stage');\n  }\n\n  if (i == null) {\n    i = this._layers.length;\n  }\n  if (i < 0 || i > this._layers.length) {\n    throw new Error('Invalid layer position');\n  }\n\n  this.validateLayer(layer); // must be defined by subclasses.\n\n  var geometryType = layer.geometry().type;\n  var viewType = layer.view().type;\n  var rendererClass = this._rendererRegistry.get(geometryType, viewType);\n  if (!rendererClass) {\n    throw new Error('No ' + this.type + ' renderer avaiable for ' +\n        geometryType + ' geometry and ' + viewType + ' view');\n  }\n  var renderer = this.createRenderer(rendererClass);\n\n  this._layers.splice(i, 0, layer);\n  this._renderers.splice(i, 0, renderer);\n\n  // Listeners for render invalid.\n  layer.addEventListener('viewChange', this._emitRenderInvalid);\n  layer.addEventListener('effectsChange', this._emitRenderInvalid);\n  layer.addEventListener('fixedLevelChange', this._emitRenderInvalid);\n  layer.addEventListener('textureStoreChange', this._emitRenderInvalid);\n\n  this._emitRenderInvalid();\n};\n\n\n/**\n * Moves a {@link Layer layer} into a different position in the display stack.\n * @param {Layer} layer The layer to move.\n * @param {number} i The position, where 0  i  n-1 and n is the current number\n *     of layers.\n * @throws An error if the layer does not belong to the stage or if the position\n *     is invalid.\n */\nStage.prototype.moveLayer = function(layer, i) {\n  var index = this._layers.indexOf(layer);\n  if (index < 0) {\n    throw new Error('No such layer in stage');\n  }\n\n  if (i < 0 || i >= this._layers.length) {\n    throw new Error('Invalid layer position');\n  }\n\n  layer = this._layers.splice(index, 1)[0];\n  var renderer = this._renderers.splice(index, 1)[0];\n\n  this._layers.splice(i, 0, layer);\n  this._renderers.splice(i, 0, renderer);\n\n  this._emitRenderInvalid();\n};\n\n\n/**\n * Removes a {@link Layer} from the stage.\n * @param {Layer} layer The layer to remove.\n * @throws An error if the layer does not belong to the stage.\n */\nStage.prototype.removeLayer = function(layer) {\n  var index = this._layers.indexOf(layer);\n  if (index < 0) {\n    throw new Error('No such layer in stage');\n  }\n\n  var removedLayer = this._layers.splice(index, 1)[0];\n  var renderer = this._renderers.splice(index, 1)[0];\n\n  this.destroyRenderer(renderer);\n\n  removedLayer.removeEventListener('viewChange', this._emitRenderInvalid);\n  removedLayer.removeEventListener('effectsChange', this._emitRenderInvalid);\n  removedLayer.removeEventListener('fixedLevelChange', this._emitRenderInvalid);\n  removedLayer.removeEventListener('textureStoreChange', this._emitRenderInvalid);\n\n  this._emitRenderInvalid();\n};\n\n\n/**\n * Removes all {@link Layer layers} from the stage.\n */\nStage.prototype.removeAllLayers = function() {\n  while (this._layers.length > 0) {\n    this.removeLayer(this._layers[0]);\n  }\n};\n\n\n/**\n * Called before a frame is rendered.\n *\n * Must be overridden by subclasses.\n */\nStage.prototype.startFrame = function() {\n  throw new Error('Stage implementation must override startFrame');\n};\n\n\n/**\n * Called after a frame is rendered.\n *\n * Must be overridden by subclasses.\n */\nStage.prototype.endFrame = function() {\n  throw new Error('Stage implementation must override endFrame');\n};\n\n\n/**\n * Render the current frame. Usually called from a {@link RenderLoop}.\n *\n * This contains the rendering logic common to all stage types. Subclasses\n * define the startFrame() and endFrame() methods to perform their own logic.\n */\nStage.prototype.render = function() {\n  var i, j;\n\n  var tilesToLoad = this._tilesToLoad;\n  var tilesToRender = this._tilesToRender;\n\n  var stableStage = true;\n  var stableLayer;\n\n  // Get the stage dimensions.\n  var width = this._width;\n  var height = this._height;\n\n  var rect = this._tmpRect;\n  var size = this._tmpSize;\n\n  if (width <= 0 || height <= 0) {\n    return;\n  }\n\n  this.startFrame(); // defined by subclasses\n\n  // Signal start of frame to the texture stores.\n  for (i = 0; i < this._layers.length; i++) {\n    this._layers[i].textureStore().startFrame();\n  }\n\n  // Render layers.\n  for (i = 0; i < this._layers.length; i++) {\n    var layer = this._layers[i];\n    var effects = layer.effects();\n    var view = layer.view();\n    var textureStore = layer.textureStore();\n    var renderer = this._renderers[i];\n    var depth = this._layers.length - i;\n    var tile, texture;\n\n    // Convert the rect effect into a normalized rect.\n    // TODO: avoid doing this on every frame.\n    calcRect(width, height, effects && effects.rect, rect);\n\n    if (rect.width <= 0 || rect.height <= 0) {\n      // Skip rendering on a null viewport.\n      continue;\n    }\n\n    // Update the view size.\n    size.width = rect.width * this._width;\n    size.height = rect.height * this._height;\n    view.setSize(size);\n\n    // Signal start of layer to the renderer.\n    renderer.startLayer(layer, rect);\n\n    // We render with both alpha blending and depth testing enabled. Thus, when\n    // rendering a subsequent pixel at the same location than an existing one,\n    // the subsequent pixel gets discarded unless it has smaller depth, and is\n    // otherwise composited with the existing pixel.\n    //\n    // When using fallback tiles to fill a gap in the preferred resolution\n    // level, we prefer higher resolution fallbacks to lower resolution ones.\n    // However, where fallbacks overlap, we want higher resolution ones to\n    // prevail, and we don't want multiple fallbacks to be composited with each\n    // other, as that would produce a bad result when semitransparent textures\n    // are involved.\n    //\n    // In order to achieve this within the constraints of alpha blending and\n    // depth testing, the depth of a tile must be inversely proportional to its\n    // resolution, and higher-resolution tiles must be rendered before lower-\n    // resolution ones.\n\n    // Collect the lists of tiles to load and render.\n    stableLayer = this._collectTiles(layer, textureStore);\n\n    // Mark all the tiles whose textures must be loaded.\n    // This will either trigger loading (for textures not yet loaded) or\n    // prevent unloading (for textures already loaded).\n    for (j = 0; j < tilesToLoad.length; j++) {\n      tile = tilesToLoad[j];\n      textureStore.markTile(tile);\n    }\n\n    // Render tiles.\n    for (j = 0; j < tilesToRender.length; j++) {\n      tile = tilesToRender[j];\n      texture = textureStore.texture(tile);\n      renderer.renderTile(tile, texture, layer, depth);\n    }\n\n    layer.emit('renderComplete', stableLayer);\n    if (!stableLayer) {\n      stableStage = false;\n    }\n\n    // Signal end of layer to the renderer.\n    renderer.endLayer(layer, rect);\n  }\n\n  // Signal end of frame to the texture stores.\n  for (i = 0; i < this._layers.length; i++) {\n    this._layers[i].textureStore().endFrame();\n  }\n\n  this.endFrame(); // defined by subclasses\n\n  this.emit('renderComplete', stableStage);\n};\n\nStage.prototype._collectTiles = function(layer, textureStore) {\n  var tilesToLoad = this._tilesToLoad;\n  var tilesToRender = this._tilesToRender;\n  var tmpVisible = this._tmpVisible;\n\n  tilesToLoad.length = 0;\n  tilesToRender.length = 0;\n  tmpVisible.length = 0;\n\n  layer.visibleTiles(tmpVisible);\n\n  var isStable = true;\n\n  for (var i = 0; i < tmpVisible.length; i++) {\n    var tile = tmpVisible[i];\n    var needsFallback;\n    this._collectTileToLoad(tile);\n    if (textureStore.texture(tile)) {\n      // The preferred texture is available.\n      // No fallback is required.\n      needsFallback = false;\n      this._collectTileToRender(tile);\n    } else {\n      // The preferred texture is unavailable.\n      // Collect children for rendering as a fallback.\n      needsFallback = this._collectChildren(tile, textureStore);\n      isStable = false;\n    }\n    // Collect all parents for loading, and the closest parent for rendering if\n    // a fallback is required.\n    this._collectParents(tile, textureStore, needsFallback);\n  }\n\n  // Sort tiles to load in ascending resolution order.\n  tilesToLoad.sort(forwardTileCmp);\n\n  // Sort tiles to render in descending resolution order.\n  tilesToRender.sort(reverseTileCmp);\n\n  return isStable;\n};\n\nStage.prototype._collectChildren = function(tile, textureStore) {\n  var tmpChildren = this._tmpChildren;\n\n  var needsFallback = true;\n\n  // Fall back as many levels as necessary on single-child geometries, but do\n  // not go beyond immediate children on multiple-child geometries, to avoid\n  // exploring an exponential number of tiles.\n  do {\n    tmpChildren.length = 0;\n    if (!tile.children(tmpChildren)) {\n      break;\n    }\n    needsFallback = false;\n    for (var i = 0; i < tmpChildren.length; i++) {\n      tile = tmpChildren[i];\n      if (textureStore.texture(tile)) {\n        this._collectTileToLoad(tile);\n        this._collectTileToRender(tile);\n      } else {\n        needsFallback = true;\n      }\n    }\n  } while (needsFallback && tmpChildren.length === 1)\n\n  return needsFallback;\n};\n\nStage.prototype._collectParents = function(tile, textureStore, needsFallback) {\n  // Recursively visit parent tiles until:\n  //   - all parents have been marked for loading, if progressive rendering is\n  //     enabled; and\n  //   - at least one parent has been marked for both loading and rendering, if\n  //     a fallback is required.\n  var needsLoading = this._progressive;\n  while ((needsLoading || needsFallback) && (tile = tile.parent()) != null) {\n    if (needsFallback) {\n      if (textureStore.texture(tile)) {\n        this._collectTileToRender(tile);\n        needsFallback = false;\n      } else if (!this._progressive) {\n        continue;\n      }\n    }\n    if (!this._collectTileToLoad(tile)) {\n      needsLoading = false;\n    }\n  }\n  return needsFallback;\n};\n\nStage.prototype._collectTileToLoad = function(tile) {\n  return this._collectTileIntoList(tile, this._tilesToLoad);\n};\n\nStage.prototype._collectTileToRender = function(tile) {\n  return this._collectTileIntoList(tile, this._tilesToRender);\n};\n\nStage.prototype._collectTileIntoList = function(tile, tileList) {\n  // TODO: Investigate whether it's worth it to make this better than O(n).\n  var found = false;\n  for (var i = 0; i < tileList.length; i++) {\n    if (tile.equals(tileList[i])) {\n      found = true;\n      break;\n    }\n  }\n  if (!found) {\n    tileList.push(tile);\n  }\n  return !found;\n};\n\n/**\n * Create a texture for the given tile and asset. Called by {@link TextureStore}.\n * @param {Tile} tile\n * @param {Asset} asset\n * @param {Function} done\n */\nStage.prototype.createTexture = function(tile, asset, done) {\n\n  var self = this;\n\n  function makeTexture() {\n    return new self.TextureClass(self, tile, asset);\n  }\n\n  var fn = cancelize(async(makeTexture));\n\n  return this._createTextureWorkQueue.push(fn, function(err, texture) {\n    done(err, tile, asset, texture);\n  });\n\n};\n\n/**\n * The stage type, used to determine the appropriate renderer for a given\n * geometry and view.\n *\n * Known values are `\"webgl\"`, `\"css\"` and `\"flash\"`.\n *\n * See also {@link Stage#registerRenderer}.\n *\n * @property {string}\n * @name Stage#type\n */\n\nmodule.exports = Stage;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n// The global object.\nvar globalObject = (function() {\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  return null;\n})();\n\nmodule.exports = globalObject;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar global = require('../util/global');\nvar eventEmitter = require('minimal-event-emitter');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\nvar propertyMap = {\n  HTMLImageElement: ['naturalWidth', 'naturalHeight'],\n  HTMLCanvasElement: ['width', 'height'],\n  ImageBitmap: ['width', 'height']\n};\n\n/**\n * @class StaticAsset\n * @implements Asset\n * @classdesc\n *\n * An immutable {@link Asset} compatible with {@link WebGlStage} and\n * {@link CssStage}.\n *\n * @param {HTMLImageElement|HTMLCanvasElement|ImageBitmap} element The\n *     underlying pixel source.\n * @throws If the pixel source is unsupported.\n */\nfunction StaticAsset(element) {\n  var supported = false;\n  for (var type in propertyMap) {\n    if (global[type] && element instanceof global[type]) {\n      supported = true;\n      this._widthProp = propertyMap[type][0];\n      this._heightProp = propertyMap[type][1];\n      break;\n    }\n  }\n  if (!supported) {\n    throw new Error('Unsupported pixel source');\n  }\n\n  this._element = element;\n}\n\neventEmitter(StaticAsset);\n\n/**\n * Destructor.\n */\nStaticAsset.prototype.destroy = function() {\n  clearOwnProperties(this);\n};\n\nStaticAsset.prototype.element = function() {\n  return this._element;\n};\n\nStaticAsset.prototype.width = function() {\n  return this._element[this._widthProp];\n};\n\nStaticAsset.prototype.height = function() {\n  return this._element[this._heightProp];\n};\n\nStaticAsset.prototype.timestamp = function() {\n  return 0;\n};\n\nStaticAsset.prototype.isDynamic = function() {\n  return false;\n};\n\nmodule.exports = StaticAsset;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n// Make ctor a subclass of superCtor.\n// Do not depend on ES5 Object.create semantics because of older browsers.\nfunction inherits(ctor, superCtor) {\n  ctor.super_ = superCtor;\n  var TempCtor = function() {};\n  TempCtor.prototype = superCtor.prototype;\n  ctor.prototype = new TempCtor();\n  ctor.prototype.constructor = ctor;\n}\n\nmodule.exports = inherits;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar inherits = require('./util/inherits');\n\n/**\n * @class NetworkError\n * @extends {Error}\n * @classdesc\n *\n * Signals an error that occurred while fetching a URL. This is used by\n * {@link Loader loaders} to distinguish network failures from other errors.\n */\nfunction NetworkError(message) {\n  // See: https://stackoverflow.com/questions/1382107/whats-a-good-way-to-extend-error-in-javascript\n  this.constructor.super_.apply(this, arguments);\n  this.message = message;\n}\n\ninherits(NetworkError, Error);\n\nmodule.exports = NetworkError;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar StaticAsset = require('../assets/Static');\nvar NetworkError = require('../NetworkError');\nvar once = require('../util/once');\n\n// N.B. HtmlImageLoader is broken on IE8 for images that require resizing, due\n// to the unavailable HTML5 canvas element and the naturalWidth/naturalHeight\n// properties of image elements. This is currently not a problem because the\n// HTML-based renderers (WebGL and CSS) do not work on IE8 anyway. It could\n// become a problem in the future if we decide to support CSS rendering of flat\n// panoramas on IE8.\n\n// TODO: Move the load queue into the loader.\n\n/**\n * @class HtmlImageLoader\n * @implements ImageLoader\n * @classdesc\n *\n * A {@link Loader} for HTML images.\n *\n * @param {Stage} stage The stage which is going to request images to be loaded.\n */\nfunction HtmlImageLoader(stage) {\n  if (stage.type !== 'webgl' && stage.type !== 'css') {\n    throw new Error('Stage type incompatible with loader');\n  }\n  this._stage = stage;\n}\n\n/**\n * Loads an {@link Asset} from an image.\n * @param {string} url The image URL.\n * @param {?Rect} rect A {@link Rect} describing a portion of the image, or null\n *     to use the full image.\n * @param {function(?Error, Asset)} done The callback.\n * @return {function()} A function to cancel loading.\n */\nHtmlImageLoader.prototype.loadImage = function(url, rect, done) {\n  var img = new Image();\n\n  // Allow cross-domain image loading.\n  // This is required to be able to create WebGL textures from images fetched\n  // from a different domain. Note that setting the crossorigin attribute to\n  // 'anonymous' will trigger a CORS preflight for cross-domain requests, but no\n  // credentials (cookies or HTTP auth) will be sent; to do so, the attribute\n  // would have to be set to 'use-credentials' instead. Unfortunately, this is\n  // not a safe choice, as it causes requests to fail when the response contains\n  // an Access-Control-Allow-Origin header with a wildcard. See the section\n  // \"Credentialed requests and wildcards\" on:\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\n  img.crossOrigin = 'anonymous';\n\n  var x = rect && rect.x || 0;\n  var y = rect && rect.y || 0;\n  var width = rect && rect.width || 1;\n  var height = rect && rect.height || 1;\n\n  done = once(done);\n\n  img.onload = function() {\n    if (x === 0 && y === 0 && width === 1 && height === 1) {\n      done(null, new StaticAsset(img));\n    }\n    else {\n      x *= img.naturalWidth;\n      y *= img.naturalHeight;\n      width *= img.naturalWidth;\n      height *= img.naturalHeight;\n\n      var canvas = document.createElement('canvas');\n      canvas.width = width;\n      canvas.height = height;\n      var context = canvas.getContext('2d');\n\n      context.drawImage(img, x, y, width, height, 0, 0, width, height);\n\n      done(null, new StaticAsset(canvas));\n    }\n  };\n\n  img.onerror = function() {\n    // TODO: is there any way to distinguish a network error from other\n    // kinds of errors? For now we always return NetworkError since this\n    // prevents images to be retried continuously while we are offline.\n    done(new NetworkError('Network error: ' + url));\n  };\n\n  img.src = url;\n\n  function cancel() {\n    img.onload = img.onerror = null;\n    img.src = '';\n    done.apply(null, arguments);\n  }\n\n  return cancel;\n};\n\nmodule.exports = HtmlImageLoader;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n// Detect WebGl support.\n// Keep stages/WebGl.js in sync with this.\nfunction checkWebGlSupported() {\n  var canvas = document.createElement('canvas');\n  var gl = canvas.getContext && (canvas.getContext('webgl') ||\n                                 canvas.getContext('experimental-webgl'));\n  return !!gl;\n}\n\n// Cache result.\nvar supported;\nfunction webGlSupported() {\n  if (supported !== undefined) {\n    return supported;\n  }\n  return (supported = checkWebGlSupported());\n}\n\nmodule.exports = webGlSupported;\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.bowser=t():e.bowser=t()}(this,(function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=90)}({17:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i=r(18),n=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||\"\"},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||\"\"},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case\"NT\":return\"NT\";case\"XP\":return\"XP\";case\"NT 5.0\":return\"2000\";case\"NT 5.1\":return\"XP\";case\"NT 5.2\":return\"2003\";case\"NT 6.0\":return\"Vista\";case\"NT 6.1\":return\"7\";case\"NT 6.2\":return\"8\";case\"NT 6.3\":return\"8.1\";case\"NT 10.0\":return\"10\";default:return}},e.getMacOSVersionName=function(e){var t=e.split(\".\").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return\"Leopard\";case 6:return\"Snow Leopard\";case 7:return\"Lion\";case 8:return\"Mountain Lion\";case 9:return\"Mavericks\";case 10:return\"Yosemite\";case 11:return\"El Capitan\";case 12:return\"Sierra\";case 13:return\"High Sierra\";case 14:return\"Mojave\";case 15:return\"Catalina\";default:return}},e.getAndroidVersionName=function(e){var t=e.split(\".\").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?\"Cupcake\":1===t[0]&&t[1]>=6?\"Donut\":2===t[0]&&t[1]<2?\"Eclair\":2===t[0]&&2===t[1]?\"Froyo\":2===t[0]&&t[1]>2?\"Gingerbread\":3===t[0]?\"Honeycomb\":4===t[0]&&t[1]<1?\"Ice Cream Sandwich\":4===t[0]&&t[1]<4?\"Jelly Bean\":4===t[0]&&t[1]>=4?\"KitKat\":5===t[0]?\"Lollipop\":6===t[0]?\"Marshmallow\":7===t[0]?\"Nougat\":8===t[0]?\"Oreo\":9===t[0]?\"Pie\":void 0},e.getVersionPrecision=function(e){return e.split(\".\").length},e.compareVersions=function(t,r,i){void 0===i&&(i=!1);var n=e.getVersionPrecision(t),s=e.getVersionPrecision(r),o=Math.max(n,s),a=0,u=e.map([t,r],(function(t){var r=o-e.getVersionPrecision(t),i=t+new Array(r+1).join(\".0\");return e.map(i.split(\".\"),(function(e){return new Array(20-e.length).join(\"0\")+e})).reverse()}));for(i&&(a=o-Math.min(n,s)),o-=1;o>=a;){if(u[0][o]>u[1][o])return 1;if(u[0][o]===u[1][o]){if(o===a)return 0;o-=1}else if(u[0][o]<u[1][o])return-1}},e.map=function(e,t){var r,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)i.push(t(e[r]));return i},e.getBrowserAlias=function(e){return i.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return i.BROWSER_MAP[e]||\"\"},e}();t.default=n,e.exports=t.default},18:function(e,t,r){\"use strict\";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0;t.BROWSER_ALIASES_MAP={\"Amazon Silk\":\"amazon_silk\",\"Android Browser\":\"android\",Bada:\"bada\",BlackBerry:\"blackberry\",Chrome:\"chrome\",Chromium:\"chromium\",Epiphany:\"epiphany\",Firefox:\"firefox\",Focus:\"focus\",Generic:\"generic\",\"Google Search\":\"google_search\",Googlebot:\"googlebot\",\"Internet Explorer\":\"ie\",\"K-Meleon\":\"k_meleon\",Maxthon:\"maxthon\",\"Microsoft Edge\":\"edge\",\"MZ Browser\":\"mz\",\"NAVER Whale Browser\":\"naver\",Opera:\"opera\",\"Opera Coast\":\"opera_coast\",PhantomJS:\"phantomjs\",Puffin:\"puffin\",QupZilla:\"qupzilla\",QQ:\"qq\",QQLite:\"qqlite\",Safari:\"safari\",Sailfish:\"sailfish\",\"Samsung Internet for Android\":\"samsung_internet\",SeaMonkey:\"seamonkey\",Sleipnir:\"sleipnir\",Swing:\"swing\",Tizen:\"tizen\",\"UC Browser\":\"uc\",Vivaldi:\"vivaldi\",\"WebOS Browser\":\"webos\",WeChat:\"wechat\",\"Yandex Browser\":\"yandex\",Roku:\"roku\"};t.BROWSER_MAP={amazon_silk:\"Amazon Silk\",android:\"Android Browser\",bada:\"Bada\",blackberry:\"BlackBerry\",chrome:\"Chrome\",chromium:\"Chromium\",epiphany:\"Epiphany\",firefox:\"Firefox\",focus:\"Focus\",generic:\"Generic\",googlebot:\"Googlebot\",google_search:\"Google Search\",ie:\"Internet Explorer\",k_meleon:\"K-Meleon\",maxthon:\"Maxthon\",edge:\"Microsoft Edge\",mz:\"MZ Browser\",naver:\"NAVER Whale Browser\",opera:\"Opera\",opera_coast:\"Opera Coast\",phantomjs:\"PhantomJS\",puffin:\"Puffin\",qupzilla:\"QupZilla\",qq:\"QQ Browser\",qqlite:\"QQ Browser Lite\",safari:\"Safari\",sailfish:\"Sailfish\",samsung_internet:\"Samsung Internet for Android\",seamonkey:\"SeaMonkey\",sleipnir:\"Sleipnir\",swing:\"Swing\",tizen:\"Tizen\",uc:\"UC Browser\",vivaldi:\"Vivaldi\",webos:\"WebOS Browser\",wechat:\"WeChat\",yandex:\"Yandex Browser\"};t.PLATFORMS_MAP={tablet:\"tablet\",mobile:\"mobile\",desktop:\"desktop\",tv:\"tv\"};t.OS_MAP={WindowsPhone:\"Windows Phone\",Windows:\"Windows\",MacOS:\"macOS\",iOS:\"iOS\",Android:\"Android\",WebOS:\"WebOS\",BlackBerry:\"BlackBerry\",Bada:\"Bada\",Tizen:\"Tizen\",Linux:\"Linux\",ChromeOS:\"Chrome OS\",PlayStation4:\"PlayStation 4\",Roku:\"Roku\"};t.ENGINE_MAP={EdgeHTML:\"EdgeHTML\",Blink:\"Blink\",Trident:\"Trident\",Presto:\"Presto\",Gecko:\"Gecko\",WebKit:\"WebKit\"}},90:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i,n=(i=r(91))&&i.__esModule?i:{default:i},s=r(18);function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(){}var t,r,i;return e.getParser=function(e,t){if(void 0===t&&(t=!1),\"string\"!=typeof e)throw new Error(\"UserAgent should be a string\");return new n.default(e,t)},e.parse=function(e){return new n.default(e).getResult()},t=e,i=[{key:\"BROWSER_MAP\",get:function(){return s.BROWSER_MAP}},{key:\"ENGINE_MAP\",get:function(){return s.ENGINE_MAP}},{key:\"OS_MAP\",get:function(){return s.OS_MAP}},{key:\"PLATFORMS_MAP\",get:function(){return s.PLATFORMS_MAP}}],(r=null)&&o(t.prototype,r),i&&o(t,i),e}();t.default=a,e.exports=t.default},91:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i=u(r(92)),n=u(r(93)),s=u(r(94)),o=u(r(95)),a=u(r(17));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||\"\"===e)throw new Error(\"UserAgent parameter can't be empty\");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=i.default.find((function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error(\"Browser's test function is not valid\")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||\"\":this.getBrowser().name||\"\"},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=n.default.find((function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error(\"Browser's test function is not valid\")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||\"\":t||\"\"},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||\"\":t||\"\"},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find((function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error(\"Browser's test function is not valid\")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||\"\":this.getEngine().name||\"\"},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=o.default.find((function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error(\"Browser's test function is not valid\")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return Object.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},i=0,n={},s=0;if(Object.keys(e).forEach((function(t){var o=e[t];\"string\"==typeof o?(n[t]=o,s+=1):\"object\"==typeof o&&(r[t]=o,i+=1)})),i>0){var o=Object.keys(r),a=o.find((function(e){return t.isOS(e)}));if(a){var u=this.satisfies(r[a]);if(void 0!==u)return u}var d=o.find((function(e){return t.isPlatform(e)}));if(d){var c=this.satisfies(r[d]);if(void 0!==c)return c}}if(s>0){var f=Object.keys(n).find((function(e){return t.isBrowser(e,!0)}));if(void 0!==f)return this.compareVersion(n[f])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),i=e.toLowerCase(),n=a.default.getBrowserTypeByAlias(i);return t&&n&&(i=n.toLowerCase()),i===r},t.compareVersion=function(e){var t=[0],r=e,i=!1,n=this.getBrowserVersion();if(\"string\"==typeof n)return\">\"===e[0]||\"<\"===e[0]?(r=e.substr(1),\"=\"===e[1]?(i=!0,r=e.substr(2)):t=[],\">\"===e[0]?t.push(1):t.push(-1)):\"=\"===e[0]?r=e.substr(1):\"~\"===e[0]&&(i=!0,r=e.substr(1)),t.indexOf(a.default.compareVersions(n,r,i))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=d,e.exports=t.default},92:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i};var s=/version\\/(\\d+(\\.?_?\\d+)+)/i,o=[{test:[/googlebot/i],describe:function(e){var t={name:\"Googlebot\"},r=n.default.getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:\"Opera\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\\/|opios/i],describe:function(e){var t={name:\"Opera\"},r=n.default.getFirstMatch(/(?:opr|opios)[\\s/](\\S+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:\"Samsung Internet for Android\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:SamsungBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:\"NAVER Whale Browser\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:whale)[\\s/](\\d+(?:\\.\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:\"MZ Browser\"},r=n.default.getFirstMatch(/(?:MZBrowser)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:\"Focus\"},r=n.default.getFirstMatch(/(?:focus)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:\"Swing\"},r=n.default.getFirstMatch(/(?:swing)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:\"Opera Coast\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:coast)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:\"Yandex Browser\"},r=n.default.getFirstMatch(/(?:yabrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:\"UC Browser\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:ucbrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:\"Maxthon\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:Maxthon|mxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:\"Epiphany\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:epiphany)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:\"Puffin\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:puffin)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:\"Sleipnir\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:sleipnir)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:\"K-Meleon\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:k-meleon)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:\"WeChat\"},r=n.default.getFirstMatch(/(?:micromessenger)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?\"QQ Browser Lite\":\"QQ Browser\"},r=n.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:\"Internet Explorer\"},r=n.default.getFirstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\\sedg\\//i],describe:function(e){var t={name:\"Microsoft Edge\"},r=n.default.getFirstMatch(/\\sedg\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:\"Microsoft Edge\"},r=n.default.getSecondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:\"Vivaldi\"},r=n.default.getFirstMatch(/vivaldi\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:\"SeaMonkey\"},r=n.default.getFirstMatch(/seamonkey\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:\"Sailfish\"},r=n.default.getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:\"Amazon Silk\"},r=n.default.getFirstMatch(/silk\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:\"PhantomJS\"},r=n.default.getFirstMatch(/phantomjs\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:\"SlimerJS\"},r=n.default.getFirstMatch(/slimerjs\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\\bbb\\d+/i,/rim\\stablet/i],describe:function(e){var t={name:\"BlackBerry\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:\"WebOS Browser\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:\"Bada\"},r=n.default.getFirstMatch(/dolfin\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:\"Tizen\"},r=n.default.getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:\"QupZilla\"},r=n.default.getFirstMatch(/(?:qupzilla)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:\"Firefox\"},r=n.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:\"Chromium\"},r=n.default.getFirstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:\"Chrome\"},r=n.default.getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:\"Google Search\"},r=n.default.getFirstMatch(/(?:GSA)\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:\"Android Browser\"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:\"PlayStation 4\"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:\"Safari\"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search(\"\\\\(\")?/^(.*)\\/(.*)[ \\t]\\((.*)/:/^(.*)\\/(.*) /;return{name:n.default.getFirstMatch(t,e),version:n.default.getSecondMatch(t,e)}}}];t.default=o,e.exports=t.default},93:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18);var o=[{test:[/Roku\\/DVP/],describe:function(e){var t=n.default.getFirstMatch(/Roku\\/DVP-(\\d+\\.\\d+)/i,e);return{name:s.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=n.default.getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i,e);return{name:s.OS_MAP.WindowsPhone,version:t}}},{test:[/windows/i],describe:function(e){var t=n.default.getFirstMatch(/Windows ((NT|XP)( \\d\\d?.\\d)?)/i,e),r=n.default.getWindowsVersionName(t);return{name:s.OS_MAP.Windows,version:t,versionName:r}}},{test:[/macintosh/i],describe:function(e){var t=n.default.getFirstMatch(/mac os x (\\d+(\\.?_?\\d+)+)/i,e).replace(/[_\\s]/g,\".\"),r=n.default.getMacOSVersionName(t),i={name:s.OS_MAP.MacOS,version:t};return r&&(i.versionName=r),i}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=n.default.getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i,e).replace(/[_\\s]/g,\".\");return{name:s.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=n.default.getFirstMatch(/android[\\s/-](\\d+(\\.\\d+)*)/i,e),r=n.default.getAndroidVersionName(t),i={name:s.OS_MAP.Android,version:t};return r&&(i.versionName=r),i}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=n.default.getFirstMatch(/(?:web|hpw)[o0]s\\/(\\d+(\\.\\d+)*)/i,e),r={name:s.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\\bbb\\d+/i,/rim\\stablet/i],describe:function(e){var t=n.default.getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i,e)||n.default.getFirstMatch(/blackberry\\d+\\/(\\d+([_\\s]\\d+)*)/i,e)||n.default.getFirstMatch(/\\bbb(\\d+)/i,e);return{name:s.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=n.default.getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i,e);return{name:s.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=n.default.getFirstMatch(/tizen[/\\s](\\d+(\\.\\d+)*)/i,e);return{name:s.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=n.default.getFirstMatch(/PlayStation 4[/\\s](\\d+(\\.\\d+)*)/i,e);return{name:s.OS_MAP.PlayStation4,version:t}}}];t.default=o,e.exports=t.default},94:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18);var o=[{test:[/googlebot/i],describe:function(){return{type:\"bot\",vendor:\"Google\"}}},{test:[/huawei/i],describe:function(e){var t=n.default.getFirstMatch(/(can-l01)/i,e)&&\"Nova\",r={type:s.PLATFORMS_MAP.mobile,vendor:\"Huawei\"};return t&&(r.model=t),r}},{test:[/nexus\\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Nexus\"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Apple\",model:\"iPad\"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Amazon\",model:\"Kindle Fire HD 7\"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Amazon\"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=n.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:s.PLATFORMS_MAP.mobile,vendor:\"Apple\",model:t}}},{test:[/nexus\\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:\"Nexus\"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return\"blackberry\"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:\"BlackBerry\"}}},{test:function(e){return\"bada\"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return\"windows phone\"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:\"Microsoft\"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(\".\")[0]);return\"android\"===e.getOSName(!0)&&t>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){return\"android\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return\"macos\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:\"Apple\"}}},{test:function(e){return\"windows\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return\"linux\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return\"playstation 4\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(e){return\"roku\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];t.default=o,e.exports=t.default},95:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18);var o=[{test:function(e){return\"microsoft edge\"===e.getBrowserName(!0)},describe:function(e){if(/\\sedg\\//i.test(e))return{name:s.ENGINE_MAP.Blink};var t=n.default.getFirstMatch(/edge\\/(\\d+(\\.?_?\\d+)+)/i,e);return{name:s.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:s.ENGINE_MAP.Trident},r=n.default.getFirstMatch(/trident\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:s.ENGINE_MAP.Presto},r=n.default.getFirstMatch(/presto\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:s.ENGINE_MAP.Gecko},r=n.default.getFirstMatch(/gecko\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\\/537\\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:s.ENGINE_MAP.WebKit},r=n.default.getFirstMatch(/webkit\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=o,e.exports=t.default}})}));","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar defaultPixelRatio = 1;\n\nfunction pixelRatio() {\n  if (typeof window !== 'undefined') {\n    if (window.devicePixelRatio) {\n      return window.devicePixelRatio;\n    }\n    else {\n      var screen = window.screen;\n      if (screen && screen.deviceXDPI && screen.logicalXDPI) {\n        return screen.deviceXDPI / screen.logicalXDPI;\n      } else if (screen && screen.systemXDPI && screen.logicalXDPI) {\n        return screen.systemXDPI / screen.logicalXDPI;\n      }\n    }\n  }\n  return defaultPixelRatio;\n}\n\nmodule.exports = pixelRatio;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n// Returns whether n is a power of two.\nfunction ispot(n) {\n  return (n & (n - 1)) == 0;\n}\n\nmodule.exports = ispot;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n\nfunction prefixProperty(property) {\n\n  var style = document.documentElement.style;\n  var prefixList = ['Moz', 'Webkit', 'Khtml', 'O', 'ms'];\n\n  for (var i = 0; i < prefixList.length; i++) {\n    var prefix = prefixList[i];\n    var capitalizedProperty = property[0].toUpperCase() + property.slice(1);\n    var prefixedProperty = prefix + capitalizedProperty;\n\n    if (prefixedProperty in style) {\n      return prefixedProperty;\n    }\n  }\n\n  return property;\n\n}\n\n\nfunction getWithVendorPrefix(property) {\n  var prefixedProperty = prefixProperty(property);\n  return function getPropertyWithVendorPrefix(element) {\n    return element.style[prefixedProperty];\n  };\n\n}\n\n\nfunction setWithVendorPrefix(property) {\n  var prefixedProperty = prefixProperty(property);\n  return function setPropertyWithVendorPrefix(element, val) {\n    return (element.style[prefixedProperty] = val);\n  };\n}\n\n\nvar setTransform = setWithVendorPrefix('transform');\nvar setTransformOrigin = setWithVendorPrefix('transformOrigin');\n\n\nfunction setNullTransform(element) {\n  setTransform(element, 'translateZ(0)');\n}\n\n\nfunction setNullTransformOrigin(element) {\n  setTransformOrigin(element, '0 0 0');\n}\n\n\nfunction setAbsolute(element) {\n  element.style.position = 'absolute';\n}\n\n\nfunction setPixelPosition(element, x, y) {\n  element.style.left = x + 'px';\n  element.style.top = y + 'px';\n}\n\n\nfunction setPixelSize(element, width, height) {\n  element.style.width = width + 'px';\n  element.style.height = height + 'px';\n}\n\n\nfunction setNullSize(element) {\n  element.style.width = element.style.height = 0;\n}\n\n\nfunction setFullSize(element) {\n  element.style.width = element.style.height = '100%';\n}\n\n\nfunction setOverflowHidden(element) {\n  element.style.overflow = 'hidden';\n}\n\n\nfunction setOverflowVisible(element) {\n  element.style.overflow = 'visible';\n}\n\n\nfunction setNoPointerEvents(element) {\n  element.style.pointerEvents = 'none';\n}\n\n\nfunction setBlocking(element) {\n  element.style.backgroundColor = '#000';\n  element.style.opacity = '0';\n  element.style.filter = 'alpha(opacity=0)';\n}\n\n\nmodule.exports = {\n  prefixProperty: prefixProperty,\n  getWithVendorPrefix: getWithVendorPrefix,\n  setWithVendorPrefix: setWithVendorPrefix,\n  setTransform: setTransform,\n  setTransformOrigin: setTransformOrigin,\n  setNullTransform: setNullTransform,\n  setNullTransformOrigin: setNullTransformOrigin,\n  setAbsolute: setAbsolute,\n  setPixelPosition: setPixelPosition,\n  setPixelSize: setPixelSize,\n  setNullSize: setNullSize,\n  setFullSize: setFullSize,\n  setOverflowHidden: setOverflowHidden,\n  setOverflowVisible: setOverflowVisible,\n  setNoPointerEvents: setNoPointerEvents,\n  setBlocking: setBlocking\n};\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar Stage = require('./Stage');\nvar HtmlImageLoader = require('../loaders/HtmlImage');\nvar webGlSupported = require('../support/WebGl');\nvar browser = require('bowser');\nvar inherits = require('../util/inherits');\nvar pixelRatio = require('../util/pixelRatio');\nvar ispot = require('../util/ispot');\nvar setAbsolute = require('../util/dom').setAbsolute;\nvar setFullSize = require('../util/dom').setFullSize;\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\nvar debug = typeof MARZIPANODEBUG !== 'undefined' && MARZIPANODEBUG.webGl;\n\n\n// Browser-specific workarounds.\nvar browserQuirks = {\n  // Whether to use texImage2D instead of texSubImage2D when repainting an\n  // existing texture from a video element. On most browsers texSubImage2D is\n  // faster, but on Chrome the performance degrades significantly. See:\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=612542\n  videoUseTexImage2D: browser.chrome\n};\n\n\nfunction initWebGlContext(canvas, opts) {\n  var options = {\n    alpha: true,\n    premultipliedAlpha: true,\n    antialias: !!(opts && opts.antialias),\n    preserveDrawingBuffer: !!(opts && opts.preserveDrawingBuffer)\n  };\n\n  if (debug && typeof WebGLDebugUtils !== 'undefined') {\n    console.log('Using WebGL lost context simulator');\n    canvas = WebGLDebugUtils.makeLostContextSimulatingCanvas(canvas);\n  }\n\n  // Keep support/WebGl.js in sync with this.\n  var gl = (canvas.getContext) && (canvas.getContext('webgl', options) || canvas.getContext('experimental-webgl', options));\n\n  if (!gl) {\n    throw new Error('Could not get WebGL context');\n  }\n\n  if (debug && typeof WebGLDebugUtils !== \"undefined\") {\n    gl = WebGLDebugUtils.makeDebugContext(gl);\n    console.log('Using WebGL debug context');\n  }\n\n  return gl;\n}\n\n/**\n * @class WebGlStage\n * @extends Stage\n * @classdesc\n *\n * A {@link Stage} implementation using WebGl.\n *\n * @param {Object} opts\n * @param {boolean} [opts.antialias=false]\n * @param {boolean} [opts.preserveDrawingBuffer=false]\n * @param {boolean} [opts.generateMipmaps=false]\n *\n * The `antialias` and `preserveDrawingBuffer` options control the WebGL\n * context attributes of the same name. The `alpha` and `premultipliedAlpha`\n * WebGL context attributes are set to their default true value and cannot\n * be overriden; this allows semitransparent textures to be composited with\n * the page. See:\n * https://www.khronos.org/registry/webgl/specs/1.0/#WEBGLCONTEXTATTRIBUTES\n *\n * The `generateMipmaps` option controls texture mipmap generation. Mipmaps\n * may improve rendering quality, at the cost of increased memory usage.\n * Due to technical limitations, they are only generated for textures whose\n * dimensions are a power of two. See:\n * https://www.khronos.org/webgl/wiki/WebGL_and_OpenGL_Differences#Non-Power_of_Two_Texture_Support\n *\n * Also see the available {@link Stage} options.\n */\nfunction WebGlStage(opts) {\n  opts = opts || {};\n\n  var self = this;\n\n  this.constructor.super_.call(this, opts);\n\n  this._generateMipmaps = opts.generateMipmaps != null ?\n    opts.generateMipmaps : false;\n\n  this._loader = new HtmlImageLoader(this);\n\n  this._domElement = document.createElement('canvas');\n\n  setAbsolute(this._domElement);\n  setFullSize(this._domElement);\n\n  this._gl = initWebGlContext(this._domElement, opts);\n\n  this._handleContextLoss = function() {\n    self.emit('webglcontextlost');\n    self._gl = null;\n  };\n\n  // Handle WebGl context loss.\n  this._domElement.addEventListener('webglcontextlost', this._handleContextLoss);\n\n  // WebGl renderers are singletons for a given stage. This list stores the\n  // existing renderers so they can be reused across layers with the same\n  // geometry and view type.\n  this._rendererInstances = [];\n}\n\ninherits(WebGlStage, Stage);\n\n\n/**\n * Destructor.\n */\nWebGlStage.prototype.destroy = function() {\n  this._domElement.removeEventListener('webglcontextlost', this._handleContextLoss);\n  // Delegate clearing own properties to the Stage destructor.\n  this.constructor.super_.prototype.destroy.call(this);\n};\n\n\nWebGlStage.supported = function() {\n  return webGlSupported();\n};\n\n\n/**\n * Returns the underlying DOM element.\n *\n * @return {Element}\n */\nWebGlStage.prototype.domElement = function() {\n  return this._domElement;\n};\n\n\n/**\n * Returns the underlying WebGL rendering context.\n *\n * @return {WebGLRenderingContext }\n */\nWebGlStage.prototype.webGlContext = function() {\n  return this._gl;\n};\n\n\nWebGlStage.prototype.setSizeForType = function() {\n  // Update the size of the canvas coordinate space.\n  //\n  // The size is obtained by taking the stage dimensions, which are set in CSS\n  // pixels, and multiplying them by the device pixel ratio. Crucially, this\n  // must be the only place where the WebGL rendering pipeline accesses the\n  // pixel ratio; subsequent uses should reference the `drawingBufferWidth` and\n  // `drawingBufferHeight` properties on the WebGLRenderingContext. Failing to\n  // do so will break the rendering if the pixel ratio changes but the stage\n  // size does not, e.g. when moving the window across screens.\n  var ratio = pixelRatio();\n  this._domElement.width = ratio * this._width;\n  this._domElement.height = ratio * this._height;\n};\n\n\nWebGlStage.prototype.loadImage = function(url, rect, done) {\n  return this._loader.loadImage(url, rect, done);\n};\n\n\nWebGlStage.prototype.maxTextureSize = function() {\n  return this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE);\n};\n\n\nWebGlStage.prototype.validateLayer = function(layer) {\n  var tileSize = layer.geometry().maxTileSize();\n  var maxTextureSize = this.maxTextureSize();\n  if (tileSize > maxTextureSize) {\n    throw new Error('Layer has level with tile size larger than maximum texture size (' + tileSize + ' vs. ' + maxTextureSize + ')');\n  }\n};\n\n\nWebGlStage.prototype.createRenderer = function(Renderer) {\n  var rendererInstances = this._rendererInstances;\n  for (var i = 0; i < rendererInstances.length; i++) {\n    if (rendererInstances[i] instanceof Renderer) {\n      return rendererInstances[i];\n    }\n  }\n  var renderer = new Renderer(this._gl);\n  rendererInstances.push(renderer);\n  return renderer;\n};\n\n\nWebGlStage.prototype.destroyRenderer = function(renderer) {\n  var rendererInstances = this._rendererInstances;\n  if (this._renderers.indexOf(renderer) < 0) {\n    renderer.destroy();\n    var index = rendererInstances.indexOf(renderer);\n    if (index >= 0) {\n      rendererInstances.splice(index, 1);\n    }\n  }\n};\n\n\nWebGlStage.prototype.startFrame = function() {\n\n  var gl = this._gl;\n\n  if (!gl) {\n    throw new Error('Bad WebGL context - maybe context was lost?');\n  }\n\n  // Set the WebGL viewport.\n  gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n  // Clear framebuffer.\n  gl.clearColor(0.0, 0.0, 0.0, 0.0);\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n  // Enable depth testing.\n  gl.enable(gl.DEPTH_TEST);\n\n  // Enable blending. ONE and ONE_MINUS_SRC_ALPHA are the right choices for\n  // premultiplied textures.\n  gl.enable(gl.BLEND);\n  gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n};\n\n\nWebGlStage.prototype.endFrame = function() {};\n\n\nWebGlStage.prototype.takeSnapshot = function (options) {\n\n  // Validate passed argument\n  if (typeof options !== 'object' || options == null) {\n    options = {};\n  }\n\n  var quality = options.quality;\n\n  // Set default quality if it is not passed\n  if (typeof quality == 'undefined') {\n    quality = 75;\n  }\n\n  // Throw if quality is of invlid type or out of bounds\n  if (typeof quality !== 'number' || quality < 0 || quality > 100) {\n    throw new Error('WebGLStage: Snapshot quality needs to be a number between 0 and 100');\n  }\n\n  // Canvas method \"toDataURL\" needs to be called in the same\n  // context as where the actual rendering is done. Hence this.\n  this.render();\n\n  // Return the snapshot\n  return this._domElement.toDataURL('image/jpeg',quality/100);\n}\n\n\nWebGlStage.type = WebGlStage.prototype.type = 'webgl';\n\n\nfunction WebGlTexture(stage, tile, asset) {\n  this._stage = stage;\n  this._gl = stage._gl;\n  this._texture = null;\n  this._timestamp = null;\n  this._width = this._height = null;\n  this.refresh(tile, asset);\n}\n\n\nWebGlTexture.prototype.refresh = function(tile, asset) {\n\n  var gl = this._gl;\n  var stage = this._stage;\n  var texture;\n\n  // Check whether the texture needs to be updated.\n  var timestamp = asset.timestamp();\n  if (timestamp === this._timestamp) {\n    return;\n  }\n\n  // Get asset element.\n  var element = asset.element();\n\n  // Get asset dimensions.\n  var width = asset.width();\n  var height = asset.height();\n\n  if (width !== this._width || height !== this._height) {\n\n    // If the texture dimensions have changed since the last refresh, create\n    // a new texture with the correct size.\n\n    // Check if texture dimensions would exceed the maximum texture size.\n    var maxSize = stage.maxTextureSize();\n    if (width > maxSize) {\n      throw new Error('Texture width larger than max size (' + width + ' vs. ' + maxSize + ')');\n    }\n    if (height > maxSize) {\n      throw new Error('Texture height larger than max size (' + height + ' vs. ' + maxSize + ')');\n    }\n\n    // Delete the current texture if it exists.\n    // This is necessary for Chrome on Android. If it isn't done the textures\n    // do not render when the size changes.\n    if (this._texture) {\n      gl.deleteTexture(texture);\n    }\n\n    // The texture must be premultiplied by alpha to ensure correct blending of\n    // semitransparent textures. For details, see:\n    // http://www.realtimerendering.com/blog/gpus-prefer-premultiplication/\n    texture = this._texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, element);\n\n  } else {\n\n    // If the texture dimensions remain the same, repaint the existing texture.\n    // Repainting with texSubImage2D is usually faster than with texImage2D,\n    // except in the case noted in browserQuirks.\n\n    texture = this._texture;\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n\n    if (element instanceof HTMLVideoElement && browserQuirks.videoUseTexImage2D) {\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, element);\n    } else {\n      gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, gl.RGBA, gl.UNSIGNED_BYTE, element);\n    }\n\n  }\n\n  // Generate mipmap if the corresponding stage option is set and the texture\n  // dimensions are powers of two.\n  if (stage._generateMipmaps && ispot(width) && ispot(height)) {\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\n    gl.generateMipmap(gl.TEXTURE_2D);\n  } else {\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n  }\n\n  // Clamp texture to edges.\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n  // Unbind texture.\n  gl.bindTexture(gl.TEXTURE_2D, null);\n\n  // Update texture dimensions and timestamp.\n  this._timestamp = timestamp;\n  this._width = width;\n  this._height = height;\n\n};\n\n\nWebGlTexture.prototype.destroy = function() {\n  if (this._texture) {\n    this._gl.deleteTexture(this._texture);\n  }\n  clearOwnProperties(this);\n};\n\n\nWebGlStage.TextureClass = WebGlStage.prototype.TextureClass = WebGlTexture;\n\n\nmodule.exports = WebGlStage;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar prefixProperty = require('../util/dom').prefixProperty;\n\n// Detect CSS 3D transforms support. Adapted from Modernizr.\nfunction checkCssSupported() {\n  // First, check if the 'perspective' CSS property or a vendor-prefixed\n  // variant is available.\n  var perspectiveProperty = prefixProperty('perspective');\n  var el = document.createElement('div');\n  var supported = typeof el.style[perspectiveProperty] !== 'undefined';\n\n  // Certain versions of Chrome disable 3D transforms even though the CSS\n  // property exists. In those cases, we use the following media query,\n  // which only succeeds if the feature is indeed enabled.\n  if (supported && perspectiveProperty === 'WebkitPerspective') {\n    var id = '__marzipano_test_css3d_support__';\n    var st = document.createElement('style');\n    st.textContent = '@media(-webkit-transform-3d){#' + id + '{height: 3px;})';\n    document.getElementsByTagName('head')[0].appendChild(st);\n    el.id = id;\n    document.body.appendChild(el);\n    // The offsetHeight seems to be different than 3 at some zoom levels on\n    // Chrome (and maybe other browsers). Test for > 0 instead.\n    supported = el.offsetHeight > 0;\n    st.parentNode.removeChild(st);\n    el.parentNode.removeChild(el);\n  }\n\n  return supported;\n}\n\n// Cache result.\nvar supported;\nfunction cssSupported() {\n  if (supported !== undefined) {\n    return supported;\n  }\n  return (supported = checkCssSupported());\n}\n\nmodule.exports = cssSupported;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar Stage = require('./Stage');\nvar HtmlImageLoader = require('../loaders/HtmlImage');\nvar cssSupported = require('../support/Css');\nvar browser = require('bowser');\nvar inherits = require('../util/inherits');\nvar setAbsolute = require('../util/dom').setAbsolute;\nvar setFullSize = require('../util/dom').setFullSize;\nvar setNullTransformOrigin = require('../util/dom').setNullTransformOrigin;\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\n\n// Browser-specific workarounds.\nvar browserQuirks = {\n\n  // On most browsers we need to pad the tile edges with repeated pixels so\n  // that the borders between neighboring tiles aren't apparent.\n  // On iOS this isn't required, but we must disable it because the padding is\n  // incorrectly rendered on top of the neighboring tile.\n  padSize: browser.ios ? 0 : 3,\n\n  // In order to prevent fallback tiles from overlapping their children, iOS\n  // requires smaller zoom levels to be placed below larger zoom levels in\n  // the CSS 3D coordinate space.\n  reverseLevelDepth: browser.ios,\n\n  // A null transform on the layer element is required so that transitions\n  // between layers work on iOS.\n  useNullTransform: browser.ios,\n\n  // On Webkit and Gecko browsers, some tiles become invisible at certain\n  // angles, usually non-floor tiles when looking straight down. Setting the\n  // translateZ following the perspective transform to a slightly larger value\n  // than the latter seems to work around this glitch.\n  perspectiveNudge: browser.webkit || browser.gecko ? 0.001 : 0\n\n};\n\n\n/**\n * @class CssStage\n * @extends Stage\n * @classdesc\n *\n * A {@link Stage} implementation using CSS 3D Transforms.\n *\n * @param {Object} opts\n *\n * Also see the available {@link Stage} options.\n */\nfunction CssStage(opts) {\n  this.constructor.super_.call(this, opts);\n\n  this._loader = new HtmlImageLoader(this);\n\n  this._domElement = document.createElement('div');\n\n  setAbsolute(this._domElement);\n  setFullSize(this._domElement);\n\n  // N.B. the CSS stage requires device adaptation to be configured through\n  // the <meta name=\"viewport\"> tag on the containing document.\n  // Failure to do so will cause clipping and padding bugs to occur,\n  // at least on iOS <= 7.\n}\n\ninherits(CssStage, Stage);\n\n\n/**\n * Destructor.\n */\nCssStage.prototype.destroy = function() {\n  // Delegate clearing own properties to the Stage destructor.\n  this.constructor.super_.prototype.destroy.call(this);\n};\n\n\nCssStage.supported = function() {\n  return cssSupported();\n};\n\n\n/**\n * Returns the underlying DOM element.\n *\n * @return {Element}\n */\nCssStage.prototype.domElement = function() {\n  return this._domElement;\n};\n\n\nCssStage.prototype.setSizeForType = function() {};\n\n\nCssStage.prototype.loadImage = function(url, rect, done) {\n  return this._loader.loadImage(url, rect, done);\n};\n\n\nCssStage.prototype.validateLayer = function(layer) {\n  return; // always valid\n};\n\n\nCssStage.prototype.createRenderer = function(Renderer) {\n  return new Renderer(this._domElement, browserQuirks);\n};\n\nCssStage.prototype.destroyRenderer = function(renderer) {\n  renderer.destroy();\n};\n\n\nCssStage.prototype.startFrame = function() {};\n\n\nCssStage.prototype.endFrame = function() {};\n\n\nCssStage.prototype.takeSnapshot = function() {\n  throw new Error('CssStage: takeSnapshot not implemented');\n};\n\n\nCssStage.type = CssStage.prototype.type = 'css';\n\n\nfunction CssTexture(stage, tile, asset) {\n\n  var canvas = document.createElement('canvas');\n  setAbsolute(canvas);\n  setNullTransformOrigin(canvas);\n\n  this._canvas = canvas;\n  this._timestamp = null;\n  this.refresh(tile, asset);\n\n}\n\n\nCssTexture.prototype.refresh = function(tile, asset) {\n\n  // Check whether the texture needs to be updated.\n  var timestamp = asset.timestamp();\n  if (timestamp === this._timestamp) {\n    return;\n  }\n  this._timestamp = timestamp;\n\n  var canvas = this._canvas;\n  var ctx = canvas.getContext('2d');\n\n  // Get asset element.\n  var element = asset.element();\n\n  // Get tile dimensions.\n  var tileWidth = tile.width();\n  var tileHeight = tile.height();\n\n  // Get padding sizes.\n  var padSize = browserQuirks.padSize;\n  var padTop = tile.padTop() ? padSize : 0;\n  var padBottom = tile.padBottom() ? padSize : 0;\n  var padLeft = tile.padLeft() ? padSize : 0;\n  var padRight = tile.padRight() ? padSize : 0;\n\n  // Set canvas size.\n  canvas.width = padLeft + tileWidth + padRight;\n  canvas.height = padTop + tileHeight + padBottom;\n\n  // Draw image.\n  ctx.drawImage(element, padLeft, padTop, tileWidth, tileHeight);\n\n  var i;\n\n  // Draw top padding.\n  for (i = 0; i < padTop; i++) {\n    ctx.drawImage(canvas, padLeft, padTop, tileWidth, 1,\n                          padLeft, i, tileWidth, 1);\n  }\n\n  // Draw left padding.\n  for (i = 0; i < padLeft; i++) {\n    ctx.drawImage(canvas, padLeft, padTop, 1, tileHeight,\n                          i, padTop, 1, tileHeight);\n  }\n\n  // Draw bottom padding.\n  for (i = 0; i < padBottom; i++) {\n    ctx.drawImage(canvas, padLeft, padTop + tileHeight - 1, tileWidth, 1,\n                          padLeft, padTop + tileHeight + i, tileWidth, 1);\n  }\n\n  // Draw right padding.\n  for (i = 0; i < padRight; i++) {\n    ctx.drawImage(canvas, padLeft + tileWidth - 1, padTop, 1, tileHeight,\n                          padLeft + tileWidth + i, padTop, 1, tileHeight);\n  }\n\n};\n\n\nCssTexture.prototype.destroy = function() {\n  // TODO: investigate whether keeping a pool of canvases instead of\n  // creating new ones on demand improves performance.\n  clearOwnProperties(this);\n};\n\n\nCssStage.TextureClass = CssStage.prototype.TextureClass = CssTexture;\n\n\nmodule.exports = CssStage;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\n/**\n * @class FlashAsset\n * @implements Asset\n * @classdesc\n *\n * An immutable {@link Asset} compatible with {@link FlashStage}.\n * \n * The asset's underlying pixel source is a unique image ID associated with\n * a Flash application.\n *\n * @param {Element} flashElement The HTML element for the Flash application.\n * @param {number} imageId The unique image ID inside the Flash application.\n */\nfunction FlashAsset(flashElement, imageId) {\n  this._flashElement = flashElement;\n  this._imageId = imageId;\n}\n\neventEmitter(FlashAsset);\n\n/**\n * Destructor.\n */\nFlashAsset.prototype.destroy = function() {\n  this._flashElement.unloadImage(this._imageId);\n  clearOwnProperties(this);\n};\n\nFlashAsset.prototype.element = function() {\n  return this._imageId;\n};\n\nFlashAsset.prototype.width = function() {\n  // Not actually used anywhere.\n  return 0;\n};\n\nFlashAsset.prototype.height = function() {\n  // Not actually used anywhere.\n  return 0;\n};\n\nFlashAsset.prototype.timestamp = function() {\n  return 0;\n};\n\nFlashAsset.prototype.isDynamic = function() {\n  return false;\n};\n\nmodule.exports = FlashAsset;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar FlashAsset = require('../assets/Flash');\nvar NetworkError = require('../NetworkError');\nvar once = require('../util/once');\n\n// TODO: Move the load queue into the loader.\n\n/**\n * @class FlashImageLoader\n * @implements ImageLoader\n * @classdesc\n *\n * A {@link Loader} for Flash images.\n *\n * @param {Stage} stage The stage which is going to request images to be loaded.\n */\nfunction FlashImageLoader(stage) {\n  if (stage.type !== 'flash') {\n    throw new Error('Stage type incompatible with loader');\n  }\n  this._stage = stage;\n}\n\n/**\n * Loads an {@link Asset} from an image.\n * @param {string} url The image URL.\n * @param {?Rect} rect A {@link Rect} describing a portion of the image, or null\n *     to use the full image.\n * @param {function(?Error, Asset)} done The callback.\n * @return {function()} A function to cancel loading.\n */\nFlashImageLoader.prototype.loadImage = function(url, rect, done) {\n  var stage = this._stage;\n  var flashElement = stage.flashElement();\n\n  var x = rect && rect.x || 0;\n  var y = rect && rect.y || 0;\n  var width = rect && rect.width || 1;\n  var height = rect && rect.height || 1;\n\n  var imageId = flashElement.loadImage(url, width, height, x, y);\n\n  done = once(done);\n\n  // TODO: use a single callback for all imageLoaded events.\n\n  function callback(err, callbackId) {\n    // There is a single callback for all load events, so make sure this\n    // is the right one.\n    if (callbackId !== imageId) {\n      return;\n    }\n\n    stage.removeFlashCallbackListener('imageLoaded', callback);\n\n    // TODO: is there any way to distinguish a network error from other\n    // kinds of errors? For now we always return NetworkError since this\n    // prevents images to be retried continuously while we are offline.\n    if (err) {\n      done(new NetworkError('Network error: ' + url));\n    } else {\n      done(null, new FlashAsset(flashElement, imageId));\n    }\n  }\n\n  stage.addFlashCallbackListener('imageLoaded', callback);\n\n  function cancel() {\n    flashElement.cancelImage(imageId);\n    stage.removeFlashCallbackListener('imageLoaded', callback);\n    done.apply(null, arguments);\n  }\n\n  return cancel;\n};\n\nmodule.exports = FlashImageLoader;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n// Detect supported Flash version. Returns [major, minor, rev] or null.\n// Adapted from https://code.google.com/p/swfobject\nfunction detectFlashVersion() {\n  var playerVersion = null;\n\n  var plugins = navigator.plugins;\n  var mimeTypes = navigator.mimeTypes;\n\n  var d = null;\n\n  if (plugins && plugins['Shockwave Flash'] && mimeTypes &&\n      mimeTypes['application/x-shockwave-flash'] &&\n      mimeTypes['application/x-shockwave-flash'].enabledPlugin) {\n    d = plugins['Shockwave Flash'].description;\n    d = d.replace(/^.*\\s+(\\S+\\s+\\S+$)/, '$1');\n    playerVersion = [0, 0, 0];\n    playerVersion[0] = parseInt(d.replace(/^(.*)\\..*$/, '$1'), 10);\n    playerVersion[1] = parseInt(d.replace(/^.*\\.(.*)\\s.*$/, '$1'), 10);\n    playerVersion[2] = /[a-zA-Z]/.test(d) ? parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/, '$1'), 10) : 0;\n  }\n  else if (window.ActiveXObject) {\n    try {\n      var a = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');\n      if (a && (d = a.GetVariable('$version'))) {\n        d = d.split(' ')[1].split(',');\n        playerVersion = [parseInt(d[0], 10), parseInt(d[1], 10), parseInt(d[2], 10)];\n      }\n    }\n    catch (e) {}\n  }\n\n  return playerVersion;\n}\n\n// Flash support detection.\nfunction checkFlashSupported() {\n  var version = detectFlashVersion();\n  // Only support 10.1 and above. Flash 10.0 does not work for some reason.\n  return version && (version[0] >= 11 || (version[0] === 10 && version[1] >= 1));\n}\n\n// Cache result.\nvar supported;\nfunction flashSupported() {\n  if (supported !== undefined) {\n    return supported;\n  }\n  return (supported = checkFlashSupported());\n}\n\nmodule.exports = flashSupported;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nfunction defer(fn, args) {\n  function deferred() {\n    if (args && args.length > 0) {\n      fn.apply(null, args);\n    } else {\n      fn();\n    }\n  }\n  setTimeout(deferred, 0);\n}\n\nmodule.exports = defer;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar Stage = require('./Stage');\nvar FlashImageLoader = require('../loaders/FlashImage');\nvar flashSupported = require('../support/Flash');\nvar WorkQueue = require('../collections/WorkQueue');\nvar inherits = require('../util/inherits');\nvar defer = require('../util/defer');\nvar setAbsolute = require('../util/dom').setAbsolute;\nvar setFullSize = require('../util/dom').setFullSize;\nvar setBlocking = require('../util/dom').setBlocking;\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\n// Default Flash wmode.\nvar defaultWMode = 'transparent';\n\n// Default Flash SWF path. By default, expect the SWF to be named marzipano.swf\n// and located in the same directory as the current script. The default path\n// may be overridden by passing the `swfPath` option into the Viewer or Stage\n// constructor.\nvar defaultSwfPath = function() {\n  var script = document.currentScript;\n  if (!script) {\n    // This will produce the wrong result if the current script is loaded with\n    // the `async` or `defer` options, or exec'ed from a string. The user is\n    // expected to supply a custom `swfPath` in these cases.\n    var scripts = document.getElementsByTagName('script');\n    script = scripts.length ? scripts[scripts.length-1] : null;\n  }\n  if (!script) {\n    return null;\n  }\n  var path = script.src;\n  var slash = path.lastIndexOf('/');\n  if (slash >= 0) {\n    path = path.slice(0, slash + 1);\n  } else {\n    path = '';\n  }\n  return path + 'marzipano.swf';\n}();\n\n// Callbacks must be exposed in a global object to be called from Flash.\n// The global object maps each stage ID into the respective callbacks.\n// To prevent multiple Marzipano instances from clobbering the callbacks\n// for each other's stages, the next available stage ID must be shared among\n// the instances. We cache this value in a special property of the global\n// callback object.\nvar callbackObjectName = 'MarzipanoFlashCallbackMap';\nif (!(callbackObjectName in window)) {\n  window[callbackObjectName] = { __next: 0 };\n}\n\n// Get the next available Flash stage ID.\nfunction nextFlashStageId() {\n  return window[callbackObjectName].__next++;\n}\n\n// Names of the callbacks called from Flash. Presently there is only one.\nvar callbackNames = [ 'imageLoaded' ];\n\n// Browser-specific workarounds.\nvar flashQuirks = {\n  // How many repeated pixels to add around tile edges to suppress visible seams.\n  padSize: 3\n};\n\n/**\n * @class FlashStage\n * @extends Stage\n * @classdesc\n *\n * A {@link Stage} implementation using Flash.\n *\n * @param {Object} opts\n * @param {string} [opts.wmode='transparent']\n * @param {string} [opts.swfPath]\n *\n * The `wmode` option controls transparency, layering and compositing of the\n * Flash element into the web page. For more information see:\n * http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html\n *\n * The `swfPath` option denotes the path to the `marzipano.swf` file. It\n * defaults to the location of `marzipano.js` by looking for a script tag with\n * that name.\n *\n * Also see the available {@link Stage} options.\n */\nfunction FlashStage(opts) {\n  this.constructor.super_.call(this, opts);\n\n  this._wmode = opts && opts.wmode || defaultWMode;\n  this._swfPath = opts && opts.swfPath || defaultSwfPath;\n\n  if (!defaultSwfPath) {\n    throw new Error('Missing SWF path');\n  }\n\n  // Setup JavaScript callbacks to be called from Flash land when\n  // asynchronous operations terminate.\n  this._flashStageId = nextFlashStageId();\n  this._callbacksObj = window[callbackObjectName][this._flashStageId] = {};\n  this._stageCallbacksObjVarName = callbackObjectName + '[' + this._flashStageId + ']';\n  this._callbackListeners = {};\n  for (var i = 0; i < callbackNames.length; i++) {\n    this._callbacksObj[callbackNames[i]] = this._callListeners(callbackNames[i]);\n  }\n\n  this._loader = new FlashImageLoader(this);\n\n  // Queue for loadImage calls.\n  // The queue starts paused so that loadImage calls occurring before Flash\n  // is ready do not start right away (as they would fail).\n  // TODO: This is awkward. The stage must signal that it's ready to load\n  // images, but queuing should otherwise be implemented by the loader.\n  this._loadImageQueue = new WorkQueue();\n  this._loadImageQueue.pause();\n\n  // Whether flash is ready to be called from JavaScript.\n  this._flashReady = false;\n\n  // Add an ID to each renderer/layer, so that it can be identified within\n  // the ActionScript program.\n  this._nextLayerId = 0;\n\n  // Create the DOM elements.\n  var elements = createDomElements(this._swfPath, this._flashStageId, this._stageCallbacksObjVarName);\n  this._domElement = elements.root;\n  this._blockingElement = elements.blocking;\n  this._flashElement = elements.flash;\n\n  // Wake up the render loop when we are ready (only after element is added to the DOM)\n  this._checkReadyTimer = setInterval(this._checkReady.bind(this), 50);\n}\n\ninherits(FlashStage, Stage);\n\n\n/**\n * Destructor.\n */\nFlashStage.prototype.destroy = function() {\n  window[callbackObjectName][this._flashStageId] = null;\n  if (this._checkReadyTimer != null) {\n    clearInterval(this._checkReadyTimer);\n  }\n  // Delegate clearing own properties to the Stage destructor.\n  this.constructor.super_.prototype.destroy.call(this);\n};\n\n\nFlashStage.supported = function() {\n  return flashSupported();\n};\n\n\n/**\n * Returns the underlying DOM element.\n * @return {Element}\n */\nFlashStage.prototype.domElement = function() {\n  return this._domElement;\n};\n\n\n/**\n * Returns the underlying Flash element.\n * @return {Element}\n */\nFlashStage.prototype.flashElement = function() {\n  return this._flashElement;\n};\n\n\nFlashStage.prototype.setSizeForType = function() {};\n\n\nFlashStage.prototype.loadImage = function(url, rect, done) {\n  // TODO: Move the queuing into the loader, which avoids this nonsense.\n  var loadFn = this._loader.loadImage.bind(this._loader, url, rect);\n  return this._loadImageQueue.push(loadFn, done);\n};\n\n\nFlashStage.prototype.validateLayer = function(layer) {\n  return; // always valid\n};\n\n\nFlashStage.prototype.addFlashCallbackListener = function(callbackName, f) {\n  this._callbackListeners[callbackName] = this._callbackListeners[callbackName] || [];\n  this._callbackListeners[callbackName].push(f);\n};\n\n\nFlashStage.prototype.removeFlashCallbackListener = function(callbackName, f) {\n  var listeners = this._callbackListeners[callbackName] || [];\n  var index = listeners.indexOf(f);\n  if (index >= 0) {\n    listeners.splice(index, 1);\n  }\n};\n\n\nFlashStage.prototype._callListeners = function(callbackName) {\n\n  var self = this;\n\n  return function callListeners() {\n    var listeners = self._callbackListeners[callbackName] || [];\n    for (var i = 0; i < listeners.length; i++) {\n      // JavaScript executed on calls from Flash does not throw exceptions.\n      // Executing the callback in a new stack frame fixes this.\n      var listener = listeners[i];\n      defer(listener, arguments);\n    }\n  };\n};\n\n\nFlashStage.prototype._checkReady = function() {\n  if (!this._flashElement ||\n      !this._flashElement.isReady ||\n      !this._flashElement.isReady()) {\n    // Not ready yet.\n    return false;\n  }\n\n  // Mark as ready.\n  this._flashReady = true;\n\n  // Disable interval timer.\n  clearTimeout(this._checkReadyTimer);\n  this._checkReadyTimer = null;\n\n  // Resume image loading queue.\n  this._loadImageQueue.resume();\n\n  // Force next render.\n  this.emit('renderInvalid');\n\n  return true;\n};\n\n\nfunction createDomElements(swfPath, id, stageCallbacksObjVarName) {\n  var rootElement = document.createElement('div');\n  setAbsolute(rootElement);\n  setFullSize(rootElement);\n\n  // The Flash object must have `id` and `name` attributes, otherwise\n  // ExternalInterface calls will not work.\n  var elementId = \"marzipano-flash-stage-\" + id;\n\n  var objectStr = '<object id=\"' + elementId + '\" name=\"' + elementId + '\" type=\"application/x-shockwave-flash\" data=\"' + swfPath + '\">';\n\n  var paramsStr = '';\n  paramsStr += '<param name=\"movie\" value=\"' + swfPath + '\" />';\n  paramsStr += '<param name=\"allowscriptaccess\" value=\"always\" />';\n  paramsStr += '<param name=\"flashvars\" value=\"callbacksObjName=' + stageCallbacksObjVarName + '\" />';\n  paramsStr += '<param name=\"wmode\" value=\"transparent\" />';\n\n  objectStr += paramsStr;\n  objectStr += '</object>';\n\n  // Embed Flash into the DOM.\n  // Adding children into an <object> element doesn't work, so we create a\n  // temporary element and set its innerHTML.\n  var tmpElement = document.createElement('div');\n  tmpElement.innerHTML = objectStr;\n  var flashElement = tmpElement.firstChild;\n  setAbsolute(flashElement);\n  setFullSize(flashElement);\n  rootElement.appendChild(flashElement);\n\n  // Create blocking element to prevent events from being caught by Flash.\n  var blockingElement = document.createElement('div');\n  setAbsolute(blockingElement);\n  setFullSize(blockingElement);\n  setBlocking(blockingElement);\n  rootElement.appendChild(blockingElement);\n\n  return { root: rootElement, flash: flashElement, blocking: blockingElement };\n}\n\n\nFlashStage.prototype.createRenderer = function(Renderer) {\n  return new Renderer(this._flashElement, ++this._nextLayerId, flashQuirks);\n};\n\n\nFlashStage.prototype.destroyRenderer = function(renderer) {\n  renderer.destroy();\n};\n\n\nFlashStage.prototype.startFrame = function() {};\n\n\nFlashStage.prototype.endFrame = function() {};\n\n\nFlashStage.prototype.takeSnapshot = function (options) {\n  // Validate argument.\n  if (typeof options !== 'object' || options == null) {\n    options = {};\n  }\n\n  var quality = options.quality;\n\n  // Set default quality if it is not passed in.\n  if (typeof quality == 'undefined') {\n    quality = 75;\n  }\n\n  // Throw if quality is of invlid type or out of bounds.\n  if (typeof quality !== 'number' || quality < 0 || quality > 100) {\n    throw new Error('FlashStage: Snapshot quality needs to be a number between 0 and 100');\n  }\n\n  // Return the snapshot by executing a flash-exported method.\n  return this._flashElement.takeSnapshot(quality);\n};\n\n\nFlashStage.type = FlashStage.prototype.type = 'flash';\n\n\nfunction FlashTexture(stage, tile, asset) {\n\n  // Get image id.\n  var imageId = asset.element();\n\n  // Get tile dimensions.\n  var tileWidth = tile.width();\n  var tileHeight = tile.height();\n\n  // Get padding sizes.\n  var padSize = flashQuirks.padSize;\n  var padTop = tile.padTop() ? padSize : 0;\n  var padBottom = tile.padBottom() ? padSize : 0;\n  var padLeft = tile.padLeft() ? padSize : 0;\n  var padRight = tile.padRight() ? padSize : 0;\n\n  var textureId = stage._flashElement.createTexture(imageId, tileWidth, tileHeight, padTop, padBottom, padLeft, padRight);\n\n  this._stage = stage;\n  this._textureId = textureId;\n}\n\n\nFlashTexture.prototype.refresh = function(tile, asset) {\n  // TODO: This is required for the Flash stage to support dynamic textures.\n  // However, there are currently no dynamic textures that work with the\n  // Flash stage.\n};\n\n\nFlashTexture.prototype.destroy = function() {\n  this._stage._flashElement.destroyTexture(this._textureId);\n  clearOwnProperties(this);\n};\n\n\nFlashStage.TextureClass = FlashStage.prototype.TextureClass = FlashTexture;\n\n\nmodule.exports = FlashStage;\n","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Type} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\r\n * 2x2 Matrix\r\n * @module mat2\r\n */\n\n/**\r\n * Creates a new identity mat2\r\n *\r\n * @returns {mat2} a new 2x2 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[0] = 1;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat2 initialized with values from an existing matrix\r\n *\r\n * @param {mat2} a matrix to clone\r\n * @returns {mat2} a new 2x2 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Copy the values from one mat2 to another\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the source matrix\r\n * @returns {mat2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set a mat2 to the identity matrix\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @returns {mat2} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Create a new mat2 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\r\n * @returns {mat2} out A new 2x2 matrix\r\n */\n\nexport function fromValues(m00, m01, m10, m11) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m10;\n  out[3] = m11;\n  return out;\n}\n/**\r\n * Set the components of a mat2 to the given values\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\r\n * @returns {mat2} out\r\n */\n\nexport function set(out, m00, m01, m10, m11) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m10;\n  out[3] = m11;\n  return out;\n}\n/**\r\n * Transpose the values of a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the source matrix\r\n * @returns {mat2} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache\n  // some values\n  if (out === a) {\n    var a1 = a[1];\n    out[1] = a[2];\n    out[2] = a1;\n  } else {\n    out[0] = a[0];\n    out[1] = a[2];\n    out[2] = a[1];\n    out[3] = a[3];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the source matrix\r\n * @returns {mat2} out\r\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3]; // Calculate the determinant\n\n  var det = a0 * a3 - a2 * a1;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = a3 * det;\n  out[1] = -a1 * det;\n  out[2] = -a2 * det;\n  out[3] = a0 * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the source matrix\r\n * @returns {mat2} out\r\n */\n\nexport function adjoint(out, a) {\n  // Caching this value is nessecary if out == a\n  var a0 = a[0];\n  out[0] = a[3];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a0;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat2\r\n *\r\n * @param {mat2} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  return a[0] * a[3] - a[2] * a[1];\n}\n/**\r\n * Multiplies two mat2's\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the first operand\r\n * @param {mat2} b the second operand\r\n * @returns {mat2} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = a0 * b0 + a2 * b1;\n  out[1] = a1 * b0 + a3 * b1;\n  out[2] = a0 * b2 + a2 * b3;\n  out[3] = a1 * b2 + a3 * b3;\n  return out;\n}\n/**\r\n * Rotates a mat2 by the given angle\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = a0 * c + a2 * s;\n  out[1] = a1 * c + a3 * s;\n  out[2] = a0 * -s + a2 * c;\n  out[3] = a1 * -s + a3 * c;\n  return out;\n}\n/**\r\n * Scales the mat2 by the dimensions in the given vec2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the matrix to rotate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat2} out\r\n **/\n\nexport function scale(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0 * v0;\n  out[1] = a1 * v0;\n  out[2] = a2 * v1;\n  out[3] = a3 * v1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2.identity(dest);\r\n *     mat2.rotate(dest, dest, rad);\r\n *\r\n * @param {mat2} out mat2 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = -s;\n  out[3] = c;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2.identity(dest);\r\n *     mat2.scale(dest, dest, vec);\r\n *\r\n * @param {mat2} out mat2 receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat2} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = v[1];\n  return out;\n}\n/**\r\n * Returns a string representation of a mat2\r\n *\r\n * @param {mat2} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat2(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat2\r\n *\r\n * @param {mat2} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3]);\n}\n/**\r\n * Returns L, D and U matrices (Lower triangular, Diagonal and Upper triangular) by factorizing the input matrix\r\n * @param {mat2} L the lower triangular matrix\r\n * @param {mat2} D the diagonal matrix\r\n * @param {mat2} U the upper triangular matrix\r\n * @param {mat2} a the input matrix to factorize\r\n */\n\nexport function LDU(L, D, U, a) {\n  L[2] = a[2] / a[0];\n  U[0] = a[0];\n  U[1] = a[1];\n  U[3] = a[3] - L[2] * U[1];\n  return [L, D, U];\n}\n/**\r\n * Adds two mat2's\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the first operand\r\n * @param {mat2} b the second operand\r\n * @returns {mat2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the first operand\r\n * @param {mat2} b the second operand\r\n * @returns {mat2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat2} a The first matrix.\r\n * @param {mat2} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat2} a The first matrix.\r\n * @param {mat2} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat2} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two mat2's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat2} out the receiving vector\r\n * @param {mat2} a the first operand\r\n * @param {mat2} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat2} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Alias for {@link mat2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 2x3 Matrix\r\n * @module mat2d\r\n *\r\n * @description\r\n * A mat2d contains six elements defined as:\r\n * <pre>\r\n * [a, b, c,\r\n *  d, tx, ty]\r\n * </pre>\r\n * This is a short form for the 3x3 matrix:\r\n * <pre>\r\n * [a, b, 0,\r\n *  c, d, 0,\r\n *  tx, ty, 1]\r\n * </pre>\r\n * The last column is ignored so the array is shorter and operations are faster.\r\n */\n\n/**\r\n * Creates a new identity mat2d\r\n *\r\n * @returns {mat2d} a new 2x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(6);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[4] = 0;\n    out[5] = 0;\n  }\n\n  out[0] = 1;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat2d initialized with values from an existing matrix\r\n *\r\n * @param {mat2d} a matrix to clone\r\n * @returns {mat2d} a new 2x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  return out;\n}\n/**\r\n * Copy the values from one mat2d to another\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the source matrix\r\n * @returns {mat2d} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  return out;\n}\n/**\r\n * Set a mat2d to the identity matrix\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @returns {mat2d} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\r\n * Create a new mat2d with the given values\r\n *\r\n * @param {Number} a Component A (index 0)\r\n * @param {Number} b Component B (index 1)\r\n * @param {Number} c Component C (index 2)\r\n * @param {Number} d Component D (index 3)\r\n * @param {Number} tx Component TX (index 4)\r\n * @param {Number} ty Component TY (index 5)\r\n * @returns {mat2d} A new mat2d\r\n */\n\nexport function fromValues(a, b, c, d, tx, ty) {\n  var out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  out[4] = tx;\n  out[5] = ty;\n  return out;\n}\n/**\r\n * Set the components of a mat2d to the given values\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {Number} a Component A (index 0)\r\n * @param {Number} b Component B (index 1)\r\n * @param {Number} c Component C (index 2)\r\n * @param {Number} d Component D (index 3)\r\n * @param {Number} tx Component TX (index 4)\r\n * @param {Number} ty Component TY (index 5)\r\n * @returns {mat2d} out\r\n */\n\nexport function set(out, a, b, c, d, tx, ty) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  out[4] = tx;\n  out[5] = ty;\n  return out;\n}\n/**\r\n * Inverts a mat2d\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the source matrix\r\n * @returns {mat2d} out\r\n */\n\nexport function invert(out, a) {\n  var aa = a[0],\n      ab = a[1],\n      ac = a[2],\n      ad = a[3];\n  var atx = a[4],\n      aty = a[5];\n  var det = aa * ad - ab * ac;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = ad * det;\n  out[1] = -ab * det;\n  out[2] = -ac * det;\n  out[3] = aa * det;\n  out[4] = (ac * aty - ad * atx) * det;\n  out[5] = (ab * atx - aa * aty) * det;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat2d\r\n *\r\n * @param {mat2d} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  return a[0] * a[3] - a[1] * a[2];\n}\n/**\r\n * Multiplies two mat2d's\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the first operand\r\n * @param {mat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5];\n  out[0] = a0 * b0 + a2 * b1;\n  out[1] = a1 * b0 + a3 * b1;\n  out[2] = a0 * b2 + a2 * b3;\n  out[3] = a1 * b2 + a3 * b3;\n  out[4] = a0 * b4 + a2 * b5 + a4;\n  out[5] = a1 * b4 + a3 * b5 + a5;\n  return out;\n}\n/**\r\n * Rotates a mat2d by the given angle\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2d} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = a0 * c + a2 * s;\n  out[1] = a1 * c + a3 * s;\n  out[2] = a0 * -s + a2 * c;\n  out[3] = a1 * -s + a3 * c;\n  out[4] = a4;\n  out[5] = a5;\n  return out;\n}\n/**\r\n * Scales the mat2d by the dimensions in the given vec2\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the matrix to translate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat2d} out\r\n **/\n\nexport function scale(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0 * v0;\n  out[1] = a1 * v0;\n  out[2] = a2 * v1;\n  out[3] = a3 * v1;\n  out[4] = a4;\n  out[5] = a5;\n  return out;\n}\n/**\r\n * Translates the mat2d by the dimensions in the given vec2\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the matrix to translate\r\n * @param {vec2} v the vec2 to translate the matrix by\r\n * @returns {mat2d} out\r\n **/\n\nexport function translate(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0;\n  out[1] = a1;\n  out[2] = a2;\n  out[3] = a3;\n  out[4] = a0 * v0 + a2 * v1 + a4;\n  out[5] = a1 * v0 + a3 * v1 + a5;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.rotate(dest, dest, rad);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2d} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = -s;\n  out[3] = c;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.scale(dest, dest, vec);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat2d} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = v[1];\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.translate(dest, dest, vec);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {vec2} v Translation vector\r\n * @returns {mat2d} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = v[0];\n  out[5] = v[1];\n  return out;\n}\n/**\r\n * Returns a string representation of a mat2d\r\n *\r\n * @param {mat2d} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat2d(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat2d\r\n *\r\n * @param {mat2d} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], 1);\n}\n/**\r\n * Adds two mat2d's\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the first operand\r\n * @param {mat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the first operand\r\n * @param {mat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat2d} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  return out;\n}\n/**\r\n * Adds two mat2d's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat2d} out the receiving vector\r\n * @param {mat2d} a the first operand\r\n * @param {mat2d} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat2d} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat2d} a The first matrix.\r\n * @param {mat2d} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat2d} a The first matrix.\r\n * @param {mat2d} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5));\n}\n/**\r\n * Alias for {@link mat2d.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat2d.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\n\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {mat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {mat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {mat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to translate\r\n * @param {vec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n;\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Translation vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\r\n* Calculates a 3x3 matrix from the given quaternion\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {quat} q Quaternion to create matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\r\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {mat4} a Mat4 to derive the normal matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {mat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {mat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {mat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {mat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {quat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {mat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @param {vec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n;\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {mat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {mat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {vec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\n  r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\n  r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {vec3} a The first operand\r\n * @param {vec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var tempA = fromValues(a[0], a[1], a[2]);\n  var tempB = fromValues(b[0], b[1], b[2]);\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n  var cosine = dot(tempA, tempB);\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {vec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {vec4} result the receiving vector\r\n * @param {vec4} U the first vector\r\n * @param {vec4} V the second vector\r\n * @param {vec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n;\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\r\n * Quaternion\r\n * @module quat\r\n */\n\n/**\r\n * Creates a new identity quat\r\n *\r\n * @returns {quat} a new quaternion\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Set a quat to the identity quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Sets a quat from the given angle and rotation axis,\r\n * then returns it.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {vec3} axis the axis around which to rotate\r\n * @param {Number} rad the angle in radians\r\n * @returns {quat} out\r\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\r\n * Gets the rotation axis and angle for a given\r\n *  quaternion. If a quaternion is created with\r\n *  setAxisAngle, this method will return the same\r\n *  values as providied in the original parameter list\r\n *  OR functionally equivalent values.\r\n * Example: The quaternion formed by axis [0, 0, 1] and\r\n *  angle -90 is the same as the quaternion formed by\r\n *  [0, 0, 1] and 270. This method favors the latter.\r\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\r\n * @param  {quat} q     Quaternion to be decomposed\r\n * @return {Number}     Angle, in radians, of the rotation\r\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\r\n * Gets the angular distance between two unit quaternions\r\n *\r\n * @param  {quat} a     Origin unit quaternion \r\n * @param  {quat} b     Destination unit quaternion\r\n * @return {Number}     Angle, in radians, between the two quaternions\r\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\r\n * Multiplies two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the X axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Y axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Z axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\r\n * Calculates the W component of a quat from the X, Y, and Z components.\r\n * Assumes that quaternion is 1 unit in length.\r\n * Any existing W component will be ignored.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate W component of\r\n * @returns {quat} out\r\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\r\n * Calculate the exponential of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate the exponential of\r\n * @returns {quat} out\r\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\r\n * Calculate the natural logarithm of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate the exponential of\r\n * @returns {quat} out\r\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\r\n * Calculate the scalar power of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate the exponential of\r\n * @param {Number} b amount to scale the quaternion by\r\n * @returns {quat} out\r\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\r\n * Performs a spherical linear interpolation between two quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\r\n * Generates a random unit quaternion\r\n * \r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\r\n * Calculates the inverse of a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate inverse of\r\n * @returns {quat} out\r\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\r\n * Calculates the conjugate of a quat\r\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate conjugate of\r\n * @returns {quat} out\r\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a quaternion from the given 3x3 rotation matrix.\r\n *\r\n * NOTE: The resultant quaternion is not normalized, so you should be sure\r\n * to renormalize the quaternion yourself where necessary.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {mat3} m rotation matrix\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\r\n * Creates a quaternion from the given euler angle x, y, z.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {x} Angle to rotate around X axis in degrees.\r\n * @param {y} Angle to rotate around Y axis in degrees.\r\n * @param {z} Angle to rotate around Z axis in degrees.\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\r\n * Returns a string representation of a quatenion\r\n *\r\n * @param {quat} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'quat(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {quat} a quaternion to clone\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var clone = vec4.clone;\n/**\r\n * Creates a new quat initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var fromValues = vec4.fromValues;\n/**\r\n * Copy the values from one quat to another\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the source quaternion\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var copy = vec4.copy;\n/**\r\n * Set the components of a quat to the given values\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var set = vec4.set;\n/**\r\n * Adds two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var add = vec4.add;\n/**\r\n * Alias for {@link quat.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Scales a quat by a scalar number\r\n *\r\n * @param {quat} out the receiving vector\r\n * @param {quat} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var scale = vec4.scale;\n/**\r\n * Calculates the dot product of two quat's\r\n *\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\n\nexport var dot = vec4.dot;\n/**\r\n * Performs a linear interpolation between two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var lerp = vec4.lerp;\n/**\r\n * Calculates the length of a quat\r\n *\r\n * @param {quat} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport var length = vec4.length;\n/**\r\n * Alias for {@link quat.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Calculates the squared length of a quat\r\n *\r\n * @param {quat} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\r\n * Alias for {@link quat.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Normalize a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quaternion to normalize\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var normalize = vec4.normalize;\n/**\r\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {quat} a The first quaternion.\r\n * @param {quat} b The second quaternion.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\r\n * Returns whether or not the quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {quat} a The first vector.\r\n * @param {quat} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var equals = vec4.equals;\n/**\r\n * Sets a quaternion to represent the shortest rotation from one\r\n * vector to another.\r\n *\r\n * Both vectors are assumed to be unit length.\r\n *\r\n * @param {quat} out the receiving quaternion.\r\n * @param {vec3} a the initial vector\r\n * @param {vec3} b the destination vector\r\n * @returns {quat} out\r\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\r\n * Performs a spherical linear interpolation with two control points\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {quat} c the third operand\r\n * @param {quat} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\r\n * Sets the specified quaternion with values corresponding to the given\r\n * axes. Each axis is a vec3 and is expected to be unit length and\r\n * perpendicular to all other specified axes.\r\n *\r\n * @param {vec3} view  the vector representing the viewing direction\r\n * @param {vec3} right the vector representing the local \"right\" direction\r\n * @param {vec3} up    the vector representing the local \"up\" direction\r\n * @returns {quat} out\r\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as quat from \"./quat.js\";\nimport * as mat4 from \"./mat4.js\";\n/**\r\n * Dual Quaternion<br>\r\n * Format: [real, dual]<br>\r\n * Quaternion format: XYZW<br>\r\n * Make sure to have normalized dual quaternions, otherwise the functions may not work as intended.<br>\r\n * @module quat2\r\n */\n\n/**\r\n * Creates a new identity dual quat\r\n *\r\n * @returns {quat2} a new dual quaternion [real -> rotation, dual -> translation]\r\n */\n\nexport function create() {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    dq[0] = 0;\n    dq[1] = 0;\n    dq[2] = 0;\n    dq[4] = 0;\n    dq[5] = 0;\n    dq[6] = 0;\n    dq[7] = 0;\n  }\n\n  dq[3] = 1;\n  return dq;\n}\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {quat2} a dual quaternion to clone\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\n\nexport function clone(a) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = a[0];\n  dq[1] = a[1];\n  dq[2] = a[2];\n  dq[3] = a[3];\n  dq[4] = a[4];\n  dq[5] = a[5];\n  dq[6] = a[6];\n  dq[7] = a[7];\n  return dq;\n}\n/**\r\n * Creates a new dual quat initialized with the given values\r\n *\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component\r\n * @param {Number} y2 Y component\r\n * @param {Number} z2 Z component\r\n * @param {Number} w2 W component\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\n\nexport function fromValues(x1, y1, z1, w1, x2, y2, z2, w2) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = x1;\n  dq[1] = y1;\n  dq[2] = z1;\n  dq[3] = w1;\n  dq[4] = x2;\n  dq[5] = y2;\n  dq[6] = z2;\n  dq[7] = w2;\n  return dq;\n}\n/**\r\n * Creates a new dual quat from the given values (quat and translation)\r\n *\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component (translation)\r\n * @param {Number} y2 Y component (translation)\r\n * @param {Number} z2 Z component (translation)\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\n\nexport function fromRotationTranslationValues(x1, y1, z1, w1, x2, y2, z2) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = x1;\n  dq[1] = y1;\n  dq[2] = z1;\n  dq[3] = w1;\n  var ax = x2 * 0.5,\n      ay = y2 * 0.5,\n      az = z2 * 0.5;\n  dq[4] = ax * w1 + ay * z1 - az * y1;\n  dq[5] = ay * w1 + az * x1 - ax * z1;\n  dq[6] = az * w1 + ax * y1 - ay * x1;\n  dq[7] = -ax * x1 - ay * y1 - az * z1;\n  return dq;\n}\n/**\r\n * Creates a dual quat from a quaternion and a translation\r\n *\r\n * @param {quat2} dual quaternion receiving operation result\r\n * @param {quat} q a normalized quaternion\r\n * @param {vec3} t tranlation vector\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\n\nexport function fromRotationTranslation(out, q, t) {\n  var ax = t[0] * 0.5,\n      ay = t[1] * 0.5,\n      az = t[2] * 0.5,\n      bx = q[0],\n      by = q[1],\n      bz = q[2],\n      bw = q[3];\n  out[0] = bx;\n  out[1] = by;\n  out[2] = bz;\n  out[3] = bw;\n  out[4] = ax * bw + ay * bz - az * by;\n  out[5] = ay * bw + az * bx - ax * bz;\n  out[6] = az * bw + ax * by - ay * bx;\n  out[7] = -ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Creates a dual quat from a translation\r\n *\r\n * @param {quat2} dual quaternion receiving operation result\r\n * @param {vec3} t translation vector\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\n\nexport function fromTranslation(out, t) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = t[0] * 0.5;\n  out[5] = t[1] * 0.5;\n  out[6] = t[2] * 0.5;\n  out[7] = 0;\n  return out;\n}\n/**\r\n * Creates a dual quat from a quaternion\r\n *\r\n * @param {quat2} dual quaternion receiving operation result\r\n * @param {quat} q the quaternion\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\n\nexport function fromRotation(out, q) {\n  out[0] = q[0];\n  out[1] = q[1];\n  out[2] = q[2];\n  out[3] = q[3];\n  out[4] = 0;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  return out;\n}\n/**\r\n * Creates a new dual quat from a matrix (4x4)\r\n *\r\n * @param {quat2} out the dual quaternion\r\n * @param {mat4} a the matrix\r\n * @returns {quat2} dual quat receiving operation result\r\n * @function\r\n */\n\nexport function fromMat4(out, a) {\n  //TODO Optimize this\n  var outer = quat.create();\n  mat4.getRotation(outer, a);\n  var t = new glMatrix.ARRAY_TYPE(3);\n  mat4.getTranslation(t, a);\n  fromRotationTranslation(out, outer, t);\n  return out;\n}\n/**\r\n * Copy the values from one dual quat to another\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the source dual quaternion\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  return out;\n}\n/**\r\n * Set a dual quat to the identity dual quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @returns {quat2} out\r\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  return out;\n}\n/**\r\n * Set the components of a dual quat to the given values\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component\r\n * @param {Number} y2 Y component\r\n * @param {Number} z2 Z component\r\n * @param {Number} w2 W component\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function set(out, x1, y1, z1, w1, x2, y2, z2, w2) {\n  out[0] = x1;\n  out[1] = y1;\n  out[2] = z1;\n  out[3] = w1;\n  out[4] = x2;\n  out[5] = y2;\n  out[6] = z2;\n  out[7] = w2;\n  return out;\n}\n/**\r\n * Gets the real part of a dual quat\r\n * @param  {quat} out real part\r\n * @param  {quat2} a Dual Quaternion\r\n * @return {quat} real part\r\n */\n\nexport var getReal = quat.copy;\n/**\r\n * Gets the dual part of a dual quat\r\n * @param  {quat} out dual part\r\n * @param  {quat2} a Dual Quaternion\r\n * @return {quat} dual part\r\n */\n\nexport function getDual(out, a) {\n  out[0] = a[4];\n  out[1] = a[5];\n  out[2] = a[6];\n  out[3] = a[7];\n  return out;\n}\n/**\r\n * Set the real component of a dual quat to the given quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {quat} q a quaternion representing the real part\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport var setReal = quat.copy;\n/**\r\n * Set the dual component of a dual quat to the given quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {quat} q a quaternion representing the dual part\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function setDual(out, q) {\n  out[4] = q[0];\n  out[5] = q[1];\n  out[6] = q[2];\n  out[7] = q[3];\n  return out;\n}\n/**\r\n * Gets the translation of a normalized dual quat\r\n * @param  {vec3} out translation\r\n * @param  {quat2} a Dual Quaternion to be decomposed\r\n * @return {vec3} translation\r\n */\n\nexport function getTranslation(out, a) {\n  var ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3];\n  out[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n  out[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n  out[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  return out;\n}\n/**\r\n * Translates a dual quat by the given vector\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {quat2} out\r\n */\n\nexport function translate(out, a, v) {\n  var ax1 = a[0],\n      ay1 = a[1],\n      az1 = a[2],\n      aw1 = a[3],\n      bx1 = v[0] * 0.5,\n      by1 = v[1] * 0.5,\n      bz1 = v[2] * 0.5,\n      ax2 = a[4],\n      ay2 = a[5],\n      az2 = a[6],\n      aw2 = a[7];\n  out[0] = ax1;\n  out[1] = ay1;\n  out[2] = az1;\n  out[3] = aw1;\n  out[4] = aw1 * bx1 + ay1 * bz1 - az1 * by1 + ax2;\n  out[5] = aw1 * by1 + az1 * bx1 - ax1 * bz1 + ay2;\n  out[6] = aw1 * bz1 + ax1 * by1 - ay1 * bx1 + az2;\n  out[7] = -ax1 * bx1 - ay1 * by1 - az1 * bz1 + aw2;\n  return out;\n}\n/**\r\n * Rotates a dual quat around the X axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateX(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\r\n * Rotates a dual quat around the Y axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateY(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\r\n * Rotates a dual quat around the Z axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateZ(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\r\n * Rotates a dual quat by a given quaternion (a * q)\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {quat} q quaternion to rotate by\r\n * @returns {quat2} out\r\n */\n\nexport function rotateByQuatAppend(out, a, q) {\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3],\n      ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  out[0] = ax * qw + aw * qx + ay * qz - az * qy;\n  out[1] = ay * qw + aw * qy + az * qx - ax * qz;\n  out[2] = az * qw + aw * qz + ax * qy - ay * qx;\n  out[3] = aw * qw - ax * qx - ay * qy - az * qz;\n  ax = a[4];\n  ay = a[5];\n  az = a[6];\n  aw = a[7];\n  out[4] = ax * qw + aw * qx + ay * qz - az * qy;\n  out[5] = ay * qw + aw * qy + az * qx - ax * qz;\n  out[6] = az * qw + aw * qz + ax * qy - ay * qx;\n  out[7] = aw * qw - ax * qx - ay * qy - az * qz;\n  return out;\n}\n/**\r\n * Rotates a dual quat by a given quaternion (q * a)\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat} q quaternion to rotate by\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @returns {quat2} out\r\n */\n\nexport function rotateByQuatPrepend(out, q, a) {\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3],\n      bx = a[0],\n      by = a[1],\n      bz = a[2],\n      bw = a[3];\n  out[0] = qx * bw + qw * bx + qy * bz - qz * by;\n  out[1] = qy * bw + qw * by + qz * bx - qx * bz;\n  out[2] = qz * bw + qw * bz + qx * by - qy * bx;\n  out[3] = qw * bw - qx * bx - qy * by - qz * bz;\n  bx = a[4];\n  by = a[5];\n  bz = a[6];\n  bw = a[7];\n  out[4] = qx * bw + qw * bx + qy * bz - qz * by;\n  out[5] = qy * bw + qw * by + qz * bx - qx * bz;\n  out[6] = qz * bw + qw * bz + qx * by - qy * bx;\n  out[7] = qw * bw - qx * bx - qy * by - qz * bz;\n  return out;\n}\n/**\r\n * Rotates a dual quat around a given axis. Does the normalisation automatically\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {vec3} axis the axis to rotate around\r\n * @param {Number} rad how far the rotation should be\r\n * @returns {quat2} out\r\n */\n\nexport function rotateAroundAxis(out, a, axis, rad) {\n  //Special case for rad = 0\n  if (Math.abs(rad) < glMatrix.EPSILON) {\n    return copy(out, a);\n  }\n\n  var axisLength = Math.hypot(axis[0], axis[1], axis[2]);\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  var bx = s * axis[0] / axisLength;\n  var by = s * axis[1] / axisLength;\n  var bz = s * axis[2] / axisLength;\n  var bw = Math.cos(rad);\n  var ax1 = a[0],\n      ay1 = a[1],\n      az1 = a[2],\n      aw1 = a[3];\n  out[0] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[1] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[2] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[3] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  var ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  out[4] = ax * bw + aw * bx + ay * bz - az * by;\n  out[5] = ay * bw + aw * by + az * bx - ax * bz;\n  out[6] = az * bw + aw * bz + ax * by - ay * bx;\n  out[7] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Adds two dual quat's\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the first operand\r\n * @param {quat2} b the second operand\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  return out;\n}\n/**\r\n * Multiplies two dual quat's\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the first operand\r\n * @param {quat2} b the second operand\r\n * @returns {quat2} out\r\n */\n\nexport function multiply(out, a, b) {\n  var ax0 = a[0],\n      ay0 = a[1],\n      az0 = a[2],\n      aw0 = a[3],\n      bx1 = b[4],\n      by1 = b[5],\n      bz1 = b[6],\n      bw1 = b[7],\n      ax1 = a[4],\n      ay1 = a[5],\n      az1 = a[6],\n      aw1 = a[7],\n      bx0 = b[0],\n      by0 = b[1],\n      bz0 = b[2],\n      bw0 = b[3];\n  out[0] = ax0 * bw0 + aw0 * bx0 + ay0 * bz0 - az0 * by0;\n  out[1] = ay0 * bw0 + aw0 * by0 + az0 * bx0 - ax0 * bz0;\n  out[2] = az0 * bw0 + aw0 * bz0 + ax0 * by0 - ay0 * bx0;\n  out[3] = aw0 * bw0 - ax0 * bx0 - ay0 * by0 - az0 * bz0;\n  out[4] = ax0 * bw1 + aw0 * bx1 + ay0 * bz1 - az0 * by1 + ax1 * bw0 + aw1 * bx0 + ay1 * bz0 - az1 * by0;\n  out[5] = ay0 * bw1 + aw0 * by1 + az0 * bx1 - ax0 * bz1 + ay1 * bw0 + aw1 * by0 + az1 * bx0 - ax1 * bz0;\n  out[6] = az0 * bw1 + aw0 * bz1 + ax0 * by1 - ay0 * bx1 + az1 * bw0 + aw1 * bz0 + ax1 * by0 - ay1 * bx0;\n  out[7] = aw0 * bw1 - ax0 * bx1 - ay0 * by1 - az0 * bz1 + aw1 * bw0 - ax1 * bx0 - ay1 * by0 - az1 * bz0;\n  return out;\n}\n/**\r\n * Alias for {@link quat2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Scales a dual quat by a scalar number\r\n *\r\n * @param {quat2} out the receiving dual quat\r\n * @param {quat2} a the dual quat to scale\r\n * @param {Number} b amount to scale the dual quat by\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  return out;\n}\n/**\r\n * Calculates the dot product of two dual quat's (The dot product of the real parts)\r\n *\r\n * @param {quat2} a the first operand\r\n * @param {quat2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\n\nexport var dot = quat.dot;\n/**\r\n * Performs a linear interpolation between two dual quats's\r\n * NOTE: The resulting dual quaternions won't always be normalized (The error is most noticeable when t = 0.5)\r\n *\r\n * @param {quat2} out the receiving dual quat\r\n * @param {quat2} a the first operand\r\n * @param {quat2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var mt = 1 - t;\n  if (dot(a, b) < 0) t = -t;\n  out[0] = a[0] * mt + b[0] * t;\n  out[1] = a[1] * mt + b[1] * t;\n  out[2] = a[2] * mt + b[2] * t;\n  out[3] = a[3] * mt + b[3] * t;\n  out[4] = a[4] * mt + b[4] * t;\n  out[5] = a[5] * mt + b[5] * t;\n  out[6] = a[6] * mt + b[6] * t;\n  out[7] = a[7] * mt + b[7] * t;\n  return out;\n}\n/**\r\n * Calculates the inverse of a dual quat. If they are normalized, conjugate is cheaper\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a dual quat to calculate inverse of\r\n * @returns {quat2} out\r\n */\n\nexport function invert(out, a) {\n  var sqlen = squaredLength(a);\n  out[0] = -a[0] / sqlen;\n  out[1] = -a[1] / sqlen;\n  out[2] = -a[2] / sqlen;\n  out[3] = a[3] / sqlen;\n  out[4] = -a[4] / sqlen;\n  out[5] = -a[5] / sqlen;\n  out[6] = -a[6] / sqlen;\n  out[7] = a[7] / sqlen;\n  return out;\n}\n/**\r\n * Calculates the conjugate of a dual quat\r\n * If the dual quaternion is normalized, this function is faster than quat2.inverse and produces the same result.\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {quat2} a quat to calculate conjugate of\r\n * @returns {quat2} out\r\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  out[4] = -a[4];\n  out[5] = -a[5];\n  out[6] = -a[6];\n  out[7] = a[7];\n  return out;\n}\n/**\r\n * Calculates the length of a dual quat\r\n *\r\n * @param {quat2} a dual quat to calculate length of\r\n * @returns {Number} length of a\r\n * @function\r\n */\n\nexport var length = quat.length;\n/**\r\n * Alias for {@link quat2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Calculates the squared length of a dual quat\r\n *\r\n * @param {quat2} a dual quat to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\n\nexport var squaredLength = quat.squaredLength;\n/**\r\n * Alias for {@link quat2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Normalize a dual quat\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a dual quaternion to normalize\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function normalize(out, a) {\n  var magnitude = squaredLength(a);\n\n  if (magnitude > 0) {\n    magnitude = Math.sqrt(magnitude);\n    var a0 = a[0] / magnitude;\n    var a1 = a[1] / magnitude;\n    var a2 = a[2] / magnitude;\n    var a3 = a[3] / magnitude;\n    var b0 = a[4];\n    var b1 = a[5];\n    var b2 = a[6];\n    var b3 = a[7];\n    var a_dot_b = a0 * b0 + a1 * b1 + a2 * b2 + a3 * b3;\n    out[0] = a0;\n    out[1] = a1;\n    out[2] = a2;\n    out[3] = a3;\n    out[4] = (b0 - a0 * a_dot_b) / magnitude;\n    out[5] = (b1 - a1 * a_dot_b) / magnitude;\n    out[6] = (b2 - a2 * a_dot_b) / magnitude;\n    out[7] = (b3 - a3 * a_dot_b) / magnitude;\n  }\n\n  return out;\n}\n/**\r\n * Returns a string representation of a dual quatenion\r\n *\r\n * @param {quat2} a dual quaternion to represent as a string\r\n * @returns {String} string representation of the dual quat\r\n */\n\nexport function str(a) {\n  return 'quat2(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ')';\n}\n/**\r\n * Returns whether or not the dual quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {quat2} a the first dual quaternion.\r\n * @param {quat2} b the second dual quaternion.\r\n * @returns {Boolean} true if the dual quaternions are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7];\n}\n/**\r\n * Returns whether or not the dual quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {quat2} a the first dual quat.\r\n * @param {quat2} b the second dual quat.\r\n * @returns {Boolean} true if the dual quats are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7));\n}","import * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {vec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {vec2} a The vec2 point to rotate\r\n * @param {vec2} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, c) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(c),\n      cosC = Math.cos(c); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {vec2} a The first operand\r\n * @param {vec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1];\n  var len1 = x1 * x1 + y1 * y1;\n\n  if (len1 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len1 = 1 / Math.sqrt(len1);\n  }\n\n  var len2 = x2 * x2 + y2 * y2;\n\n  if (len2 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len2 = 1 / Math.sqrt(len2);\n  }\n\n  var cosine = (x1 * x2 + y1 * y2) * len1 * len2;\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec2(' + a[0] + ', ' + a[1] + ')';\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as mat2 from \"./mat2.js\";\nimport * as mat2d from \"./mat2d.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as mat4 from \"./mat4.js\";\nimport * as quat from \"./quat.js\";\nimport * as quat2 from \"./quat2.js\";\nimport * as vec2 from \"./vec2.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\nexport { glMatrix, mat2, mat2d, mat3, mat4, quat, quat2, vec2, vec3, vec4 };","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nfunction clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\nmodule.exports = clamp;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n// These are used to set the WebGl depth for a tile.\nvar MAX_LAYERS = 256; // Max number of layers per stage.\nvar MAX_LEVELS = 256; // Max number of levels per layer.\n\nvar clamp = require('../util/clamp');\nvar vec4 = require('gl-matrix').vec4;\nvar vec3 = require('gl-matrix').vec3;\nvar mat4 = require('gl-matrix').mat4;\n\n\nfunction createShader(gl, type, src) {\n  var shader = gl.createShader(type);\n  gl.shaderSource(shader, src);\n  gl.compileShader(shader);\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    throw gl.getShaderInfoLog(shader);\n  }\n  return shader;\n}\n\n\nfunction createShaderProgram(gl, vertexSrc, fragmentSrc, attribList, uniformList) {\n\n  var vertexShader = createShader(gl, gl.VERTEX_SHADER, vertexSrc);\n  var fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fragmentSrc);\n\n  var shaderProgram = gl.createProgram();\n\n  gl.attachShader(shaderProgram, vertexShader);\n  gl.attachShader(shaderProgram, fragmentShader);\n  gl.linkProgram(shaderProgram);\n\n  if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n    throw gl.getProgramInfoLog(shaderProgram);\n  }\n\n  for (var i = 0; i < attribList.length; i++) {\n    var attrib = attribList[i];\n    shaderProgram[attrib] = gl.getAttribLocation(shaderProgram, attrib);\n    if (shaderProgram[attrib] === -1) {\n      throw new Error('Shader program has no ' + attrib + ' attribute');\n    }\n  }\n\n  for (var j = 0; j < uniformList.length; j++) {\n    var uniform = uniformList[j];\n    shaderProgram[uniform] = gl.getUniformLocation(shaderProgram, uniform);\n    if (shaderProgram[uniform] === -1) {\n      throw new Error('Shader program has no ' + uniform + ' uniform');\n    }\n  }\n\n  return shaderProgram;\n}\n\n\nfunction destroyShaderProgram(gl, shaderProgram) {\n  var shaderList = gl.getAttachedShaders(shaderProgram);\n  for (var i = 0; i < shaderList.length; i++) {\n    var shader = shaderList[i];\n    gl.detachShader(shaderProgram, shader);\n    gl.deleteShader(shader);\n  }\n  gl.deleteProgram(shaderProgram);\n}\n\n\nfunction createConstantBuffer(gl, target, usage, value) {\n  var buffer = gl.createBuffer();\n  gl.bindBuffer(target, buffer);\n  gl.bufferData(target, value, usage);\n  return buffer;\n}\n\n\nfunction createConstantBuffers(gl, vertexIndices, vertexPositions, textureCoords) {\n  return {\n    vertexIndices: createConstantBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, gl.STATIC_DRAW, new Uint16Array(vertexIndices)),\n    vertexPositions: createConstantBuffer(gl, gl.ARRAY_BUFFER, gl.STATIC_DRAW, new Float32Array(vertexPositions)),\n    textureCoords: createConstantBuffer(gl, gl.ARRAY_BUFFER, gl.STATIC_DRAW, new Float32Array(textureCoords))\n  };\n}\n\n\nfunction destroyConstantBuffers(gl, constantBuffers) {\n  gl.deleteBuffer(constantBuffers.vertexIndices);\n  gl.deleteBuffer(constantBuffers.vertexPositions);\n  gl.deleteBuffer(constantBuffers.textureCoords);\n}\n\n\nfunction enableAttributes(gl, shaderProgram) {\n  var numAttrs = gl.getProgramParameter(shaderProgram, gl.ACTIVE_ATTRIBUTES);\n  for (var i = 0; i < numAttrs; i++) {\n    gl.enableVertexAttribArray(i);\n  }\n}\n\n\nfunction disableAttributes(gl, shaderProgram) {\n  var numAttrs = gl.getProgramParameter(shaderProgram, gl.ACTIVE_ATTRIBUTES);\n  for (var i = 0; i < numAttrs; i++) {\n    gl.disableVertexAttribArray(i);\n  }\n}\n\n\nfunction setTexture(gl, shaderProgram, texture) {\n  gl.activeTexture(gl.TEXTURE0);\n  gl.bindTexture(gl.TEXTURE_2D, texture._texture);\n  gl.uniform1i(shaderProgram.uSampler, 0);\n}\n\n\nfunction setDepth(gl, shaderProgram, layerZ, tileZ) {\n  var depth = (((layerZ + 1) * MAX_LEVELS) - tileZ) / (MAX_LEVELS * MAX_LAYERS);\n  gl.uniform1f(shaderProgram.uDepth, depth);\n}\n\n\nvar defaultOpacity = 1.0;\nvar defaultColorOffset = vec4.create();\nvar defaultColorMatrix = mat4.create();\nmat4.identity(defaultColorMatrix);\n\nfunction setupPixelEffectUniforms(gl, effects, uniforms) {\n  var opacity = defaultOpacity;\n  if (effects && effects.opacity != null) {\n    opacity = effects.opacity;\n  }\n  gl.uniform1f(uniforms.opacity, opacity);\n\n  var colorOffset = defaultColorOffset;\n  if (effects && effects.colorOffset) {\n    colorOffset = effects.colorOffset;\n  }\n  gl.uniform4fv(uniforms.colorOffset, colorOffset);\n\n  var colorMatrix = defaultColorMatrix;\n  if (effects && effects.colorMatrix) {\n    colorMatrix = effects.colorMatrix;\n  }\n  gl.uniformMatrix4fv(uniforms.colorMatrix, false, colorMatrix);\n}\n\n\n// Temporary vectors for setViewport.\nvar translateVector = vec3.create();\nvar scaleVector = vec3.create();\n\n\n// Sets the WebGL viewport and returns a viewport clamping compensation matrix.\n//\n// Negative viewport origin coordinates cause rendering issues. Letting the\n// viewport dimensions extend beyond the visible area do not seem to cause\n// rendering issues, but they may still have an impact on performance.\n// Therefore, when the scene's rect is not fully contained in the rendering\n// area, we clamp the viewport to the rendering area, and return a compensation\n// matrix to scale and translate vertices accordingly.\nfunction setViewport(gl, layer, rect, viewportMatrix) {\n  if (rect.x === 0 && rect.width === 1 && rect.y === 0 && rect.height === 1) {\n    // Fast path for full rect.\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    mat4.identity(viewportMatrix);\n    return;\n  }\n\n  var offsetX = rect.x;\n  var clampedOffsetX = clamp(offsetX, 0, 1);\n  var leftExcess = clampedOffsetX - offsetX;\n  var maxClampedWidth = 1 - clampedOffsetX;\n  var clampedWidth = clamp(rect.width - leftExcess, 0, maxClampedWidth);\n  var rightExcess = rect.width - clampedWidth;\n\n  var offsetY = 1 - rect.height - rect.y;\n  var clampedOffsetY = clamp(offsetY, 0, 1);\n  var bottomExcess = clampedOffsetY - offsetY;\n  var maxClampedHeight = 1 - clampedOffsetY;\n  var clampedHeight = clamp(rect.height - bottomExcess, 0, maxClampedHeight);\n  var topExcess = rect.height - clampedHeight;\n\n  vec3.set(\n    scaleVector,\n    rect.width / clampedWidth,\n    rect.height / clampedHeight,\n    1);\n\n  vec3.set(\n    translateVector,\n    (rightExcess - leftExcess) / clampedWidth,\n    (topExcess - bottomExcess) / clampedHeight,\n    0);\n\n  mat4.identity(viewportMatrix);\n  mat4.translate(viewportMatrix, viewportMatrix, translateVector);\n  mat4.scale(viewportMatrix, viewportMatrix, scaleVector);\n\n  gl.viewport(gl.drawingBufferWidth * clampedOffsetX,\n              gl.drawingBufferHeight * clampedOffsetY,\n              gl.drawingBufferWidth * clampedWidth,\n              gl.drawingBufferHeight * clampedHeight);\n}\n\nmodule.exports = {\n  createShaderProgram: createShaderProgram,\n  destroyShaderProgram: destroyShaderProgram,\n  createConstantBuffers: createConstantBuffers,\n  destroyConstantBuffers: destroyConstantBuffers,\n  enableAttributes: enableAttributes,\n  disableAttributes: disableAttributes,\n  setTexture: setTexture,\n  setDepth: setDepth,\n  setViewport: setViewport,\n  setupPixelEffectUniforms: setupPixelEffectUniforms\n};\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nmodule.exports = [\n'attribute vec3 aVertexPosition;',\n'attribute vec2 aTextureCoord;',\n\n'uniform float uDepth;',\n'uniform mat4 uViewportMatrix;',\n'uniform mat4 uProjMatrix;',\n\n'varying vec2 vTextureCoord;',\n\n'void main(void) {',\n'  gl_Position = uViewportMatrix * uProjMatrix * vec4(aVertexPosition.xy, 0.0, 1.0);',\n'  gl_Position.z = uDepth * gl_Position.w;',\n'  vTextureCoord = aTextureCoord;',\n'}'\n].join('\\n');\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nmodule.exports = [\n'#ifdef GL_FRAGMENT_PRECISION_HIGH',\n'precision highp float;',\n'#else',\n'precision mediump float;',\n'#endif',\n\n'uniform sampler2D uSampler;',\n'uniform float uOpacity;',\n'uniform vec4 uColorOffset;',\n'uniform mat4 uColorMatrix;',\n\n'varying vec2 vTextureCoord;',\n\n'void main(void) {',\n'  vec4 color = texture2D(uSampler, vTextureCoord) * uColorMatrix + uColorOffset;',\n'  gl_FragColor = vec4(color.rgba * uOpacity);',\n'}'\n].join('\\n');\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar mat4 = require('gl-matrix').mat4;\nvar vec3 = require('gl-matrix').vec3;\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\nvar WebGlCommon = require('./WebGlCommon');\nvar createConstantBuffers = WebGlCommon.createConstantBuffers;\nvar destroyConstantBuffers = WebGlCommon.destroyConstantBuffers;\nvar createShaderProgram = WebGlCommon.createShaderProgram;\nvar destroyShaderProgram = WebGlCommon.destroyShaderProgram;\nvar enableAttributes = WebGlCommon.enableAttributes;\nvar disableAttributes = WebGlCommon.disableAttributes;\nvar setViewport = WebGlCommon.setViewport;\nvar setupPixelEffectUniforms = WebGlCommon.setupPixelEffectUniforms;\n\nvar setDepth = WebGlCommon.setDepth;\nvar setTexture = WebGlCommon.setTexture;\n\nvar vertexSrc = require('../shaders/vertexNormal');\nvar fragmentSrc = require('../shaders/fragmentNormal');\n\nvar vertexIndices = [0, 1, 2, 0, 2, 3];\nvar vertexPositions = [-0.5, -0.5, 0.0, 0.5, -0.5, 0.0, 0.5, 0.5, 0.0, -0.5, 0.5, 0.0];\nvar textureCoords = [0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0];\n\nvar attribList = ['aVertexPosition', 'aTextureCoord'];\nvar uniformList = [\n  'uDepth', 'uOpacity', 'uSampler', 'uProjMatrix', 'uViewportMatrix',\n  'uColorOffset', 'uColorMatrix'\n];\n\n\nfunction WebGlBaseRenderer(gl) {\n  this.gl = gl;\n\n  // The projection matrix positions the tiles in world space.\n  // We compute it in Javascript because lack of precision in the vertex shader\n  // causes seams to appear between adjacent tiles at large zoom levels.\n  this.projMatrix = mat4.create();\n\n  // The viewport matrix responsible for viewport clamping.\n  // See setViewport() for an explanation of how it works.\n  this.viewportMatrix = mat4.create();\n\n  // Translation and scale vectors for tiles.\n  this.translateVector = vec3.create();\n  this.scaleVector = vec3.create();\n\n  this.constantBuffers = createConstantBuffers(gl, vertexIndices, vertexPositions, textureCoords);\n\n  this.shaderProgram = createShaderProgram(gl, vertexSrc, fragmentSrc, attribList, uniformList);\n}\n\nWebGlBaseRenderer.prototype.destroy = function() {\n  destroyConstantBuffers(this.gl, this.constantBuffers);\n  destroyShaderProgram(this.gl, this.shaderProgram);\n  clearOwnProperties(this);\n};\n\nWebGlBaseRenderer.prototype.startLayer = function(layer, rect) {\n  var gl = this.gl;\n  var shaderProgram = this.shaderProgram;\n  var constantBuffers = this.constantBuffers;\n  var viewportMatrix = this.viewportMatrix;\n\n  gl.useProgram(shaderProgram);\n\n  enableAttributes(gl, shaderProgram);\n\n  setViewport(gl, layer, rect, viewportMatrix);\n  gl.uniformMatrix4fv(shaderProgram.uViewportMatrix, false, viewportMatrix);\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, constantBuffers.vertexPositions);\n  gl.vertexAttribPointer(shaderProgram.aVertexPosition, 3, gl.FLOAT, gl.FALSE, 0, 0);\n  gl.bindBuffer(gl.ARRAY_BUFFER, constantBuffers.textureCoords);\n  gl.vertexAttribPointer(shaderProgram.aTextureCoord, 2, gl.FLOAT, gl.FALSE, 0, 0);\n\n  setupPixelEffectUniforms(gl, layer.effects(), {\n    opacity: shaderProgram.uOpacity,\n    colorOffset: shaderProgram.uColorOffset,\n    colorMatrix: shaderProgram.uColorMatrix\n  });\n};\n\n\nWebGlBaseRenderer.prototype.endLayer = function(layer, rect) {\n  var gl = this.gl;\n  var shaderProgram = this.shaderProgram;\n  disableAttributes(gl, shaderProgram);\n};\n\n\nWebGlBaseRenderer.prototype.renderTile = function(tile, texture, layer, layerZ) {\n  var gl = this.gl;\n  var shaderProgram = this.shaderProgram;\n  var constantBuffers = this.constantBuffers;\n  var projMatrix = this.projMatrix;\n  var translateVector = this.translateVector;\n  var scaleVector = this.scaleVector;\n\n  translateVector[0] = tile.centerX();\n  translateVector[1] = tile.centerY();\n  translateVector[2] = -0.5;\n\n  scaleVector[0] = tile.scaleX();\n  scaleVector[1] = tile.scaleY();\n  scaleVector[2] = 1.0;\n\n  mat4.copy(projMatrix, layer.view().projection());\n  mat4.rotateX(projMatrix, projMatrix, tile.rotX());\n  mat4.rotateY(projMatrix, projMatrix, tile.rotY());\n  mat4.translate(projMatrix, projMatrix, translateVector);\n  mat4.scale(projMatrix, projMatrix, scaleVector);\n\n  gl.uniformMatrix4fv(shaderProgram.uProjMatrix, false, projMatrix);\n\n  setDepth(gl, shaderProgram, layerZ, tile.z);\n\n  setTexture(gl, shaderProgram, texture);\n\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, constantBuffers.vertexIndices);\n  gl.drawElements(gl.TRIANGLES, vertexIndices.length, gl.UNSIGNED_SHORT, 0);\n};\n\n\nmodule.exports = WebGlBaseRenderer;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar WebGlBaseRenderer = require('./WebGlBase');\nvar inherits = require('../util/inherits');\n\n/**\n * @class WebGlCubeRenderer\n * @implements Renderer\n * @classdesc\n *\n * A renderer for {@link CubeGeometry} and {@link RectilinearView}, appropriate\n * for a {@link WebGlStage}.\n *\n * Most users do not need to instantiate this class. Renderers are created and\n * destroyed by {@link Stage} as necessary.\n */\nfunction WebGlCubeRenderer() {\n  this.constructor.super_.apply(this, arguments);\n}\n\ninherits(WebGlCubeRenderer, WebGlBaseRenderer);\n\nmodule.exports = WebGlCubeRenderer;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar WebGlBaseRenderer = require('./WebGlBase');\nvar inherits = require('../util/inherits');\n\n/**\n * @class WebGlFlatRenderer\n * @implements Renderer\n * @classdesc\n *\n * A renderer for {@link FlatGeometry} and {@link FlatView}, appropriate for a\n * {@link WebGlStage}.\n *\n * Most users do not need to instantiate this class. Renderers are created and\n * destroyed by {@link Stage} as necessary.\n */\nfunction WebGlFlatRenderer() {\n  this.constructor.super_.apply(this, arguments);\n}\n\ninherits(WebGlFlatRenderer, WebGlBaseRenderer);\n\nmodule.exports = WebGlFlatRenderer;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nmodule.exports = [\n'attribute vec3 aVertexPosition;',\n\n'uniform float uDepth;',\n'uniform mat4 uViewportMatrix;',\n'uniform mat4 uInvProjMatrix;',\n\n'varying vec4 vRay;',\n\n'void main(void) {',\n'  vRay = uInvProjMatrix * vec4(aVertexPosition.xy, 1.0, 1.0);',\n'  gl_Position = uViewportMatrix * vec4(aVertexPosition.xy, uDepth, 1.0);',\n'}'\n].join('\\n');\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nmodule.exports = [\n'#ifdef GL_FRAGMENT_PRECISION_HIGH',\n'precision highp float;',\n'#else',\n'precision mediump float',\n'#endif',\n\n'uniform sampler2D uSampler;',\n'uniform float uOpacity;',\n'uniform float uTextureX;',\n'uniform float uTextureY;',\n'uniform float uTextureWidth;',\n'uniform float uTextureHeight;',\n'uniform vec4 uColorOffset;',\n'uniform mat4 uColorMatrix;',\n\n'varying vec4 vRay;',\n\n'const float PI = 3.14159265358979323846264;',\n\n'void main(void) {',\n'  float r = inversesqrt(vRay.x * vRay.x + vRay.y * vRay.y + vRay.z * vRay.z);',\n'  float phi  = acos(vRay.y * r);',\n'  float theta = atan(vRay.x, -1.0*vRay.z);',\n'  float s = 0.5 + 0.5 * theta / PI;',\n'  float t = 1.0 - phi / PI;',\n\n'  s = s * uTextureWidth + uTextureX;',\n'  t = t * uTextureHeight + uTextureY;',\n\n'  vec4 color = texture2D(uSampler, vec2(s, t)) * uColorMatrix + uColorOffset;',\n'  gl_FragColor = vec4(color.rgba * uOpacity);',\n'}'\n].join('\\n');\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar mat4 = require('gl-matrix').mat4;\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\nvar WebGlCommon = require('./WebGlCommon');\nvar createConstantBuffers = WebGlCommon.createConstantBuffers;\nvar destroyConstantBuffers = WebGlCommon.destroyConstantBuffers;\nvar createShaderProgram = WebGlCommon.createShaderProgram;\nvar destroyShaderProgram = WebGlCommon.destroyShaderProgram;\nvar enableAttributes = WebGlCommon.enableAttributes;\nvar disableAttributes = WebGlCommon.disableAttributes;\nvar setViewport = WebGlCommon.setViewport;\nvar setupPixelEffectUniforms = WebGlCommon.setupPixelEffectUniforms;\n\nvar setDepth = WebGlCommon.setDepth;\nvar setTexture = WebGlCommon.setTexture;\n\nvar vertexSrc = require('../shaders/vertexEquirect');\nvar fragmentSrc = require('../shaders/fragmentEquirect');\n\nvar vertexIndices = [0, 1, 2, 0, 2, 3];\nvar vertexPositions = [-1.0, -1.0, 0.0, 1.0, -1.0, 0.0, 1.0, 1.0, 0.0, -1.0, 1.0, 0.0];\nvar textureCoords = [0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0];\n\nvar attribList = ['aVertexPosition'];\nvar uniformList = [\n  'uDepth', 'uOpacity', 'uSampler', 'uInvProjMatrix', 'uViewportMatrix',\n  'uColorOffset', 'uColorMatrix', 'uTextureX', 'uTextureY', 'uTextureWidth',\n  'uTextureHeight'\n];\n\n\n/**\n * @class WebGlEquirectRenderer\n * @implements Renderer\n * @classdesc\n *\n * A renderer for {@link EquirectGeometry} and {@link RectilinearView},\n * appropriate for {@link WebGlStage}.\n *\n * Most users do not need to instantiate this class. Renderers are created and\n * destroyed by {@link Stage} as necessary.\n */\nfunction WebGlEquirectRenderer(gl) {\n  this.gl = gl;\n\n  // The inverse projection matrix.\n  this.invProjMatrix = mat4.create();\n\n  // The viewport matrix responsible for viewport clamping.\n  // See setViewport() for an explanation of how it works.\n  this.viewportMatrix = mat4.create();\n\n  this.constantBuffers = createConstantBuffers(gl, vertexIndices, vertexPositions, textureCoords);\n\n  this.shaderProgram = createShaderProgram(gl, vertexSrc, fragmentSrc, attribList, uniformList);\n}\n\nWebGlEquirectRenderer.prototype.destroy = function() {\n  destroyConstantBuffers(this.gl, this.constantBuffers);\n  destroyShaderProgram(this.gl, this.shaderProgram);\n  clearOwnProperties(this);\n};\n\n\nWebGlEquirectRenderer.prototype.startLayer = function(layer, rect) {\n  var gl = this.gl;\n  var shaderProgram = this.shaderProgram;\n  var constantBuffers = this.constantBuffers;\n  var invProjMatrix = this.invProjMatrix;\n  var viewportMatrix = this.viewportMatrix;\n\n  gl.useProgram(shaderProgram);\n\n  enableAttributes(gl, shaderProgram);\n\n  setViewport(gl, layer, rect, viewportMatrix);\n  gl.uniformMatrix4fv(shaderProgram.uViewportMatrix, false, viewportMatrix);\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, constantBuffers.vertexPositions);\n  gl.vertexAttribPointer(shaderProgram.aVertexPosition, 3, gl.FLOAT, gl.FALSE, 0, 0);\n  gl.bindBuffer(gl.ARRAY_BUFFER, constantBuffers.textureCoords);\n\n  // Compute and set the inverse projection matrix.\n  mat4.copy(invProjMatrix, layer.view().projection());\n  mat4.invert(invProjMatrix, invProjMatrix);\n\n  gl.uniformMatrix4fv(shaderProgram.uInvProjMatrix, false, invProjMatrix);\n\n  // Compute and set the texture scale and crop offsets.\n  var textureCrop = layer.effects().textureCrop || {};\n  var textureX = textureCrop.x != null ? textureCrop.x : 0;\n  var textureY = textureCrop.y != null ? textureCrop.y : 0;\n  var textureWidth = textureCrop.width != null ? textureCrop.width : 1;\n  var textureHeight = textureCrop.height != null ? textureCrop.height : 1;\n\n  gl.uniform1f(shaderProgram.uTextureX, textureX);\n  gl.uniform1f(shaderProgram.uTextureY, textureY);\n  gl.uniform1f(shaderProgram.uTextureWidth, textureWidth);\n  gl.uniform1f(shaderProgram.uTextureHeight, textureHeight);\n\n  setupPixelEffectUniforms(gl, layer.effects(), {\n    opacity: shaderProgram.uOpacity,\n    colorOffset: shaderProgram.uColorOffset,\n    colorMatrix: shaderProgram.uColorMatrix\n  });\n};\n\n\nWebGlEquirectRenderer.prototype.endLayer = function(layer, rect) {\n  var gl = this.gl;\n  var shaderProgram = this.shaderProgram;\n  disableAttributes(gl, shaderProgram);\n};\n\n\nWebGlEquirectRenderer.prototype.renderTile = function(tile, texture, layer, layerZ) {\n  var gl = this.gl;\n  var shaderProgram = this.shaderProgram;\n  var constantBuffers = this.constantBuffers;\n\n  setDepth(gl, shaderProgram, layerZ, tile.z);\n\n  setTexture(gl, shaderProgram, texture);\n\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, constantBuffers.vertexIndices);\n  gl.drawElements(gl.TRIANGLES, vertexIndices.length, gl.UNSIGNED_SHORT, 0);\n};\n\n\nmodule.exports = WebGlEquirectRenderer;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n// Jenkins one-at-a-time hash\n// http://www.burtleburtle.net/bob/hash/doobs.html\n// Input: an array of integers\n// Output: an integer\n\nfunction hash() {\n  var h = 0;\n  for (var i = 0; i < arguments.length; i++) {\n    var k = arguments[i];\n    h += k;\n    h += k << 10;\n    h ^= k >> 6;\n  }\n  h += h << 3;\n  h ^= h >> 11;\n  h += h << 15;\n  return h >= 0 ? h : -h;\n}\n\nmodule.exports = hash;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n/**\n * Modulo operation\n *\n * @memberof util\n * @param {Number} dividend\n * @param {Number} divisor\n * @returns {Number} Value in range `[0,divisor[`\n */\nfunction mod(a, b) {\n  return (+a % (b = +b) + b) % b;\n}\n\nmodule.exports = mod;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar mod = require('../util/mod');\n\nvar defaultCapacity = 64;\n\n// A set data structure for elements implementing hash() and equals().\n// The capacity, if given, is just a hint; the set is allowed to exceed it, but\n// performance may suffer.\nfunction Set(capacity) {\n  if (capacity != null &&\n      (!isFinite(capacity) || Math.floor(capacity) !== capacity || capacity < 1)) {\n    throw new Error('Set: invalid capacity');\n  }\n  this._capacity = this._capacity || defaultCapacity;\n\n  this._buckets = [];\n  for (var i = 0; i < this._capacity; i++) {\n    this._buckets.push([]);\n  }\n  this._size = 0;\n}\n\n// Adds an element, replacing an existing element.\n// Returns the replaced element, or null if no element was replaced.\nSet.prototype.add = function(element) {\n  var h = mod(element.hash(), this._capacity);\n  var bucket = this._buckets[h];\n  for (var i = 0; i < bucket.length; i++) {\n    var existingElement = bucket[i];\n    if (element.equals(existingElement)) {\n      bucket[i] = element;\n      return existingElement;\n    }\n  }\n  bucket.push(element);\n  this._size++;\n  return null;\n};\n\n// Removes an element.\n// Returns the removed element, or null if the element was not found.\nSet.prototype.remove = function(element) {\n  var h = mod(element.hash(), this._capacity);\n  var bucket = this._buckets[h];\n  for (var i = 0; i < bucket.length; i++) {\n    var existingElement = bucket[i];\n    if (element.equals(existingElement)) {\n      // Splice manually to avoid Array#splice return value allocation.\n      for (var j = i; j < bucket.length - 1; j++) {\n        bucket[j] = bucket[j+1];\n      }\n      bucket.length = bucket.length - 1;\n      this._size--;\n      return existingElement;\n    }\n  }\n  return null;\n};\n\n// Returns whether an element is in the set.\nSet.prototype.has = function(element) {\n  var h = mod(element.hash(), this._capacity);\n  var bucket = this._buckets[h];\n  for (var i = 0; i < bucket.length; i++) {\n    var existingElement = bucket[i];\n    if (element.equals(existingElement)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n// Returns the number of elements in the set.\nSet.prototype.size = function() {\n  return this._size;\n};\n\n// Removes all elements from the set.\nSet.prototype.clear = function() {\n  for (var i = 0; i < this._capacity; i++) {\n    this._buckets[i].length = 0;\n  }\n  this._size = 0;\n};\n\n// Calls fn(element) for each element in the set, in an unspecified order.\n// Returns the number of times fn was called.\n// The result is unspecified if the set is mutated during iteration.\nSet.prototype.forEach = function(fn) {\n  var count = 0;\n  for (var i = 0; i < this._capacity; i++) {\n    var bucket = this._buckets[i];\n    for (var j = 0; j < bucket.length; j++) {\n      fn(bucket[j]);\n      count += 1;\n    }\n  }\n  return count;\n};\n\nmodule.exports = Set;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar Set = require('./collections/Set');\n\n/**\n * @class TileSearcher\n * @classdesc\n *\n * A TileSearcher performs searches for visible tiles.\n */\nfunction TileSearcher() {\n  // Stack of tiles to be explored.\n  this._stack = [];\n\n  // Set of already explored tiles.\n  this._visited = new Set();\n\n  // Tile vertices. Allocated by Tile#vertices on first use.\n  this._vertices = null;\n}\n\n/**\n * Performs a search for visible tiles by starting at a given tile and\n * recursively exploring neighbors until no more visible tiles are found.\n *\n * @param {View} view The view used to deem whether a tile is visible.\n * @param {Tile} tile The starting tile.\n * @param {Tile[]} result An array to append the visible tiles to, including the\n *     starting tile when visible. Existing array members are preserved.\n * @return {number} The number of visible tiles found.\n */\nTileSearcher.prototype.search = function(view, startingTile, result) {\n  var stack = this._stack;\n  var visited = this._visited;\n  var vertices = this._vertices;\n\n  var count = 0;\n\n  // Clear internal state.\n  this._clear();\n\n  stack.push(startingTile);\n\n  while (stack.length > 0) {\n    var tile = stack.pop();\n\n    if (visited.has(tile)) {\n      // Skip already visited tile.\n      continue;\n    }\n\n    if (!view.intersects(tile.vertices(vertices))) {\n      // Skip non-visible tile.\n      continue;\n    }\n\n    // Mark tile as visited.\n    visited.add(tile);\n\n    // Add neighbors to the stack of tiles to explore.\n    var neighbors = tile.neighbors();\n    for (var i = 0; i < neighbors.length; i++) {\n      stack.push(neighbors[i]);\n    }\n\n    // Add to result.\n    result.push(tile);\n\n    count++;\n  }\n\n  // Reuse the vertices array in future searches.\n  this._vertices = vertices;\n\n  // Clear internal state.\n  this._clear();\n\n  return count;\n};\n\nTileSearcher.prototype._clear = function() {\n  this._stack.length = 0;\n  this._visited.clear();\n};\n\nmodule.exports = TileSearcher;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar mod = require('../util/mod');\n\n// An LruMap holds up to a maximum number of key-value pairs, ordered by their\n// time of insertion. When the addition of a key-value pair would cause the\n// capacity to be exceeded, the oldest key-value pair in the set is evicted.\n// As a special case, an LruMap with zero capacity always rejects the insertion\n// of a key-value pair.\n//\n// Keys must implement hash() and equals(). Note that the implementation doesn't\n// currently use hash(), but a future version might.\nfunction LruMap(capacity) {\n  if (!isFinite(capacity) || Math.floor(capacity) !== capacity || capacity < 0) {\n    throw new Error('LruMap: invalid capacity');\n  }\n  this._capacity = capacity;\n\n  // Keys and values are stored in circular arrays ordered by decreasing age.\n  // Start is the index of the oldest key/value and size is the number of valid\n  // key/values; the region containing valid keys/values may wrap around.\n  this._keys = new Array(this._capacity);\n  this._values = new Array(this._capacity);\n  this._start = 0;\n  this._size = 0;\n}\n\nLruMap.prototype._index = function(i) {\n  return mod(this._start + i, this._capacity);\n};\n\n// Returns the value associated to the specified key, or null if not found.\nLruMap.prototype.get = function(key) {\n  for (var i = 0; i < this._size; i++) {\n    var existingKey = this._keys[this._index(i)];\n    if (key.equals(existingKey)) {\n      return this._values[this._index(i)];\n    }\n  }\n  return null;\n};\n\n// Associates the specified value with the specified key, possibly replacing the\n// currently associated value. The key-value pair becomes the newest. If the map\n// is at capacity, the oldest key-value pair is removed. Returns the removed\n// key, or null otherwise. If the capacity is zero, does nothing and returns\n// the key.\nLruMap.prototype.set = function(key, value) {\n  if (this._capacity === 0) {\n    return key;\n  }\n  this.del(key);\n  var evictedKey =\n      this._size === this._capacity ? this._keys[this._index(0)] : null;\n  this._keys[this._index(this._size)] = key;\n  this._values[this._index(this._size)] = value;\n  if (this._size < this._capacity) {\n    this._size++;\n  } else {\n    this._start = this._index(1);\n  }\n  return evictedKey;\n};\n\n// Removes the key-value pair associated with the specified key.\n// Returns the removed value, or null if not found.\nLruMap.prototype.del = function(key) {\n  for (var i = 0; i < this._size; i++) {\n    if (key.equals(this._keys[this._index(i)])) {\n      var existingValue = this._values[this._index(i)];\n      for (var j = i; j < this._size - 1; j++) {\n        this._keys[this._index(j)] = this._keys[this._index(j + 1)];\n        this._values[this._index(j)] = this._values[this._index(j + 1)];\n      }\n      this._size--;\n      return existingValue;\n    }\n  }\n  return null;\n};\n\n// Returns whether there is a value associated with the specified key.\nLruMap.prototype.has = function(key) {\n  for (var i = 0; i < this._size; i++) {\n    if (key.equals(this._keys[this._index(i)])) {\n      return true;\n    }\n  }\n  return false;\n};\n\n// Returns the number of key-value pairs in the map.\nLruMap.prototype.size = function() {\n  return this._size;\n};\n\n// Removes all key-value pairs from the map.\nLruMap.prototype.clear = function() {\n  this._keys.length = 0;\n  this._values.length = 0;\n  this._start = 0;\n  this._size = 0;\n};\n\n// Calls fn(key, value) for each item in the map, in an unspecified order.\n// Returns the number of times fn was called.\n// The result is unspecified if the map is mutated during iteration.\nLruMap.prototype.forEach = function(fn) {\n  var count = 0;\n  for (var i = 0; i < this._size; i++) {\n    fn(this._keys[this._index(i)], this._values[this._index(i)]);\n    count += 1;\n  }\n  return count;\n};\n\nmodule.exports = LruMap;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nfunction Level(levelProperties) {\n  this._fallbackOnly = !!levelProperties.fallbackOnly;\n}\n\nLevel.prototype.numHorizontalTiles = function() {\n  return Math.ceil(this.width() / this.tileWidth());\n};\n\nLevel.prototype.numVerticalTiles = function() {\n  return Math.ceil(this.height() / this.tileHeight());\n};\n\nLevel.prototype.fallbackOnly = function() {\n  return this._fallbackOnly;\n};\n\nmodule.exports = Level;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nfunction cmp(x, y) {\n  if (x < y) {\n    return -1;\n  }\n  if (x > y) {\n    return 1;\n  }\n  return 0;\n}\n\nmodule.exports = cmp;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar cmp = require('../util/cmp');\n\nfunction makeLevelList(levelPropertiesList, LevelClass) {\n  var list = [];\n\n  for (var i = 0; i < levelPropertiesList.length; i++) {\n    list.push(new LevelClass(levelPropertiesList[i]));\n  }\n\n  list.sort(function(level1, level2) {\n    return cmp(level1.width(), level2.width());\n  });\n\n  return list;\n}\n\nfunction makeSelectableLevelList(levelList) {\n  var list = [];\n\n  for (var i = 0; i < levelList.length; i++) {\n    if (!levelList[i]._fallbackOnly) {\n      list.push(levelList[i]);\n    }\n  }\n\n  if (!list.length) {\n    throw new Error('No selectable levels in list');\n  }\n\n  return list;\n}\n\nmodule.exports = {\n  makeLevelList: makeLevelList,\n  makeSelectableLevelList: makeSelectableLevelList\n};\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nfunction type(x) {\n  var typ = typeof x;\n  if (typ === 'object') {\n    if (x === null) {\n      return 'null';\n    }\n    if (Object.prototype.toString.call(x) === '[object Array]') {\n      return 'array';\n    }\n    if (Object.prototype.toString.call(x) === '[object RegExp]') {\n      return 'regexp';\n    }\n  }\n  return typ;\n}\n\nmodule.exports = type;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar inherits = require('../util/inherits');\nvar hash = require('../util/hash');\nvar TileSearcher = require('../TileSearcher');\nvar LruMap = require('../collections/LruMap');\nvar Level = require('./Level');\nvar makeLevelList = require('./common').makeLevelList;\nvar makeSelectableLevelList = require('./common').makeSelectableLevelList;\nvar clamp = require('../util/clamp');\nvar cmp = require('../util/cmp');\nvar type = require('../util/type');\nvar vec3 = require('gl-matrix').vec3;\nvar vec4 = require('gl-matrix').vec4;\n\nvar neighborsCacheSize = 64;\n\n// Some renderer implementations require tiles to be padded around with\n// repeated pixels to prevent the appearance of visible seams between tiles.\n//\n// In order to prevent the padding from being visible, the tiles must be\n// padded and stacked such that the padding on one of the sides, when present,\n// stacks below the neighboring tile on that side.\n//\n// The padding rules are as follows:\n// * Define a tile to be X-marginal if it contacts the X-edge of its cube face.\n// * Pad top if the tile is top-marginal and the face is F or U.\n// * Pad bottom unless the tile is bottom-marginal or the face is F or D.\n// * Pad left if the tile is left-marginal and the face is F, L, U or D.\n// * Pad right unless the tile is right-marginal or the face is F, R, U or D.\n//\n// The stacking rules are as follows:\n// * Within an image, stack smaller zoom levels below larger zoom levels.\n// * Within a level, stack tiles bottom to top in FUDLRB face order.\n// * Within a face, stack tiles bottom to top in ascending Y coordinate order.\n// * Within a row, stack tiles bottom to top in ascending X coordinate order.\n//\n// Crucially, these rules affect the implementation of the tile cmp() method,\n// which determines the stacking order, and of the pad*() tile methods, which\n// determine the amount of padding on each of the four sides of a tile.\n\n// Initials for cube faces in stacking order.\nvar faceList = 'fudlrb';\n\n// Rotation of each face, relative to the front face.\nvar faceRotation = {\n  f: { x: 0, y: 0 },\n  b: { x: 0, y: Math.PI },\n  l: { x: 0, y: Math.PI/2 },\n  r: { x: 0, y: -Math.PI/2 },\n  u: { x: Math.PI/2, y: 0 },\n  d: { x: -Math.PI/2, y: 0 }\n};\n\n// Zero vector.\nvar origin = vec3.create();\n\n// Rotate a vector in ZXY order.\nfunction rotateVector(vec, z, x, y) {\n  if (z) {\n    vec3.rotateZ(vec, vec, origin, z);\n  }\n  if (x) {\n    vec3.rotateX(vec, vec, origin, x);\n  }\n  if (y) {\n    vec3.rotateY(vec, vec, origin, y);\n  }\n}\n\n// Normalized vectors pointing to the center of each face.\nvar faceVectors = {};\nfor (var i = 0; i < faceList.length; i++) {\n  var face = faceList[i];\n  var rotation = faceRotation[face];\n  var v = vec3.fromValues(0,  0, -1);\n  rotateVector(v, 0, rotation.x, rotation.y);\n  faceVectors[face] = v;\n}\n\n// Map each face to its adjacent faces.\n// The order is as suggested by the front face.\nvar adjacentFace = {\n  f: [ 'l', 'r', 'u', 'd' ],\n  b: [ 'r', 'l', 'u', 'd' ],\n  l: [ 'b', 'f', 'u', 'd' ],\n  r: [ 'f', 'b', 'u', 'd' ],\n  u: [ 'l', 'r', 'b', 'f' ],\n  d: [ 'l', 'r', 'f', 'b' ]\n};\n\n// Offsets to apply to the (x,y) coordinates of a tile to get its neighbors.\nvar neighborOffsets = [\n  [  0,  1 ], // top\n  [  1,  0 ], // right\n  [  0, -1 ], // bottom\n  [ -1,  0 ]  // left\n];\n\n\n/**\n * @class CubeTile\n * @implements Tile\n * @classdesc\n *\n * A tile in a @{CubeGeometry}.\n */\nfunction CubeTile(face, x, y, z, geometry) {\n  this.face = face;\n  this.x = x;\n  this.y = y;\n  this.z = z;\n  this._geometry = geometry;\n  this._level = geometry.levelList[z];\n}\n\n\nCubeTile.prototype.rotX = function() {\n  return faceRotation[this.face].x;\n};\n\n\nCubeTile.prototype.rotY = function() {\n  return faceRotation[this.face].y;\n};\n\n\nCubeTile.prototype.centerX = function() {\n  return (this.x + 0.5) / this._level.numHorizontalTiles() - 0.5;\n};\n\n\nCubeTile.prototype.centerY = function() {\n  return 0.5 - (this.y + 0.5) / this._level.numVerticalTiles();\n};\n\n\nCubeTile.prototype.scaleX = function() {\n  return 1 / this._level.numHorizontalTiles();\n};\n\n\nCubeTile.prototype.scaleY = function() {\n  return 1 / this._level.numVerticalTiles();\n};\n\n\nCubeTile.prototype.width = function() {\n  return this._level.tileWidth();\n};\n\n\nCubeTile.prototype.height = function() {\n  return this._level.tileHeight();\n};\n\n\nCubeTile.prototype.levelWidth = function() {\n  return this._level.width();\n};\n\n\nCubeTile.prototype.levelHeight = function() {\n  return this._level.height();\n};\n\n\nCubeTile.prototype.atTopLevel = function() {\n  return this.z === 0;\n};\n\n\nCubeTile.prototype.atBottomLevel = function() {\n  return this.z === this._geometry.levelList.length - 1;\n};\n\n\nCubeTile.prototype.atTopEdge = function() {\n  return this.y === 0;\n};\n\n\nCubeTile.prototype.atBottomEdge = function() {\n  return this.y === this._level.numVerticalTiles() - 1;\n};\n\n\nCubeTile.prototype.atLeftEdge = function() {\n  return this.x === 0;\n};\n\n\nCubeTile.prototype.atRightEdge = function() {\n  return this.x === this._level.numHorizontalTiles() - 1;\n};\n\n\nCubeTile.prototype.padTop = function() {\n  return this.atTopEdge() && /[fu]/.test(this.face);\n};\n\n\nCubeTile.prototype.padBottom = function() {\n  return !this.atBottomEdge() || /[fd]/.test(this.face);\n};\n\n\nCubeTile.prototype.padLeft = function() {\n  return this.atLeftEdge() && /[flud]/.test(this.face);\n};\n\n\nCubeTile.prototype.padRight = function() {\n  return !this.atRightEdge() || /[frud]/.test(this.face);\n};\n\n\nCubeTile.prototype.vertices = function(result) {\n  if (!result) {\n    result = [vec3.create(), vec3.create(), vec3.create(), vec3.create()];\n  }\n\n  var rot = faceRotation[this.face];\n\n  function makeVertex(vec, x, y) {\n    vec3.set(vec, x, y, -0.5);\n    rotateVector(vec, 0, rot.x, rot.y);\n  }\n\n  var left = this.centerX() - this.scaleX() / 2;\n  var right = this.centerX() + this.scaleX() / 2;\n  var bottom = this.centerY() - this.scaleY() / 2;\n  var top = this.centerY() + this.scaleY() / 2;\n\n  makeVertex(result[0], left, top);\n  makeVertex(result[1], right, top);\n  makeVertex(result[2], right, bottom);\n  makeVertex(result[3], left, bottom);\n\n  return result;\n};\n\n\nCubeTile.prototype.parent = function() {\n\n  if (this.atTopLevel()) {\n    return null;\n  }\n\n  var face = this.face;\n  var z = this.z;\n  var x = this.x;\n  var y = this.y;\n\n  var geometry = this._geometry;\n  var level = geometry.levelList[z];\n  var parentLevel = geometry.levelList[z-1];\n\n  var tileX = Math.floor(x / level.numHorizontalTiles() * parentLevel.numHorizontalTiles());\n  var tileY = Math.floor(y / level.numVerticalTiles() * parentLevel.numVerticalTiles());\n  var tileZ = z-1;\n\n  return new CubeTile(face, tileX, tileY, tileZ, geometry);\n\n};\n\n\nCubeTile.prototype.children = function(result) {\n\n  if (this.atBottomLevel()) {\n    return null;\n  }\n\n  var face = this.face;\n  var z = this.z;\n  var x = this.x;\n  var y = this.y;\n\n  var geometry = this._geometry;\n  var level = geometry.levelList[z];\n  var childLevel = geometry.levelList[z+1];\n\n  var nHoriz = childLevel.numHorizontalTiles() / level.numHorizontalTiles();\n  var nVert = childLevel.numVerticalTiles() / level.numVerticalTiles();\n\n  result = result || [];\n\n  for (var h = 0; h < nHoriz; h++) {\n    for (var v = 0; v < nVert; v++) {\n      var tileX = nHoriz * x + h;\n      var tileY = nVert * y + v;\n      var tileZ = z+1;\n      result.push(new CubeTile(face, tileX, tileY, tileZ, geometry));\n    }\n  }\n\n  return result;\n\n};\n\n\nCubeTile.prototype.neighbors = function() {\n\n  var geometry = this._geometry;\n  var cache = geometry._neighborsCache;\n\n  // Satisfy from cache when available.\n  var cachedResult = cache.get(this);\n  if (cachedResult) {\n    return cachedResult;\n  }\n\n  var vec = geometry._vec;\n\n  var face = this.face;\n  var x = this.x;\n  var y = this.y;\n  var z = this.z;\n  var level = this._level;\n\n  var numX = level.numHorizontalTiles();\n  var numY = level.numVerticalTiles();\n\n  var result = [];\n\n  for (var i = 0; i < neighborOffsets.length; i++) {\n    var xOffset = neighborOffsets[i][0];\n    var yOffset = neighborOffsets[i][1];\n\n    var newX = x + xOffset;\n    var newY = y + yOffset;\n    var newZ = z;\n    var newFace = face;\n\n    if (newX < 0 || newX >= numX || newY < 0 || newY >= numY) {\n\n      // If the neighboring tile belongs to a different face, calculate a\n      // vector pointing to the edge between the two faces at the point the\n      // tile and its neighbor meet, and convert it into tile coordinates for\n      // the neighboring face.\n\n      var xCoord = this.centerX();\n      var yCoord = this.centerY();\n\n      // First, calculate the vector as if the initial tile belongs to the\n      // front face, so that the tile x,y coordinates map directly into the\n      // x,y axes.\n\n      if (newX < 0) {\n        vec3.set(vec, -0.5, yCoord, -0.5);\n        newFace = adjacentFace[face][0];\n      } else if (newX >= numX) {\n        vec3.set(vec, 0.5, yCoord, -0.5);\n        newFace = adjacentFace[face][1];\n      } else if (newY < 0) {\n        vec3.set(vec, xCoord, 0.5, -0.5);\n        newFace = adjacentFace[face][2];\n      } else if (newY >= numY) {\n        vec3.set(vec, xCoord, -0.5, -0.5);\n        newFace = adjacentFace[face][3];\n      }\n\n      var rot;\n\n      // Then, rotate the vector into the actual face the initial tile\n      // belongs to.\n\n      rot = faceRotation[face];\n      rotateVector(vec, 0, rot.x, rot.y);\n\n      // Finally, rotate the vector from the neighboring face into the front\n      // face. Again, this is so that the neighboring tile x,y coordinates\n      // map directly into the x,y axes.\n\n      rot = faceRotation[newFace];\n      rotateVector(vec, 0, -rot.x, -rot.y);\n\n      // Calculate the neighboring tile coordinates.\n\n      newX = clamp(Math.floor((0.5 + vec[0]) * numX), 0, numX - 1);\n      newY = clamp(Math.floor((0.5 - vec[1]) * numY), 0, numY - 1);\n    }\n\n    result.push(new CubeTile(newFace, newX, newY, newZ, geometry));\n  }\n\n  // Store into cache to satisfy future requests.\n  cache.set(this, result);\n\n  return result;\n\n};\n\n\nCubeTile.prototype.hash = function() {\n  return hash(faceList.indexOf(this.face), this.z, this.y, this.x);\n};\n\n\nCubeTile.prototype.equals = function(that) {\n  return (this.geometry === that.geometry &&\n      this.face === that.face &&\n      this.z === that.z &&\n      this.y === that.y &&\n      this.x === that.x);\n};\n\n\nCubeTile.prototype.cmp = function(that) {\n  return (cmp(this.z, that.z) ||\n  cmp(faceList.indexOf(this.face), faceList.indexOf(that.face)) ||\n  cmp(this.y, that.y) || cmp(this.x, that.x));\n};\n\n\nCubeTile.prototype.str = function() {\n  return 'CubeTile(' + tile.face + ', ' + tile.x + ', ' + tile.y + ', ' + tile.z + ')';\n};\n\n\nfunction CubeLevel(levelProperties) {\n  this.constructor.super_.call(this, levelProperties);\n\n  this._size = levelProperties.size;\n  this._tileSize = levelProperties.tileSize;\n\n  if (this._size % this._tileSize !== 0) {\n    throw new Error('Level size is not multiple of tile size: ' +\n                    this._size + ' ' + this._tileSize);\n  }\n}\n\ninherits(CubeLevel, Level);\n\n\nCubeLevel.prototype.width = function() {\n  return this._size;\n};\n\n\nCubeLevel.prototype.height = function() {\n  return this._size;\n};\n\n\nCubeLevel.prototype.tileWidth = function() {\n  return this._tileSize;\n};\n\n\nCubeLevel.prototype.tileHeight = function() {\n  return this._tileSize;\n};\n\n\nCubeLevel.prototype._validateWithParentLevel = function(parentLevel) {\n\n  var width = this.width();\n  var height = this.height();\n  var tileWidth = this.tileWidth();\n  var tileHeight = this.tileHeight();\n  var numHorizontal = this.numHorizontalTiles();\n  var numVertical = this.numVerticalTiles();\n\n  var parentWidth = parentLevel.width();\n  var parentHeight = parentLevel.height();\n  var parentTileWidth = parentLevel.tileWidth();\n  var parentTileHeight = parentLevel.tileHeight();\n  var parentNumHorizontal = parentLevel.numHorizontalTiles();\n  var parentNumVertical = parentLevel.numVerticalTiles();\n\n  if (width % parentWidth !== 0) {\n    throw new Error('Level width must be multiple of parent level: ' +\n                    width + ' vs. ' + parentWidth);\n  }\n\n  if (height % parentHeight !== 0) {\n    throw new Error('Level height must be multiple of parent level: ' +\n                    height + ' vs. ' + parentHeight);\n  }\n\n  if (numHorizontal % parentNumHorizontal !== 0) {\n    throw new Error('Number of horizontal tiles must be multiple of parent level: ' +\n      numHorizontal + \" (\" + width + '/' + tileWidth + ')' + \" vs. \" +\n      parentNumHorizontal + \" (\" + parentWidth + '/' + parentTileWidth + ')');\n  }\n\n  if (numVertical % parentNumVertical !== 0) {\n    throw new Error('Number of vertical tiles must be multiple of parent level: ' +\n      numVertical + \" (\" + height + '/' + tileHeight + ')' + \" vs. \" +\n      parentNumVertical + \" (\" + parentHeight + '/' + parentTileHeight + ')');\n  }\n\n};\n\n\n/**\n * @class CubeGeometry\n * @implements Geometry\n * @classdesc\n *\n * A {@link Geometry} implementation suitable for tiled cube images with\n * multiple resolution levels.\n *\n * The following restrictions apply:\n *   - All tiles in a level must be square and form a rectangular grid;\n *   - The size of a level must be a multiple of the tile size;\n *   - The size of a level must be a multiple of the parent level size;\n *   - The number of tiles in a level must be a multiple of the number of tiles\n *     in the parent level.\n *\n * @param {Object[]} levelPropertiesList Level description\n * @param {number} levelPropertiesList[].size Cube face size in pixels\n * @param {number} levelPropertiesList[].tileSize Tile size in pixels\n */\nfunction CubeGeometry(levelPropertiesList) {\n  if (type(levelPropertiesList) !== 'array') {\n    throw new Error('Level list must be an array');\n  }\n\n  this.levelList = makeLevelList(levelPropertiesList, CubeLevel);\n  this.selectableLevelList = makeSelectableLevelList(this.levelList);\n\n  for (var i = 1; i < this.levelList.length; i++) {\n    this.levelList[i]._validateWithParentLevel(this.levelList[i-1]);\n  }\n\n  this._tileSearcher = new TileSearcher(this);\n\n  this._neighborsCache = new LruMap(neighborsCacheSize);\n\n  this._vec = vec4.create();\n\n  this._viewSize = {};\n}\n\n\nCubeGeometry.prototype.maxTileSize = function() {\n  var maxTileSize = 0;\n  for (var i = 0; i < this.levelList.length; i++) {\n    var level = this.levelList[i];\n    maxTileSize = Math.max(maxTileSize, level.tileWidth, level.tileHeight);\n  }\n  return maxTileSize;\n};\n\n\nCubeGeometry.prototype.levelTiles = function(level, result) {\n\n  var levelIndex = this.levelList.indexOf(level);\n  var maxX = level.numHorizontalTiles() - 1;\n  var maxY = level.numVerticalTiles() - 1;\n\n  result = result || [];\n\n  for (var f = 0; f < faceList.length; f++) {\n    var face = faceList[f];\n    for (var x = 0; x <= maxX; x++) {\n      for (var y = 0; y <= maxY; y++) {\n        result.push(new CubeTile(face, x, y, levelIndex, this));\n      }\n    }\n  }\n\n  return result;\n\n};\n\n\nCubeGeometry.prototype._closestTile = function(view, level) {\n  var ray = this._vec;\n\n  // Compute a view ray into the central screen point.\n  vec4.set(ray, 0, 0, 1, 1);\n  vec4.transformMat4(ray, ray, view.inverseProjection());\n\n  var minAngle = Infinity;\n  var closestFace = null;\n\n  // Find the face whose vector makes a minimal angle with the view ray.\n  // This is the face into which the view ray points.\n  for (var face in faceVectors) {\n    var vector = faceVectors[face];\n    // For a small angle between two normalized vectors, angle ~ 1-cos(angle).\n    var angle = 1 - vec3.dot(vector, ray);\n    if (angle < minAngle) {\n      minAngle = angle;\n      closestFace = face;\n    }\n  }\n\n  // Project view ray onto cube, i.e., normalize the coordinate with\n  // largest absolute value to 0.5.\n  var max = Math.max(Math.abs(ray[0]), Math.abs(ray[1]), Math.abs(ray[2])) / 0.5;\n  for (var i = 0; i < 3; i++) {\n    ray[i] = ray[i] / max;\n  }\n\n  // Rotate view ray into front face.\n  var rot = faceRotation[closestFace];\n  rotateVector(ray, 0, -rot.x, -rot.y);\n\n  // Get the desired zoom level.\n  var tileZ = this.levelList.indexOf(level);\n  var numX = level.numHorizontalTiles();\n  var numY = level.numVerticalTiles();\n\n  // Find the coordinates of the tile that the view ray points into.\n  var tileX = clamp(Math.floor((0.5 + ray[0]) * numX), 0, numX - 1);\n  var tileY = clamp(Math.floor((0.5 - ray[1]) * numY), 0, numY - 1);\n\n  return new CubeTile(closestFace, tileX, tileY, tileZ, this);\n};\n\n\nCubeGeometry.prototype.visibleTiles = function(view, level, result) {\n  var viewSize = this._viewSize;\n  var tileSearcher = this._tileSearcher;\n\n  result = result || [];\n\n  view.size(viewSize);\n  if (viewSize.width === 0 || viewSize.height === 0) {\n    // No tiles are visible if the viewport is empty.\n    return result;\n  }\n\n  var startingTile = this._closestTile(view, level);\n  var count = tileSearcher.search(view, startingTile, result);\n  if (!count) {\n    throw new Error('Starting tile is not visible');\n  }\n\n  return result;\n};\n\n\nCubeGeometry.Tile = CubeGeometry.prototype.Tile = CubeTile;\nCubeGeometry.type = CubeGeometry.prototype.type = 'cube';\nCubeTile.type = CubeTile.prototype.type = 'cube';\n\n\nmodule.exports = CubeGeometry;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar mod = require('../util/mod');\n\nvar defaultCapacity = 64;\n\n// A map data structure for keys implementing hash() and equals() and arbitrary\n// values. The capacity, if given, is just a hint; the map is allowed to exceed\n// it, but performance may suffer.\nfunction Map(capacity) {\n  if (capacity != null &&\n      (!isFinite(capacity) || Math.floor(capacity) !== capacity || capacity < 1)) {\n    throw new Error('Map: invalid capacity');\n  }\n  this._capacity = capacity || defaultCapacity;\n\n  this._keyBuckets = [];\n  this._valBuckets = [];\n  for (var i = 0; i < this._capacity; i++) {\n    this._keyBuckets.push([]);\n    this._valBuckets.push([]);\n  }\n  this._size = 0;\n}\n\n// Returns the value associated with the specified key, or null if not found.\nMap.prototype.get = function(key) {\n  var h = mod(key.hash(), this._capacity);\n  var keyBucket = this._keyBuckets[h];\n  for (var i = 0; i < keyBucket.length; i++) {\n    var existingKey = keyBucket[i];\n    if (key.equals(existingKey)) {\n      var valBucket = this._valBuckets[h];\n      var existingValue = valBucket[i];\n      return existingValue;\n    }\n  }\n  return null;\n};\n\n// Associates the specified value with the specified key, possibly replacing the\n// currently associated value.\n// Returns the replaced value, or null if no value was replaced.\nMap.prototype.set = function(key, val) {\n  var h = mod(key.hash(), this._capacity);\n  var keyBucket = this._keyBuckets[h];\n  var valBucket = this._valBuckets[h];\n  for (var i = 0; i < keyBucket.length; i++) {\n    var existingKey = keyBucket[i];\n    if (key.equals(existingKey)) {\n      var existingValue = valBucket[i];\n      keyBucket[i] = key;\n      valBucket[i] = val;\n      return existingValue;\n    }\n  }\n  keyBucket.push(key);\n  valBucket.push(val);\n  this._size++;\n  return null;\n};\n\n// Removes the key-value pair associated with the specified key.\n// Returns the removed value, or null if not found.\nMap.prototype.del = function(key) {\n  var h = mod(key.hash(), this._capacity);\n  var keyBucket = this._keyBuckets[h];\n  var valBucket = this._valBuckets[h];\n  for (var i = 0; i < keyBucket.length; i++) {\n    var existingKey = keyBucket[i];\n    if (key.equals(existingKey)) {\n      var existingValue = valBucket[i];\n      // Splice manually to avoid Array#splice return value allocation.\n      for (var j = i; j < keyBucket.length - 1; j++) {\n        keyBucket[j] = keyBucket[j+1];\n        valBucket[j] = valBucket[j+1];\n      }\n      keyBucket.length = keyBucket.length - 1;\n      valBucket.length = valBucket.length - 1;\n      this._size--;\n      return existingValue;\n    }\n  }\n  return null;\n};\n\n// Returns whether there is a value associated with the specified key.\nMap.prototype.has = function(key) {\n  var h = mod(key.hash(), this._capacity);\n  var keyBucket = this._keyBuckets[h];\n  for (var i = 0; i < keyBucket.length; i++) {\n    var existingKey = keyBucket[i];\n    if (key.equals(existingKey)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n// Returns the number of key-value pairs in the map.\nMap.prototype.size = function() {\n  return this._size;\n};\n\n// Removes all key-value pairs from the map.\nMap.prototype.clear = function() {\n  for (var i = 0; i < this._capacity; i++) {\n    this._keyBuckets[i].length = 0;\n    this._valBuckets[i].length = 0;\n  }\n  this._size = 0;\n};\n\n// Calls fn(key, value) for each key-value pair in the map, in an unspecified\n// order. Returns the number of times fn was called.\n// The result is unspecified if the map is mutated during iteration.\nMap.prototype.forEach = function(fn) {\n  var count = 0;\n  for (var i = 0; i < this._capacity; i++) {\n    var keyBucket = this._keyBuckets[i];\n    var valBucket = this._valBuckets[i];\n    for (var j = 0; j < keyBucket.length; j++) {\n      fn(keyBucket[j], valBucket[j]);\n      count += 1;\n    }\n  }\n  return count;\n};\n\nmodule.exports = Map;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n// Convert a number to a string in decimal notation.\nfunction decimal(x) {\n  // Double-precision floats have 15 significant decimal digits.\n  return x.toPrecision(15);\n}\n\nmodule.exports = decimal;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar Map = require('../collections/Map');\nvar decimal = require('../util/decimal');\nvar setOverflowHidden = require('../util/dom').setOverflowHidden;\nvar setNoPointerEvents = require('../util/dom').setNoPointerEvents;\nvar setNullTransform = require('../util/dom').setNullTransform;\nvar setTransform = require('../util/dom').setTransform;\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\nvar debug = typeof MARZIPANODEBUG !== 'undefined' && MARZIPANODEBUG.css;\n\n\nfunction tileCmp(a, b) {\n  return a.cmp(b);\n}\n\n\nfunction CssBaseRenderer(root, quirks, tileClass) {\n\n  this._root = root;\n\n  this._browserQuirks = quirks;\n\n  // Create a container for this renderer's tiles, so we can style them\n  // as a whole separately from other renderers in the same stage.\n  var domElement = document.createElement('div');\n  root.appendChild(domElement);\n\n  domElement.style.position = 'absolute';\n\n  // For some weird reason, this prevents flickering on Safari Desktop.\n  setOverflowHidden(domElement);\n\n  // Prevent touch events on tiles from messing up pinching gestures on iOS.\n  setNoPointerEvents(domElement);\n\n  if (this._browserQuirks.useNullTransform) {\n    setNullTransform(domElement);\n  }\n\n  this.domElement = domElement;\n\n  this._oldTileList = [];\n  this._newTileList = [];\n\n  this._textureMap = new Map();\n}\n\n\nCssBaseRenderer.prototype.destroy = function() {\n  this._root.removeChild(this.domElement);\n  clearOwnProperties(this);\n};\n\n\nCssBaseRenderer.prototype.startLayer = function(layer, rect) {\n  var domElement = this.domElement;\n\n  // Set viewport effect.\n  var stageWidth = this._root.clientWidth;\n  var stageHeight = this._root.clientHeight;\n  domElement.style.left = decimal(stageWidth * rect.left) + 'px';\n  domElement.style.top = decimal(stageHeight * rect.top) + 'px';\n  domElement.style.width = decimal(stageWidth * rect.width) + 'px';\n  domElement.style.height = decimal(stageHeight * rect.height) + 'px';\n\n  // Set opacity effect.\n  var opacity = 1.0;\n  var effects = layer.effects();\n  if (effects && effects.opacity != null) {\n    opacity = effects.opacity;\n  }\n  domElement.style.opacity = opacity;\n\n  // Clear temporary variables.\n  this._newTileList.length = 0;\n  this._textureMap.clear();\n};\n\n\nCssBaseRenderer.prototype.renderTile = function(tile, texture) {\n  this._newTileList.push(tile);\n  this._textureMap.set(tile, texture);\n};\n\n\nCssBaseRenderer.prototype.endLayer = function(layer, rect) {\n\n  var domElement = this.domElement;\n  var oldTileList = this._oldTileList;\n  var newTileList = this._newTileList;\n  var textureMap = this._textureMap;\n  var oldIndex, newIndex, oldTile, newTile;\n  var texture, canvas;\n  var currentNode, nextNode;\n\n  var view = layer.view();\n\n  // Iterate the old and new tile lists in a consistent order and perform\n  // insertions and removals as we go. This minimizes the number of DOM\n  // operations performed.\n\n  // Neither the tile list nor the texture list may contain duplicates,\n  // otherwise this logic will fail.\n\n  // Consistency check.\n  if (domElement.children.length !== oldTileList.length) {\n    throw new Error('DOM not in sync with tile list');\n  }\n\n  newTileList.sort(tileCmp);\n\n  oldIndex = 0;\n  oldTile = oldTileList[oldIndex];\n  currentNode = domElement.firstChild;\n\n  for (newIndex = 0; newIndex < newTileList.length; newIndex++) {\n\n    newTile = newTileList[newIndex];\n\n    // Iterate old list until it catches up with the new list.\n    while (oldIndex < oldTileList.length) {\n\n      if (oldTile.cmp(newTile) >= 0) {\n        // Caught up.\n        break;\n      }\n\n      // Tile is no longer visible.\n      // Remove it from the DOM.\n      nextNode = currentNode.nextSibling;\n      domElement.removeChild(currentNode);\n      currentNode = nextNode;\n      oldTile = oldTileList[++oldIndex];\n    }\n\n    // Get the texture for the current tile.\n    texture = textureMap.get(newTile);\n    canvas = texture ? texture._canvas : null;\n\n    // Consistency check.\n    if (!canvas) {\n      throw new Error('Rendering tile with missing texture');\n    }\n\n    if (oldTile && oldTile.cmp(newTile) === 0) {\n      // The old and new tile are the same.\n\n      // Consistency check.\n      if (canvas != currentNode) {\n        throw new Error('DOM not in sync with tile list');\n      }\n\n      currentNode = currentNode.nextSibling;\n      oldTile = oldTileList[++oldIndex];\n\n    } else {\n      // The new tile comes before the old tile.\n      // Insert it into the DOM.\n      domElement.insertBefore(canvas, currentNode);\n    }\n\n    // Set the CSS transform on the current tile.\n    setTransform(canvas, this.calculateTransform(newTile, texture, view));\n\n    if (debug) {\n      canvas.setAttribute('data-tile', newTile.str());\n    }\n  }\n\n  // Remove trailing tiles that are no longer visible from the DOM.\n  while (currentNode) {\n    nextNode = currentNode.nextSibling;\n    domElement.removeChild(currentNode);\n    currentNode = nextNode;\n  }\n\n  // Consistenty check.\n  if (domElement.children.length !== newTileList.length) {\n    throw new Error('DOM not in sync with tile list');\n  }\n\n  // The old and new tile lists swap roles between iterations.\n  var tmp = this._oldTileList;\n  this._oldTileList = this._newTileList;\n  this._newTileList = tmp;\n};\n\n\nmodule.exports = CssBaseRenderer;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar CubeTile = require('../geometries/Cube').Tile;\nvar CssBaseRenderer = require('./CssBase');\nvar decimal = require('../util/decimal');\nvar inherits = require('../util/inherits');\n\n\n/**\n * @class CssCubeRenderer\n * @implements Renderer\n * @classdesc\n *\n * A renderer for {@link CubeGeometry} and {@link RectilinearView}, appropriate\n * for a {@link CssStage}.\n *\n * Most users do not need to instantiate this class. Renderers are created and\n * destroyed by {@link Stage} as necessary.\n */\nfunction CssCubeRenderer(root, quirks) {\n  this.constructor.super_.call(this, root, quirks, CubeTile);\n}\n\ninherits(CssCubeRenderer, CssBaseRenderer);\n\n\nCssCubeRenderer.prototype.calculateTransform = function(tile, texture, view) {\n\n  var padSize = this._browserQuirks.padSize;\n  var reverseLevelDepth = this._browserQuirks.reverseLevelDepth;\n  var perspectiveNudge = this._browserQuirks.perspectiveNudge;\n\n  var transform = '';\n\n  // Calculate the cube size for this level.\n  var cubeSize = reverseLevelDepth ? 256 - tile.z : tile.levelWidth();\n\n  // Place top left corner of tile at viewport center to serve as the center\n  // of rotation.\n  // We do not rotate about the center of the tile because, for some mysterious\n  // reason, this seems to occasionally crash Chrome.\n  var size = view.size();\n  var viewportWidth = size.width;\n  var viewportHeight = size.height;\n  transform += 'translate3d(' + decimal(viewportWidth/2) + 'px, ' + decimal(viewportHeight/2) + 'px, 0px) ';\n\n  // Set the perspective depth.\n  var perspective = 0.5 * viewportHeight / Math.tan(view.fov() / 2);\n  var distance = perspective + perspectiveNudge;\n  transform += 'perspective(' + decimal(perspective) + 'px) translateZ(' + decimal(distance) + 'px) ';\n\n  // Set the camera rotation.\n  var viewRotZ = -view.roll();\n  var viewRotX = -view.pitch();\n  var viewRotY = view.yaw();\n  transform += 'rotateZ(' + decimal(viewRotZ) + 'rad) rotateX(' + decimal(viewRotX) + 'rad) rotateY(' + decimal(viewRotY) + 'rad) ';\n\n  // Set the cube face orientation.\n  var tileRotX = -tile.rotX();\n  var tileRotY = tile.rotY();\n  transform += 'rotateX(' + decimal(tileRotX) + 'rad) rotateY(' + decimal(tileRotY) + 'rad) ';\n\n  // Move tile into its position within the cube face.\n  var cornerX = tile.centerX() - tile.scaleX() / 2;\n  var cornerY = -(tile.centerY() + tile.scaleY() / 2);\n  var translX = cornerX * cubeSize;\n  var translY = cornerY * cubeSize;\n  var translZ = -cubeSize / 2;\n  transform += 'translate3d(' + decimal(translX) + 'px, ' + decimal(translY) + 'px, ' + decimal(translZ) + 'px) ';\n\n  // Scale tile into correct size.\n  if (reverseLevelDepth) {\n    var scaleX = cubeSize * tile.scaleX() / tile.width();\n    var scaleY = cubeSize * tile.scaleY() / tile.height();\n    transform += 'scale(' + decimal(scaleX) + ', ' + decimal(scaleY) + ') ';\n  }\n\n  // Compensate for padding around the tile.\n  var padLeft = tile.padLeft() ? padSize : 0;\n  var padTop = tile.padTop() ? padSize : 0;\n  if (padLeft !== 0 || padTop !== 0) {\n    transform += 'translate3d(' + decimal(-padLeft) + 'px, ' + decimal(-padTop) + 'px, 0) ';\n  }\n\n  return transform;\n\n};\n\n\nmodule.exports = CssCubeRenderer;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar inherits = require('../util/inherits');\nvar hash = require('../util/hash');\nvar TileSearcher = require('../TileSearcher');\nvar LruMap = require('../collections/LruMap');\nvar Level = require('./Level');\nvar makeLevelList = require('./common').makeLevelList;\nvar makeSelectableLevelList = require('./common').makeSelectableLevelList;\nvar clamp = require('../util/clamp');\nvar mod = require('../util/mod');\nvar cmp = require('../util/cmp');\nvar type = require('../util/type');\nvar vec2 = require('gl-matrix').vec2;\nvar vec4 = require('gl-matrix').vec4;\n\nvar neighborsCacheSize = 64;\n\n// Some renderer implementations require tiles to be padded around with\n// repeated pixels to prevent the appearance of visible seams between tiles.\n//\n// In order to prevent the padding from being visible, the tiles must be\n// padded and stacked such that the padding on one of the sides, when present,\n// stacks below the neighboring tile on that side.\n//\n// Padding rules:\n// * Pad tiles on the right and on the bottom.\n//\n// Stacking rules:\n// * Within an image, stack smaller zoom levels below larger zoom levels.\n// * Within a level, stack tiles bottom to top in ascending Y coordinate order.\n// * Within a row, stack tiles bottom to top in ascending X coordinate order.\n\n// Offsets to apply to the (x,y) coordinates of a tile to get its neighbors.\nvar neighborOffsets = [\n  [  0,  1 ], // top\n  [  1,  0 ], // right\n  [  0, -1 ], // bottom\n  [ -1,  0 ]  // left\n];\n\n\n/**\n * @class FlatTile\n * @implements Tile\n * @classdesc\n *\n * A tile in a {@link FlatGeometry}.\n */\nfunction FlatTile(x, y, z, geometry) {\n  this.x = x;\n  this.y = y;\n  this.z = z;\n  this._geometry = geometry;\n  this._level = geometry.levelList[z];\n}\n\n\nFlatTile.prototype.rotX = function() {\n  return 0;\n};\n\n\nFlatTile.prototype.rotY = function() {\n  return 0;\n};\n\n\nFlatTile.prototype.centerX = function() {\n  var levelWidth = this._level.width();\n  var tileWidth = this._level.tileWidth();\n  return (this.x * tileWidth + 0.5 * this.width()) / levelWidth - 0.5;\n};\n\n\nFlatTile.prototype.centerY = function() {\n  var levelHeight = this._level.height();\n  var tileHeight = this._level.tileHeight();\n  return 0.5 - (this.y * tileHeight + 0.5 * this.height()) / levelHeight;\n};\n\n\nFlatTile.prototype.scaleX = function() {\n  var levelWidth = this._level.width();\n  return this.width() / levelWidth;\n};\n\n\nFlatTile.prototype.scaleY = function() {\n  var levelHeight = this._level.height();\n  return this.height() / levelHeight;\n};\n\n\nFlatTile.prototype.width = function() {\n  var levelWidth = this._level.width();\n  var tileWidth = this._level.tileWidth();\n  if (this.atRightEdge()) {\n    var widthRemainder = mod(levelWidth, tileWidth);\n    return widthRemainder || tileWidth;\n  } else {\n    return tileWidth;\n  }\n};\n\n\nFlatTile.prototype.height = function() {\n  var levelHeight = this._level.height();\n  var tileHeight = this._level.tileHeight();\n  if (this.atBottomEdge()) {\n    var heightRemainder = mod(levelHeight, tileHeight);\n    return heightRemainder || tileHeight;\n  } else {\n    return tileHeight;\n  }\n};\n\n\nFlatTile.prototype.levelWidth = function() {\n  return this._level.width();\n};\n\n\nFlatTile.prototype.levelHeight = function() {\n  return this._level.height();\n};\n\n\nFlatTile.prototype.atTopLevel = function() {\n  return this.z === 0;\n};\n\n\nFlatTile.prototype.atBottomLevel = function() {\n  return this.z === this._geometry.levelList.length - 1;\n};\n\n\nFlatTile.prototype.atTopEdge = function() {\n  return this.y === 0;\n};\n\n\nFlatTile.prototype.atBottomEdge = function() {\n  return this.y === this._level.numVerticalTiles() - 1;\n};\n\n\nFlatTile.prototype.atLeftEdge = function() {\n  return this.x === 0;\n};\n\n\nFlatTile.prototype.atRightEdge = function() {\n  return this.x === this._level.numHorizontalTiles() - 1;\n};\n\n\nFlatTile.prototype.padTop = function() {\n  return false;\n};\n\n\nFlatTile.prototype.padBottom = function() {\n  return !this.atBottomEdge();\n};\n\n\nFlatTile.prototype.padLeft = function() {\n  return false;\n};\n\n\nFlatTile.prototype.padRight = function() {\n  return !this.atRightEdge();\n};\n\n\nFlatTile.prototype.vertices = function(result) {\n  if (!result) {\n    result = [vec2.create(), vec2.create(), vec2.create(), vec2.create()];\n  }\n\n  var left = this.centerX() - this.scaleX() / 2;\n  var right = this.centerX() + this.scaleX() / 2;\n  var bottom = this.centerY() - this.scaleY() / 2;\n  var top = this.centerY() + this.scaleY() / 2;\n\n  vec2.set(result[0], left, top);\n  vec2.set(result[1], right, top);\n  vec2.set(result[2], right, bottom);\n  vec2.set(result[3], left, bottom);\n\n  return result;\n};\n\n\nFlatTile.prototype.parent = function() {\n\n\n  if (this.atTopLevel()) {\n    return null;\n  }\n\n  var geometry = this._geometry;\n\n  var z = this.z - 1;\n  // TODO: Currently assuming each level is double the size of previous one.\n  // Fix to support other multiples.\n  var x = Math.floor(this.x / 2);\n  var y = Math.floor(this.y / 2);\n\n  return new FlatTile(x, y, z, geometry);\n\n};\n\n\nFlatTile.prototype.children = function(result) {\n  if (this.atBottomLevel()) {\n    return null;\n  }\n\n  var geometry = this._geometry;\n  var z = this.z + 1;\n\n  result = result || [];\n\n  // TODO: Currently assuming each level is double the size of previous one.\n  // Fix to support other multiples.\n  result.push(new FlatTile(2*this.x  , 2*this.y  , z, geometry));\n  result.push(new FlatTile(2*this.x  , 2*this.y+1, z, geometry));\n  result.push(new FlatTile(2*this.x+1, 2*this.y  , z, geometry));\n  result.push(new FlatTile(2*this.x+1, 2*this.y+1, z, geometry));\n\n  return result;\n\n};\n\n\nFlatTile.prototype.neighbors = function() {\n\n  var geometry = this._geometry;\n  var cache = geometry._neighborsCache;\n\n  // Satisfy from cache when available.\n  var cachedResult = cache.get(this);\n  if (cachedResult) {\n    return cachedResult;\n  }\n\n  var x = this.x;\n  var y = this.y;\n  var z = this.z;\n  var level = this._level;\n\n  var numX = level.numHorizontalTiles() - 1;\n  var numY = level.numVerticalTiles() - 1;\n\n  var result = [];\n\n  for (var i = 0; i < neighborOffsets.length; i++) {\n    var xOffset = neighborOffsets[i][0];\n    var yOffset = neighborOffsets[i][1];\n\n    var newX = x + xOffset;\n    var newY = y + yOffset;\n    var newZ = z;\n\n    if (0 <= newX && newX <= numX && 0 <= newY && newY <= numY) {\n      result.push(new FlatTile(newX, newY, newZ, geometry));\n    }\n  }\n\n  // Store into cache to satisfy future requests.\n  cache.set(this, result);\n\n  return result;\n\n};\n\n\nFlatTile.prototype.hash = function() {\n  return hash(this.z, this.y, this.x);\n};\n\n\nFlatTile.prototype.equals = function(that) {\n  return (this.geometry === that.geometry &&\n      this.z === that.z && this.y === that.y && this.x === that.x);\n};\n\n\nFlatTile.prototype.cmp = function(that) {\n  return (cmp(this.z, that.z) || cmp(this.y, that.y) || cmp(this.x, that.x));\n};\n\n\nFlatTile.prototype.str = function() {\n  return 'FlatTile(' + tile.x + ', ' + tile.y + ', ' + tile.z + ')';\n};\n\n\nfunction FlatLevel(levelProperties) {\n  this.constructor.super_.call(this, levelProperties);\n\n  this._width = levelProperties.width;\n  this._height = levelProperties.height;\n  this._tileWidth = levelProperties.tileWidth;\n  this._tileHeight = levelProperties.tileHeight;\n}\n\ninherits(FlatLevel, Level);\n\n\nFlatLevel.prototype.width = function() {\n  return this._width;\n};\n\n\nFlatLevel.prototype.height = function() {\n  return this._height;\n};\n\n\nFlatLevel.prototype.tileWidth = function() {\n  return this._tileWidth;\n};\n\n\nFlatLevel.prototype.tileHeight = function() {\n  return this._tileHeight;\n};\n\n\nFlatLevel.prototype._validateWithParentLevel = function(parentLevel) {\n\n  var width = this.width();\n  var height = this.height();\n  var tileWidth = this.tileWidth();\n  var tileHeight = this.tileHeight();\n\n  var parentWidth = parentLevel.width();\n  var parentHeight = parentLevel.height();\n  var parentTileWidth = parentLevel.tileWidth();\n  var parentTileHeight = parentLevel.tileHeight();\n\n  if (width % parentWidth !== 0) {\n    return new Error('Level width must be multiple of parent level: ' +\n                     width + ' vs. ' + parentWidth);\n  }\n\n  if (height % parentHeight !== 0) {\n    return new Error('Level height must be multiple of parent level: ' +\n                     height + ' vs. ' + parentHeight);\n  }\n\n  if (tileWidth % parentTileWidth !== 0) {\n    return new Error('Level tile width must be multiple of parent level: ' +\n                     tileWidth + ' vs. ' + parentTileWidth);\n  }\n\n  if (tileHeight % parentTileHeight !== 0) {\n    return new Error('Level tile height must be multiple of parent level: ' +\n                     tileHeight + ' vs. ' + parentTileHeight);\n  }\n\n};\n\n\n/**\n * @class FlatGeometry\n * @implements Geometry\n * @classdesc\n *\n * A {@link Geometry} implementation suitable for tiled flat images with\n * multiple resolution levels.\n *\n * The following restrictions apply:\n *   - All tiles must be square, except when in the last row or column position,\n *     and must form a rectangular grid;\n *   - The width and height of a level must be multiples of the parent level\n *     width and height.\n *\n * @param {Object[]} levelPropertiesList Level description\n * @param {number} levelPropertiesList[].width Level width in pixels\n * @param {number} levelPropertiesList[].tileWidth Tile width in pixels for\n *                 square tiles\n * @param {number} levelPropertiesList[].height Level height in pixels\n * @param {number} levelPropertiesList[].tileHeight Tile height in pixels for\n *                 square tiles\n */\nfunction FlatGeometry(levelPropertiesList) {\n  if (type(levelPropertiesList) !== 'array') {\n    throw new Error('Level list must be an array');\n  }\n\n  this.levelList = makeLevelList(levelPropertiesList, FlatLevel);\n  this.selectableLevelList = makeSelectableLevelList(this.levelList);\n\n  for (var i = 1; i < this.levelList.length; i++) {\n    this.levelList[i]._validateWithParentLevel(this.levelList[i-1]);\n  }\n\n  this._tileSearcher = new TileSearcher(this);\n\n  this._neighborsCache = new LruMap(neighborsCacheSize);\n\n  this._vec = vec4.create();\n\n  this._viewSize = {};\n}\n\n\nFlatGeometry.prototype.maxTileSize = function() {\n  var maxTileSize = 0;\n  for (var i = 0; i < this.levelList.length; i++) {\n    var level = this.levelList[i];\n    maxTileSize = Math.max(maxTileSize, level.tileWidth, level.tileHeight);\n  }\n  return maxTileSize;\n};\n\n\nFlatGeometry.prototype.levelTiles = function(level, result) {\n\n  var levelIndex = this.levelList.indexOf(level);\n  var maxX = level.numHorizontalTiles() - 1;\n  var maxY = level.numVerticalTiles() - 1;\n\n  if (!result) {\n    result = [];\n  }\n\n  for (var x = 0; x <= maxX; x++) {\n    for (var y = 0; y <= maxY; y++) {\n      result.push(new FlatTile(x, y, levelIndex, this));\n    }\n  }\n\n  return result;\n\n};\n\n\nFlatGeometry.prototype._closestTile = function(view, level) {\n  var ray = this._vec;\n\n  // Compute a view ray into the central screen point.\n  vec4.set(ray, 0, 0, 1, 1);\n  vec4.transformMat4(ray, ray, view.inverseProjection());\n\n  // Compute the image coordinates that the view ray points into.\n  var x = 0.5 + ray[0];\n  var y = 0.5 - ray[1];\n\n  // Get the desired zoom level.\n  var tileZ = this.levelList.indexOf(level);\n  var levelWidth = level.width();\n  var levelHeight = level.height();\n  var tileWidth = level.tileWidth();\n  var tileHeight = level.tileHeight();\n  var numX = level.numHorizontalTiles();\n  var numY = level.numVerticalTiles();\n\n  // Find the coordinates of the tile that the view ray points into.\n  var tileX = clamp(Math.floor(x * levelWidth / tileWidth), 0, numX - 1);\n  var tileY = clamp(Math.floor(y * levelHeight / tileHeight), 0, numY - 1);\n\n  return new FlatTile(tileX, tileY, tileZ, this);\n};\n\n\nFlatGeometry.prototype.visibleTiles = function(view, level, result) {\n  var viewSize = this._viewSize;\n  var tileSearcher = this._tileSearcher;\n\n  result = result || [];\n\n  view.size(viewSize);\n  if (viewSize.width === 0 || viewSize.height === 0) {\n    // No tiles are visible if the viewport is empty.\n    return result;\n  }\n\n  var startingTile = this._closestTile(view, level);\n  var count = tileSearcher.search(view, startingTile, result);\n  if (!count) {\n    throw new Error('Starting tile is not visible');\n  }\n\n  return result;\n};\n\n\nFlatGeometry.Tile = FlatGeometry.prototype.Tile = FlatTile;\nFlatGeometry.type = FlatGeometry.prototype.type = 'flat';\nFlatTile.type = FlatTile.prototype.type = 'flat';\n\n\nmodule.exports = FlatGeometry;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar FlatTile = require('../geometries/Flat').Tile;\nvar CssBaseRenderer = require('./CssBase');\nvar decimal = require('../util/decimal');\nvar inherits = require('../util/inherits');\n\n\n/**\n * @class CssFlatRenderer\n * @implements Renderer\n * @classdesc\n *\n * A renderer for {@link FlatGeometry} and {@link FlatView}, appropriate for a\n * {@link CssStage}.\n *\n * Most users do not need to instantiate this class. Renderers are created and\n * destroyed by {@link Stage} as necessary.\n */\nfunction CssFlatRenderer(root, quirks) {\n  this.constructor.super_.call(this, root, quirks, FlatTile);\n}\n\ninherits(CssFlatRenderer, CssBaseRenderer);\n\n\nCssFlatRenderer.prototype.calculateTransform = function(tile, texture, view) {\n\n  var padSize = this._browserQuirks.padSize;\n\n  var transform = '';\n\n  // Place top left corner of tile at the center of the viewport.\n  var viewportWidth = view.width();\n  var viewportHeight = view.height();\n  transform += 'translateX(' + decimal(viewportWidth/2) + 'px) translateY(' + decimal(viewportHeight/2) + 'px) ';\n\n  // Determine the zoom factor.\n  var zoomX = viewportWidth / view._zoomX();\n  var zoomY = viewportHeight / view._zoomY();\n\n  // Move tile into its position within the image.\n  var cornerX = tile.centerX() - tile.scaleX() / 2 + 0.5;\n  var cornerY = 0.5 - tile.centerY() - tile.scaleY() / 2;\n  var translX = cornerX * zoomX;\n  var translY = cornerY * zoomY;\n  transform += 'translateX(' + decimal(translX) + 'px) translateY(' + decimal(translY) + 'px) ';\n\n  // Apply view offsets.\n  var offX = -view.x() * zoomX;\n  var offY = -view.y() * zoomY;\n  transform += 'translateX(' + decimal(offX) + 'px) translateY(' + decimal(offY) + 'px) ';\n\n  // Compensate for padding around the tile.\n  var padLeft = tile.padLeft() ? padSize : 0;\n  var padTop = tile.padTop() ? padSize : 0;\n  if (padLeft !== 0 || padTop !== 0) {\n    transform += 'translateX(' + decimal(-padLeft) + 'px) translateY(' + decimal(-padTop) + 'px) ';\n  }\n\n  // Scale tile into correct size.\n  var scaleX = zoomX / tile.levelWidth();\n  var scaleY = zoomY / tile.levelHeight();\n  transform += 'scale(' + decimal(scaleX) + ', ' + decimal(scaleY) + ') ';\n\n  return transform;\n\n};\n\n\nmodule.exports = CssFlatRenderer;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar Map = require('../collections/Map');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\n\nfunction tileCmp(a, b) {\n  return a.cmp(b);\n}\n\n\nfunction FlashBaseRenderer(flashElement, layerId, quirks, tileClass) {\n\n  this._flashElement = flashElement;\n  this._layerId = layerId;\n  this._quirks = quirks;\n\n  this._tileList = [];\n\n  this._textureMap = new Map();\n\n  // Whether the Flash layer for this renderer has already been created\n  // by calling flashElement.createLayer(). Note that we cannot do this\n  // right here because Flash may not be initialized yet.\n  this._layerCreated = false;\n}\n\n\nFlashBaseRenderer.prototype.destroy = function() {\n  if (this._layerCreated) {\n    this._flashElement.destroyLayer(this._layerId);\n  }\n  clearOwnProperties(this);\n};\n\n\nFlashBaseRenderer.prototype.startLayer = function(layer, rect) {\n  if (!this._flashElement.isReady || !this._flashElement.isReady()) {\n    return;\n  }\n  if (!this._layerCreated) {\n    this._flashElement.createLayer(this._layerId);\n    this._layerCreated = true;\n  }\n  this._tileList.length = 0;\n  this._textureMap.clear();\n};\n\n\nFlashBaseRenderer.prototype.renderTile = function(tile, texture) {\n  this._tileList.push(tile);\n  this._textureMap.set(tile, texture);\n};\n\n\nFlashBaseRenderer.prototype.endLayer = function(layer, rect) {\n  if (!this._flashElement.isReady || !this._flashElement.isReady()) {\n    return;\n  }\n\n  // Sort tiles so they are rendered in an order coherent with their padding.\n  var tileList = this._tileList;\n  tileList.sort(tileCmp);\n\n  this._renderOnFlash(layer, rect);\n};\n\n\nmodule.exports = FlashBaseRenderer;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n/**\n * @memberof util\n * @param {number} rad\n * @return {number}\n */\nfunction radToDeg(rad) {\n  return rad * 180 / Math.PI;\n}\n\nmodule.exports = radToDeg;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar FlashBaseRenderer = require('./FlashBase');\nvar CubeTile = require('../geometries/Cube').Tile;\nvar inherits = require('../util/inherits');\n\nvar radToDeg = require('../util/radToDeg');\n\n\n/**\n * @class FlashCubeRenderer\n * @implements Renderer\n * @classdesc\n *\n * A renderer for {@link CubeGeometry} and {@link RectilinearView}, appropriate\n * for a {@link FlashStage}.\n *\n * Most users do not need to instantiate this class. Renderers are created and\n * destroyed by {@link Stage} as necessary.\n */\nfunction FlashCubeRenderer(flashElement, layerId, quirks) {\n  this.constructor.super_.call(this, flashElement, layerId, quirks, CubeTile);\n  this._flashTileList = [];\n}\n\ninherits(FlashCubeRenderer, FlashBaseRenderer);\n\n\nFlashCubeRenderer.prototype._renderOnFlash = function(layer, rect) {\n\n  var flashElement = this._flashElement;\n  var layerId = this._layerId;\n  var padSize = this._quirks.padSize;\n\n  var tileList = this._tileList;\n  var textureMap = this._textureMap;\n\n  var flashTileList = this._flashTileList;\n  flashTileList.length = 0;\n\n  for (var i = 0; i < tileList.length; i++) {\n    var tile = tileList[i];\n    var texture = textureMap.get(tile);\n    if (!texture) {\n      throw new Error('Rendering tile with missing texture');\n    }\n\n    // Get padding sizes.\n    var padTop = tile.padTop() ? padSize : 0;\n    var padBottom = tile.padBottom() ? padSize : 0;\n    var padLeft = tile.padLeft() ? padSize : 0;\n    var padRight = tile.padRight() ? padSize : 0;\n\n    flashTileList.push({\n      textureId: texture._textureId,\n      face: tile.face,\n      width: tile.width(),\n      height: tile.height(),\n      centerX: tile.centerX(),\n      centerY: tile.centerY(),\n      rotX: radToDeg(tile.rotX()),\n      rotY: radToDeg(tile.rotY()),\n      levelSize: tile.levelWidth(),\n      padTop: padTop,\n      padBottom: padBottom,\n      padLeft: padLeft,\n      padRight: padRight\n    });\n  }\n\n  // Get viewport position and size.\n  var stageWidth = this._flashElement.clientWidth;\n  var stageHeight = this._flashElement.clientHeight;\n  var viewportX = stageWidth * rect.x;\n  var viewportY = stageHeight * rect.y;\n  var viewportWidth = stageWidth * rect.width;\n  var viewportHeight = stageHeight * rect.height;\n\n  // Get opacity value.\n  var opacity = 1.0;\n  var effects = layer.effects();\n  if (effects && effects.opacity != null) {\n    opacity = effects.opacity;\n  }\n\n  // Get view parameters.\n  var view = layer.view();\n  var yaw = view.yaw();\n  var pitch = view.pitch();\n  var roll = view.roll();\n  var fov = view.fov();\n\n  flashElement.drawCubeTiles(\n      layerId, viewportWidth, viewportHeight, viewportX, viewportY, opacity,\n      yaw, pitch, roll, fov, flashTileList);\n};\n\n\nmodule.exports = FlashCubeRenderer;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar FlashBaseRenderer = require('./FlashBase');\nvar FlatTile = require('../geometries/Flat').Tile;\nvar inherits = require('../util/inherits');\n\n\n/**\n * @class FlashFlatRenderer\n * @implements Renderer\n * @classdesc\n *\n * A renderer for {@link FlatGeometry} and {@link FlatView}, appropriate for a\n * {@link FlashStage}.\n *\n * Most users do not need to instantiate this class. Renderers are created and\n * destroyed by {@link Stage} as necessary.\n */\nfunction FlashFlatRenderer(flashElement, layerId, quirks) {\n  this.constructor.super_.call(this, flashElement, layerId, quirks, FlatTile);\n  this._flashTileList = [];\n}\n\ninherits(FlashFlatRenderer, FlashBaseRenderer);\n\n\nFlashFlatRenderer.prototype._renderOnFlash = function(layer, rect) {\n\n  var flashElement = this._flashElement;\n  var layerId = this._layerId;\n  var padSize = this._quirks.padSize;\n\n  var tileList = this._tileList;\n  var textureMap = this._textureMap;\n\n  var flashTileList = this._flashTileList;\n  flashTileList.length = 0;\n\n  for (var i = 0; i < tileList.length; i++) {\n    var tile = tileList[i];\n    var texture = textureMap.get(tile);\n    if (!texture) {\n      throw new Error('Rendering tile with missing texture');\n    }\n\n    // Get padding sizes.\n    var padTop = tile.padTop() ? padSize : 0;\n    var padBottom = tile.padBottom() ? padSize : 0;\n    var padLeft = tile.padLeft() ? padSize : 0;\n    var padRight = tile.padRight() ? padSize : 0;\n\n    flashTileList.push({\n      textureId: texture._textureId,\n      width: tile.width(),\n      height: tile.height(),\n      centerX: tile.centerX(),\n      centerY: tile.centerY(),\n      scaleX: tile.scaleX(),\n      scaleY: tile.scaleY(),\n      levelWidth: tile.levelWidth(),\n      levelHeight: tile.levelHeight(),\n      padTop: padTop,\n      padBottom: padBottom,\n      padLeft: padLeft,\n      padRight: padRight\n    });\n  }\n\n  // Get viewport position and size.\n  var stageWidth = this._flashElement.clientWidth;\n  var stageHeight = this._flashElement.clientHeight;\n  var viewportX = stageWidth * rect.x;\n  var viewportY = stageHeight * rect.y;\n  var viewportWidth = stageWidth * rect.width;\n  var viewportHeight = stageHeight * rect.height;\n\n  // Get opacity value.\n  var opacity = 1.0;\n  var effects = layer.effects();\n  if (effects && effects.opacity != null) {\n    opacity = effects.opacity;\n  }\n\n  // Get view parameters.\n  var view = layer.view();\n  var x = view.x();\n  var y = view.y();\n  var zoomX = view._zoomX();\n  var zoomY = view._zoomY();\n\n  flashElement.drawFlatTiles(\n      layerId, viewportWidth, viewportHeight, viewportX, viewportY, opacity,\n      x, y, zoomX, zoomY, flashTileList);\n};\n\n\nmodule.exports = FlashFlatRenderer;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar WebGlCube = require('./WebGlCube');\nvar WebGlFlat = require('./WebGlFlat');\nvar WebGlEquirect = require('./WebGlEquirect');\n\nvar CssCube = require('./CssCube');\nvar CssFlat = require('./CssFlat');\n\nvar FlashCube = require('./FlashCube');\nvar FlashFlat = require('./FlashFlat');\n\n/**\n * Registers all known renderers for the given stage type into that stage.\n * Most users will not need to register renderers, as {@link Viewer} does it for\n * them.\n *\n * @param {Stage} stage The stage where the renderers are to be registered.\n * @throws An error if the stage type is unknown.\n */\nfunction registerDefaultRenderers(stage) {\n  switch (stage.type) {\n    case 'webgl':\n      stage.registerRenderer('flat', 'flat', WebGlFlat);\n      stage.registerRenderer('cube', 'rectilinear', WebGlCube);\n      stage.registerRenderer('equirect', 'rectilinear', WebGlEquirect);\n      break;\n    case 'css':\n      stage.registerRenderer('flat', 'flat', CssFlat);\n      stage.registerRenderer('cube', 'rectilinear', CssCube);\n      break;\n    case 'flash':\n      stage.registerRenderer('flat', 'flat', FlashFlat);\n      stage.registerRenderer('cube', 'rectilinear', FlashCube);\n      break;\n    default:\n      throw new Error('Unknown stage type: ' + stage.type);\n  }\n}\n\nmodule.exports = registerDefaultRenderers;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar inherits = require('../util/inherits');\nvar hash = require('../util/hash');\nvar cmp = require('../util/cmp');\nvar common = require('./common');\nvar Level = require('./Level');\nvar type = require('../util/type');\n\n\n/**\n * @class EquirectTile\n * @implements Tile\n * @classdesc\n *\n * A tile in an @{EquirectGeometry}.\n */\nfunction EquirectTile(z, geometry) {\n  this.z = z;\n  this._geometry = geometry;\n  this._level = geometry.levelList[z];\n}\n\n\nEquirectTile.prototype.rotX = function() {\n  return 0;\n};\n\n\nEquirectTile.prototype.rotY = function() {\n  return 0;\n};\n\n\nEquirectTile.prototype.centerX = function() {\n  return 0.5;\n};\n\n\nEquirectTile.prototype.centerY = function() {\n  return 0.5;\n};\n\n\nEquirectTile.prototype.scaleX = function() {\n  return 1;\n};\n\n\nEquirectTile.prototype.scaleY = function() {\n  return 1;\n};\n\n\nEquirectTile.prototype.width = function() {\n  return this._level.tileWidth();\n};\n\n\nEquirectTile.prototype.height = function() {\n  return this._level.tileHeight();\n};\n\n\nEquirectTile.prototype.levelWidth = function() {\n  return this._level.width();\n};\n\n\nEquirectTile.prototype.levelHeight = function() {\n  return this._level.height();\n};\n\n\nEquirectTile.prototype.atTopLevel = function() {\n  return this.z === 0;\n};\n\n\nEquirectTile.prototype.atBottomLevel = function() {\n  return this.z === this._geometry.levelList.length - 1;\n};\n\n\nEquirectTile.prototype.atTopEdge = function() {\n  return true;\n};\n\n\nEquirectTile.prototype.atBottomEdge = function() {\n  return true;\n};\n\n\nEquirectTile.prototype.atLeftEdge = function() {\n  return true;\n};\n\n\nEquirectTile.prototype.atRightEdge = function() {\n  return true;\n};\n\n\nEquirectTile.prototype.padTop = function() {\n  return false;\n};\n\n\nEquirectTile.prototype.padBottom = function() {\n  return false;\n};\n\n\nEquirectTile.prototype.padLeft = function() {\n  return false;\n};\n\n\nEquirectTile.prototype.padRight = function() {\n  return false;\n};\n\n\nEquirectTile.prototype.parent = function() {\n  if (this.atTopLevel()) {\n    return null;\n  }\n  return new EquirectTile(this.z - 1, this._geometry);\n};\n\n\nEquirectTile.prototype.children = function(result) {\n  if (this.atBottomLevel()) {\n    return null;\n  }\n  result = result || [];\n  result.push(new EquirectTile(this.z + 1, this._geometry));\n  return result;\n};\n\n\nEquirectTile.prototype.neighbors = function() {\n  return [];\n};\n\n\nEquirectTile.prototype.hash = function() {\n  return hash(this.z);\n};\n\n\nEquirectTile.prototype.equals = function(that) {\n  return this.geometry === that.geometry && this.z === that.z;\n};\n\n\nEquirectTile.prototype.cmp = function(that) {\n  return cmp(this.z, that.z);\n};\n\n\nEquirectTile.prototype.str = function() {\n  return 'EquirectTile(' + tile.z + ')';\n};\n\n\nfunction EquirectLevel(levelProperties) {\n  this.constructor.super_.call(this, levelProperties);\n  this._width = levelProperties.width;\n}\n\ninherits(EquirectLevel, Level);\n\n\nEquirectLevel.prototype.width = function() {\n  return this._width;\n};\n\n\nEquirectLevel.prototype.height = function() {\n  return this._width/2;\n};\n\n\nEquirectLevel.prototype.tileWidth = function() {\n  return this._width;\n};\n\n\nEquirectLevel.prototype.tileHeight = function() {\n  return this._width/2;\n};\n\n\n/**\n * @class EquirectGeometry\n * @implements Geometry\n * @classdesc\n *\n * A {@link Geometry} implementation suitable for equirectangular images with a\n * 2:1 aspect ratio.\n *\n * @param {Object[]} levelPropertiesList Level description\n * @param {number} levelPropertiesList[].width Level width in pixels\n*/\nfunction EquirectGeometry(levelPropertiesList) {\n  if (type(levelPropertiesList) !== 'array') {\n    throw new Error('Level list must be an array');\n  }\n\n  this.levelList = common.makeLevelList(levelPropertiesList, EquirectLevel);\n  this.selectableLevelList = common.makeSelectableLevelList(this.levelList);\n}\n\n\nEquirectGeometry.prototype.maxTileSize = function() {\n  var maxTileSize = 0;\n  for (var i = 0; i < this.levelList.length; i++) {\n    var level = this.levelList[i];\n    maxTileSize = Math.max(maxTileSize, level.tileWidth, level.tileHeight);\n  }\n  return maxTileSize;\n};\n\n\nEquirectGeometry.prototype.levelTiles = function(level, result) {\n  var levelIndex = this.levelList.indexOf(level);\n  result = result || [];\n  result.push(new EquirectTile(levelIndex, this));\n  return result;\n};\n\n\nEquirectGeometry.prototype.visibleTiles = function(view, level, result) {\n  var tile = new EquirectTile(this.levelList.indexOf(level), this);\n  result = result || [];\n  result.length = 0;\n  result.push(tile);\n};\n\n\nEquirectGeometry.Tile = EquirectGeometry.prototype.Tile = EquirectTile;\nEquirectGeometry.type = EquirectGeometry.prototype.type = 'equirect';\nEquirectTile.type = EquirectTile.prototype.type = 'equirect';\n\n\nmodule.exports = EquirectGeometry;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n/**\n * Convert fov\n *\n * For example, to convert from hfov to vfov one would call \n * `convert(hfov, width, height)`\n *\n * @param {number} fov\n * @param {number} fromDimension\n * @param {number} toDimension\n * @return {number}\n * @memberof util.convertFov\n */\nfunction convert(fov, fromDimension, toDimension) {\n  return 2 * Math.atan(toDimension * Math.tan(fov / 2) / fromDimension);\n}\n\n/**\n * @param {number} fov\n * @param {number} fromDimension\n * @param {number} toDimension\n * @return {number}\n * @memberof util.convertFov\n */\nfunction htov(fov, width, height) {\n  return convert(fov, width, height);\n}\n\n/**\n * @param {number} fov\n * @param {number} fromDimension\n * @param {number} toDimension\n * @return {number}\n * @memberof util.convertFov\n */\nfunction htod(fov, width, height) {\n  return convert(fov, width, Math.sqrt(width * width + height * height));\n}\n\n/**\n * @param {number} fov\n * @param {number} fromDimension\n * @param {number} toDimension\n * @return {number}\n * @memberof util.convertFov\n */\nfunction vtoh(fov, width, height) {\n  return convert(fov, height, width);\n}\n\n/**\n * @param {number} fov\n * @param {number} fromDimension\n * @param {number} toDimension\n * @return {number}\n * @memberof util.convertFov\n */\nfunction vtod(fov, width, height) {\n  return convert(fov, height, Math.sqrt(width * width + height * height));\n}\n\n/**\n * @param {number} fov\n * @param {number} fromDimension\n * @param {number} toDimension\n * @return {number}\n * @memberof util.convertFov\n */\nfunction dtoh(fov, width, height) {\n  return convert(fov, Math.sqrt(width * width + height * height), width);\n}\n\n/**\n * @param {number} fov\n * @param {number} fromDimension\n * @param {number} toDimension\n * @return {number}\n * @memberof util.convertFov\n */\nfunction dtov(fov, width, height) {\n  return convert(fov, Math.sqrt(width * width + height * height), height);\n}\n\n/**\n * @namespace util.convertFov\n */\nmodule.exports = {\n  convert: convert,\n  htov: htov,\n  htod: htod,\n  vtoh: vtoh,\n  vtod: vtod,\n  dtoh: dtoh,\n  dtov: dtov\n};\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nfunction real(x) {\n  return typeof x === 'number' && isFinite(x);\n}\n\nmodule.exports = real;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n/**\n  * Compose multiple functions\n  *\n  * `compose(f, g)` returns `function(x) { return f(g(x)); }`\n  *\n  * @memberof util\n  * @param {Function[]} functions The functions to compose\n  * @return {Function}\n  */\nfunction compose() {\n  var fnList = arguments;\n  return function composed(initialArg) {\n    var ret = initialArg;\n    for (var i = 0; i < fnList.length; i++) {\n      var fn = fnList[i];\n      ret = fn.call(null, ret);\n    }\n    return ret;\n  };\n}\n\nmodule.exports = compose;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar mat4 = require('gl-matrix').mat4;\nvar vec4 = require('gl-matrix').vec4;\nvar pixelRatio = require('../util/pixelRatio');\nvar convertFov = require('../util/convertFov');\nvar mod = require('../util/mod');\nvar real = require('../util/real');\nvar clamp = require('../util/clamp');\nvar decimal = require('../util/decimal');\nvar compose = require('../util/compose');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\n// Default viewport dimensions.\n// Start with zero to ensure that those values are handled correctly.\nvar defaultWidth = 0;\nvar defaultHeight = 0;\n\n// Default view parameters.\nvar defaultYaw = 0;\nvar defaultPitch = 0;\nvar defaultRoll = 0;\nvar defaultFov = Math.PI/4;\nvar defaultProjectionCenterX = 0;\nvar defaultProjectionCenterY = 0;\n\n// A fov of exactly 0 or  breaks some computations, so we constrain it to the\n// [fovLimitEpsilon,  - fovLimitEpsilon] interval. We use 6 decimal places for\n// the epsilon value to avoid broken rendering due to loss of precision in\n// floating point computations.\nvar fovLimitEpsilon = 0.000001;\n\n\n/**\n * @interface RectilinearViewParams\n *\n * A camera configuration for a {@link RectilinearView}.\n *\n * @property {number} yaw The yaw angle, in the [-, ] range.\n *     When `yaw < 0`, the view rotates to the left.\n *     When `yaw > 0`, the view rotates to the right.\n *\n * @property {number} pitch The pitch angle, in the [-, ] range.\n *     When `pitch < 0`, the view rotates downwards.\n *     When `pitch > 0`, the view rotates upwards.\n *\n * @property {number} roll The roll angle, in the [-, ] range.\n *     When `roll < 0`, the view rotates clockwise.\n *     When `roll > 0`, the view rotates counter-clockwise.\n *\n * @property {fov} fov The vertical field of view, in the [0, ] range.\n */\n\n\n/**\n * @interface RectilinearViewCoords\n *\n * The position of a point in a 360 image.\n *\n * @property {number} yaw The yaw angle, in the [-, ] range.\n * @property {number} pitch The pitch angle, in the [-, ] range.\n */\n\n\n/**\n * @typedef {function} RectilinearViewLimiter\n *\n * View limiter for a {@link RectilinearView}.\n *\n * A view limiter is a function that receives a {@link RectilinearViewParams}\n * object, optionally modifies it in place, and returns it. It can be used to\n * enforce constraints on the view parameters.\n *\n * See {@link RectilinearView.limit} for commonly used limiters. They may be\n * composed together or with user-defined limiters with {@link util.compose}.\n *\n * @param {RectilinearViewParams} params\n * @return {RectilinearViewParams}\n */\n\n/**\n * @class RectilinearView\n * @implements View\n * @classdesc\n *\n * A {@link View} implementing a rectilinear projection for 360 images.\n *\n * @param {RectilinearViewParams=} params The initial view parameters. If\n *     unspecified, defaults to `{yaw: 0, pitch: 0, roll: 0, fov: Math.PI/4 }`.\n * @param {RectilinearViewLimiter=} limiter The view limiter. If unspecified,\n *     no view limiting is applied. See {@link RectilinearView.limit} for\n *     commonly used limiters.\n */\nfunction RectilinearView(params, limiter) {\n  // The initial values for the view parameters.\n  this._yaw = params && params.yaw != null ? params.yaw : defaultYaw;\n  this._pitch = params && params.pitch != null ? params.pitch : defaultPitch;\n  this._roll = params && params.roll != null ? params.roll : defaultRoll;\n  this._fov = params && params.fov != null ? params.fov : defaultFov;\n  this._width = params && params.width != null ?\n    params.width : defaultWidth;\n  this._height = params && params.height != null ?\n    params.height : defaultHeight;\n  this._projectionCenterX = params && params.projectionCenterX != null ?\n    params.projectionCenterX : defaultProjectionCenterX;\n  this._projectionCenterY = params && params.projectionCenterY != null ?\n    params.projectionCenterY : defaultProjectionCenterY;\n\n  // The initial value for the view limiter.\n  this._limiter = limiter || null;\n\n  // The last calculated projection matrix and its inverse.\n  this._projMatrix = mat4.create();\n  this._invProjMatrix = mat4.create();\n\n  // The last calculated view frustum.\n  this._frustum = [\n    vec4.create(), // left\n    vec4.create(), // right\n    vec4.create(), // bottom\n    vec4.create(), // top\n    vec4.create()  // camera\n  ];\n\n  // Whether the projection matrices and the view frustum need to be updated.\n  this._projectionChanged = true;\n\n  // Temporary variables used for calculations.\n  this._params = {};\n  this._fovs = {};\n  this._tmpVec = vec4.create();\n\n  // Force view limiting on initial parameters.\n  this._update();\n}\n\neventEmitter(RectilinearView);\n\n\n/**\n * Destructor.\n */\nRectilinearView.prototype.destroy = function() {\n  clearOwnProperties(this);\n};\n\n\n/**\n * Get the yaw angle.\n * @return {number}\n */\nRectilinearView.prototype.yaw = function() {\n  return this._yaw;\n};\n\n\n/**\n * Get the pitch angle.\n * @return {number}\n */\nRectilinearView.prototype.pitch = function() {\n  return this._pitch;\n};\n\n\n/**\n * Get the roll angle.\n * @return {number}\n */\nRectilinearView.prototype.roll = function() {\n  return this._roll;\n};\n\n\nRectilinearView.prototype.projectionCenterX = function() {\n  return this._projectionCenterX;\n};\n\n\nRectilinearView.prototype.projectionCenterY = function() {\n  return this._projectionCenterY;\n};\n\n\n/**\n * Get the fov value.\n * @return {number}\n */\nRectilinearView.prototype.fov = function() {\n  return this._fov;\n};\n\n\n/**\n * Get the viewport width.\n * @return {number}\n */\nRectilinearView.prototype.width = function() {\n  return this._width;\n};\n\n\n/**\n * Get the viewport height.\n * @return {number}\n */\nRectilinearView.prototype.height = function() {\n  return this._height;\n};\n\n\n/**\n * Get the viewport dimensions. If an argument is supplied, it is filled in with\n * the result and returned. Otherwise, a fresh object is filled in and returned.\n * @param {Size=} size\n * @return {Size}\n */\nRectilinearView.prototype.size = function(size) {\n  size = size || {};\n  size.width = this._width;\n  size.height = this._height;\n  return size;\n};\n\n\n/**\n * Get the view parameters. If an argument is supplied, it is filled in with the\n * result and returned. Otherwise, a fresh object is filled in and returned.\n * @param {RectilinearViewParams=} obj\n * @return {RectilinearViewParams}\n */\nRectilinearView.prototype.parameters = function(params) {\n  params = params || {};\n  params.yaw = this._yaw;\n  params.pitch = this._pitch;\n  params.roll = this._roll;\n  params.fov = this._fov;\n  return params;\n};\n\n\n/**\n * Get the view limiter, or null if unset.\n * @return {?RectilinearViewLimiter}\n */\nRectilinearView.prototype.limiter = function() {\n  return this._limiter;\n};\n\n\n/**\n * Set the yaw angle.\n * @param {number} yaw\n */\nRectilinearView.prototype.setYaw = function(yaw) {\n  this._resetParams();\n  this._params.yaw = yaw;\n  this._update(this._params);\n};\n\n\n/**\n * Set the pitch angle.\n * @param {number} pitch\n */\nRectilinearView.prototype.setPitch = function(pitch) {\n  this._resetParams();\n  this._params.pitch = pitch;\n  this._update(this._params);\n};\n\n\n/**\n * Set the roll angle.\n * @param {number} roll\n */\nRectilinearView.prototype.setRoll = function(roll) {\n  this._resetParams();\n  this._params.roll = roll;\n  this._update(this._params);\n};\n\n\n/**\n * Set the fov value.\n * @param {number} fov\n */\nRectilinearView.prototype.setFov = function(fov) {\n  this._resetParams();\n  this._params.fov = fov;\n  this._update(this._params);\n};\n\n\nRectilinearView.prototype.setProjectionCenterX = function(projectionCenterX) {\n  this._resetParams();\n  this._params.projectionCenterX = projectionCenterX;\n  this._update(this._params);\n};\n\n\nRectilinearView.prototype.setProjectionCenterY = function(projectionCenterY) {\n  this._resetParams();\n  this._params.projectionCenterY = projectionCenterY;\n  this._update(this._params);\n};\n\n\n/**\n * Add yawOffset to the current yaw value.\n * @param {number} yawOffset\n */\nRectilinearView.prototype.offsetYaw = function(yawOffset) {\n  this.setYaw(this._yaw + yawOffset);\n};\n\n\n/**\n * Add pitchOffset to the current pitch value.\n * @param {number} pitchOffset\n */\nRectilinearView.prototype.offsetPitch = function(pitchOffset) {\n  this.setPitch(this._pitch + pitchOffset);\n};\n\n\n/**\n * Add rollOffset to the current roll value.\n * @param {number} rollOffset\n */\nRectilinearView.prototype.offsetRoll = function(rollOffset) {\n  this.setRoll(this._roll + rollOffset);\n};\n\n\n/**\n * Add fovOffset to the current fov value.\n * @param {number} fovOffset\n */\nRectilinearView.prototype.offsetFov = function(fovOffset) {\n  this.setFov(this._fov + fovOffset);\n};\n\n\n/**\n * Set the viewport dimensions.\n * @param {Size} size\n */\nRectilinearView.prototype.setSize = function(size) {\n  this._resetParams();\n  this._params.width = size.width;\n  this._params.height = size.height;\n  this._update(this._params);\n};\n\n\n/**\n * Set the view parameters. Unspecified parameters are left unchanged.\n * @param {RectilinearViewParameters} params\n */\nRectilinearView.prototype.setParameters = function(params) {\n  this._resetParams();\n  this._params.yaw = params.yaw;\n  this._params.pitch = params.pitch;\n  this._params.roll = params.roll;\n  this._params.fov = params.fov;\n  this._params.projectionCenterX = params.projectionCenterX;\n  this._params.projectionCenterY = params.projectionCenterY;\n  this._update(this._params);\n};\n\n\n/**\n * Set the view limiter.\n * @param {?RectilinearViewLimiter} limiter The new limiter, or null to unset.\n */\nRectilinearView.prototype.setLimiter = function(limiter) {\n  this._limiter = limiter || null;\n  this._update();\n};\n\n\nRectilinearView.prototype._resetParams = function() {\n  var params = this._params;\n  params.yaw = null;\n  params.pitch = null;\n  params.roll = null;\n  params.fov = null;\n  params.width = null;\n  params.height = null;\n};\n\n\nRectilinearView.prototype._update = function(params) {\n\n  // Avoid object allocation when no parameters are supplied.\n  if (params == null) {\n    this._resetParams();\n    params = this._params;\n  }\n\n  // Save old parameters for later comparison.\n  var oldYaw = this._yaw;\n  var oldPitch = this._pitch;\n  var oldRoll = this._roll;\n  var oldFov = this._fov;\n  var oldProjectionCenterX = this._projectionCenterX;\n  var oldProjectionCenterY = this._projectionCenterY;\n  var oldWidth = this._width;\n  var oldHeight = this._height;\n\n  // Fill in object with the new set of parameters to pass into the limiter.\n  params.yaw = params.yaw != null ? params.yaw : oldYaw;\n  params.pitch = params.pitch != null ? params.pitch : oldPitch;\n  params.roll = params.roll != null ? params.roll : oldRoll;\n  params.fov = params.fov != null ? params.fov : oldFov;\n  params.width = params.width != null ? params.width : oldWidth;\n  params.height = params.height != null ? params.height : oldHeight;\n  params.projectionCenterX = params.projectionCenterX != null ?\n    params.projectionCenterX : oldProjectionCenterX;\n  params.projectionCenterY = params.projectionCenterY != null ?\n    params.projectionCenterY : oldProjectionCenterY;\n\n  // Apply view limiting when defined.\n  if (this._limiter) {\n    params = this._limiter(params);\n    if (!params) {\n      throw new Error('Bad view limiter');\n    }\n  }\n\n  // Normalize parameters.\n  params = this._normalize(params);\n\n  // Grab the limited parameters.\n  var newYaw = params.yaw;\n  var newPitch = params.pitch;\n  var newRoll = params.roll;\n  var newFov = params.fov;\n  var newWidth = params.width;\n  var newHeight = params.height;\n  var newProjectionCenterX = params.projectionCenterX;\n  var newProjectionCenterY = params.projectionCenterY;\n\n  // Consistency check.\n  if (!real(newYaw) || !real(newPitch) || !real(newRoll) ||\n      !real(newFov) || !real(newWidth) || !real(newHeight) ||\n      !real(newProjectionCenterX) || !real(newProjectionCenterY)) {\n    throw new Error('Bad view - suspect a broken limiter');\n  }\n\n  // Update parameters.\n  this._yaw = newYaw;\n  this._pitch = newPitch;\n  this._roll = newRoll;\n  this._fov = newFov;\n  this._width = newWidth;\n  this._height = newHeight;\n  this._projectionCenterX = newProjectionCenterX;\n  this._projectionCenterY = newProjectionCenterY;\n\n  // Check whether the parameters changed and emit the corresponding events.\n  if (newYaw !== oldYaw || newPitch !== oldPitch || newRoll !== oldRoll ||\n      newFov !== oldFov || newWidth !== oldWidth || newHeight !== oldHeight ||\n      newProjectionCenterX !== oldProjectionCenterX ||\n      newProjectionCenterY !== oldProjectionCenterY) {\n    this._projectionChanged = true;\n    this.emit('change');\n  }\n  if (newWidth !== oldWidth || newHeight !== oldHeight) {\n    this.emit('resize');\n  }\n\n};\n\n\nRectilinearView.prototype._normalize = function(params) {\n\n  this._normalizeCoordinates(params);\n\n  // Make sure that neither the horizontal nor the vertical fields of view\n  // exceed  - fovLimitEpsilon.\n  var hfovPi = convertFov.htov(Math.PI, params.width, params.height);\n  var maxFov = isNaN(hfovPi) ? Math.PI : Math.min(Math.PI, hfovPi);\n  params.fov = clamp(params.fov, fovLimitEpsilon, maxFov - fovLimitEpsilon);\n\n  return params;\n};\n\n\nRectilinearView.prototype._normalizeCoordinates = function(params) {\n  // Constrain yaw, pitch and roll to the [-, ] interval.\n  if ('yaw' in params) {\n    params.yaw = mod(params.yaw - Math.PI, -2*Math.PI) + Math.PI;\n  }\n  if ('pitch' in params) {\n    params.pitch = mod(params.pitch - Math.PI, -2*Math.PI) + Math.PI;\n  }\n  if ('roll' in params) {\n    params.roll = mod(params.roll - Math.PI, -2*Math.PI) + Math.PI;\n  }\n  return params;\n};\n\n\n/**\n * Normalize view coordinates so that they are the closest to the current view.\n * Useful for tweening the view through the shortest path. If a result argument\n * is supplied, it is filled in with the result and returned. Otherwise, a fresh\n * object is filled in and returned.\n *\n * @param {RectilinearViewCoords} coords The view coordinates.\n * @param {RectilinearViewCoords} result The result argument for the normalized\n *     view coordinates.\n */\nRectilinearView.prototype.normalizeToClosest = function(coords, result) {\n\n  var viewYaw = this._yaw;\n  var viewPitch = this._pitch;\n\n  var coordYaw = coords.yaw;\n  var coordPitch = coords.pitch;\n\n  // Check if the yaw is closer after subtracting or adding a full circle.\n  var prevYaw = coordYaw - 2*Math.PI;\n  var nextYaw = coordYaw + 2*Math.PI;\n  if (Math.abs(prevYaw - viewYaw) < Math.abs(coordYaw - viewYaw)) {\n    coordYaw = prevYaw;\n  }\n  else if (Math.abs(nextYaw - viewYaw) < Math.abs(coordYaw - viewYaw)) {\n    coordYaw = nextYaw;\n  }\n\n  // Check if the pitch is closer after subtracting or adding a full circle.\n  var prevPitch = coordPitch - 2*Math.PI;\n  var nextPitch = coordPitch + 2*Math.PI;\n  if (Math.abs(prevPitch - viewPitch) < Math.abs(coordPitch - viewPitch)) {\n    coordPitch = prevPitch;\n  }\n  else if (Math.abs(prevPitch - viewPitch) < Math.abs(coordPitch - viewPitch)) {\n    coordPitch = nextPitch;\n  }\n\n  result = result || {};\n  result.yaw = coordYaw;\n  result.pitch = coordPitch;\n  return result;\n\n};\n\n\nRectilinearView.prototype.updateWithControlParameters = function(parameters) {\n  // axisScaledX and axisScaledY are scaled according to their own axis\n  // x and y are scaled by the same value\n\n  // If the viewport dimensions are zero, assume a square viewport\n  // when converting from hfov to vfov.\n  var vfov = this._fov;\n  var hfov = convertFov.vtoh(vfov, this._width, this._height);\n  if (isNaN(hfov)) {\n    hfov = vfov;\n  }\n\n  // TODO: revisit this after we rethink the control parameters.\n  this.offsetYaw(parameters.axisScaledX * hfov + parameters.x * 2 * hfov + parameters.yaw);\n  this.offsetPitch(parameters.axisScaledY * vfov + parameters.y * 2 * hfov + parameters.pitch);\n  this.offsetRoll(-parameters.roll);\n  this.offsetFov(parameters.zoom * vfov);\n};\n\n\nRectilinearView.prototype._updateProjection = function() {\n  var projMatrix = this._projMatrix;\n  var invProjMatrix = this._invProjMatrix;\n  var frustum = this._frustum;\n\n  if (this._projectionChanged) {\n    var width = this._width;\n    var height = this._height;\n\n    var vfov = this._fov;\n    var hfov = convertFov.vtoh(vfov, width, height);\n    var aspect = width / height;\n\n    var projectionCenterX = this._projectionCenterX;\n    var projectionCenterY = this._projectionCenterY;\n\n    if (projectionCenterX !== 0 || projectionCenterY !== 0) {\n      var offsetAngleX = Math.atan(projectionCenterX * 2 * Math.tan(hfov/2));\n      var offsetAngleY = Math.atan(projectionCenterY * 2 * Math.tan(vfov/2));\n      var fovs = this._fovs;\n      fovs.leftDegrees = (hfov/2 + offsetAngleX) * 180/Math.PI;\n      fovs.rightDegrees = (hfov/2 - offsetAngleX) * 180/Math.PI;\n      fovs.upDegrees = (vfov/2 + offsetAngleY) * 180/Math.PI;\n      fovs.downDegrees = (vfov/2 - offsetAngleY) * 180/Math.PI;\n      mat4.perspectiveFromFieldOfView(projMatrix, fovs, -1, 1);\n    } else {\n      mat4.perspective(projMatrix, vfov, aspect, -1, 1);\n    }\n\n    mat4.rotateZ(projMatrix, projMatrix, this._roll);\n    mat4.rotateX(projMatrix, projMatrix, this._pitch);\n    mat4.rotateY(projMatrix, projMatrix, this._yaw);\n\n    mat4.invert(invProjMatrix, projMatrix);\n\n    this._matrixToFrustum(projMatrix, frustum);\n\n    this._projectionChanged = false;\n  }\n};\n\n\nRectilinearView.prototype._matrixToFrustum = function(p, f) {\n  // Extract frustum planes from projection matrix.\n  // http://www8.cs.umu.se/kurser/5DV051/HT12/lab/plane_extraction.pdf\n  vec4.set(f[0], p[3] + p[0], p[7] + p[4], p[11] + p[8],  0); // left\n  vec4.set(f[1], p[3] - p[0], p[7] - p[4], p[11] - p[8],  0); // right\n  vec4.set(f[2], p[3] + p[1], p[7] + p[5], p[11] + p[9],  0); // top\n  vec4.set(f[3], p[3] - p[1], p[7] - p[5], p[11] - p[9],  0); // bottom\n  vec4.set(f[4], p[3] + p[2], p[7] + p[6], p[11] + p[10], 0); // camera\n};\n\n\n/**\n * Returns the projection matrix for the current view.\n * @returns {mat4}\n */\nRectilinearView.prototype.projection = function() {\n  this._updateProjection();\n  return this._projMatrix;\n};\n\n\n/**\n * Returns the inverse projection matrix for the current view.\n * @returns {mat4}\n */\nRectilinearView.prototype.inverseProjection = function() {\n  this._updateProjection();\n  return this._invProjMatrix;\n};\n\n\n/**\n * Return whether the view frustum intersects the given rectangle.\n *\n * This function may return false positives, but never false negatives.\n * It is used for frustum culling, i.e., excluding invisible tiles from the\n * rendering process.\n *\n * @param {vec2[]} rectangle The vertices of the rectangle.\n */\nRectilinearView.prototype.intersects = function(rectangle) {\n  this._updateProjection();\n\n  var frustum = this._frustum;\n  var vertex = this._tmpVec;\n\n  // Check whether the rectangle is on the outer side of any of the frustum\n  // planes. This is a sufficient condition, though not necessary, for the\n  // rectangle to be completely outside the frustum.\n  for (var i = 0; i < frustum.length; i++) {\n    var plane = frustum[i];\n    var inside = false;\n    for (var j = 0; j < rectangle.length; j++) {\n      var corner = rectangle[j];\n      vec4.set(vertex, corner[0], corner[1], corner[2], 0);\n      if (vec4.dot(plane, vertex) >= 0) {\n        inside = true;\n      }\n    }\n    if (!inside) {\n      return false;\n    }\n  }\n  return true;\n};\n\n\n/**\n * Select the level that should be used to render the view.\n * @param {Level[]} levelList the list of levels from which to select.\n * @return {Level} the selected level.\n */\nRectilinearView.prototype.selectLevel = function(levelList) {\n\n  // Multiply the viewport width by the device pixel ratio to get the required\n  // horizontal resolution in pixels.\n  //\n  // Calculate the fraction of a cube face that would be visible given the\n  // current vertical field of view. Then, for each level, multiply by the\n  // level height to get the height in pixels of the portion that would be\n  // visible.\n  //\n  // Search for the smallest level that satifies the the required height,\n  // falling back on the largest level if none do.\n\n  var requiredPixels = pixelRatio() * this._height;\n  var coverFactor = Math.tan(0.5 * this._fov);\n\n  for (var i = 0; i < levelList.length; i++) {\n    var level = levelList[i];\n    if (coverFactor * level.height() >= requiredPixels) {\n      return level;\n    }\n  }\n\n  return levelList[levelList.length - 1];\n\n};\n\n\n/**\n * Convert view parameters into screen position. If a result argument is\n * provided, it is filled in and returned. Otherwise, a fresh object is filled\n * in and returned.\n *\n * @param {RectilinearViewCoords} coords The view coordinates.\n * @param {Coords=} result The result argument for the screen coordinates.\n * @return {Coords}\n */\nRectilinearView.prototype.coordinatesToScreen = function(coords, result) {\n  var ray = this._tmpVec;\n\n  if (!result) {\n    result = {};\n  }\n\n  var width = this._width;\n  var height = this._height;\n\n  // Undefined on a null viewport.\n  if (width <= 0 || height <= 0) {\n    result.x = null;\n    result.y = null;\n    return null;\n  }\n\n  // Compute view ray pointing into the (yaw, pitch) direction.\n  var yaw = coords.yaw;\n  var pitch = coords.pitch;\n  var x = Math.sin(yaw) * Math.cos(pitch);\n  var y = -Math.sin(coords.pitch);\n  var z = -Math.cos(yaw) * Math.cos(pitch);\n  vec4.set(ray, x, y, z, 1);\n\n  // Project view ray onto clip space.\n  vec4.transformMat4(ray, ray, this.projection());\n\n  // w in clip space equals -z in camera space.\n  if (ray[3] >= 0) {\n    // Point is in front of camera.\n    // Convert to viewport coordinates.\n    result.x = width * (ray[0] / ray[3] + 1) / 2;\n    result.y = height * (1 - ray[1] / ray[3]) / 2;\n  } else {\n    // Point is behind camera.\n    result.x = null;\n    result.y = null;\n    return null;\n  }\n\n  return result;\n};\n\n\n/**\n * Convert screen coordinates into view coordinates. If a result argument is\n * provided, it is filled in with the result and returned. Otherwise, a fresh\n * object is filled in and returned.\n *\n * @param {Coords} coords The screen coordinates.\n * @param {RectilinearViewCoords=} result The view coordinates.\n * @return {RectilinearViewCoords}\n */\nRectilinearView.prototype.screenToCoordinates = function(coords, result) {\n  var ray = this._tmpVec;\n\n  if (!result) {\n    result = {};\n  }\n\n  var width = this._width;\n  var height = this._height;\n\n  // Convert viewport coordinates to clip space.\n  var vecx = 2 * coords.x / width - 1;\n  var vecy = 1 - 2 * coords.y / height;\n  vec4.set(ray, vecx, vecy, 1, 1);\n\n  // Project back to world space.\n  vec4.transformMat4(ray, ray, this.inverseProjection());\n\n  // Convert to spherical coordinates.\n  var r = Math.sqrt(ray[0] * ray[0] + ray[1] * ray[1] + ray[2] * ray[2]);\n  result.yaw = Math.atan2(ray[0], -ray[2]);\n  result.pitch = Math.acos(ray[1] / r) - Math.PI/2;\n\n  this._normalizeCoordinates(result);\n\n  return result;\n};\n\n\n/**\n * Calculate the perspective transform required to position an element with\n * perspective.\n *\n * @param {RectilinearViewCoords} coords The view coordinates.\n * @param {number} radius Radius of the sphere embedding the element.\n * @param {string} extraTransforms Extra transformations to be applied after\n *     the element is positioned. This may be used to rotate the element.\n * @return {string} The CSS 3D transform to be applied to the element.\n */\nRectilinearView.prototype.coordinatesToPerspectiveTransform = function(\n    coords, radius, extraTransforms) {\n  extraTransforms = extraTransforms || \"\";\n\n  var height = this._height;\n  var width = this._width;\n  var fov = this._fov;\n  var perspective = 0.5 * height / Math.tan(fov / 2);\n\n  var transform = '';\n\n  // Center hotspot in screen.\n  transform += 'translateX(' + decimal(width/2) + 'px) ';\n  transform += 'translateY(' + decimal(height/2) + 'px) ';\n  transform += 'translateX(-50%) translateY(-50%) ';\n\n  // Set the perspective depth.\n  transform += 'perspective(' + decimal(perspective) + 'px) ';\n  transform += 'translateZ(' + decimal(perspective) + 'px) ';\n\n  // Set the camera rotation.\n  transform += 'rotateZ(' + decimal(-this._roll) + 'rad) ';\n  transform += 'rotateX(' + decimal(-this._pitch) + 'rad) ';\n  transform += 'rotateY(' + decimal(this._yaw) + 'rad) ';\n\n  // Set the hotspot rotation.\n  transform += 'rotateY(' + decimal(-coords.yaw) + 'rad) ';\n  transform += 'rotateX(' + decimal(coords.pitch) + 'rad) ';\n\n  // Move back to sphere.\n  transform += 'translateZ(' + decimal(-radius) + 'px) ';\n\n  // Apply the extra transformations\n  transform += extraTransforms + ' ';\n\n  return transform;\n};\n\n\n/**\n * Factory functions for view limiters. See {@link RectilinearViewLimiter}.\n * @namespace\n */\nRectilinearView.limit = {\n\n  /**\n   * Returns a view limiter that constrains the yaw angle.\n   * @param {number} min The minimum yaw value.\n   * @param {number} max The maximum yaw value.\n   * @return {RectilinearViewLimiter}\n   */\n  yaw: function(min, max) {\n    return function limitYaw(params) {\n      params.yaw = clamp(params.yaw, min, max);\n      return params;\n    };\n  },\n\n  /**\n   * Returns a view limiter that constrains the pitch angle.\n   * @param {number} min The minimum pitch value.\n   * @param {number} max The maximum pitch value.\n   * @return {RectilinearViewLimiter}\n   */\n  pitch: function(min, max) {\n    return function limitPitch(params) {\n      params.pitch = clamp(params.pitch, min, max);\n      return params;\n    };\n  },\n\n  /**\n   * Returns a view limiter that constrains the roll angle.\n   * @param {number} min The minimum roll value.\n   * @param {number} max The maximum roll value.\n   * @return {RectilinearViewLimiter}\n   */\n  roll: function(min, max) {\n    return function limitRoll(params) {\n      params.roll = clamp(params.roll, min, max);\n      return params;\n    };\n  },\n\n  /**\n   * Returns a view limiter that constrains the horizontal field of view.\n   * @param {number} min The minimum horizontal field of view.\n   * @param {number} max The maximum horizontal field of view.\n   * @return {RectilinearViewLimiter}\n   */\n  hfov: function(min, max) {\n    return function limitHfov(params) {\n      var width = params.width;\n      var height = params.height;\n      if (width > 0 && height > 0) {\n        var vmin = convertFov.htov(min, width, height);\n        var vmax = convertFov.htov(max, width, height);\n        params.fov = clamp(params.fov, vmin, vmax);\n      }\n      return params;\n    };\n  },\n\n  /**\n   * Returns a view limiter that constrains the vertical field of view.\n   * @param {number} min The minimum vertical field of view.\n   * @param {number} max The maximum vertical field of view.\n   * @return {RectilinearViewLimiter}\n   */\n  vfov: function(min, max) {\n    return function limitVfov(params) {\n      params.fov = clamp(params.fov, min, max);\n      return params;\n    };\n  },\n\n  /**\n   * Returns a view limiter that prevents zooming in beyond the given\n   * resolution.\n   * @param {number} size The cube face width in pixels or, equivalently, one\n   *     fourth of the equirectangular width in pixels.\n   * @return {RectilinearViewLimiter}\n   */\n  resolution: function(size) {\n    return function limitResolution(params) {\n      var height = params.height;\n      if (height) {\n        var requiredPixels = pixelRatio() * height;\n        var minFov = 2 * Math.atan(requiredPixels / size);\n        params.fov = clamp(params.fov, minFov, Infinity);\n      }\n      return params;\n    };\n  },\n\n  /**\n   * Returns a view limiter that limits the horizontal and vertical field of\n   * view, prevents zooming in past the image resolution, and limits the pitch\n   * range to prevent the camera wrapping around at the poles. These are the\n   * most common view constraints for a 360 panorama.\n   * @param {number} maxResolution The cube face width in pixels or,\n   *     equivalently, one fourth of the equirectangular width in pixels.\n   * @param {number} maxVFov The maximum vertical field of view.\n   * @param {number} [maxHFov=maxVFov] The maximum horizontal field of view.\n   * @return {RectilinearViewLimiter}\n   */\n  traditional: function(maxResolution, maxVFov, maxHFov) {\n    maxHFov = maxHFov != null ? maxHFov : maxVFov;\n\n    return compose(\n      RectilinearView.limit.resolution(maxResolution),\n      RectilinearView.limit.vfov(0, maxVFov),\n      RectilinearView.limit.hfov(0, maxHFov),\n      RectilinearView.limit.pitch(-Math.PI/2, Math.PI/2));\n  }\n\n};\n\n\nRectilinearView.type = RectilinearView.prototype.type = 'rectilinear';\n\n\nmodule.exports = RectilinearView;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar mat4 = require('gl-matrix').mat4;\nvar vec4 = require('gl-matrix').vec4;\nvar pixelRatio = require('../util/pixelRatio');\nvar real = require('../util/real');\nvar clamp = require('../util/clamp');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\n// Default viewport dimensions.\n// Start with zero to ensure that those values are handled correctly.\nvar defaultWidth = 0;\nvar defaultHeight = 0;\n\n// Default view parameters.\nvar defaultX = 0.5;\nvar defaultY = 0.5;\nvar defaultZoom = 1;\n\n// Constant values used to simplify the frustum culling logic.\n// planeAxes[i] indicates the coordinate value that defines a frustum plane.\n// planeCmp[i] indicates how point and plane coordinates should be compared\n// to determine whether the point is on the outer side of the plane.\nvar planeAxes = [\n  1, // top\n  0, // right\n  1, // bottom\n  0  // left\n];\nvar planeCmp = [\n  -1, // top\n  -1, // right\n   1, // bottom\n   1  // left\n];\n\n// A zoom of exactly 0 breaks some computations, so we force a minimum positive\n// value. We use 6 decimal places for the epsilon value to avoid broken\n// rendering due to loss of precision in floating point computations.\nvar zoomLimitEpsilon = 0.000001;\n\n\n/**\n * @interface FlatViewParams\n *\n * A camera configuration for a {@link FlatView}.\n *\n * @property {number} x The horizontal coordinate of the image point displayed\n *     at the viewport center, in the [0, 1] range.\n *     When `x === 0.5`, the image is centered horizontally.\n *     When `x === 0`, the left edge of the image is at the viewport center.\n *     When `x === 1`, the right edge of the image is at the viewport center.\n * @property {number} y The vertical coordinate of the image point displayed at\n *     the viewport center, in the [0, 1] range.\n *     When `y === 0.5`, the image is centered vertically.\n *     When `y === 0`, the top edge of the image is at the viewport center.\n *     When `y === 1`, the bottom edge of the image is at the viewport center.\n * @property {number} zoom The horizontal zoom, in the [0, ) range.\n *     When `zoom === 1`, the viewport is as wide as the image.\n *     When `zoom < 1`, the image is zoomed in.\n *     When `zoom > 1`, the image is zoomed out.\n * @property {number} mediaAspectRatio The image aspect ratio.\n *     When `mediaAspectRatio === 1`, the image width equals its height.\n *     When `mediaAspectRatio < 1`, the image width is less than its height.\n *     When `mediaAspectRatio > 1`, the image height is less than its width.\n */\n\n\n/**\n * @interface FlatViewCoords\n *\n * The position of a point in a flat image.\n *\n * @property {number} x The horizontal coordinate, in the [0, 1] range.\n * @property {number} y The vertical coordinate, in the [0, 1] range.\n */\n\n\n/**\n * @typedef {function} FlatViewLimiter\n *\n * View limiter for a {@link FlatView}.\n *\n * A view limiter is a function that receives a {@link FlatViewParams} object,\n * optionally modifies it in place, and returns it. It can be used to enforce\n * constraints on the view parameters.\n *\n * See {@link FlatView.limit} for commonly used limiters. They may be composed\n * together or with user-defined limiters with {@link util.compose}.\n *\n * @param {FlatViewParams} params\n * @return {FlatViewParams}\n */\n\n\n/**\n * @class FlatView\n * @implements View\n * @classdesc\n *\n * A {@link View} implementing an orthogonal projection for flat images.\n *\n * @param {FlatViewParams} params The initial view parameters. The\n *     `mediaAspectRatio` parameter must always be set. The other parameters\n *     default to `{x: 0.5, y: 0.5, z: 1 }` if unspecified.\n * @param {FlatViewLimiter=} limiter The view limiter. If unspecified, no view\n *     limiting is applied. See {@link FlatView.limit} for commonly used\n *     limiters.\n */\nfunction FlatView(params, limiter) {\n  // Require an aspect ratio to be specified.\n  if (!(params && params.mediaAspectRatio != null)) {\n    throw new Error('mediaAspectRatio must be defined');\n  }\n\n  // The initial values for the view parameters.\n  this._x = params && params.x != null ? params.x : defaultX;\n  this._y = params && params.y != null ? params.y : defaultY;\n  this._zoom = params && params.zoom != null ? params.zoom : defaultZoom;\n  this._mediaAspectRatio = params.mediaAspectRatio;\n  this._width = params && params.width != null ?\n    params.width : defaultWidth;\n  this._height = params && params.height != null ?\n    params.height : defaultHeight;\n\n  // The initial value for the view limiter.\n  this._limiter = limiter || null;\n\n  // The last calculated projection matrix and its inverse.\n  this._projMatrix = mat4.create();\n  this._invProjMatrix = mat4.create();\n\n  // The last calculated view frustum.\n  this._frustum = [\n    0, // top\n    0, // right\n    0, // bottom\n    0  // left\n  ];\n\n  // Whether the projection matrices and view frustum need to be updated.\n  this._projectionChanged = true;\n\n  // Temporary variables used for calculations.\n  this._params = {};\n  this._vec = vec4.create();\n\n  // Force view limiting on initial parameters.\n  this._update();\n}\n\neventEmitter(FlatView);\n\n\n/**\n * Destructor.\n */\nFlatView.prototype.destroy = function() {\n  clearOwnProperties(this);\n};\n\n\n/**\n * Get the x parameter.\n * @return {number}\n */\nFlatView.prototype.x = function() {\n  return this._x;\n};\n\n\n/**\n * Get the y parameter.\n * @return {number}\n */\nFlatView.prototype.y = function() {\n  return this._y;\n};\n\n\n/**\n * Get the zoom value.\n * @return {number}\n */\nFlatView.prototype.zoom = function() {\n  return this._zoom;\n};\n\n\n/**\n * Get the media aspect ratio.\n * @return {number}\n */\nFlatView.prototype.mediaAspectRatio = function() {\n  return this._mediaAspectRatio;\n};\n\n\n/**\n * Get the viewport width.\n * @return {number}\n */\nFlatView.prototype.width = function() {\n  return this._width;\n};\n\n\n/**\n * Get the viewport height.\n * @return {number}\n */\nFlatView.prototype.height = function() {\n  return this._height;\n};\n\n\n/**\n * Get the viewport dimensions. If an argument is supplied, it is filled in with\n * the result and returned. Otherwise, a fresh object is filled in and returned.\n * @param {Size=} size\n * @return {Size}\n */\nFlatView.prototype.size = function(size) {\n  size = size || {};\n  size.width = this._width;\n  size.height = this._height;\n  return size;\n};\n\n\n/**\n * Get the view parameters. If an argument is supplied, it is filled in with the\n * result and returned. Otherwise, a fresh object is filled in and returned.\n * @param {FlatViewParams=} params\n * @return {FlatViewParams}\n */\nFlatView.prototype.parameters = function(params) {\n  params = params || {};\n  params.x = this._x;\n  params.y = this._y;\n  params.zoom = this._zoom;\n  params.mediaAspectRatio = this._mediaAspectRatio;\n  return params;\n};\n\n\n/**\n * Get the view limiter, or null if unset.\n * @return {?FlatViewLimiter}\n */\nFlatView.prototype.limiter = function() {\n  return this._limiter;\n};\n\n\n/**\n * Set the x parameter.\n * @param {number} x\n */\nFlatView.prototype.setX = function(x) {\n  this._resetParams();\n  this._params.x = x;\n  this._update(this._params);\n};\n\n\n/**\n * Set the y parameter.\n * @param {number} y\n */\nFlatView.prototype.setY = function(y) {\n  this._resetParams();\n  this._params.y = y;\n  this._update(this._params);\n};\n\n\n/**\n * Set the zoom value.\n * @param {number} zoom\n */\nFlatView.prototype.setZoom = function(zoom) {\n  this._resetParams();\n  this._params.zoom = zoom;\n  this._update(this._params);\n};\n\n\n/**\n * Add xOffset to the x parameter.\n * @param {number} xOffset\n */\nFlatView.prototype.offsetX = function(xOffset) {\n  this.setX(this._x + xOffset);\n};\n\n\n/**\n * Add yOffset to the y parameter.\n * @param {number} yOffset\n */\nFlatView.prototype.offsetY = function(yOffset)\n{\n  this.setY(this._y + yOffset);\n};\n\n\n/**\n * Add zoomOffset to the zoom value.\n * @param {number} zoomOffset\n */\nFlatView.prototype.offsetZoom = function(zoomOffset) {\n  this.setZoom(this._zoom + zoomOffset);\n};\n\n\n/**\n * Set the media aspect ratio.\n * @param {number} mediaAspectRatio\n */\nFlatView.prototype.setMediaAspectRatio = function(mediaAspectRatio) {\n  this._resetParams();\n  this._params.mediaAspectRatio = mediaAspectRatio;\n  this._update(this._params);\n};\n\n\n/**\n * Set the viewport dimensions.\n * @param {Size} size\n */\nFlatView.prototype.setSize = function(size) {\n  this._resetParams();\n  this._params.width = size.width;\n  this._params.height = size.height;\n  this._update(this._params);\n};\n\n\n/**\n * Set the view parameters. Unspecified parameters are left unchanged.\n * @param {FlatViewParameters} params\n */\nFlatView.prototype.setParameters = function(params) {\n  this._resetParams();\n  this._params.x = params.x;\n  this._params.y = params.y;\n  this._params.zoom = params.zoom;\n  this._params.mediaAspectRatio = params.mediaAspectRatio;\n  this._update(this._params);\n};\n\n\n/**\n * Set the view limiter.\n * @param {?FlatViewLimiter} limiter The new limiter, or null to unset.\n */\nFlatView.prototype.setLimiter = function(limiter) {\n  this._limiter = limiter || null;\n  this._update();\n};\n\n\nFlatView.prototype._resetParams = function() {\n  var params = this._params;\n  params.x = null;\n  params.y = null;\n  params.zoom = null;\n  params.mediaAspectRatio = null;\n  params.width = null;\n  params.height = null;\n};\n\n\nFlatView.prototype._update = function(params) {\n\n  // Avoid object allocation when no parameters are supplied.\n  if (params == null) {\n    this._resetParams();\n    params = this._params;\n  }\n\n  // Save old parameters for later comparison.\n  var oldX = this._x;\n  var oldY = this._y;\n  var oldZoom = this._zoom;\n  var oldMediaAspectRatio = this._mediaAspectRatio;\n  var oldWidth = this._width;\n  var oldHeight = this._height;\n\n  // Fill in object with the new set of parameters to pass into the limiter.\n  params.x = params.x != null ? params.x : oldX;\n  params.y = params.y != null ? params.y : oldY;\n  params.zoom = params.zoom != null ? params.zoom : oldZoom;\n  params.mediaAspectRatio = params.mediaAspectRatio != null ?\n    params.mediaAspectRatio : oldMediaAspectRatio;\n  params.width = params.width != null ? params.width : oldWidth;\n  params.height = params.height != null ? params.height : oldHeight;\n\n  // Apply view limiting when defined.\n  if (this._limiter) {\n    params = this._limiter(params);\n    if (!params) {\n      throw new Error('Bad view limiter');\n    }\n  }\n\n  // Grab the limited parameters.\n  var newX = params.x;\n  var newY = params.y;\n  var newZoom = params.zoom;\n  var newMediaAspectRatio = params.mediaAspectRatio;\n  var newWidth = params.width;\n  var newHeight = params.height;\n\n  // Consistency check.\n  if (!real(newX) || !real(newY) || !real(newZoom) ||\n      !real(newMediaAspectRatio) || !real(newWidth) || !real(newHeight)) {\n    throw new Error('Bad view - suspect a broken limiter');\n  }\n\n  // Constrain zoom.\n  newZoom = clamp(newZoom, zoomLimitEpsilon, Infinity);\n\n  // Update parameters.\n  this._x = newX;\n  this._y = newY;\n  this._zoom = newZoom;\n  this._mediaAspectRatio = newMediaAspectRatio;\n  this._width = newWidth;\n  this._height = newHeight;\n\n  // Check whether the parameters changed and emit the corresponding events.\n  if (newX !== oldX || newY !== oldY || newZoom !== oldZoom ||\n      newMediaAspectRatio !== oldMediaAspectRatio ||\n      newWidth !== oldWidth || newHeight !== oldHeight) {\n    this._projectionChanged = true;\n    this.emit('change');\n  }\n  if (newWidth !== oldWidth || newHeight !== oldHeight) {\n    this.emit('resize');\n  }\n\n};\n\n\nFlatView.prototype._zoomX = function() {\n  return this._zoom;\n};\n\n\nFlatView.prototype._zoomY = function() {\n  var mediaAspectRatio = this._mediaAspectRatio;\n  var aspect = this._width / this._height;\n  var zoomX = this._zoom;\n  var zoomY = zoomX * mediaAspectRatio / aspect;\n  if (isNaN(zoomY)) {\n    zoomY = zoomX;\n  }\n  return zoomY;\n};\n\n\nFlatView.prototype.updateWithControlParameters = function(parameters) {\n  var scale = this.zoom();\n  var zoomX = this._zoomX();\n  var zoomY = this._zoomY();\n\n  // TODO: should the scale be the same for both axes?\n  this.offsetX(parameters.axisScaledX * zoomX + parameters.x * scale);\n  this.offsetY(parameters.axisScaledY * zoomY + parameters.y * scale);\n  this.offsetZoom(parameters.zoom * scale);\n};\n\n\nFlatView.prototype._updateProjection = function() {\n  var projMatrix = this._projMatrix;\n  var invProjMatrix = this._invProjMatrix;\n  var frustum = this._frustum;\n\n  // Recalculate projection matrix when required.\n  if (this._projectionChanged) {\n    var x = this._x;\n    var y = this._y;\n    var zoomX = this._zoomX();\n    var zoomY = this._zoomY();\n\n    // Recalculate view frustum.\n    var top     = frustum[0] = (0.5 - y) + 0.5 * zoomY;\n    var right   = frustum[1] = (x - 0.5) + 0.5 * zoomX;\n    var bottom  = frustum[2] = (0.5 - y) - 0.5 * zoomY;\n    var left    = frustum[3] = (x - 0.5) - 0.5 * zoomX;\n\n    // Recalculate projection matrix and its inverse.\n    mat4.ortho(projMatrix, left, right, bottom, top, -1, 1);\n    mat4.invert(invProjMatrix, projMatrix);\n\n    this._projectionChanged = false;\n  }\n};\n\n\n/**\n * Returns the projection matrix for the current view.\n * @returns {mat4}\n */\nFlatView.prototype.projection = function() {\n  this._updateProjection();\n  return this._projMatrix;\n};\n\n\n/**\n * Returns the inverse projection matrix for the current view.\n * @returns {mat4}\n */\nFlatView.prototype.inverseProjection = function() {\n  this._updateProjection();\n  return this._invProjMatrix;\n};\n\n\n/**\n * Return whether the view frustum intersects the given rectangle.\n *\n * This function may return false positives, but never false negatives.\n * It is used for frustum culling, i.e., excluding invisible tiles from the\n * rendering process.\n *\n * @param {vec3[]} rectangle The vertices of the rectangle.\n */\nFlatView.prototype.intersects = function(rectangle) {\n  this._updateProjection();\n\n  var frustum = this._frustum;\n\n  // Check whether the rectangle is on the outer side of any of the frustum\n  // planes. This is a sufficient condition, though not necessary, for the\n  // rectangle to be completely outside the fruouter\n  for (var i = 0; i < frustum.length; i++) {\n    var limit = frustum[i];\n    var axis = planeAxes[i];\n    var cmp = planeCmp[i];\n    var inside = false;\n    for (var j = 0; j < rectangle.length; j++) {\n      var vertex = rectangle[j];\n      if (cmp < 0 && vertex[axis] < limit || cmp > 0 && vertex[axis] > limit) {\n        inside = true;\n        break;\n      }\n    }\n    if (!inside) {\n      return false;\n    }\n  }\n  return true;\n};\n\n\n/**\n * Select the level that should be used to render the view.\n * @param {Level[]} levelList the list of levels from which to select.\n * @return {Level} the selected level.\n */\nFlatView.prototype.selectLevel = function(levels) {\n\n  // Multiply the viewport width by the device pixel ratio to get the required\n  // horizontal resolution in pixels.\n  //\n  // Calculate the fraction of the image that would be visible at the current\n  // zoom value. Then, for each level, multiply by the level width to get the\n  // width in pixels of the portion that would be visible.\n  //\n  // Search for the smallest level that satifies the the required width,\n  // falling back on the largest level if none do.\n\n  var requiredPixels = pixelRatio() * this.width();\n  var zoomFactor = this._zoom;\n\n  for (var i = 0; i < levels.length; i++) {\n    var level = levels[i];\n    if (zoomFactor * level.width() >= requiredPixels) {\n      return level;\n    }\n  }\n\n  return levels[levels.length - 1];\n\n};\n\n\n/**\n * Convert view coordinates into screen coordinates. If a result argument is\n * provided, it is filled in and returned. Otherwise, a fresh object is filled\n * in and returned.\n *\n * @param {FlatViewCoords} coords The view coordinates.\n * @param {Coords=} result The result argument for the screen coordinates.\n * @return {Coords}\n */\nFlatView.prototype.coordinatesToScreen = function(coords, result) {\n  var ray = this._vec;\n\n  if (!result) {\n    result = {};\n  }\n\n  var width = this._width;\n  var height = this._height;\n\n  // Undefined on a null viewport.\n  if (width <= 0 || height <= 0) {\n    result.x = null;\n    result.y = null;\n    return null;\n  }\n\n  // Extract coordinates from argument, filling in default values.\n  var x = coords && coords.x != null ? coords.x : defaultX;\n  var y = coords && coords.y != null ? coords.y : defaultY;\n\n  // Project view ray onto clip space.\n  vec4.set(ray, x - 0.5, 0.5 - y, -1, 1);\n  vec4.transformMat4(ray, ray, this.projection());\n\n  // Calculate perspective divide.\n  for (var i = 0; i < 3; i++) {\n    ray[i] /= ray[3];\n  }\n\n  // Convert to viewport coordinates and return.\n  result.x = width * (ray[0] + 1) / 2;\n  result.y = height * (1 - ray[1]) / 2;\n\n  return result;\n};\n\n\n/**\n * Convert screen coordinates into view coordinates. If a result argument is\n * provided, it is filled in with the result and returned. Otherwise, a fresh\n * object is filled in and returned.\n *\n * @param {Coords} coords The screen coordinates.\n * @param {FlatViewCoords=} result The result argument for the view coordinates.\n * @return {FlatViewCoords}\n */\nFlatView.prototype.screenToCoordinates = function(coords, result) {\n  var ray = this._vec;\n\n  if (!result) {\n    result = {};\n  }\n\n  var width = this._width;\n  var height = this._height;\n\n  // Convert viewport coordinates to clip space.\n  var vecx = 2 * coords.x / width - 1;\n  var vecy = 1 - 2 * coords.y / height;\n  vec4.set(ray, vecx, vecy, 1, 1);\n\n  // Project back to world space.\n  vec4.transformMat4(ray, ray, this.inverseProjection());\n\n  // Convert to flat coordinates.\n  result.x = 0.5 + ray[0];\n  result.y = 0.5 - ray[1];\n\n  return result;\n};\n\n\n/**\n * Factory functions for view limiters. See {@link FlatViewLimiter}.\n * @namespace\n */\nFlatView.limit = {\n\n  /**\n   * Returns a view limiter that constrains the x parameter.\n   * @param {number} min The minimum x value.\n   * @param {number} max The maximum y value.\n   * @return {FlatViewLimiter}\n   */\n  x: function(min, max) {\n    return function limitX(params) {\n      params.x = clamp(params.x, min, max);\n      return params;\n    };\n  },\n\n  /**\n   * Return a view limiter that constrains the y parameter.\n   * @param {number} min The minimum y value.\n   * @param {number} max The maximum y value.\n   * @return {FlatViewLimiter}\n   */\n  y: function(min, max) {\n    return function limitY(params) {\n      params.y = clamp(params.y, min, max);\n      return params;\n    };\n  },\n\n  /**\n   * Returns a view limiter than constrains the zoom parameter.\n   * @param {number} min The minimum zoom value.\n   * @param {number} max The maximum zoom value.\n   * @return {FlatViewLimiter}\n   */\n  zoom: function(min, max) {\n    return function limitZoom(params) {\n      params.zoom = clamp(params.zoom, min, max);\n      return params;\n    };\n  },\n\n  /**\n   * Returns a view limiter that prevents zooming in beyond the given\n   * resolution.\n   * @param {number} size The image width in pixels.\n   * @return {FlatViewLimiter}\n   */\n  resolution: function(size) {\n    return function limitResolution(params) {\n      if (params.width <= 0 || params.height <= 0) {\n        return params;\n      }\n      var width = params.width;\n      var minZoom = pixelRatio() * width / size;\n      params.zoom = clamp(params.zoom, minZoom, Infinity);\n      return params;\n    };\n  },\n\n  /**\n   * Returns a view limiter that constrains the values of the x parameter that\n   * are inside the viewport.\n   * @param {number} min The minimum x value.\n   * @param {number} max The maximum x value.\n   * @return {FlatViewLimiter}\n   */\n  visibleX: function(min, max) {\n    return function limitVisibleX(params) {\n      // Calculate the zoom value that makes the specified range fully visible.\n      var maxZoom = max - min;\n\n      // Clamp zoom to the maximum value.\n      if (params.zoom > maxZoom) {\n        params.zoom = maxZoom;\n      }\n\n      // Bound X such that the image is visible up to the range edges.\n      var minX = min + 0.5 * params.zoom;\n      var maxX = max - 0.5 * params.zoom;\n      params.x = clamp(params.x, minX, maxX);\n\n      return params;\n    };\n  },\n\n  /**\n   * Returns a view limiter that constrains the values of the y parameter that\n   * are inside the viewport.\n   * @param {number} min The minimum y value.\n   * @param {number} max The maximum y value.\n   * @return {FlatViewLimiter}\n   */\n  visibleY: function(min, max) {\n    return function limitVisibleY(params) {\n\n      // Do nothing for a null viewport.\n      if (params.width <= 0 || params.height <= 0) {\n        return params;\n      }\n\n      // Calculate the X to Y conversion factor.\n      var viewportAspectRatio = params.width / params.height;\n      var factor = viewportAspectRatio / params.mediaAspectRatio;\n\n      // Calculate the zoom value that makes the specified range fully visible.\n      var maxZoom = (max - min) * factor;\n\n      // Clamp zoom to the maximum value.\n      if (params.zoom > maxZoom) {\n        params.zoom = maxZoom;\n      }\n\n      // Bound Y such that the image is visible up to the range edges.\n      var minY = min + 0.5 * params.zoom / factor;\n      var maxY = max - 0.5 * params.zoom / factor;\n      params.y = clamp(params.y, minY, maxY);\n\n      return params;\n    };\n  },\n\n\n  /**\n   * Returns a view limiter that constrains the zoom parameter such that\n   * zooming out is prevented beyond the point at which the image is fully\n   * visible. Unless the image and the viewport have the same aspect ratio,\n   * this will cause bands to appear around the image.\n   * @return {FlatViewLimiter}\n   */\n  letterbox: function() {\n    return function limitLetterbox(params) {\n      if(params.width <= 0 || params.height <= 0) {\n        return params;\n      }\n      var viewportAspectRatio = params.width / params.height;\n\n      var fullWidthZoom = 1.0;\n      var fullHeightZoom = viewportAspectRatio / params.mediaAspectRatio;\n\n      // If the image is wider than the viewport, limit the horizontal zoom to\n      // the image width.\n      if (params.mediaAspectRatio >= viewportAspectRatio) {\n        params.zoom = Math.min(params.zoom, fullWidthZoom);\n      }\n\n      // If the image is narrower than the viewport, limit the vertical zoom to\n      // the image height.\n      if (params.mediaAspectRatio <= viewportAspectRatio) {\n        params.zoom = Math.min(params.zoom, fullHeightZoom);\n      }\n\n      // If the full image width is visible, limit x to the central point.\n      // Else, bound x such that image is visible up to the horizontal edges.\n      var minX, maxX;\n      if (params.zoom > fullWidthZoom) {\n        minX = maxX = 0.5;\n      } else {\n        minX = 0.0 + 0.5 * params.zoom / fullWidthZoom;\n        maxX = 1.0 - 0.5 * params.zoom / fullWidthZoom;\n      }\n\n      // If the full image height is visible, limit y to the central point.\n      // Else, bound y such that image is visible up to the vertical edges.\n      var minY, maxY;\n      if (params.zoom > fullHeightZoom) {\n        minY = maxY = 0.5;\n      } else {\n        minY = 0.0 + 0.5 * params.zoom / fullHeightZoom;\n        maxY = 1.0 - 0.5 * params.zoom / fullHeightZoom;\n      }\n\n      // Clamp x and y into the calculated bounds.\n      params.x = clamp(params.x, minX, maxX);\n      params.y = clamp(params.y, minY, maxY);\n\n      return params;\n    };\n  }\n\n};\n\n\nFlatView.type = FlatView.prototype.type = 'flat';\n\n\nmodule.exports = FlatView;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar WorkQueue = require('./WorkQueue');\nvar mod = require('../util/mod');\n\n\nfunction WorkPool(opts) {\n  this._concurrency = opts && opts.concurrency || 1;\n  this._paused = opts && !!opts.paused || false;\n\n  this._pool = [];\n  for (var i = 0; i < this._concurrency; i++) {\n    this._pool.push(new WorkQueue(opts));\n  }\n\n  this._next = 0;\n}\n\n\nWorkPool.prototype.length = function() {\n  var len = 0;\n  for (var i = 0; i < this._pool.length; i++) {\n    len += this._pool[i].length();\n  }\n  return len;\n};\n\n\nWorkPool.prototype.push = function(fn, cb) {\n  var i = this._next;\n  var cancel = this._pool[i].push(fn, cb);\n  this._next = mod(this._next + 1, this._concurrency);\n  return cancel;\n};\n\n\nWorkPool.prototype.pause = function() {\n  if (!this._paused) {\n    this._paused = true;\n    for (var i = 0; i < this._concurrency; i++) {\n      this._pool[i].pause();\n    }\n  }\n};\n\n\nWorkPool.prototype.resume = function() {\n  if (this._paused) {\n    this._paused = false;\n    for (var i = 0; i < this._concurrency; i++) {\n      this._pool[i].resume();\n    }\n  }\n};\n\n\nmodule.exports = WorkPool;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nfunction noop() {}\n\nmodule.exports = noop;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar noop = require('./noop');\n\n// Return a function that executes its arguments (which should be cancelables)\n// in sequence, so that each of them passes its return values to the next.\n// Execution is aborted if one of the functions returns an error; in that case\n// the last function in the sequence is called with the error.\n// See util/cancelize.js for an explanation of what cancelables are.\nfunction chain() {\n\n  // The list of functions to chain together.\n  var argList = Array.prototype.slice.call(arguments, 0);\n\n  return function chained() {\n\n    // List of remaining functions to be executed.\n    // Make a copy of the original list so we can mutate the former while\n    // preserving the latter intact for future invocations of the chain.\n    var fnList = argList.slice(0);\n\n    // Currently executing function.\n    var fn = null;\n\n    // Cancel method for the currently executing function.\n    var cfn = null;\n\n    // Arguments for the first function.\n    var args = arguments.length ? Array.prototype.slice.call(arguments, 0, arguments.length - 1) : [];\n\n    // Callback for the chain.\n    var done = arguments.length ? arguments[arguments.length - 1] : noop;\n\n    // Execute the next function in the chain.\n    // Receives the error and return values from the previous function.\n    function exec() {\n\n      // Extract error from arguments.\n      var err = arguments[0];\n\n      // Abort chain on error.\n      if (err) {\n        fn = cfn = null;\n        done.apply(null, arguments);\n        return;\n      }\n\n      // Terminate if there are no functions left in the chain.\n      if (!fnList.length) {\n        fn = cfn = null;\n        done.apply(null, arguments);\n        return;\n      }\n\n      // Advance to the next function in the chain.\n      fn = fnList.shift();\n      var _fn = fn;\n\n      // Extract arguments to pass into the next function.\n      var ret = Array.prototype.slice.call(arguments, 1);\n\n      // Call next function with previous return value and call back exec.\n      ret.push(exec);\n      var _cfn = fn.apply(null, ret); // fn(null, ret..., exec)\n\n      // Detect when fn has completed synchronously and do not clobber the\n      // internal state in that case. You're not expected to understand this.\n      if (_fn !== fn) {\n        return;\n      }\n\n      // Remember the cancel method for the currently executing function.\n      // Detect chaining on non-cancellable function.\n      if (typeof _cfn !== 'function') {\n        throw new Error('chain: chaining on non-cancellable function');\n      } else {\n        cfn = _cfn;\n      }\n\n    }\n\n    // Cancel chain execution.\n    function cancel() {\n      if (cfn) {\n        cfn.apply(null, arguments);\n      }\n    }\n\n    // Start chain execution.\n    // We call exec as if linking from a previous function in the chain,\n    // except that the error is always null. As a consequence, chaining on an\n    // empty list yields the identity function.\n    args.unshift(null);\n    exec.apply(null, args); // exec(null, args...)\n\n    return cancel;\n\n  };\n\n}\n\nmodule.exports = chain;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n// Perform a cancelable delay.\n// See util/cancelize.js for an explanation of what cancelables are.\nfunction delay(ms, done) {\n\n  // Work around IE8 bug whereby a setTimeout callback may still be called\n  // after the corresponding clearTimeout is invoked.\n  var timer = null;\n\n  function finish() {\n    if (timer != null) {\n      timer = null;\n      done(null);\n    }\n  }\n\n  function cancel() {\n    if (timer != null) {\n      clearTimeout(timer);\n      timer = null;\n      done.apply(null, arguments);\n    }\n  }\n\n  timer = setTimeout(finish, ms);\n\n  return cancel;\n\n}\n\nmodule.exports = delay;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar NetworkError = require('../NetworkError');\nvar WorkPool = require('../collections/WorkPool');\nvar chain = require('../util/chain');\nvar delay = require('../util/delay');\nvar now = require('../util/now');\n\n\n// Map template properties to their corresponding tile properties.\nvar templateProperties = {\n  x: 'x',\n  y: 'y',\n  z: 'z',\n  f: 'face'\n};\n\n// Default face order for cube maps.\nvar defaultCubeMapFaceOrder = 'bdflru';\n\n// Default maximum number of concurrent requests.\nvar defaultConcurrency = 4;\n\n// Default milliseconds to wait before retrying failed requests.\nvar defaultRetryDelay = 10000;\n\n\n/**\n * @class ImageUrlSource\n * @implements Source\n * @classdesc\n *\n * A {@link Source} that loads {@link Asset assets} from images given a URL and\n * a crop rectangle.\n *\n * @param {Function} sourceFromTile Function that receives a tile and returns\n * a `{ url, rect }` object, where `url` is an image URL and `rect`, when\n * present, is an `{ x, y, width, height }` object in normalized coordinates\n * denoting the portion of the image to use.\n * @param {Object} opts\n * @param {number} [opts.concurrency=4] Maximum number of tiles to request at\n *     the same time. The limit is per {@link ImageSourceUrl} instance.\n * @param {number} [opts.retryDelay=10000] Time in milliseconds to wait before\n *     retrying a failed request.\n */\nfunction ImageUrlSource(sourceFromTile, opts) {\n\n  opts = opts ? opts : {};\n\n  this._loadPool = new WorkPool({\n    concurrency: opts.concurrency || defaultConcurrency\n  });\n\n  this._retryDelay = opts.retryDelay || defaultRetryDelay;\n  this._retryMap = {};\n\n  this._sourceFromTile = sourceFromTile;\n}\n\neventEmitter(ImageUrlSource);\n\n\nImageUrlSource.prototype.loadAsset = function(stage, tile, done) {\n\n  var self = this;\n\n  var retryDelay = this._retryDelay;\n  var retryMap = this._retryMap;\n\n  var tileSource = this._sourceFromTile(tile);\n  var url = tileSource.url;\n  var rect = tileSource.rect;\n\n  var loadImage = stage.loadImage.bind(stage, url, rect);\n\n  var loadFn = function(done) {\n    // TODO: Deduplicate load requests for the same URL. Although the browser\n    // might be smart enough to avoid duplicate requests, they are still unduly\n    // impacted by the concurrency parameter.\n    return self._loadPool.push(loadImage, function(err, asset) {\n      if (err) {\n        if (err instanceof NetworkError) {\n          // If a network error occurred, wait before retrying.\n          retryMap[url] = now();\n          self.emit('networkError', asset, err);\n        }\n        done(err, tile);\n      } else {\n        // On a successful fetch, forget the previous timeout.\n        delete retryMap[url];\n        done(null, tile, asset);\n      }\n    });\n  };\n\n  // Check whether we are retrying a failed request.\n  var delayAmount;\n  var lastTime = retryMap[url];\n  if (lastTime != null) {\n    var currentTime = now();\n    var elapsed = currentTime - lastTime;\n    if (elapsed < retryDelay) {\n      // Wait before retrying.\n      delayAmount = retryDelay - elapsed;\n    } else {\n      // Retry timeout expired; perform the request at once.\n      delayAmount = 0;\n      delete retryMap[url];\n    }\n  }\n\n  var delayFn = delay.bind(null, delayAmount);\n\n  return chain(delayFn, loadFn)(done);\n};\n\n\n/**\n * Creates an ImageUrlSource from a string template.\n *\n * @param {String} url Tile URL template, which may contain the following\n *    placeholders:\n *    - `{f}` : tile face (one of `b`, `d`, `f`, `l`, `r`, `u`)\n *    - `{z}` : tile level index (0 is the smallest level)\n *    - `{x}` : tile horizontal index\n *    - `{y}` : tile vertical index\n * @param {Object} opts In addition to the options already supported by the\n *     {@link ImageUrlSource} constructor.\n * @param {String} opts.cubeMapPreviewUrl URL to use as the preview level.\n *     This must be a single image containing six cube faces laid out\n *     vertically according to the face order parameter.\n * @param {String} [opts.cubeMapPreviewFaceOrder='bdflru'] Face order within\n *     the preview image.\n */\nImageUrlSource.fromString = function(url, opts) {\n  opts = opts || {};\n\n  var faceOrder = opts && opts.cubeMapPreviewFaceOrder || defaultCubeMapFaceOrder;\n\n  var urlFn = opts.cubeMapPreviewUrl ? withPreview : withoutPreview;\n\n  return new ImageUrlSource(urlFn, opts);\n\n  function withoutPreview(tile) {\n    var tileUrl = url;\n\n    for (var property in templateProperties) {\n      var templateProperty = templateProperties[property];\n      var regExp = propertyRegExp(property);\n      var valueFromTile = tile.hasOwnProperty(templateProperty) ? tile[templateProperty] : '';\n      tileUrl = tileUrl.replace(regExp, valueFromTile);\n    }\n\n    return { url: tileUrl };\n  }\n\n  function withPreview(tile) {\n    if (tile.z === 0) {\n      return cubeMapUrl(tile);\n    }\n    else {\n      return withoutPreview(tile);\n    }\n  }\n\n  function cubeMapUrl(tile) {\n    var y = faceOrder.indexOf(tile.face) / 6;\n    return {\n      url: opts.cubeMapPreviewUrl,\n      rect: { x: 0, y: y, width: 1, height: 1/6 }\n    };\n  }\n};\n\nfunction propertyRegExp(property) {\n  var regExpStr = '\\\\{(' + property + ')\\\\}';\n  return new RegExp(regExpStr, 'g');\n}\n\nmodule.exports = ImageUrlSource;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n/**\n * @class SingleAssetSource\n * @implements Source\n * @classdesc\n *\n * A {@link Source} that always provides the same {@link Asset}.\n *\n * @param {Asset} asset The asset.\n*/\nfunction SingleAssetSource(asset) {\n  this._asset = asset;\n}\n\nSingleAssetSource.prototype.asset = function() {\n  return this._asset;\n};\n\nSingleAssetSource.prototype.loadAsset = function(stage, tile, done) {\n  var self = this;\n\n  var timeout = setTimeout(function() {\n    done(null, tile, self._asset);\n  }, 0);\n\n  function cancel() {\n    clearTimeout(timeout);\n    done.apply(null, arguments);\n  }\n\n  return cancel;\n};\n\nmodule.exports = SingleAssetSource;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar StaticAsset = require('./Static');\nvar inherits = require('../util/inherits');\nvar eventEmitter = require('minimal-event-emitter');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\n/**\n * @class DynamicAsset\n * @implements Asset\n * @extends StaticAsset\n * @classdesc\n *\n * A mutable {@link Asset} compatible with {@link WebGlStage} and\n * {@link CssStage}.\n *\n * @param {HTMLImageElement|HTMLCanvasElement|ImageBitmap} element The\n *     underlying pixel source.\n * @throws If the pixel source is unsupported.\n */\nfunction DynamicAsset(element) {\n  this.constructor.super_.call(this, element);\n  this._timestamp = 0;\n}\n\ninherits(DynamicAsset, StaticAsset);\neventEmitter(DynamicAsset);\n\n/**\n * Destructor.\n */\nDynamicAsset.prototype.destroy = function() {\n  clearOwnProperties(this);\n};\n\nDynamicAsset.prototype.timestamp = function() {\n  return this._timestamp;\n};\n\nDynamicAsset.prototype.isDynamic = function() {\n  return true;\n};\n\n/**\n * Marks the asset dirty, signaling that the contents of the underlying pixel\n * source have changed.\n *\n * @throws If the asset is not dynamic.\n */\nDynamicAsset.prototype.markDirty = function() {\n  this._timestamp++;\n  this.emit('change');\n};\n\nmodule.exports = DynamicAsset;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar mod = require('../util/mod');\n\n// An LruSet holds up to a maximum number of elements, ordered by their time of\n// insertion. When the addition of an element would cause the capacity to be\n// exceeded, the oldest element in the set is evicted. As a special case, an\n// LruSet with zero capacity always rejects the insertion of an element.\n//\n// Elements must implement hash() and equals(). Note that the implementation\n// doesn't currently use hash(), but a future version might.\nfunction LruSet(capacity) {\n  if (!isFinite(capacity) || Math.floor(capacity) !== capacity || capacity < 0) {\n    throw new Error('LruSet: invalid capacity');\n  }\n  this._capacity = capacity;\n\n  // Elements are stored in a circular array ordered by decreasing age.\n  // Start is the index of the oldest element and size is the number of valid\n  // elements; the region containing valid elements may wrap around.\n  this._elements = new Array(this._capacity);\n  this._start = 0;\n  this._size = 0;\n}\n\nLruSet.prototype._index = function(i) {\n  return mod(this._start + i, this._capacity);\n};\n\n// Adds an element into the set, possibly replacing an equal element already in\n// the set. The element becomes the newest. If the set is at capacity, the\n// oldest element is removed. Returns the removed element if it does not equal\n// the inserted element, or null otherwise. If the capacity is zero, does\n// nothing and returns the element.\nLruSet.prototype.add = function(element) {\n  if (this._capacity === 0) {\n    return element;\n  }\n  this.remove(element);\n  var evictedElement =\n      this._size === this._capacity ? this._elements[this._index(0)] : null;\n  this._elements[this._index(this._size)] = element;\n  if (this._size < this._capacity) {\n    this._size++;\n  } else {\n    this._start = this._index(1);\n  }\n  return evictedElement;\n};\n\n// Removes an element from the set.\n// Returns the removed element, or null if the element was not found.\nLruSet.prototype.remove = function(element) {\n  for (var i = 0; i < this._size; i++) {\n    var existingElement = this._elements[this._index(i)];\n    if (element.equals(existingElement)) {\n      for (var j = i; j < this._size - 1; j++) {\n        this._elements[this._index(j)] = this._elements[this._index(j + 1)];\n      }\n      this._size--;\n      return existingElement;\n    }\n  }\n  return null;\n};\n\n// Returns whether an element is in the set.\nLruSet.prototype.has = function(element) {\n  for (var i = 0; i < this._size; i++) {\n    if (element.equals(this._elements[this._index(i)])) {\n      return true;\n    }\n  }\n  return false;\n};\n\n// Returns the number of elements in the set.\nLruSet.prototype.size = function() {\n  return this._size;\n};\n\n// Removes all elements from the set.\nLruSet.prototype.clear = function() {\n  this._elements.length = 0;\n  this._start = 0;\n  this._size = 0;\n};\n\n// Calls fn(element) for each element in the set, in an unspecified order.\n// Returns the number of times fn was called.\n// The result is unspecified if the set is mutated during iteration.\nLruSet.prototype.forEach = function(fn) {\n  var count = 0;\n  for (var i = 0; i < this._size; i++) {\n    fn(this._elements[this._index(i)]);\n    count += 1;\n  }\n  return count;\n};\n\nmodule.exports = LruSet;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nfunction defaults(obj, defaultsObj) {\n  for (var key in defaultsObj) {\n    if (!(key in obj)) {\n      obj[key] = defaultsObj[key];\n    }\n  }\n  return obj;\n}\n\nmodule.exports = defaults;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar noop = require('./noop');\n\n// Return a cancelable function that executes fn in a loop until it returns\n// successfully.\nfunction retry(fn) {\n\n  return function retried() {\n\n    var args = arguments.length ? Array.prototype.slice.call(arguments, 0, arguments.length - 1) : [];\n    var done = arguments.length ? arguments[arguments.length - 1] : noop;\n\n    var cfn = null;\n    var canceled = false;\n\n    function exec() {\n      var err = arguments[0];\n      if (!err || canceled) {\n        done.apply(null, arguments);\n      } else {\n        cfn = fn.apply(null, args);\n      }\n    }\n\n    args.push(exec);\n    exec(true);\n\n    return function cancel() {\n      canceled = true;\n      cfn.apply(null, arguments);\n    };\n\n  };\n\n}\n\nmodule.exports = retry;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar Map = require('./collections/Map');\nvar Set = require('./collections/Set');\nvar LruSet = require('./collections/LruSet');\nvar eventEmitter = require('minimal-event-emitter');\nvar defaults = require('./util/defaults');\nvar retry = require('./util/retry');\nvar chain = require('./util/chain');\nvar inherits = require('./util/inherits');\nvar clearOwnProperties = require('./util/clearOwnProperties');\n\nvar debug = typeof MARZIPANODEBUG !== 'undefined' && MARZIPANODEBUG.textureStore;\n\n\n// A Stage informs the TextureStore about the set of visible tiles during a\n// frame by calling startFrame, markTile and endFrame. In a particular frame,\n// TextureStore expects one or more calls to startFrame, followed by zero or\n// more calls to markTile, followed by one or more calls to endFrame. The\n// number of calls to startFrame and endFrame must match. Calls to other\n// TextureStore methods may be freely interleaved with this sequence.\n//\n// At any given time, TextureStore is in one of four states. The START state\n// corresponds to the interval between the first startFrame and the first\n// markTile of a frame. The MARK state corresponds to the interval between the\n// first markTile and the first endFrame. The END state corresponds to the\n// interval between the first and the last endFrame. At any other time, the\n// TextureStore is in the IDLE state.\nvar State = {\n  IDLE: 0,\n  START: 1,\n  MARK: 2,\n  END: 3\n};\n\n\nvar defaultOptions = {\n  // Maximum number of cached textures for previously visible tiles.\n  previouslyVisibleCacheSize: 512\n};\n\n\n// Assign an id to each operation so we can track its state.\n// We actually only need this in debug mode, but the code is less convoluted\n// if we track unconditionally, and the performance hit is minimal anyway.\nvar nextId = 0;\n\n\n// Distinguishes a cancellation from other kinds of errors.\nfunction CancelError() {}\ninherits(CancelError, Error);\n\n\n/**\n * @class TextureStoreItem\n * @classdesc\n *\n * An item saved in a {@link TextureStore}.\n *\n * Clients do not need to instantiate this. It is automatically instantiated by\n * a {@link TextureStore} to manage the lifetime of a stored item: loading,\n * refreshing, unloading and emitting associated events.\n *\n * @param {TextureStore} store The underlying {@link TextureStore}.\n * @param {Tile} tile The underlying tile.\n */\nfunction TextureStoreItem(store, tile) {\n\n  var self = this;\n\n  var id = nextId++;\n\n  self._id = id;\n  self._store = store;\n  self._tile = tile;\n\n  self._asset = null;\n  self._texture = null;\n\n  self._changeHandler = function() {\n    store.emit('textureInvalid', tile);\n  };\n\n  var source = store.source();\n  var stage = store.stage();\n\n  var loadAsset = source.loadAsset.bind(source);\n  var createTexture = stage.createTexture.bind(stage);\n\n  // Retry loading the asset until it succeeds, then create the texture from it.\n  // This process may be canceled at any point by calling the destroy() method.\n  var fn = chain(retry(loadAsset), createTexture);\n\n  store.emit('textureStartLoad', tile);\n  if (debug) {\n    console.log('loading', id, tile);\n  }\n\n  self._cancel = fn(stage, tile, function(err, _tile, asset, texture) {\n\n    // Make sure we do not call cancel after the operation is complete.\n    self._cancel = null;\n\n    if (err) {\n      // The loading process was interrupted by an error.\n      // This could either be because the texture creation failed, or because\n      // the operation was canceled before the loading was complete.\n\n      // Destroy the asset and texture, if they exist.\n      if (asset) {\n        asset.destroy();\n      }\n      if (texture) {\n        texture.destroy();\n      }\n\n      // Emit events.\n      if (err instanceof CancelError) {\n        store.emit('textureCancel', tile);\n        if (debug) {\n          console.log('cancel', id, tile);\n        }\n      } else {\n        store.emit('textureError', tile, err);\n        if (debug) {\n          console.log('error', id, tile);\n        }\n      }\n\n      return;\n    }\n\n    // Save a local reference to the texture.\n    self._texture = texture;\n\n    // If the asset is dynamic, save a local reference to it and set up a\n    // handler to be called whenever it changes. Otherwise, destroy the asset\n    // as we won't be needing it any longer.\n    if (asset.isDynamic()) {\n      self._asset = asset;\n      asset.addEventListener('change', self._changeHandler);\n    } else {\n      asset.destroy();\n    }\n\n    // Emit event.\n    store.emit('textureLoad', tile);\n    if (debug) {\n      console.log('load', id, tile);\n    }\n  });\n\n}\n\n\nTextureStoreItem.prototype.asset = function() {\n  return this._asset;\n};\n\n\nTextureStoreItem.prototype.texture = function() {\n  return this._texture;\n};\n\n\nTextureStoreItem.prototype.destroy = function() {\n  var id = this._id;\n  var store = this._store;\n  var tile = this._tile;\n  var asset = this._asset;\n  var texture = this._texture;\n  var cancel = this._cancel;\n\n  if (cancel) {\n    // The texture is still loading, so cancel it.\n    cancel(new CancelError('Texture load cancelled'));\n    return;\n  }\n\n  // Destroy asset.\n  if (asset) {\n    asset.removeEventListener('change', this._changeHandler);\n    asset.destroy();\n  }\n\n  // Destroy texture.\n  if (texture) {\n    texture.destroy();\n  }\n\n  // Emit event.\n  store.emit('textureUnload', tile);\n  if (debug) {\n    console.log('unload', id, tile);\n  }\n\n  clearOwnProperties(this);\n};\n\neventEmitter(TextureStoreItem);\n\n/**\n * Signals that a texture has started to load.\n *\n * This event is followed by either {@link TextureStore#textureLoad},\n * {@link TextureStore#textureError} or {@link TextureStore#textureCancel}.\n *\n * @event TextureStore#textureStartLoad\n * @param {Tile} tile The tile for which the texture has started to load.\n */\n\n/**\n * Signals that a texture has been loaded.\n *\n * @event TextureStore#textureLoad\n * @param {Tile} tile The tile for which the texture was loaded.\n */\n\n/**\n * Signals that a texture has been unloaded.\n *\n * @event TextureStore#textureUnload\n * @param {Tile} tile The tile for which the texture was unloaded.\n */\n\n/**\n * Signals that a texture has been invalidated.\n *\n * This event may be raised for a texture with an underlying dynamic asset. It\n * may only occur while the texture is loaded, i.e., in between\n * {@link TextureStore#textureLoad} and {@link TextureStore#textureUnload}.\n *\n * @event TextureStore#textureInvalid\n * @param {Tile} tile The tile for which the texture was invalidated.\n */\n\n/**\n * Signals that loading a texture has been cancelled.\n *\n * This event may follow {@link TextureStore#textureStartLoad} if the texture\n * becomes unnecessary before it finishes loading.\n *\n * @event TextureStore#textureCancel\n * @param {Tile} tile The tile for which the texture loading was cancelled.\n */\n\n/**\n * Signals that loading a texture has failed.\n *\n * This event may follow {@link TextureStore#textureStartLoad} if the texture\n * fails to load.\n *\n * @event TextureStore#textureError\n * @param {Tile} tile The tile for which the texture loading has failed.\n */\n\n/**\n * @class TextureStore\n * @classdesc\n *\n * A TextureStore maintains a cache of textures used to render a {@link Layer}.\n *\n * A {@link Stage} communicates with the TextureStore through the startFrame(),\n * markTile() and endFrame() methods, which indicate the tiles that are visible\n * in the current frame. Textures for visible tiles are loaded and retained\n * as long as the tiles remain visible. A limited amount of textures whose\n * tiles were previously visible are cached according to an LRU policy. Tiles\n * may be pinned to keep their respective textures cached even when they are\n * invisible; these textures do not count towards the previously visible limit.\n *\n * Multiple layers belonging to the same underlying {@link WebGlStage} may\n * share the same TextureStore. Layers belonging to distinct {@link WebGlStage}\n * instances, or belonging to a {@link CssStage} or a {@link FlashStage},\n * may not do so due to restrictions on the use of textures across stages.\n *\n * @param {Source} source The underlying source.\n * @param {Stage} stage The underlying stage.\n * @param {Object} opts Options.\n * @param {Number} [opts.previouslyVisibleCacheSize=32] The maximum number of\n *     previously visible textures to cache according to an LRU policy.\n */\nfunction TextureStore(source, stage, opts) {\n  opts = defaults(opts || {}, defaultOptions);\n\n  this._source = source;\n  this._stage = stage;\n\n  // The current state.\n  this._state = State.IDLE;\n\n  // The number of startFrame calls yet to be matched by endFrame calls during\n  // the current frame.\n  this._delimCount = 0;\n\n  // The cache proper: map cached tiles to their respective textures/assets.\n  this._itemMap = new Map();\n\n  // The subset of cached tiles that are currently visible.\n  this._visible = new Set();\n\n  // The subset of cached tiles that were visible recently, but are not\n  // visible right now. Newly inserted tiles replace older ones.\n  this._previouslyVisible = new LruSet(opts.previouslyVisibleCacheSize);\n\n  // The subset of cached tiles that should never be evicted from the cache.\n  // A tile may be pinned more than once; map each tile into a reference count.\n  this._pinMap = new Map();\n\n  // Temporary variables.\n  this._newVisible = new Set();\n  this._noLongerVisible = [];\n  this._visibleAgain = [];\n  this._evicted = [];\n}\n\neventEmitter(TextureStore);\n\n\n/**\n * Destructor.\n */\nTextureStore.prototype.destroy = function() {\n  this.clear();\n  clearOwnProperties(this);\n};\n\n\n/**\n * Return the underlying {@link Stage}.\n * @return {Stage}\n */\nTextureStore.prototype.stage = function() {\n  return this._stage;\n};\n\n\n/**\n * Return the underlying {@link Source}.\n * @return {Source}\n */\nTextureStore.prototype.source = function() {\n  return this._source;\n};\n\n\n/**\n * Remove all textures from the TextureStore, including pinned textures.\n */\nTextureStore.prototype.clear = function() {\n  var self = this;\n\n  // Collect list of tiles to be evicted.\n  self._evicted.length = 0;\n  self._itemMap.forEach(function(tile) {\n    self._evicted.push(tile);\n  });\n\n  // Evict tiles.\n  self._evicted.forEach(function(tile) {\n    self._unloadTile(tile);\n  });\n\n  // Clear all internal state.\n  self._itemMap.clear();\n  self._visible.clear();\n  self._previouslyVisible.clear();\n  self._pinMap.clear();\n  self._newVisible.clear();\n  self._noLongerVisible.length = 0;\n  self._visibleAgain.length = 0;\n  self._evicted.length = 0;\n};\n\n\n/**\n * Remove all textures in the TextureStore, excluding unpinned textures.\n */\nTextureStore.prototype.clearNotPinned = function() {\n  var self = this;\n\n  // Collect list of tiles to be evicted.\n  self._evicted.length = 0;\n  self._itemMap.forEach(function(tile) {\n    if (!self._pinMap.has(tile)) {\n      self._evicted.push(tile);\n    }\n  });\n\n  // Evict tiles.\n  self._evicted.forEach(function(tile) {\n    self._unloadTile(tile);\n  });\n\n  // Clear all caches except the pinned set.\n  self._visible.clear();\n  self._previouslyVisible.clear();\n\n  // Clear temporary variables.\n  self._evicted.length = 0;\n};\n\n\n/**\n * Signal the beginning of a frame. Called from {@link Stage}.\n */\nTextureStore.prototype.startFrame = function() {\n  // Check that we are in an appropriate state.\n  if (this._state !== State.IDLE && this._state !== State.START) {\n    throw new Error('TextureStore: startFrame called out of sequence');\n  }\n\n  // Enter the START state, if not already there.\n  this._state = State.START;\n\n  // Expect one more endFrame call.\n  this._delimCount++;\n};\n\n\n/**\n * Mark a tile as visible within the current frame. Called from {@link Stage}.\n * @param {Tile} tile The tile to mark.\n */\nTextureStore.prototype.markTile = function(tile) {\n  // Check that we are in an appropriate state.\n  if (this._state !== State.START && this._state !== State.MARK) {\n    throw new Error('TextureStore: markTile called out of sequence');\n  }\n\n  // Enter the MARK state, if not already there.\n  this._state = State.MARK;\n\n  // Refresh texture for dynamic assets.\n  var item = this._itemMap.get(tile);\n  var texture = item && item.texture();\n  var asset = item && item.asset();\n  if (texture && asset) {\n    texture.refresh(tile, asset);\n  }\n\n  // Add tile to the visible set.\n  this._newVisible.add(tile);\n};\n\n\n/**\n * Signal the end of a frame. Called from {@link Stage}.\n */\nTextureStore.prototype.endFrame = function() {\n  // Check that we are in an appropriate state.\n  if (this._state !== State.START && this._state !== State.MARK && this._state !== State.END) {\n    throw new Error('TextureStore: endFrame called out of sequence');\n  }\n\n  // Enter the END state, if not already there.\n  this._state = State.END;\n\n  // Expect one less call to endFrame.\n  this._delimCount--;\n\n  // If no further calls are expected, process frame and enter the IDLE state.\n  if (!this._delimCount) {\n    this._update();\n    this._state = State.IDLE;\n  }\n};\n\n\nTextureStore.prototype._update = function() {\n  var self = this;\n\n  // Calculate the set of tiles that used to be visible but no longer are.\n  self._noLongerVisible.length = 0;\n  self._visible.forEach(function(tile) {\n    if (!self._newVisible.has(tile)) {\n      self._noLongerVisible.push(tile);\n    }\n  });\n\n  // Calculate the set of tiles that were visible recently and have become\n  // visible again.\n  self._visibleAgain.length = 0;\n  self._newVisible.forEach(function(tile) {\n    if (self._previouslyVisible.has(tile)) {\n      self._visibleAgain.push(tile);\n    }\n  });\n\n  // Remove tiles that have become visible again from the list of previously\n  // visible tiles.\n  self._visibleAgain.forEach(function(tile) {\n    self._previouslyVisible.remove(tile);\n  });\n\n  // Cancel loading of tiles that are no longer visible.\n  // Move no longer visible tiles with a loaded texture into the previously\n  // visible set, and collect the tiles evicted from the latter.\n  self._evicted.length = 0;\n  self._noLongerVisible.forEach(function(tile) {\n    var item = self._itemMap.get(tile);\n    var texture = item && item.texture();\n    if (texture) {\n      var otherTile = self._previouslyVisible.add(tile);\n      if (otherTile != null) {\n        self._evicted.push(otherTile);\n      }\n    } else if (item) {\n      self._unloadTile(tile);\n    }\n  });\n\n  // Unload evicted tiles, unless they are pinned.\n  self._evicted.forEach(function(tile) {\n    if (!self._pinMap.has(tile)) {\n      self._unloadTile(tile);\n    }\n  });\n\n  // Load visible tiles that are not already in the store.\n  // Refresh texture on visible tiles for dynamic assets.\n  self._newVisible.forEach(function(tile) {\n    var item = self._itemMap.get(tile);\n    if (!item) {\n      self._loadTile(tile);\n    }\n  });\n\n  // Swap the old visible set with the new one.\n  var tmp = self._visible;\n  self._visible = self._newVisible;\n  self._newVisible = tmp;\n\n  // Clear the new visible set.\n  self._newVisible.clear();\n\n  // Clear temporary variables.\n  self._noLongerVisible.length = 0;\n  self._visibleAgain.length = 0;\n  self._evicted.length = 0;\n};\n\n\nTextureStore.prototype._loadTile = function(tile) {\n  if (this._itemMap.has(tile)) {\n    throw new Error('TextureStore: loading texture already in cache');\n  }\n  var item = new TextureStoreItem(this, tile);\n  this._itemMap.set(tile, item);\n};\n\n\nTextureStore.prototype._unloadTile = function(tile) {\n  var item = this._itemMap.del(tile);\n  if (!item) {\n    throw new Error('TextureStore: unloading texture not in cache');\n  }\n  item.destroy();\n};\n\n\nTextureStore.prototype.asset = function(tile) {\n  var item = this._itemMap.get(tile);\n  if (item) {\n    return item.asset();\n  }\n  return null;\n};\n\n\nTextureStore.prototype.texture = function(tile) {\n  var item = this._itemMap.get(tile);\n  if (item) {\n    return item.texture();\n  }\n  return null;\n};\n\n\n/**\n * Pin a tile. Textures for pinned tiles are never evicted from the store.\n * Upon pinning, the texture is created if not already present. Pins are\n * reference-counted; a tile may be pinned multiple times and must be unpinned\n * the corresponding number of times. Pinning is useful e.g. to ensure that\n * the lowest-resolution level of an image is always available to fall back\n * onto.\n * @param {Tile} tile the tile to pin\n * @returns {number} the pin reference count.\n */\nTextureStore.prototype.pin = function(tile) {\n  // Increment reference count.\n  var count = (this._pinMap.get(tile) || 0) + 1;\n  this._pinMap.set(tile, count);\n  // If the texture for the tile is not present, load it now.\n  if (!this._itemMap.has(tile)) {\n    this._loadTile(tile);\n  }\n  return count;\n};\n\n\n/**\n * Unpin a tile. Pins are reference-counted; a tile may be pinned multiple\n * times and must be unpinned the corresponding number of times.\n * @param {Tile} tile the tile to unpin\n * @returns {number} the pin reference count.\n */\nTextureStore.prototype.unpin = function(tile) {\n  var count = this._pinMap.get(tile);\n  // Consistency check.\n  if (!count) {\n    throw new Error('TextureStore: unpin when not pinned');\n  } else {\n    // Decrement reference count.\n    count--;\n    if (count > 0) {\n      this._pinMap.set(tile, count);\n    } else {\n      this._pinMap.del(tile);\n      // If the tile does not belong to either the visible or previously\n      // visible sets, evict it from the cache.\n      if (!this._visible.has(tile) && !this._previouslyVisible.has(tile)) {\n        this._unloadTile(tile);\n      }\n    }\n  }\n  return count;\n};\n\n\n/**\n * Return type for {@link TextureStore#query}.\n * @typedef {Object} TileState\n * @property {boolean} visible Whether the tile is in the visible set.\n * @property {boolean} previouslyVisible Whether the tile is in the previously\n *     visible set.\n * @property {boolean} hasAsset Whether the asset for the tile is present.\n * @property {boolean} hasTexture Whether the texture for the tile is present.\n * @property {boolean} pinned Whether the tile is in the pinned set.\n * @property {number} pinCount The pin reference count for the tile.\n */\n\n\n/**\n * Return the state of a tile.\n * @param {Tile} tile The tile to query.\n * @return {TileState}\n */\nTextureStore.prototype.query = function(tile) {\n  var item = this._itemMap.get(tile);\n  var pinCount = this._pinMap.get(tile) || 0;\n  return {\n    visible: this._visible.has(tile),\n    previouslyVisible: this._previouslyVisible.has(tile),\n    hasAsset: item != null && item.asset() != null,\n    hasTexture: item != null && item.texture() != null,\n    pinned: pinCount !== 0,\n    pinCount: pinCount\n  };\n};\n\n\nmodule.exports = TextureStore;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nfunction extend(obj, sourceObj) {\n  for (var key in sourceObj) {\n    obj[key] = sourceObj[key];\n  }\n  return obj;\n}\n\nmodule.exports = extend;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n\nvar eventEmitter = require('minimal-event-emitter');\nvar extend = require('./util/extend');\nvar clearOwnProperties = require('./util/clearOwnProperties');\n\n/**\n * Signals that the layer has been rendered.\n *\n * @param {boolean} stable Whether all tiles were successfully rendered without\n *     missing textures or resorting to fallbacks.\n * @event Layer#renderComplete\n */\n\n/**\n * @class Layer\n * @classdesc\n *\n * A Layer is a combination of {@link Source}, {@link Geometry}, {@link View}\n * and {@link TextureStore} that may be added into a {@link Stage} and rendered\n * with {@link Effects}.\n *\n * @param {Source} source\n * @param {Geometry} geometry\n * @param {View} view\n * @param {TextureStore} textureStore\n * @param {Object} opts\n * @param {Effects} opts.effects\n*/\nfunction Layer(source, geometry, view, textureStore, opts) {\n  opts = opts || {};\n\n  var self = this;\n\n  this._source = source;\n  this._geometry = geometry;\n  this._view = view;\n  this._textureStore = textureStore;\n\n  this._effects = opts.effects || {};\n\n  this._fixedLevelIndex = null;\n\n  this._viewChangeHandler = function() {\n    self.emit('viewChange', self.view());\n  };\n\n  this._view.addEventListener('change', this._viewChangeHandler);\n\n  this._textureStoreChangeHandler = function() {\n    self.emit('textureStoreChange', self.textureStore());\n  };\n\n  this._textureStore.addEventListener('textureLoad',\n    this._textureStoreChangeHandler);\n  this._textureStore.addEventListener('textureError',\n    this._textureStoreChangeHandler);\n  this._textureStore.addEventListener('textureInvalid',\n    this._textureStoreChangeHandler);\n}\n\neventEmitter(Layer);\n\n\n/**\n * Destructor.\n */\nLayer.prototype.destroy = function() {\n  this._view.removeEventListener('change', this._viewChangeHandler);\n  this._textureStore.removeEventListener('textureLoad',\n    this._textureStoreChangeHandler);\n  this._textureStore.removeEventListener('textureError',\n    this._textureStoreChangeHandler);\n  this._textureStore.removeEventListener('textureInvalid',\n    this._textureStoreChangeHandler);\n  clearOwnProperties(this);\n};\n\n\n/**\n * Returns the underlying {@link Source source}.\n * @return {Source}\n */\nLayer.prototype.source = function() {\n  return this._source;\n};\n\n\n/**\n * Returns the underlying {@link Geometry geometry}.\n * @return {Geometry}\n */\nLayer.prototype.geometry = function() {\n  return this._geometry;\n};\n\n\n/**\n * Returns the underlying {@link View view}.\n * @return {View}\n */\nLayer.prototype.view = function() {\n  return this._view;\n};\n\n\n/**\n * Returns the underlying {@link TextureStore texture store}.\n * @return {TextureStore}\n */\nLayer.prototype.textureStore = function() {\n  return this._textureStore;\n};\n\n\n/**\n * Returns the currently set {@link Effects effects}.\n * @return {Effects}\n */\nLayer.prototype.effects = function() {\n  return this._effects;\n};\n\n\n/**\n * Sets the {@link Effects effects}.\n * @param {Effects} effects\n */\nLayer.prototype.setEffects = function(effects) {\n  this._effects = effects;\n  this.emit('effectsChange', this._effects);\n};\n\n\n/**\n * Merges effects into the currently set ones. The merge is non-recursive; for\n * instance, if current effects are `{ rect: { relativeWidth: 0.5 } }`,\n * calling this method with `{ rect: { relativeX: 0.5 }}` will reset\n * `rect.relativeWidth`.\n *\n * @param {Effects} effects\n */\nLayer.prototype.mergeEffects = function(effects) {\n  extend(this._effects, effects);\n  this.emit('effectsChange', this._effects);\n};\n\n\n/**\n * Returns the fixed level index.\n * @return {(number|null)}\n */\nLayer.prototype.fixedLevel = function() {\n  return this._fixedLevelIndex;\n};\n\n\n/**\n * Sets the fixed level index. When set, the corresponding level will be\n * used regardless of the view parameters. Unset with a null argument.\n *\n * @param {(number|null)} levelIndex\n * @throws An error if the level index is out of range.\n */\nLayer.prototype.setFixedLevel = function(levelIndex) {\n  if (levelIndex !== this._fixedLevelIndex) {\n    if (levelIndex != null && (levelIndex >= this._geometry.levelList.length ||\n        levelIndex < 0)) {\n      throw new Error(\"Level index out of range: \" + levelIndex);\n    }\n    this._fixedLevelIndex = levelIndex;\n    this.emit('fixedLevelChange', this._fixedLevelIndex);\n  }\n};\n\n\nLayer.prototype._selectLevel = function() {\n  var level;\n  if (this._fixedLevelIndex != null) {\n    level = this._geometry.levelList[this._fixedLevelIndex];\n  } else {\n    level = this._view.selectLevel(this._geometry.selectableLevelList);\n  }\n  return level;\n};\n\n\nLayer.prototype.visibleTiles = function(result) {\n  var level = this._selectLevel();\n  return this._geometry.visibleTiles(this._view, level, result);\n};\n\n\n/**\n * Pin a whole level into the texture store.\n * @param {Number} levelIndex\n */\nLayer.prototype.pinLevel = function(levelIndex) {\n  var level = this._geometry.levelList[levelIndex];\n  var tiles = this._geometry.levelTiles(level);\n  for (var i = 0; i < tiles.length; i++) {\n    this._textureStore.pin(tiles[i]);\n  }\n};\n\n\n/**\n * Unpin a whole level from the texture store.\n * @param {Number} levelIndex\n */\nLayer.prototype.unpinLevel = function(levelIndex) {\n  var level = this._geometry.levelList[levelIndex];\n  var tiles = this._geometry.levelTiles(level);\n  for (var i = 0; i < tiles.length; i++) {\n    this._textureStore.unpin(tiles[i]);\n  }\n};\n\n\n/**\n * Pin the first level. Equivalent to `pinLevel(0)`.\n */\nLayer.prototype.pinFirstLevel = function() {\n  return this.pinLevel(0);\n};\n\n\n/**\n * Unpin the first level. Equivalent to `unpinLevel(0)`.\n */\nLayer.prototype.unpinFirstLevel = function() {\n  return this.unpinLevel(0);\n};\n\n\nmodule.exports = Layer;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar clearOwnProperties = require('./util/clearOwnProperties');\n\n/**\n * Signals that {@link Stage#render} is about to be called.\n * @event RenderLoop#beforeRender\n */\n\n/**\n * Signals that {@link Stage#render} has just been called.\n * @event RenderLoop#afterRender\n */\n\n/**\n * @class RenderLoop\n * @classdesc\n *\n * A RenderLoop wraps a {@link Stage} and calls {@link Stage#render} on the next\n * frame whenever it fires {@link Stage#renderInvalid}. It may be started and\n * stopped, and is initially in the stopped state, in which no call to\n * {@link Stage#render} occurs.\n *\n * @listens Stage#renderInvalid\n *\n * @param {Stage} stage\n */\nfunction RenderLoop(stage) {\n\n  var self = this;\n\n  // The stage wrapped by the loop.\n  this._stage = stage;\n\n  // Whether the loop is running.\n  this._running = false;\n\n  // Whether the loop is currently rendering.\n  this._rendering = false;\n\n  // The current requestAnimationFrame handle.\n  this._requestHandle = null;\n\n  // The callback passed into requestAnimationFrame.\n  this._boundLoop = this._loop.bind(this);\n\n  // Handler for renderInvalid events emitted by the stage.\n  this._renderInvalidHandler = function() {\n    // If we are already rendering, there's no need to schedule a new render\n    // on the next frame.\n    if (!self._rendering) {\n      self.renderOnNextFrame();\n    }\n  };\n\n  // Handle renderInvalid events emitted by the stage.\n  this._stage.addEventListener('renderInvalid', this._renderInvalidHandler);\n\n}\n\neventEmitter(RenderLoop);\n\n\n/**\n * Destructor.\n */\nRenderLoop.prototype.destroy = function() {\n  this.stop();\n  this._stage.removeEventListener('renderInvalid', this._renderInvalidHandler);\n  clearOwnProperties(this);\n};\n\n\n/**\n * Returns the underlying stage.\n * @return {Stage}\n */\nRenderLoop.prototype.stage = function() {\n  return this._stage;\n};\n\n\n/**\n * Starts the render loop.\n */\nRenderLoop.prototype.start = function() {\n  this._running = true;\n  this.renderOnNextFrame();\n};\n\n\n/**\n * Stops the render loop.\n */\nRenderLoop.prototype.stop = function() {\n  if (this._requestHandle) {\n    window.cancelAnimationFrame(this._requestHandle);\n    this._requestHandle = null;\n  }\n  this._running = false;\n};\n\n\n/**\n * Forces the stage to render on the next frame, even if its contents remain\n * valid. Does nothing if the loop is stopped.\n */\nRenderLoop.prototype.renderOnNextFrame = function() {\n  if (this._running && !this._requestHandle) {\n    this._requestHandle = window.requestAnimationFrame(this._boundLoop);\n  }\n};\n\n\nRenderLoop.prototype._loop = function() {\n  if (!this._running) {\n    throw new Error('Render loop running while in stopped state');\n  }\n  this._requestHandle = null;\n  this._rendering = true;\n  this.emit('beforeRender');\n  this._rendering = false;\n  this._stage.render();\n  this.emit('afterRender');\n};\n\n\nmodule.exports = RenderLoop;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n/**\n * @class Dynamics\n * @classdesc\n *\n * Represents how a control parameter changes. Used in the events emitted by\n * {@link ControlMethod}.\n *\n * @property {number} offset Parameter changed by a fixed value\n * @property {number} velocity Parameter is changing at this velocity\n * @property {number} friction The velocity will decrease at this rate\n */\nfunction Dynamics() {\n  this.velocity = null;\n  this.friction = null;\n  this.offset = null;\n}\n\nDynamics.equals = function(d1, d2) {\n  return d1.velocity === d2.velocity && d1.friction === d2.friction && d1.offset === d2.offset;\n};\n\nDynamics.prototype.equals = function(other) {\n  return Dynamics.equals(this, other);\n};\n\nDynamics.prototype.update = function(other, elapsed) {\n  if (other.offset) {\n    // If other has an offset, make this.offset a number instead of null\n    this.offset = this.offset || 0;\n    this.offset += other.offset;\n  }\n\n  var offsetFromVelocity = this.offsetFromVelocity(elapsed);\n  if (offsetFromVelocity) {\n    // If there is an offset to add from the velocity, make this offset a number instead of null\n    this.offset = this.offset || 0;\n    this.offset += offsetFromVelocity;\n  }\n\n  this.velocity = other.velocity;\n  this.friction = other.friction;\n};\n\nDynamics.prototype.reset = function() {\n  this.velocity = null;\n  this.friction = null;\n  this.offset = null;\n};\n\n\nDynamics.prototype.velocityAfter = function(elapsed) {\n  if (!this.velocity) {\n    return null;\n  }\n  if (this.friction) {\n    return decreaseAbs(this.velocity, this.friction *elapsed);\n  }\n  return this.velocity;\n};\n\nDynamics.prototype.offsetFromVelocity = function(elapsed) {\n  elapsed = Math.min(elapsed, this.nullVelocityTime());\n\n  var velocityEnd = this.velocityAfter(elapsed);\n  var averageVelocity = (this.velocity + velocityEnd) / 2;\n\n  return averageVelocity * elapsed;\n};\n\n\nDynamics.prototype.nullVelocityTime = function() {\n  if (this.velocity == null) {\n    return 0;\n  }\n  if (this.velocity && !this.friction) {\n    return Infinity;\n  }\n  return Math.abs(this.velocity / this.friction);\n};\n\nfunction decreaseAbs(num, dec) {\n  if (num < 0) {\n    return Math.min(0, num + dec);\n  }\n  if (num > 0) {\n    return Math.max(0, num - dec);\n  }\n  return 0;\n}\n\nmodule.exports = Dynamics;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar Dynamics = require('./Dynamics');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\n/**\n * @class KeyControlMethod\n * @implements ControlMethod\n * @classdesc\n *\n * Sets the velocity and friction of a single parameter by pressing and\n * unpressing a key.\n *\n * @param {number} keyCode Key which activates the method when pressed\n * @param {string} parameter The parameter to be controlled (e.g. `x`, `y` or `zoom`)\n * @param {number} velocity Velocity at which the parameter changes. Use a\n * negative number for opposite direction\n * @param {number} friction Friction at which the parameter stops\n * @param {Element} [element=document] DOM element where the key events are listened to\n */\nfunction KeyControlMethod(keyCode, parameter, velocity, friction, element) {\n  if(!keyCode) {\n    throw new Error(\"KeyControlMethod: keyCode must be defined\");\n  }\n  if(!parameter) {\n    throw new Error(\"KeyControlMethod: parameter must be defined\");\n  }\n  if(!velocity) {\n    throw new Error(\"KeyControlMethod: velocity must be defined\");\n  }\n  if(!friction) {\n    throw new Error(\"KeyControlMethod: friction must be defined\");\n  }\n\n  element = element || document;\n\n  this._keyCode = keyCode;\n  this._parameter = parameter;\n  this._velocity = velocity;\n  this._friction = friction;\n  this._element = element;\n\n  this._keydownHandler = this._handlePress.bind(this);\n  this._keyupHandler = this._handleRelease.bind(this);\n  this._blurHandler = this._handleBlur.bind(this);\n\n  this._element.addEventListener('keydown', this._keydownHandler);\n  this._element.addEventListener('keyup', this._keyupHandler);\n  window.addEventListener('blur', this._blurHandler);\n\n  this._dynamics = new Dynamics();\n  this._pressing = false;\n}\neventEmitter(KeyControlMethod);\n\n/**\n * Destructor.\n */\nKeyControlMethod.prototype.destroy = function() {\n  this._element.removeEventListener('keydown', this._keydownHandler);\n  this._element.removeEventListener('keyup', this._keyupHandler);\n  window.removeEventListener('blur', this._blurHandler);\n  clearOwnProperties(this);\n};\n\nKeyControlMethod.prototype._handlePress = function(e) {\n  if(e.keyCode !== this._keyCode) { return; }\n\n  this._pressing = true;\n\n  this._dynamics.velocity = this._velocity;\n  this._dynamics.friction = 0;\n  this.emit('parameterDynamics', this._parameter, this._dynamics);\n  this.emit('active');\n};\n\nKeyControlMethod.prototype._handleRelease = function(e) {\n  if(e.keyCode !== this._keyCode) { return; }\n\n  if(this._pressing) {\n    this._dynamics.friction = this._friction;\n    this.emit('parameterDynamics', this._parameter, this._dynamics);\n    this.emit('inactive');\n  }\n\n  this._pressing = false;\n};\n\nKeyControlMethod.prototype._handleBlur = function() {\n  this._dynamics.velocity = 0;\n  this.emit('parameterDynamics', this._parameter, this._dynamics);\n  this.emit('inactive');\n\n  this._pressing = false;\n};\n\nmodule.exports = KeyControlMethod;\n","/*! Hammer.JS - v2.0.4 - 2014-09-28\r\n * http://hammerjs.github.io/\r\n *\r\n * Copyright (c) 2014 Jorik Tangelder;\r\n * Licensed under the MIT license */\r\n(function(window, document, exportName, undefined) {\r\n  'use strict';\r\n\r\nvar VENDOR_PREFIXES = ['', 'webkit', 'moz', 'MS', 'ms', 'o'];\r\nvar TEST_ELEMENT = document.createElement('div');\r\n\r\nvar TYPE_FUNCTION = 'function';\r\n\r\nvar round = Math.round;\r\nvar abs = Math.abs;\r\nvar now = Date.now;\r\n\r\n/**\r\n * set a timeout with a given scope\r\n * @param {Function} fn\r\n * @param {Number} timeout\r\n * @param {Object} context\r\n * @returns {number}\r\n */\r\nfunction setTimeoutContext(fn, timeout, context) {\r\n    return setTimeout(bindFn(fn, context), timeout);\r\n}\r\n\r\n/**\r\n * if the argument is an array, we want to execute the fn on each entry\r\n * if it aint an array we don't want to do a thing.\r\n * this is used by all the methods that accept a single and array argument.\r\n * @param {*|Array} arg\r\n * @param {String} fn\r\n * @param {Object} [context]\r\n * @returns {Boolean}\r\n */\r\nfunction invokeArrayArg(arg, fn, context) {\r\n    if (Array.isArray(arg)) {\r\n        each(arg, context[fn], context);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * walk objects and arrays\r\n * @param {Object} obj\r\n * @param {Function} iterator\r\n * @param {Object} context\r\n */\r\nfunction each(obj, iterator, context) {\r\n    var i;\r\n\r\n    if (!obj) {\r\n        return;\r\n    }\r\n\r\n    if (obj.forEach) {\r\n        obj.forEach(iterator, context);\r\n    } else if (obj.length !== undefined) {\r\n        i = 0;\r\n        while (i < obj.length) {\r\n            iterator.call(context, obj[i], i, obj);\r\n            i++;\r\n        }\r\n    } else {\r\n        for (i in obj) {\r\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * extend object.\r\n * means that properties in dest will be overwritten by the ones in src.\r\n * @param {Object} dest\r\n * @param {Object} src\r\n * @param {Boolean} [merge]\r\n * @returns {Object} dest\r\n */\r\nfunction extend(dest, src, merge) {\r\n    var keys = Object.keys(src);\r\n    var i = 0;\r\n    while (i < keys.length) {\r\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\r\n            dest[keys[i]] = src[keys[i]];\r\n        }\r\n        i++;\r\n    }\r\n    return dest;\r\n}\r\n\r\n/**\r\n * merge the values from src in the dest.\r\n * means that properties that exist in dest will not be overwritten by src\r\n * @param {Object} dest\r\n * @param {Object} src\r\n * @returns {Object} dest\r\n */\r\nfunction merge(dest, src) {\r\n    return extend(dest, src, true);\r\n}\r\n\r\n/**\r\n * simple class inheritance\r\n * @param {Function} child\r\n * @param {Function} base\r\n * @param {Object} [properties]\r\n */\r\nfunction inherit(child, base, properties) {\r\n    var baseP = base.prototype,\r\n        childP;\r\n\r\n    childP = child.prototype = Object.create(baseP);\r\n    childP.constructor = child;\r\n    childP._super = baseP;\r\n\r\n    if (properties) {\r\n        extend(childP, properties);\r\n    }\r\n}\r\n\r\n/**\r\n * simple function bind\r\n * @param {Function} fn\r\n * @param {Object} context\r\n * @returns {Function}\r\n */\r\nfunction bindFn(fn, context) {\r\n    return function boundFn() {\r\n        return fn.apply(context, arguments);\r\n    };\r\n}\r\n\r\n/**\r\n * let a boolean value also be a function that must return a boolean\r\n * this first item in args will be used as the context\r\n * @param {Boolean|Function} val\r\n * @param {Array} [args]\r\n * @returns {Boolean}\r\n */\r\nfunction boolOrFn(val, args) {\r\n    if (typeof val == TYPE_FUNCTION) {\r\n        return val.apply(args ? args[0] || undefined : undefined, args);\r\n    }\r\n    return val;\r\n}\r\n\r\n/**\r\n * use the val2 when val1 is undefined\r\n * @param {*} val1\r\n * @param {*} val2\r\n * @returns {*}\r\n */\r\nfunction ifUndefined(val1, val2) {\r\n    return (val1 === undefined) ? val2 : val1;\r\n}\r\n\r\n/**\r\n * addEventListener with multiple events at once\r\n * @param {EventTarget} target\r\n * @param {String} types\r\n * @param {Function} handler\r\n */\r\nfunction addEventListeners(target, types, handler) {\r\n    each(splitStr(types), function(type) {\r\n        target.addEventListener(type, handler, false);\r\n    });\r\n}\r\n\r\n/**\r\n * removeEventListener with multiple events at once\r\n * @param {EventTarget} target\r\n * @param {String} types\r\n * @param {Function} handler\r\n */\r\nfunction removeEventListeners(target, types, handler) {\r\n    each(splitStr(types), function(type) {\r\n        target.removeEventListener(type, handler, false);\r\n    });\r\n}\r\n\r\n/**\r\n * find if a node is in the given parent\r\n * @method hasParent\r\n * @param {HTMLElement} node\r\n * @param {HTMLElement} parent\r\n * @return {Boolean} found\r\n */\r\nfunction hasParent(node, parent) {\r\n    while (node) {\r\n        if (node == parent) {\r\n            return true;\r\n        }\r\n        node = node.parentNode;\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * small indexOf wrapper\r\n * @param {String} str\r\n * @param {String} find\r\n * @returns {Boolean} found\r\n */\r\nfunction inStr(str, find) {\r\n    return str.indexOf(find) > -1;\r\n}\r\n\r\n/**\r\n * split string on whitespace\r\n * @param {String} str\r\n * @returns {Array} words\r\n */\r\nfunction splitStr(str) {\r\n    return str.trim().split(/\\s+/g);\r\n}\r\n\r\n/**\r\n * find if a array contains the object using indexOf or a simple polyFill\r\n * @param {Array} src\r\n * @param {String} find\r\n * @param {String} [findByKey]\r\n * @return {Boolean|Number} false when not found, or the index\r\n */\r\nfunction inArray(src, find, findByKey) {\r\n    if (src.indexOf && !findByKey) {\r\n        return src.indexOf(find);\r\n    } else {\r\n        var i = 0;\r\n        while (i < src.length) {\r\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\r\n                return i;\r\n            }\r\n            i++;\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\n/**\r\n * convert array-like objects to real arrays\r\n * @param {Object} obj\r\n * @returns {Array}\r\n */\r\nfunction toArray(obj) {\r\n    return Array.prototype.slice.call(obj, 0);\r\n}\r\n\r\n/**\r\n * unique array with objects based on a key (like 'id') or just by the array's value\r\n * @param {Array} src [{id:1},{id:2},{id:1}]\r\n * @param {String} [key]\r\n * @param {Boolean} [sort=False]\r\n * @returns {Array} [{id:1},{id:2}]\r\n */\r\nfunction uniqueArray(src, key, sort) {\r\n    var results = [];\r\n    var values = [];\r\n    var i = 0;\r\n\r\n    while (i < src.length) {\r\n        var val = key ? src[i][key] : src[i];\r\n        if (inArray(values, val) < 0) {\r\n            results.push(src[i]);\r\n        }\r\n        values[i] = val;\r\n        i++;\r\n    }\r\n\r\n    if (sort) {\r\n        if (!key) {\r\n            results = results.sort();\r\n        } else {\r\n            results = results.sort(function sortUniqueArray(a, b) {\r\n                return a[key] > b[key];\r\n            });\r\n        }\r\n    }\r\n\r\n    return results;\r\n}\r\n\r\n/**\r\n * get the prefixed property\r\n * @param {Object} obj\r\n * @param {String} property\r\n * @returns {String|Undefined} prefixed\r\n */\r\nfunction prefixed(obj, property) {\r\n    var prefix, prop;\r\n    var camelProp = property[0].toUpperCase() + property.slice(1);\r\n\r\n    var i = 0;\r\n    while (i < VENDOR_PREFIXES.length) {\r\n        prefix = VENDOR_PREFIXES[i];\r\n        prop = (prefix) ? prefix + camelProp : property;\r\n\r\n        if (prop in obj) {\r\n            return prop;\r\n        }\r\n        i++;\r\n    }\r\n    return undefined;\r\n}\r\n\r\n/**\r\n * get a unique id\r\n * @returns {number} uniqueId\r\n */\r\nvar _uniqueId = 1;\r\nfunction uniqueId() {\r\n    return _uniqueId++;\r\n}\r\n\r\n/**\r\n * get the window object of an element\r\n * @param {HTMLElement} element\r\n * @returns {DocumentView|Window}\r\n */\r\nfunction getWindowForElement(element) {\r\n    var doc = element.ownerDocument;\r\n    return (doc.defaultView || doc.parentWindow);\r\n}\r\n\r\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\r\n\r\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\r\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\r\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\r\n\r\nvar INPUT_TYPE_TOUCH = 'touch';\r\nvar INPUT_TYPE_PEN = 'pen';\r\nvar INPUT_TYPE_MOUSE = 'mouse';\r\nvar INPUT_TYPE_KINECT = 'kinect';\r\n\r\nvar COMPUTE_INTERVAL = 25;\r\n\r\nvar INPUT_START = 1;\r\nvar INPUT_MOVE = 2;\r\nvar INPUT_END = 4;\r\nvar INPUT_CANCEL = 8;\r\n\r\nvar DIRECTION_NONE = 1;\r\nvar DIRECTION_LEFT = 2;\r\nvar DIRECTION_RIGHT = 4;\r\nvar DIRECTION_UP = 8;\r\nvar DIRECTION_DOWN = 16;\r\n\r\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\r\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\r\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\r\n\r\nvar PROPS_XY = ['x', 'y'];\r\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\r\n\r\n/**\r\n * create new input type manager\r\n * @param {Manager} manager\r\n * @param {Function} callback\r\n * @returns {Input}\r\n * @constructor\r\n */\r\nfunction Input(manager, callback) {\r\n    var self = this;\r\n    this.manager = manager;\r\n    this.callback = callback;\r\n    this.element = manager.element;\r\n    this.target = manager.options.inputTarget;\r\n\r\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\r\n    // so when disabled the input events are completely bypassed.\r\n    this.domHandler = function(ev) {\r\n        if (boolOrFn(manager.options.enable, [manager])) {\r\n            self.handler(ev);\r\n        }\r\n    };\r\n\r\n    this.init();\r\n\r\n}\r\n\r\nInput.prototype = {\r\n    /**\r\n     * should handle the inputEvent data and trigger the callback\r\n     * @virtual\r\n     */\r\n    handler: function() { },\r\n\r\n    /**\r\n     * bind the events\r\n     */\r\n    init: function() {\r\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\r\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\r\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\r\n    },\r\n\r\n    /**\r\n     * unbind the events\r\n     */\r\n    destroy: function() {\r\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\r\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\r\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\r\n    }\r\n};\r\n\r\n/**\r\n * create new input type manager\r\n * called by the Manager constructor\r\n * @param {Hammer} manager\r\n * @returns {Input}\r\n */\r\nfunction createInputInstance(manager) {\r\n    var Type;\r\n    var inputClass = manager.options.inputClass;\r\n\r\n    if (inputClass) {\r\n        Type = inputClass;\r\n    } else if (SUPPORT_POINTER_EVENTS) {\r\n        Type = PointerEventInput;\r\n    } else if (SUPPORT_ONLY_TOUCH) {\r\n        Type = TouchInput;\r\n    } else if (!SUPPORT_TOUCH) {\r\n        Type = MouseInput;\r\n    } else {\r\n        Type = TouchMouseInput;\r\n    }\r\n    return new (Type)(manager, inputHandler);\r\n}\r\n\r\n/**\r\n * handle input events\r\n * @param {Manager} manager\r\n * @param {String} eventType\r\n * @param {Object} input\r\n */\r\nfunction inputHandler(manager, eventType, input) {\r\n    var pointersLen = input.pointers.length;\r\n    var changedPointersLen = input.changedPointers.length;\r\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\r\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\r\n\r\n    input.isFirst = !!isFirst;\r\n    input.isFinal = !!isFinal;\r\n\r\n    if (isFirst) {\r\n        manager.session = {};\r\n    }\r\n\r\n    // source event is the normalized value of the domEvents\r\n    // like 'touchstart, mouseup, pointerdown'\r\n    input.eventType = eventType;\r\n\r\n    // compute scale, rotation etc\r\n    computeInputData(manager, input);\r\n\r\n    // emit secret event\r\n    manager.emit('hammer.input', input);\r\n\r\n    manager.recognize(input);\r\n    manager.session.prevInput = input;\r\n}\r\n\r\n/**\r\n * extend the data with some usable properties like scale, rotate, velocity etc\r\n * @param {Object} manager\r\n * @param {Object} input\r\n */\r\nfunction computeInputData(manager, input) {\r\n    var session = manager.session;\r\n    var pointers = input.pointers;\r\n    var pointersLength = pointers.length;\r\n\r\n    // store the first input to calculate the distance and direction\r\n    if (!session.firstInput) {\r\n        session.firstInput = simpleCloneInputData(input);\r\n    }\r\n\r\n    // to compute scale and rotation we need to store the multiple touches\r\n    if (pointersLength > 1 && !session.firstMultiple) {\r\n        session.firstMultiple = simpleCloneInputData(input);\r\n    } else if (pointersLength === 1) {\r\n        session.firstMultiple = false;\r\n    }\r\n\r\n    var firstInput = session.firstInput;\r\n    var firstMultiple = session.firstMultiple;\r\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\r\n\r\n    var center = input.center = getCenter(pointers);\r\n    input.timeStamp = now();\r\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\r\n\r\n    input.angle = getAngle(offsetCenter, center);\r\n    input.distance = getDistance(offsetCenter, center);\r\n\r\n    computeDeltaXY(session, input);\r\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\r\n\r\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\r\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\r\n\r\n    computeIntervalInputData(session, input);\r\n\r\n    // find the correct target\r\n    var target = manager.element;\r\n    if (hasParent(input.srcEvent.target, target)) {\r\n        target = input.srcEvent.target;\r\n    }\r\n    input.target = target;\r\n}\r\n\r\nfunction computeDeltaXY(session, input) {\r\n    var center = input.center;\r\n    var offset = session.offsetDelta || {};\r\n    var prevDelta = session.prevDelta || {};\r\n    var prevInput = session.prevInput || {};\r\n\r\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\r\n        prevDelta = session.prevDelta = {\r\n            x: prevInput.deltaX || 0,\r\n            y: prevInput.deltaY || 0\r\n        };\r\n\r\n        offset = session.offsetDelta = {\r\n            x: center.x,\r\n            y: center.y\r\n        };\r\n    }\r\n\r\n    input.deltaX = prevDelta.x + (center.x - offset.x);\r\n    input.deltaY = prevDelta.y + (center.y - offset.y);\r\n}\r\n\r\n/**\r\n * velocity is calculated every x ms\r\n * @param {Object} session\r\n * @param {Object} input\r\n */\r\nfunction computeIntervalInputData(session, input) {\r\n    var last = session.lastInterval || input,\r\n        deltaTime = input.timeStamp - last.timeStamp,\r\n        velocity, velocityX, velocityY, direction;\r\n\r\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\r\n        var deltaX = last.deltaX - input.deltaX;\r\n        var deltaY = last.deltaY - input.deltaY;\r\n\r\n        var v = getVelocity(deltaTime, deltaX, deltaY);\r\n        velocityX = v.x;\r\n        velocityY = v.y;\r\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\r\n        direction = getDirection(deltaX, deltaY);\r\n\r\n        session.lastInterval = input;\r\n    } else {\r\n        // use latest velocity info if it doesn't overtake a minimum period\r\n        velocity = last.velocity;\r\n        velocityX = last.velocityX;\r\n        velocityY = last.velocityY;\r\n        direction = last.direction;\r\n    }\r\n\r\n    input.velocity = velocity;\r\n    input.velocityX = velocityX;\r\n    input.velocityY = velocityY;\r\n    input.direction = direction;\r\n}\r\n\r\n/**\r\n * create a simple clone from the input used for storage of firstInput and firstMultiple\r\n * @param {Object} input\r\n * @returns {Object} clonedInputData\r\n */\r\nfunction simpleCloneInputData(input) {\r\n    // make a simple copy of the pointers because we will get a reference if we don't\r\n    // we only need clientXY for the calculations\r\n    var pointers = [];\r\n    var i = 0;\r\n    while (i < input.pointers.length) {\r\n        pointers[i] = {\r\n            clientX: round(input.pointers[i].clientX),\r\n            clientY: round(input.pointers[i].clientY)\r\n        };\r\n        i++;\r\n    }\r\n\r\n    return {\r\n        timeStamp: now(),\r\n        pointers: pointers,\r\n        center: getCenter(pointers),\r\n        deltaX: input.deltaX,\r\n        deltaY: input.deltaY\r\n    };\r\n}\r\n\r\n/**\r\n * get the center of all the pointers\r\n * @param {Array} pointers\r\n * @return {Object} center contains `x` and `y` properties\r\n */\r\nfunction getCenter(pointers) {\r\n    var pointersLength = pointers.length;\r\n\r\n    // no need to loop when only one touch\r\n    if (pointersLength === 1) {\r\n        return {\r\n            x: round(pointers[0].clientX),\r\n            y: round(pointers[0].clientY)\r\n        };\r\n    }\r\n\r\n    var x = 0, y = 0, i = 0;\r\n    while (i < pointersLength) {\r\n        x += pointers[i].clientX;\r\n        y += pointers[i].clientY;\r\n        i++;\r\n    }\r\n\r\n    return {\r\n        x: round(x / pointersLength),\r\n        y: round(y / pointersLength)\r\n    };\r\n}\r\n\r\n/**\r\n * calculate the velocity between two points. unit is in px per ms.\r\n * @param {Number} deltaTime\r\n * @param {Number} x\r\n * @param {Number} y\r\n * @return {Object} velocity `x` and `y`\r\n */\r\nfunction getVelocity(deltaTime, x, y) {\r\n    return {\r\n        x: x / deltaTime || 0,\r\n        y: y / deltaTime || 0\r\n    };\r\n}\r\n\r\n/**\r\n * get the direction between two points\r\n * @param {Number} x\r\n * @param {Number} y\r\n * @return {Number} direction\r\n */\r\nfunction getDirection(x, y) {\r\n    if (x === y) {\r\n        return DIRECTION_NONE;\r\n    }\r\n\r\n    if (abs(x) >= abs(y)) {\r\n        return x > 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\r\n    }\r\n    return y > 0 ? DIRECTION_UP : DIRECTION_DOWN;\r\n}\r\n\r\n/**\r\n * calculate the absolute distance between two points\r\n * @param {Object} p1 {x, y}\r\n * @param {Object} p2 {x, y}\r\n * @param {Array} [props] containing x and y keys\r\n * @return {Number} distance\r\n */\r\nfunction getDistance(p1, p2, props) {\r\n    if (!props) {\r\n        props = PROPS_XY;\r\n    }\r\n    var x = p2[props[0]] - p1[props[0]],\r\n        y = p2[props[1]] - p1[props[1]];\r\n\r\n    return Math.sqrt((x * x) + (y * y));\r\n}\r\n\r\n/**\r\n * calculate the angle between two coordinates\r\n * @param {Object} p1\r\n * @param {Object} p2\r\n * @param {Array} [props] containing x and y keys\r\n * @return {Number} angle\r\n */\r\nfunction getAngle(p1, p2, props) {\r\n    if (!props) {\r\n        props = PROPS_XY;\r\n    }\r\n    var x = p2[props[0]] - p1[props[0]],\r\n        y = p2[props[1]] - p1[props[1]];\r\n    return Math.atan2(y, x) * 180 / Math.PI;\r\n}\r\n\r\n/**\r\n * calculate the rotation degrees between two pointersets\r\n * @param {Array} start array of pointers\r\n * @param {Array} end array of pointers\r\n * @return {Number} rotation\r\n */\r\nfunction getRotation(start, end) {\r\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) - getAngle(start[1], start[0], PROPS_CLIENT_XY);\r\n}\r\n\r\n/**\r\n * calculate the scale factor between two pointersets\r\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\r\n * @param {Array} start array of pointers\r\n * @param {Array} end array of pointers\r\n * @return {Number} scale\r\n */\r\nfunction getScale(start, end) {\r\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\r\n}\r\n\r\nvar MOUSE_INPUT_MAP = {\r\n    mousedown: INPUT_START,\r\n    mousemove: INPUT_MOVE,\r\n    mouseup: INPUT_END\r\n};\r\n\r\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\r\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\r\n\r\n/**\r\n * Mouse events input\r\n * @constructor\r\n * @extends Input\r\n */\r\nfunction MouseInput() {\r\n    this.evEl = MOUSE_ELEMENT_EVENTS;\r\n    this.evWin = MOUSE_WINDOW_EVENTS;\r\n\r\n    this.allow = true; // used by Input.TouchMouse to disable mouse events\r\n    this.pressed = false; // mousedown state\r\n\r\n    Input.apply(this, arguments);\r\n}\r\n\r\ninherit(MouseInput, Input, {\r\n    /**\r\n     * handle mouse events\r\n     * @param {Object} ev\r\n     */\r\n    handler: function MEhandler(ev) {\r\n        var eventType = MOUSE_INPUT_MAP[ev.type];\r\n\r\n        // on start we want to have the left mouse button down\r\n        if (eventType & INPUT_START && ev.button === 0) {\r\n            this.pressed = true;\r\n        }\r\n\r\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\r\n            eventType = INPUT_END;\r\n        }\r\n\r\n        // mouse must be down, and mouse events are allowed (see the TouchMouse input)\r\n        if (!this.pressed || !this.allow) {\r\n            return;\r\n        }\r\n\r\n        if (eventType & INPUT_END) {\r\n            this.pressed = false;\r\n        }\r\n\r\n        this.callback(this.manager, eventType, {\r\n            pointers: [ev],\r\n            changedPointers: [ev],\r\n            pointerType: INPUT_TYPE_MOUSE,\r\n            srcEvent: ev\r\n        });\r\n    }\r\n});\r\n\r\nvar POINTER_INPUT_MAP = {\r\n    pointerdown: INPUT_START,\r\n    pointermove: INPUT_MOVE,\r\n    pointerup: INPUT_END,\r\n    pointercancel: INPUT_CANCEL,\r\n    pointerout: INPUT_CANCEL\r\n};\r\n\r\n// in IE10 the pointer types is defined as an enum\r\nvar IE10_POINTER_TYPE_ENUM = {\r\n    2: INPUT_TYPE_TOUCH,\r\n    3: INPUT_TYPE_PEN,\r\n    4: INPUT_TYPE_MOUSE,\r\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\r\n};\r\n\r\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\r\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\r\n\r\n// IE10 has prefixed support, and case-sensitive\r\nif (window.MSPointerEvent) {\r\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\r\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\r\n}\r\n\r\n/**\r\n * Pointer events input\r\n * @constructor\r\n * @extends Input\r\n */\r\nfunction PointerEventInput() {\r\n    this.evEl = POINTER_ELEMENT_EVENTS;\r\n    this.evWin = POINTER_WINDOW_EVENTS;\r\n\r\n    Input.apply(this, arguments);\r\n\r\n    this.store = (this.manager.session.pointerEvents = []);\r\n}\r\n\r\ninherit(PointerEventInput, Input, {\r\n    /**\r\n     * handle mouse events\r\n     * @param {Object} ev\r\n     */\r\n    handler: function PEhandler(ev) {\r\n        var store = this.store;\r\n        var removePointer = false;\r\n\r\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\r\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\r\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\r\n\r\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\r\n\r\n        // get index of the event in the store\r\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\r\n\r\n        // start and mouse must be down\r\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\r\n            if (storeIndex < 0) {\r\n                store.push(ev);\r\n                storeIndex = store.length - 1;\r\n            }\r\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\r\n            removePointer = true;\r\n        }\r\n\r\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\r\n        if (storeIndex < 0) {\r\n            return;\r\n        }\r\n\r\n        // update the event in the store\r\n        store[storeIndex] = ev;\r\n\r\n        this.callback(this.manager, eventType, {\r\n            pointers: store,\r\n            changedPointers: [ev],\r\n            pointerType: pointerType,\r\n            srcEvent: ev\r\n        });\r\n\r\n        if (removePointer) {\r\n            // remove from the store\r\n            store.splice(storeIndex, 1);\r\n        }\r\n    }\r\n});\r\n\r\nvar SINGLE_TOUCH_INPUT_MAP = {\r\n    touchstart: INPUT_START,\r\n    touchmove: INPUT_MOVE,\r\n    touchend: INPUT_END,\r\n    touchcancel: INPUT_CANCEL\r\n};\r\n\r\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\r\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\r\n\r\n/**\r\n * Touch events input\r\n * @constructor\r\n * @extends Input\r\n */\r\nfunction SingleTouchInput() {\r\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\r\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\r\n    this.started = false;\r\n\r\n    Input.apply(this, arguments);\r\n}\r\n\r\ninherit(SingleTouchInput, Input, {\r\n    handler: function TEhandler(ev) {\r\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\r\n\r\n        // should we handle the touch events?\r\n        if (type === INPUT_START) {\r\n            this.started = true;\r\n        }\r\n\r\n        if (!this.started) {\r\n            return;\r\n        }\r\n\r\n        var touches = normalizeSingleTouches.call(this, ev, type);\r\n\r\n        // when done, reset the started state\r\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\r\n            this.started = false;\r\n        }\r\n\r\n        this.callback(this.manager, type, {\r\n            pointers: touches[0],\r\n            changedPointers: touches[1],\r\n            pointerType: INPUT_TYPE_TOUCH,\r\n            srcEvent: ev\r\n        });\r\n    }\r\n});\r\n\r\n/**\r\n * @this {TouchInput}\r\n * @param {Object} ev\r\n * @param {Number} type flag\r\n * @returns {undefined|Array} [all, changed]\r\n */\r\nfunction normalizeSingleTouches(ev, type) {\r\n    var all = toArray(ev.touches);\r\n    var changed = toArray(ev.changedTouches);\r\n\r\n    if (type & (INPUT_END | INPUT_CANCEL)) {\r\n        all = uniqueArray(all.concat(changed), 'identifier', true);\r\n    }\r\n\r\n    return [all, changed];\r\n}\r\n\r\nvar TOUCH_INPUT_MAP = {\r\n    touchstart: INPUT_START,\r\n    touchmove: INPUT_MOVE,\r\n    touchend: INPUT_END,\r\n    touchcancel: INPUT_CANCEL\r\n};\r\n\r\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\r\n\r\n/**\r\n * Multi-user touch events input\r\n * @constructor\r\n * @extends Input\r\n */\r\nfunction TouchInput() {\r\n    this.evTarget = TOUCH_TARGET_EVENTS;\r\n    this.targetIds = {};\r\n\r\n    Input.apply(this, arguments);\r\n}\r\n\r\ninherit(TouchInput, Input, {\r\n    handler: function MTEhandler(ev) {\r\n        var type = TOUCH_INPUT_MAP[ev.type];\r\n        var touches = getTouches.call(this, ev, type);\r\n        if (!touches) {\r\n            return;\r\n        }\r\n\r\n        this.callback(this.manager, type, {\r\n            pointers: touches[0],\r\n            changedPointers: touches[1],\r\n            pointerType: INPUT_TYPE_TOUCH,\r\n            srcEvent: ev\r\n        });\r\n    }\r\n});\r\n\r\n/**\r\n * @this {TouchInput}\r\n * @param {Object} ev\r\n * @param {Number} type flag\r\n * @returns {undefined|Array} [all, changed]\r\n */\r\nfunction getTouches(ev, type) {\r\n    var allTouches = toArray(ev.touches);\r\n    var targetIds = this.targetIds;\r\n\r\n    // when there is only one touch, the process can be simplified\r\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\r\n        targetIds[allTouches[0].identifier] = true;\r\n        return [allTouches, allTouches];\r\n    }\r\n\r\n    var i,\r\n        targetTouches,\r\n        changedTouches = toArray(ev.changedTouches),\r\n        changedTargetTouches = [],\r\n        target = this.target;\r\n\r\n    // get target touches from touches\r\n    targetTouches = allTouches.filter(function(touch) {\r\n        return hasParent(touch.target, target);\r\n    });\r\n\r\n    // collect touches\r\n    if (type === INPUT_START) {\r\n        i = 0;\r\n        while (i < targetTouches.length) {\r\n            targetIds[targetTouches[i].identifier] = true;\r\n            i++;\r\n        }\r\n    }\r\n\r\n    // filter changed touches to only contain touches that exist in the collected target ids\r\n    i = 0;\r\n    while (i < changedTouches.length) {\r\n        if (targetIds[changedTouches[i].identifier]) {\r\n            changedTargetTouches.push(changedTouches[i]);\r\n        }\r\n\r\n        // cleanup removed touches\r\n        if (type & (INPUT_END | INPUT_CANCEL)) {\r\n            delete targetIds[changedTouches[i].identifier];\r\n        }\r\n        i++;\r\n    }\r\n\r\n    if (!changedTargetTouches.length) {\r\n        return;\r\n    }\r\n\r\n    return [\r\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\r\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\r\n        changedTargetTouches\r\n    ];\r\n}\r\n\r\n/**\r\n * Combined touch and mouse input\r\n *\r\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\r\n * This because touch devices also emit mouse events while doing a touch.\r\n *\r\n * @constructor\r\n * @extends Input\r\n */\r\nfunction TouchMouseInput() {\r\n    Input.apply(this, arguments);\r\n\r\n    var handler = bindFn(this.handler, this);\r\n    this.touch = new TouchInput(this.manager, handler);\r\n    this.mouse = new MouseInput(this.manager, handler);\r\n}\r\n\r\ninherit(TouchMouseInput, Input, {\r\n    /**\r\n     * handle mouse and touch events\r\n     * @param {Hammer} manager\r\n     * @param {String} inputEvent\r\n     * @param {Object} inputData\r\n     */\r\n    handler: function TMEhandler(manager, inputEvent, inputData) {\r\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\r\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\r\n\r\n        // when we're in a touch event, so  block all upcoming mouse events\r\n        // most mobile browser also emit mouseevents, right after touchstart\r\n        if (isTouch) {\r\n            this.mouse.allow = false;\r\n        } else if (isMouse && !this.mouse.allow) {\r\n            return;\r\n        }\r\n\r\n        // reset the allowMouse when we're done\r\n        if (inputEvent & (INPUT_END | INPUT_CANCEL)) {\r\n            this.mouse.allow = true;\r\n        }\r\n\r\n        this.callback(manager, inputEvent, inputData);\r\n    },\r\n\r\n    /**\r\n     * remove the event listeners\r\n     */\r\n    destroy: function destroy() {\r\n        this.touch.destroy();\r\n        this.mouse.destroy();\r\n    }\r\n});\r\n\r\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\r\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\r\n\r\n// magical touchAction value\r\nvar TOUCH_ACTION_COMPUTE = 'compute';\r\nvar TOUCH_ACTION_AUTO = 'auto';\r\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\r\nvar TOUCH_ACTION_NONE = 'none';\r\nvar TOUCH_ACTION_PAN_X = 'pan-x';\r\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\r\n\r\n/**\r\n * Touch Action\r\n * sets the touchAction property or uses the js alternative\r\n * @param {Manager} manager\r\n * @param {String} value\r\n * @constructor\r\n */\r\nfunction TouchAction(manager, value) {\r\n    this.manager = manager;\r\n    this.set(value);\r\n}\r\n\r\nTouchAction.prototype = {\r\n    /**\r\n     * set the touchAction value on the element or enable the polyfill\r\n     * @param {String} value\r\n     */\r\n    set: function(value) {\r\n        // find out the touch-action by the event handlers\r\n        if (value == TOUCH_ACTION_COMPUTE) {\r\n            value = this.compute();\r\n        }\r\n\r\n        if (NATIVE_TOUCH_ACTION) {\r\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\r\n        }\r\n        this.actions = value.toLowerCase().trim();\r\n    },\r\n\r\n    /**\r\n     * just re-set the touchAction value\r\n     */\r\n    update: function() {\r\n        this.set(this.manager.options.touchAction);\r\n    },\r\n\r\n    /**\r\n     * compute the value for the touchAction property based on the recognizer's settings\r\n     * @returns {String} value\r\n     */\r\n    compute: function() {\r\n        var actions = [];\r\n        each(this.manager.recognizers, function(recognizer) {\r\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\r\n                actions = actions.concat(recognizer.getTouchAction());\r\n            }\r\n        });\r\n        return cleanTouchActions(actions.join(' '));\r\n    },\r\n\r\n    /**\r\n     * this method is called on each input cycle and provides the preventing of the browser behavior\r\n     * @param {Object} input\r\n     */\r\n    preventDefaults: function(input) {\r\n        // not needed with native support for the touchAction property\r\n        if (NATIVE_TOUCH_ACTION) {\r\n            return;\r\n        }\r\n\r\n        var srcEvent = input.srcEvent;\r\n        var direction = input.offsetDirection;\r\n\r\n        // if the touch action did prevented once this session\r\n        if (this.manager.session.prevented) {\r\n            srcEvent.preventDefault();\r\n            return;\r\n        }\r\n\r\n        var actions = this.actions;\r\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE);\r\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\r\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\r\n\r\n        if (hasNone ||\r\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\r\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\r\n            return this.preventSrc(srcEvent);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\r\n     * @param {Object} srcEvent\r\n     */\r\n    preventSrc: function(srcEvent) {\r\n        this.manager.session.prevented = true;\r\n        srcEvent.preventDefault();\r\n    }\r\n};\r\n\r\n/**\r\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\r\n * @param {String} actions\r\n * @returns {*}\r\n */\r\nfunction cleanTouchActions(actions) {\r\n    // none\r\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\r\n        return TOUCH_ACTION_NONE;\r\n    }\r\n\r\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\r\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\r\n\r\n    // pan-x and pan-y can be combined\r\n    if (hasPanX && hasPanY) {\r\n        return TOUCH_ACTION_PAN_X + ' ' + TOUCH_ACTION_PAN_Y;\r\n    }\r\n\r\n    // pan-x OR pan-y\r\n    if (hasPanX || hasPanY) {\r\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\r\n    }\r\n\r\n    // manipulation\r\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\r\n        return TOUCH_ACTION_MANIPULATION;\r\n    }\r\n\r\n    return TOUCH_ACTION_AUTO;\r\n}\r\n\r\n/**\r\n * Recognizer flow explained; *\r\n * All recognizers have the initial state of POSSIBLE when a input session starts.\r\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\r\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\r\n *\r\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\r\n * which determines with state it should be.\r\n *\r\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\r\n * POSSIBLE to give it another change on the next cycle.\r\n *\r\n *               Possible\r\n *                  |\r\n *            +-----+---------------+\r\n *            |                     |\r\n *      +-----+-----+               |\r\n *      |           |               |\r\n *   Failed      Cancelled          |\r\n *                          +-------+------+\r\n *                          |              |\r\n *                      Recognized       Began\r\n *                                         |\r\n *                                      Changed\r\n *                                         |\r\n *                                  Ended/Recognized\r\n */\r\nvar STATE_POSSIBLE = 1;\r\nvar STATE_BEGAN = 2;\r\nvar STATE_CHANGED = 4;\r\nvar STATE_ENDED = 8;\r\nvar STATE_RECOGNIZED = STATE_ENDED;\r\nvar STATE_CANCELLED = 16;\r\nvar STATE_FAILED = 32;\r\n\r\n/**\r\n * Recognizer\r\n * Every recognizer needs to extend from this class.\r\n * @constructor\r\n * @param {Object} options\r\n */\r\nfunction Recognizer(options) {\r\n    this.id = uniqueId();\r\n\r\n    this.manager = null;\r\n    this.options = merge(options || {}, this.defaults);\r\n\r\n    // default is enable true\r\n    this.options.enable = ifUndefined(this.options.enable, true);\r\n\r\n    this.state = STATE_POSSIBLE;\r\n\r\n    this.simultaneous = {};\r\n    this.requireFail = [];\r\n}\r\n\r\nRecognizer.prototype = {\r\n    /**\r\n     * @virtual\r\n     * @type {Object}\r\n     */\r\n    defaults: {},\r\n\r\n    /**\r\n     * set options\r\n     * @param {Object} options\r\n     * @return {Recognizer}\r\n     */\r\n    set: function(options) {\r\n        extend(this.options, options);\r\n\r\n        // also update the touchAction, in case something changed about the directions/enabled state\r\n        this.manager && this.manager.touchAction.update();\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * recognize simultaneous with an other recognizer.\r\n     * @param {Recognizer} otherRecognizer\r\n     * @returns {Recognizer} this\r\n     */\r\n    recognizeWith: function(otherRecognizer) {\r\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\r\n            return this;\r\n        }\r\n\r\n        var simultaneous = this.simultaneous;\r\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\r\n        if (!simultaneous[otherRecognizer.id]) {\r\n            simultaneous[otherRecognizer.id] = otherRecognizer;\r\n            otherRecognizer.recognizeWith(this);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\r\n     * @param {Recognizer} otherRecognizer\r\n     * @returns {Recognizer} this\r\n     */\r\n    dropRecognizeWith: function(otherRecognizer) {\r\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\r\n            return this;\r\n        }\r\n\r\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\r\n        delete this.simultaneous[otherRecognizer.id];\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * recognizer can only run when an other is failing\r\n     * @param {Recognizer} otherRecognizer\r\n     * @returns {Recognizer} this\r\n     */\r\n    requireFailure: function(otherRecognizer) {\r\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\r\n            return this;\r\n        }\r\n\r\n        var requireFail = this.requireFail;\r\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\r\n        if (inArray(requireFail, otherRecognizer) === -1) {\r\n            requireFail.push(otherRecognizer);\r\n            otherRecognizer.requireFailure(this);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\r\n     * @param {Recognizer} otherRecognizer\r\n     * @returns {Recognizer} this\r\n     */\r\n    dropRequireFailure: function(otherRecognizer) {\r\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\r\n            return this;\r\n        }\r\n\r\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\r\n        var index = inArray(this.requireFail, otherRecognizer);\r\n        if (index > -1) {\r\n            this.requireFail.splice(index, 1);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * has require failures boolean\r\n     * @returns {boolean}\r\n     */\r\n    hasRequireFailures: function() {\r\n        return this.requireFail.length > 0;\r\n    },\r\n\r\n    /**\r\n     * if the recognizer can recognize simultaneous with an other recognizer\r\n     * @param {Recognizer} otherRecognizer\r\n     * @returns {Boolean}\r\n     */\r\n    canRecognizeWith: function(otherRecognizer) {\r\n        return !!this.simultaneous[otherRecognizer.id];\r\n    },\r\n\r\n    /**\r\n     * You should use `tryEmit` instead of `emit` directly to check\r\n     * that all the needed recognizers has failed before emitting.\r\n     * @param {Object} input\r\n     */\r\n    emit: function(input) {\r\n        var self = this;\r\n        var state = this.state;\r\n\r\n        function emit(withState) {\r\n            self.manager.emit(self.options.event + (withState ? stateStr(state) : ''), input);\r\n        }\r\n\r\n        // 'panstart' and 'panmove'\r\n        if (state < STATE_ENDED) {\r\n            emit(true);\r\n        }\r\n\r\n        emit(); // simple 'eventName' events\r\n\r\n        // panend and pancancel\r\n        if (state >= STATE_ENDED) {\r\n            emit(true);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Check that all the require failure recognizers has failed,\r\n     * if true, it emits a gesture event,\r\n     * otherwise, setup the state to FAILED.\r\n     * @param {Object} input\r\n     */\r\n    tryEmit: function(input) {\r\n        if (this.canEmit()) {\r\n            return this.emit(input);\r\n        }\r\n        // it's failing anyway\r\n        this.state = STATE_FAILED;\r\n    },\r\n\r\n    /**\r\n     * can we emit?\r\n     * @returns {boolean}\r\n     */\r\n    canEmit: function() {\r\n        var i = 0;\r\n        while (i < this.requireFail.length) {\r\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\r\n                return false;\r\n            }\r\n            i++;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * update the recognizer\r\n     * @param {Object} inputData\r\n     */\r\n    recognize: function(inputData) {\r\n        // make a new copy of the inputData\r\n        // so we can change the inputData without messing up the other recognizers\r\n        var inputDataClone = extend({}, inputData);\r\n\r\n        // is is enabled and allow recognizing?\r\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\r\n            this.reset();\r\n            this.state = STATE_FAILED;\r\n            return;\r\n        }\r\n\r\n        // reset when we've reached the end\r\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\r\n            this.state = STATE_POSSIBLE;\r\n        }\r\n\r\n        this.state = this.process(inputDataClone);\r\n\r\n        // the recognizer has recognized a gesture\r\n        // so trigger an event\r\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\r\n            this.tryEmit(inputDataClone);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * return the state of the recognizer\r\n     * the actual recognizing happens in this method\r\n     * @virtual\r\n     * @param {Object} inputData\r\n     * @returns {Const} STATE\r\n     */\r\n    process: function(inputData) { }, // jshint ignore:line\r\n\r\n    /**\r\n     * return the preferred touch-action\r\n     * @virtual\r\n     * @returns {Array}\r\n     */\r\n    getTouchAction: function() { },\r\n\r\n    /**\r\n     * called when the gesture isn't allowed to recognize\r\n     * like when another is being recognized or it is disabled\r\n     * @virtual\r\n     */\r\n    reset: function() { }\r\n};\r\n\r\n/**\r\n * get a usable string, used as event postfix\r\n * @param {Const} state\r\n * @returns {String} state\r\n */\r\nfunction stateStr(state) {\r\n    if (state & STATE_CANCELLED) {\r\n        return 'cancel';\r\n    } else if (state & STATE_ENDED) {\r\n        return 'end';\r\n    } else if (state & STATE_CHANGED) {\r\n        return 'move';\r\n    } else if (state & STATE_BEGAN) {\r\n        return 'start';\r\n    }\r\n    return '';\r\n}\r\n\r\n/**\r\n * direction cons to string\r\n * @param {Const} direction\r\n * @returns {String}\r\n */\r\nfunction directionStr(direction) {\r\n    if (direction == DIRECTION_DOWN) {\r\n        return 'down';\r\n    } else if (direction == DIRECTION_UP) {\r\n        return 'up';\r\n    } else if (direction == DIRECTION_LEFT) {\r\n        return 'left';\r\n    } else if (direction == DIRECTION_RIGHT) {\r\n        return 'right';\r\n    }\r\n    return '';\r\n}\r\n\r\n/**\r\n * get a recognizer by name if it is bound to a manager\r\n * @param {Recognizer|String} otherRecognizer\r\n * @param {Recognizer} recognizer\r\n * @returns {Recognizer}\r\n */\r\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\r\n    var manager = recognizer.manager;\r\n    if (manager) {\r\n        return manager.get(otherRecognizer);\r\n    }\r\n    return otherRecognizer;\r\n}\r\n\r\n/**\r\n * This recognizer is just used as a base for the simple attribute recognizers.\r\n * @constructor\r\n * @extends Recognizer\r\n */\r\nfunction AttrRecognizer() {\r\n    Recognizer.apply(this, arguments);\r\n}\r\n\r\ninherit(AttrRecognizer, Recognizer, {\r\n    /**\r\n     * @namespace\r\n     * @memberof AttrRecognizer\r\n     */\r\n    defaults: {\r\n        /**\r\n         * @type {Number}\r\n         * @default 1\r\n         */\r\n        pointers: 1\r\n    },\r\n\r\n    /**\r\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\r\n     * @memberof AttrRecognizer\r\n     * @param {Object} input\r\n     * @returns {Boolean} recognized\r\n     */\r\n    attrTest: function(input) {\r\n        var optionPointers = this.options.pointers;\r\n        return optionPointers === 0 || input.pointers.length === optionPointers;\r\n    },\r\n\r\n    /**\r\n     * Process the input and return the state for the recognizer\r\n     * @memberof AttrRecognizer\r\n     * @param {Object} input\r\n     * @returns {*} State\r\n     */\r\n    process: function(input) {\r\n        var state = this.state;\r\n        var eventType = input.eventType;\r\n\r\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\r\n        var isValid = this.attrTest(input);\r\n\r\n        // on cancel input and we've recognized before, return STATE_CANCELLED\r\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\r\n            return state | STATE_CANCELLED;\r\n        } else if (isRecognized || isValid) {\r\n            if (eventType & INPUT_END) {\r\n                return state | STATE_ENDED;\r\n            } else if (!(state & STATE_BEGAN)) {\r\n                return STATE_BEGAN;\r\n            }\r\n            return state | STATE_CHANGED;\r\n        }\r\n        return STATE_FAILED;\r\n    }\r\n});\r\n\r\n/**\r\n * Pan\r\n * Recognized when the pointer is down and moved in the allowed direction.\r\n * @constructor\r\n * @extends AttrRecognizer\r\n */\r\nfunction PanRecognizer() {\r\n    AttrRecognizer.apply(this, arguments);\r\n\r\n    this.pX = null;\r\n    this.pY = null;\r\n}\r\n\r\ninherit(PanRecognizer, AttrRecognizer, {\r\n    /**\r\n     * @namespace\r\n     * @memberof PanRecognizer\r\n     */\r\n    defaults: {\r\n        event: 'pan',\r\n        threshold: 10,\r\n        pointers: 1,\r\n        direction: DIRECTION_ALL\r\n    },\r\n\r\n    getTouchAction: function() {\r\n        var direction = this.options.direction;\r\n        var actions = [];\r\n        if (direction & DIRECTION_HORIZONTAL) {\r\n            actions.push(TOUCH_ACTION_PAN_Y);\r\n        }\r\n        if (direction & DIRECTION_VERTICAL) {\r\n            actions.push(TOUCH_ACTION_PAN_X);\r\n        }\r\n        return actions;\r\n    },\r\n\r\n    directionTest: function(input) {\r\n        var options = this.options;\r\n        var hasMoved = true;\r\n        var distance = input.distance;\r\n        var direction = input.direction;\r\n        var x = input.deltaX;\r\n        var y = input.deltaY;\r\n\r\n        // lock to axis?\r\n        if (!(direction & options.direction)) {\r\n            if (options.direction & DIRECTION_HORIZONTAL) {\r\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\r\n                hasMoved = x != this.pX;\r\n                distance = Math.abs(input.deltaX);\r\n            } else {\r\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\r\n                hasMoved = y != this.pY;\r\n                distance = Math.abs(input.deltaY);\r\n            }\r\n        }\r\n        input.direction = direction;\r\n        return hasMoved && distance > options.threshold && direction & options.direction;\r\n    },\r\n\r\n    attrTest: function(input) {\r\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\r\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\r\n    },\r\n\r\n    emit: function(input) {\r\n        this.pX = input.deltaX;\r\n        this.pY = input.deltaY;\r\n\r\n        var direction = directionStr(input.direction);\r\n        if (direction) {\r\n            this.manager.emit(this.options.event + direction, input);\r\n        }\r\n\r\n        this._super.emit.call(this, input);\r\n    }\r\n});\r\n\r\n/**\r\n * Pinch\r\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\r\n * @constructor\r\n * @extends AttrRecognizer\r\n */\r\nfunction PinchRecognizer() {\r\n    AttrRecognizer.apply(this, arguments);\r\n}\r\n\r\ninherit(PinchRecognizer, AttrRecognizer, {\r\n    /**\r\n     * @namespace\r\n     * @memberof PinchRecognizer\r\n     */\r\n    defaults: {\r\n        event: 'pinch',\r\n        threshold: 0,\r\n        pointers: 2\r\n    },\r\n\r\n    getTouchAction: function() {\r\n        return [TOUCH_ACTION_NONE];\r\n    },\r\n\r\n    attrTest: function(input) {\r\n        return this._super.attrTest.call(this, input) &&\r\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\r\n    },\r\n\r\n    emit: function(input) {\r\n        this._super.emit.call(this, input);\r\n        if (input.scale !== 1) {\r\n            var inOut = input.scale < 1 ? 'in' : 'out';\r\n            this.manager.emit(this.options.event + inOut, input);\r\n        }\r\n    }\r\n});\r\n\r\n/**\r\n * Press\r\n * Recognized when the pointer is down for x ms without any movement.\r\n * @constructor\r\n * @extends Recognizer\r\n */\r\nfunction PressRecognizer() {\r\n    Recognizer.apply(this, arguments);\r\n\r\n    this._timer = null;\r\n    this._input = null;\r\n}\r\n\r\ninherit(PressRecognizer, Recognizer, {\r\n    /**\r\n     * @namespace\r\n     * @memberof PressRecognizer\r\n     */\r\n    defaults: {\r\n        event: 'press',\r\n        pointers: 1,\r\n        time: 500, // minimal time of the pointer to be pressed\r\n        threshold: 5 // a minimal movement is ok, but keep it low\r\n    },\r\n\r\n    getTouchAction: function() {\r\n        return [TOUCH_ACTION_AUTO];\r\n    },\r\n\r\n    process: function(input) {\r\n        var options = this.options;\r\n        var validPointers = input.pointers.length === options.pointers;\r\n        var validMovement = input.distance < options.threshold;\r\n        var validTime = input.deltaTime > options.time;\r\n\r\n        this._input = input;\r\n\r\n        // we only allow little movement\r\n        // and we've reached an end event, so a tap is possible\r\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\r\n            this.reset();\r\n        } else if (input.eventType & INPUT_START) {\r\n            this.reset();\r\n            this._timer = setTimeoutContext(function() {\r\n                this.state = STATE_RECOGNIZED;\r\n                this.tryEmit();\r\n            }, options.time, this);\r\n        } else if (input.eventType & INPUT_END) {\r\n            return STATE_RECOGNIZED;\r\n        }\r\n        return STATE_FAILED;\r\n    },\r\n\r\n    reset: function() {\r\n        clearTimeout(this._timer);\r\n    },\r\n\r\n    emit: function(input) {\r\n        if (this.state !== STATE_RECOGNIZED) {\r\n            return;\r\n        }\r\n\r\n        if (input && (input.eventType & INPUT_END)) {\r\n            this.manager.emit(this.options.event + 'up', input);\r\n        } else {\r\n            this._input.timeStamp = now();\r\n            this.manager.emit(this.options.event, this._input);\r\n        }\r\n    }\r\n});\r\n\r\n/**\r\n * Rotate\r\n * Recognized when two or more pointer are moving in a circular motion.\r\n * @constructor\r\n * @extends AttrRecognizer\r\n */\r\nfunction RotateRecognizer() {\r\n    AttrRecognizer.apply(this, arguments);\r\n}\r\n\r\ninherit(RotateRecognizer, AttrRecognizer, {\r\n    /**\r\n     * @namespace\r\n     * @memberof RotateRecognizer\r\n     */\r\n    defaults: {\r\n        event: 'rotate',\r\n        threshold: 0,\r\n        pointers: 2\r\n    },\r\n\r\n    getTouchAction: function() {\r\n        return [TOUCH_ACTION_NONE];\r\n    },\r\n\r\n    attrTest: function(input) {\r\n        return this._super.attrTest.call(this, input) &&\r\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\r\n    }\r\n});\r\n\r\n/**\r\n * Swipe\r\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\r\n * @constructor\r\n * @extends AttrRecognizer\r\n */\r\nfunction SwipeRecognizer() {\r\n    AttrRecognizer.apply(this, arguments);\r\n}\r\n\r\ninherit(SwipeRecognizer, AttrRecognizer, {\r\n    /**\r\n     * @namespace\r\n     * @memberof SwipeRecognizer\r\n     */\r\n    defaults: {\r\n        event: 'swipe',\r\n        threshold: 10,\r\n        velocity: 0.65,\r\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\r\n        pointers: 1\r\n    },\r\n\r\n    getTouchAction: function() {\r\n        return PanRecognizer.prototype.getTouchAction.call(this);\r\n    },\r\n\r\n    attrTest: function(input) {\r\n        var direction = this.options.direction;\r\n        var velocity;\r\n\r\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\r\n            velocity = input.velocity;\r\n        } else if (direction & DIRECTION_HORIZONTAL) {\r\n            velocity = input.velocityX;\r\n        } else if (direction & DIRECTION_VERTICAL) {\r\n            velocity = input.velocityY;\r\n        }\r\n\r\n        return this._super.attrTest.call(this, input) &&\r\n            direction & input.direction &&\r\n            input.distance > this.options.threshold &&\r\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\r\n    },\r\n\r\n    emit: function(input) {\r\n        var direction = directionStr(input.direction);\r\n        if (direction) {\r\n            this.manager.emit(this.options.event + direction, input);\r\n        }\r\n\r\n        this.manager.emit(this.options.event, input);\r\n    }\r\n});\r\n\r\n/**\r\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\r\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\r\n * a single tap.\r\n *\r\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\r\n * multi-taps being recognized.\r\n * @constructor\r\n * @extends Recognizer\r\n */\r\nfunction TapRecognizer() {\r\n    Recognizer.apply(this, arguments);\r\n\r\n    // previous time and center,\r\n    // used for tap counting\r\n    this.pTime = false;\r\n    this.pCenter = false;\r\n\r\n    this._timer = null;\r\n    this._input = null;\r\n    this.count = 0;\r\n}\r\n\r\ninherit(TapRecognizer, Recognizer, {\r\n    /**\r\n     * @namespace\r\n     * @memberof PinchRecognizer\r\n     */\r\n    defaults: {\r\n        event: 'tap',\r\n        pointers: 1,\r\n        taps: 1,\r\n        interval: 300, // max time between the multi-tap taps\r\n        time: 250, // max time of the pointer to be down (like finger on the screen)\r\n        threshold: 2, // a minimal movement is ok, but keep it low\r\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\r\n    },\r\n\r\n    getTouchAction: function() {\r\n        return [TOUCH_ACTION_MANIPULATION];\r\n    },\r\n\r\n    process: function(input) {\r\n        var options = this.options;\r\n\r\n        var validPointers = input.pointers.length === options.pointers;\r\n        var validMovement = input.distance < options.threshold;\r\n        var validTouchTime = input.deltaTime < options.time;\r\n\r\n        this.reset();\r\n\r\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\r\n            return this.failTimeout();\r\n        }\r\n\r\n        // we only allow little movement\r\n        // and we've reached an end event, so a tap is possible\r\n        if (validMovement && validTouchTime && validPointers) {\r\n            if (input.eventType != INPUT_END) {\r\n                return this.failTimeout();\r\n            }\r\n\r\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\r\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\r\n\r\n            this.pTime = input.timeStamp;\r\n            this.pCenter = input.center;\r\n\r\n            if (!validMultiTap || !validInterval) {\r\n                this.count = 1;\r\n            } else {\r\n                this.count += 1;\r\n            }\r\n\r\n            this._input = input;\r\n\r\n            // if tap count matches we have recognized it,\r\n            // else it has began recognizing...\r\n            var tapCount = this.count % options.taps;\r\n            if (tapCount === 0) {\r\n                // no failing requirements, immediately trigger the tap event\r\n                // or wait as long as the multitap interval to trigger\r\n                if (!this.hasRequireFailures()) {\r\n                    return STATE_RECOGNIZED;\r\n                } else {\r\n                    this._timer = setTimeoutContext(function() {\r\n                        this.state = STATE_RECOGNIZED;\r\n                        this.tryEmit();\r\n                    }, options.interval, this);\r\n                    return STATE_BEGAN;\r\n                }\r\n            }\r\n        }\r\n        return STATE_FAILED;\r\n    },\r\n\r\n    failTimeout: function() {\r\n        this._timer = setTimeoutContext(function() {\r\n            this.state = STATE_FAILED;\r\n        }, this.options.interval, this);\r\n        return STATE_FAILED;\r\n    },\r\n\r\n    reset: function() {\r\n        clearTimeout(this._timer);\r\n    },\r\n\r\n    emit: function() {\r\n        if (this.state == STATE_RECOGNIZED ) {\r\n            this._input.tapCount = this.count;\r\n            this.manager.emit(this.options.event, this._input);\r\n        }\r\n    }\r\n});\r\n\r\n/**\r\n * Simple way to create an manager with a default set of recognizers.\r\n * @param {HTMLElement} element\r\n * @param {Object} [options]\r\n * @constructor\r\n */\r\nfunction Hammer(element, options) {\r\n    options = options || {};\r\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\r\n    return new Manager(element, options);\r\n}\r\n\r\n/**\r\n * @const {string}\r\n */\r\nHammer.VERSION = '2.0.4';\r\n\r\n/**\r\n * default settings\r\n * @namespace\r\n */\r\nHammer.defaults = {\r\n    /**\r\n     * set if DOM events are being triggered.\r\n     * But this is slower and unused by simple implementations, so disabled by default.\r\n     * @type {Boolean}\r\n     * @default false\r\n     */\r\n    domEvents: false,\r\n\r\n    /**\r\n     * The value for the touchAction property/fallback.\r\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\r\n     * @type {String}\r\n     * @default compute\r\n     */\r\n    touchAction: TOUCH_ACTION_COMPUTE,\r\n\r\n    /**\r\n     * @type {Boolean}\r\n     * @default true\r\n     */\r\n    enable: true,\r\n\r\n    /**\r\n     * EXPERIMENTAL FEATURE -- can be removed/changed\r\n     * Change the parent input target element.\r\n     * If Null, then it is being set the to main element.\r\n     * @type {Null|EventTarget}\r\n     * @default null\r\n     */\r\n    inputTarget: null,\r\n\r\n    /**\r\n     * force an input class\r\n     * @type {Null|Function}\r\n     * @default null\r\n     */\r\n    inputClass: null,\r\n\r\n    /**\r\n     * Default recognizer setup when calling `Hammer()`\r\n     * When creating a new Manager these will be skipped.\r\n     * @type {Array}\r\n     */\r\n    preset: [\r\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\r\n        [RotateRecognizer, { enable: false }],\r\n        [PinchRecognizer, { enable: false }, ['rotate']],\r\n        [SwipeRecognizer,{ direction: DIRECTION_HORIZONTAL }],\r\n        [PanRecognizer, { direction: DIRECTION_HORIZONTAL }, ['swipe']],\r\n        [TapRecognizer],\r\n        [TapRecognizer, { event: 'doubletap', taps: 2 }, ['tap']],\r\n        [PressRecognizer]\r\n    ],\r\n\r\n    /**\r\n     * Some CSS properties can be used to improve the working of Hammer.\r\n     * Add them to this method and they will be set when creating a new Manager.\r\n     * @namespace\r\n     */\r\n    cssProps: {\r\n        /**\r\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\r\n         * @type {String}\r\n         * @default 'none'\r\n         */\r\n        userSelect: 'none',\r\n\r\n        /**\r\n         * Disable the Windows Phone grippers when pressing an element.\r\n         * @type {String}\r\n         * @default 'none'\r\n         */\r\n        touchSelect: 'none',\r\n\r\n        /**\r\n         * Disables the default callout shown when you touch and hold a touch target.\r\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\r\n         * a callout containing information about the link. This property allows you to disable that callout.\r\n         * @type {String}\r\n         * @default 'none'\r\n         */\r\n        touchCallout: 'none',\r\n\r\n        /**\r\n         * Specifies whether zooming is enabled. Used by IE10>\r\n         * @type {String}\r\n         * @default 'none'\r\n         */\r\n        contentZooming: 'none',\r\n\r\n        /**\r\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\r\n         * @type {String}\r\n         * @default 'none'\r\n         */\r\n        userDrag: 'none',\r\n\r\n        /**\r\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\r\n         * clickable element in iOS. This property obeys the alpha value, if specified.\r\n         * @type {String}\r\n         * @default 'rgba(0,0,0,0)'\r\n         */\r\n        tapHighlightColor: 'rgba(0,0,0,0)'\r\n    }\r\n};\r\n\r\nvar STOP = 1;\r\nvar FORCED_STOP = 2;\r\n\r\n/**\r\n * Manager\r\n * @param {HTMLElement} element\r\n * @param {Object} [options]\r\n * @constructor\r\n */\r\nfunction Manager(element, options) {\r\n    options = options || {};\r\n\r\n    this.options = merge(options, Hammer.defaults);\r\n    this.options.inputTarget = this.options.inputTarget || element;\r\n\r\n    this.handlers = {};\r\n    this.session = {};\r\n    this.recognizers = [];\r\n\r\n    this.element = element;\r\n    this.input = createInputInstance(this);\r\n    this.touchAction = new TouchAction(this, this.options.touchAction);\r\n\r\n    toggleCssProps(this, true);\r\n\r\n    each(options.recognizers, function(item) {\r\n        var recognizer = this.add(new (item[0])(item[1]));\r\n        item[2] && recognizer.recognizeWith(item[2]);\r\n        item[3] && recognizer.requireFailure(item[3]);\r\n    }, this);\r\n}\r\n\r\nManager.prototype = {\r\n    /**\r\n     * set options\r\n     * @param {Object} options\r\n     * @returns {Manager}\r\n     */\r\n    set: function(options) {\r\n        extend(this.options, options);\r\n\r\n        // Options that need a little more setup\r\n        if (options.touchAction) {\r\n            this.touchAction.update();\r\n        }\r\n        if (options.inputTarget) {\r\n            // Clean up existing event listeners and reinitialize\r\n            this.input.destroy();\r\n            this.input.target = options.inputTarget;\r\n            this.input.init();\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * stop recognizing for this session.\r\n     * This session will be discarded, when a new [input]start event is fired.\r\n     * When forced, the recognizer cycle is stopped immediately.\r\n     * @param {Boolean} [force]\r\n     */\r\n    stop: function(force) {\r\n        this.session.stopped = force ? FORCED_STOP : STOP;\r\n    },\r\n\r\n    /**\r\n     * run the recognizers!\r\n     * called by the inputHandler function on every movement of the pointers (touches)\r\n     * it walks through all the recognizers and tries to detect the gesture that is being made\r\n     * @param {Object} inputData\r\n     */\r\n    recognize: function(inputData) {\r\n        var session = this.session;\r\n        if (session.stopped) {\r\n            return;\r\n        }\r\n\r\n        // run the touch-action polyfill\r\n        this.touchAction.preventDefaults(inputData);\r\n\r\n        var recognizer;\r\n        var recognizers = this.recognizers;\r\n\r\n        // this holds the recognizer that is being recognized.\r\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\r\n        // if no recognizer is detecting a thing, it is set to `null`\r\n        var curRecognizer = session.curRecognizer;\r\n\r\n        // reset when the last recognizer is recognized\r\n        // or when we're in a new session\r\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\r\n            curRecognizer = session.curRecognizer = null;\r\n        }\r\n\r\n        var i = 0;\r\n        while (i < recognizers.length) {\r\n            recognizer = recognizers[i];\r\n\r\n            // find out if we are allowed try to recognize the input for this one.\r\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\r\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\r\n            //      that is being recognized.\r\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\r\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\r\n            if (session.stopped !== FORCED_STOP && ( // 1\r\n                    !curRecognizer || recognizer == curRecognizer || // 2\r\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\r\n                recognizer.recognize(inputData);\r\n            } else {\r\n                recognizer.reset();\r\n            }\r\n\r\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\r\n            // current active recognizer. but only if we don't already have an active recognizer\r\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\r\n                curRecognizer = session.curRecognizer = recognizer;\r\n            }\r\n            i++;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * get a recognizer by its event name.\r\n     * @param {Recognizer|String} recognizer\r\n     * @returns {Recognizer|Null}\r\n     */\r\n    get: function(recognizer) {\r\n        if (recognizer instanceof Recognizer) {\r\n            return recognizer;\r\n        }\r\n\r\n        var recognizers = this.recognizers;\r\n        for (var i = 0; i < recognizers.length; i++) {\r\n            if (recognizers[i].options.event == recognizer) {\r\n                return recognizers[i];\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n\r\n    /**\r\n     * add a recognizer to the manager\r\n     * existing recognizers with the same event name will be removed\r\n     * @param {Recognizer} recognizer\r\n     * @returns {Recognizer|Manager}\r\n     */\r\n    add: function(recognizer) {\r\n        if (invokeArrayArg(recognizer, 'add', this)) {\r\n            return this;\r\n        }\r\n\r\n        // remove existing\r\n        var existing = this.get(recognizer.options.event);\r\n        if (existing) {\r\n            this.remove(existing);\r\n        }\r\n\r\n        this.recognizers.push(recognizer);\r\n        recognizer.manager = this;\r\n\r\n        this.touchAction.update();\r\n        return recognizer;\r\n    },\r\n\r\n    /**\r\n     * remove a recognizer by name or instance\r\n     * @param {Recognizer|String} recognizer\r\n     * @returns {Manager}\r\n     */\r\n    remove: function(recognizer) {\r\n        if (invokeArrayArg(recognizer, 'remove', this)) {\r\n            return this;\r\n        }\r\n\r\n        var recognizers = this.recognizers;\r\n        recognizer = this.get(recognizer);\r\n        recognizers.splice(inArray(recognizers, recognizer), 1);\r\n\r\n        this.touchAction.update();\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * bind event\r\n     * @param {String} events\r\n     * @param {Function} handler\r\n     * @returns {EventEmitter} this\r\n     */\r\n    on: function(events, handler) {\r\n        var handlers = this.handlers;\r\n        each(splitStr(events), function(event) {\r\n            handlers[event] = handlers[event] || [];\r\n            handlers[event].push(handler);\r\n        });\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * unbind event, leave emit blank to remove all handlers\r\n     * @param {String} events\r\n     * @param {Function} [handler]\r\n     * @returns {EventEmitter} this\r\n     */\r\n    off: function(events, handler) {\r\n        var handlers = this.handlers;\r\n        each(splitStr(events), function(event) {\r\n            if (!handler) {\r\n                delete handlers[event];\r\n            } else {\r\n                handlers[event].splice(inArray(handlers[event], handler), 1);\r\n            }\r\n        });\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * emit event to the listeners\r\n     * @param {String} event\r\n     * @param {Object} data\r\n     */\r\n    emit: function(event, data) {\r\n        // we also want to trigger dom events\r\n        if (this.options.domEvents) {\r\n            triggerDomEvent(event, data);\r\n        }\r\n\r\n        // no handlers, so skip it all\r\n        var handlers = this.handlers[event] && this.handlers[event].slice();\r\n        if (!handlers || !handlers.length) {\r\n            return;\r\n        }\r\n\r\n        data.type = event;\r\n        data.preventDefault = function() {\r\n            data.srcEvent.preventDefault();\r\n        };\r\n\r\n        var i = 0;\r\n        while (i < handlers.length) {\r\n            handlers[i](data);\r\n            i++;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * destroy the manager and unbinds all events\r\n     * it doesn't unbind dom events, that is the user own responsibility\r\n     */\r\n    destroy: function() {\r\n        this.element && toggleCssProps(this, false);\r\n\r\n        this.handlers = {};\r\n        this.session = {};\r\n        this.input.destroy();\r\n        this.element = null;\r\n    }\r\n};\r\n\r\n/**\r\n * add/remove the css properties as defined in manager.options.cssProps\r\n * @param {Manager} manager\r\n * @param {Boolean} add\r\n */\r\nfunction toggleCssProps(manager, add) {\r\n    var element = manager.element;\r\n    each(manager.options.cssProps, function(value, name) {\r\n        element.style[prefixed(element.style, name)] = add ? value : '';\r\n    });\r\n}\r\n\r\n/**\r\n * trigger dom event\r\n * @param {String} event\r\n * @param {Object} data\r\n */\r\nfunction triggerDomEvent(event, data) {\r\n    var gestureEvent = document.createEvent('Event');\r\n    gestureEvent.initEvent(event, true, true);\r\n    gestureEvent.gesture = data;\r\n    data.target.dispatchEvent(gestureEvent);\r\n}\r\n\r\nextend(Hammer, {\r\n    INPUT_START: INPUT_START,\r\n    INPUT_MOVE: INPUT_MOVE,\r\n    INPUT_END: INPUT_END,\r\n    INPUT_CANCEL: INPUT_CANCEL,\r\n\r\n    STATE_POSSIBLE: STATE_POSSIBLE,\r\n    STATE_BEGAN: STATE_BEGAN,\r\n    STATE_CHANGED: STATE_CHANGED,\r\n    STATE_ENDED: STATE_ENDED,\r\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\r\n    STATE_CANCELLED: STATE_CANCELLED,\r\n    STATE_FAILED: STATE_FAILED,\r\n\r\n    DIRECTION_NONE: DIRECTION_NONE,\r\n    DIRECTION_LEFT: DIRECTION_LEFT,\r\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\r\n    DIRECTION_UP: DIRECTION_UP,\r\n    DIRECTION_DOWN: DIRECTION_DOWN,\r\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\r\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\r\n    DIRECTION_ALL: DIRECTION_ALL,\r\n\r\n    Manager: Manager,\r\n    Input: Input,\r\n    TouchAction: TouchAction,\r\n\r\n    TouchInput: TouchInput,\r\n    MouseInput: MouseInput,\r\n    PointerEventInput: PointerEventInput,\r\n    TouchMouseInput: TouchMouseInput,\r\n    SingleTouchInput: SingleTouchInput,\r\n\r\n    Recognizer: Recognizer,\r\n    AttrRecognizer: AttrRecognizer,\r\n    Tap: TapRecognizer,\r\n    Pan: PanRecognizer,\r\n    Swipe: SwipeRecognizer,\r\n    Pinch: PinchRecognizer,\r\n    Rotate: RotateRecognizer,\r\n    Press: PressRecognizer,\r\n\r\n    on: addEventListeners,\r\n    off: removeEventListeners,\r\n    each: each,\r\n    merge: merge,\r\n    extend: extend,\r\n    inherit: inherit,\r\n    bindFn: bindFn,\r\n    prefixed: prefixed\r\n});\r\n\r\nif (typeof define == TYPE_FUNCTION && define.amd) {\r\n    define(function() {\r\n        return Hammer;\r\n    });\r\n} else if (typeof module != 'undefined' && module.exports) {\r\n    module.exports = Hammer;\r\n} else {\r\n    window[exportName] = Hammer;\r\n}\r\n\r\n})(window, document, 'Hammer');\r\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar Hammer = require('hammerjs');\nvar browser = require('bowser');\n\nvar nextId = 1;\nvar idProperty = 'MarzipanoHammerElementId';\nfunction getKeyForElementAndType(element, type) {\n  if (!element[idProperty]) {\n    element[idProperty] = nextId++;\n  }\n  return type + element[idProperty];\n}\n\n\n/**\n * @class HammerGestures\n * @classdesc\n *\n * Manages Hammer.js instances. One instance is created for each combination of\n * DOM element and pointer type.\n */\nfunction HammerGestures() {\n  this._managers = {};\n  this._refCount = {};\n}\n\n\nHammerGestures.prototype.get = function(element, type) {\n  var key = getKeyForElementAndType(element, type);\n  if (!this._managers[key]) {\n    this._managers[key] = this._createManager(element, type);\n    this._refCount[key] = 0;\n  }\n  this._refCount[key]++;\n  return new HammerGesturesHandle(this, this._managers[key], element, type);\n};\n\n\nHammerGestures.prototype._createManager = function(element, type) {\n  var manager = new Hammer.Manager(element);\n\n  // Managers are created with different parameters for different pointer\n  // types.\n  if (type === 'mouse') {\n    manager.add(new Hammer.Pan({ direction: Hammer.DIRECTION_ALL, threshold: 0 }));\n  }\n  else if (type === 'touch' || type === 'pen' || type === 'kinect') {\n    // On touch one wants to have both panning and pinching. The panning\n    // recognizer needs a threshold to allow the pinch to be recognized.\n    manager.add(new Hammer.Pan({ direction: Hammer.DIRECTION_ALL, threshold: 20, pointers: 1 }));\n    if (!(browser.msie && parseFloat(browser.version) < 10)) {\n      // Do not add pinch to IE8-9 to prevent focus issues which prevent wheel scrolling from\n      // working.\n      manager.add(new Hammer.Pinch());\n    }\n  }\n\n  return manager;\n};\n\n\nHammerGestures.prototype._releaseHandle = function(element, type) {\n  var key = getKeyForElementAndType(element, type);\n  if (this._refCount[key]) {\n    this._refCount[key]--;\n    if (!this._refCount[key]) {\n      this._managers[key].destroy();\n      delete this._managers[key];\n      delete this._refCount[key];\n    }\n  }\n};\n\n\nfunction HammerGesturesHandle(hammerGestures, manager, element, type) {\n  this._manager = manager;\n  this._element = element;\n  this._type = type;\n  this._hammerGestures = hammerGestures;\n  this._eventHandlers = [];\n}\n\n\nHammerGesturesHandle.prototype.on = function(events, handler) {\n  var type = this._type;\n  var handlerFilteredEvents = function(e) {\n    if (type === e.pointerType) {\n      handler(e);\n    }\n  };\n\n  this._eventHandlers.push({ events: events, handler: handlerFilteredEvents });\n  this._manager.on(events, handlerFilteredEvents);\n};\n\n\nHammerGesturesHandle.prototype.release = function() {\n  for (var i = 0; i < this._eventHandlers.length; i++) {\n    var eventHandler = this._eventHandlers[i];\n    this._manager.off(eventHandler.events, eventHandler.handler);\n  }\n\n  this._hammerGestures._releaseHandle(this._element, this._type);\n  this._manager = null;\n  this._element = null;\n  this._type = null;\n  this._hammerGestures = null;\n};\n\n\nHammerGesturesHandle.prototype.manager = function() {\n  return this._manager;\n};\n\n\nmodule.exports = new HammerGestures();\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nfunction maxFriction(friction, velocityX, velocityY, maxFrictionTime, result) {\n  var velocity = Math.sqrt(Math.pow(velocityX,2) + Math.pow(velocityY,2));\n  friction = Math.max(friction, velocity/maxFrictionTime);\n  changeVectorNorm(velocityX, velocityY, friction, result);\n  result[0] = Math.abs(result[0]);\n  result[1] = Math.abs(result[1]);\n}\n\nfunction changeVectorNorm(x, y, n, result) {\n  var theta = Math.atan(y/x);\n  result[0] = n * Math.cos(theta);\n  result[1] = n * Math.sin(theta);\n}\n\nmodule.exports = {\n  maxFriction: maxFriction,\n  changeVectorNorm: changeVectorNorm\n};","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar Dynamics = require('./Dynamics');\nvar HammerGestures = require('./HammerGestures');\nvar defaults = require('../util/defaults');\nvar maxFriction = require('./util').maxFriction;\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\nvar defaultOptions = {\n  friction: 6,\n  maxFrictionTime: 0.3\n};\n\nvar debug = typeof MARZIPANODEBUG !== 'undefined' && MARZIPANODEBUG.controls;\n\n/**\n * @class DragControlMethod\n * @implements ControlMethod\n * @classdesc\n *\n * Controls the view by clicking/tapping and dragging.\n *\n * @param {Element} element Element to listen for events.\n * @param {string} pointerType Which Hammer.js pointer type to use (e.g.\n * `mouse` or `touch`).\n * @param {Object} opts\n * @param {number} opts.friction\n * @param {number} opts.maxFrictionTime\n */\nfunction DragControlMethod(element, pointerType, opts) {\n  this._element = element;\n\n  this._opts = defaults(opts || {}, defaultOptions);\n\n  this._startEvent = null;\n  this._lastEvent = null;\n\n  this._active = false;\n\n  this._dynamics = {\n    x: new Dynamics(),\n    y: new Dynamics()\n  };\n\n  this._hammer = HammerGestures.get(element, pointerType);\n\n  this._hammer.on(\"hammer.input\", this._handleHammerEvent.bind(this));\n\n  this._hammer.on('panstart', this._handleStart.bind(this));\n  this._hammer.on('panmove', this._handleMove.bind(this));\n  this._hammer.on('panend', this._handleEnd.bind(this));\n  this._hammer.on('pancancel', this._handleEnd.bind(this));\n\n}\n\neventEmitter(DragControlMethod);\n\n/**\n * Destructor.\n */\nDragControlMethod.prototype.destroy = function() {\n  this._hammer.release();\n  clearOwnProperties(this);\n};\n\nDragControlMethod.prototype._handleHammerEvent = function(e) {\n  if (e.isFirst) {\n    if (debug && this._active) {\n      throw new Error('DragControlMethod active detected when already active');\n    }\n    this._active = true;\n    this.emit('active');\n  }\n  if (e.isFinal) {\n    if (debug && !this._active) {\n      throw new Error('DragControlMethod inactive detected when already inactive');\n    }\n    this._active = false;\n    this.emit('inactive');\n  }\n};\n\nDragControlMethod.prototype._handleStart = function(e) {\n  // Prevent this event from dragging other DOM elements, causing\n  // unexpected behavior on Chrome.\n  e.preventDefault();\n\n  this._startEvent = e;\n};\n\n\nDragControlMethod.prototype._handleMove = function(e) {\n  // Prevent this event from dragging other DOM elements, causing\n  // unexpected behavior on Chrome.\n  e.preventDefault();\n\n  if (this._startEvent) {\n    this._updateDynamicsMove(e);\n    this.emit('parameterDynamics', 'axisScaledX', this._dynamics.x);\n    this.emit('parameterDynamics', 'axisScaledY', this._dynamics.y);\n  }\n};\n\n\nDragControlMethod.prototype._handleEnd = function(e) {\n  // Prevent this event from dragging other DOM elements, causing\n  // unexpected behavior on Chrome.\n  e.preventDefault();\n\n  if (this._startEvent) {\n    this._updateDynamicsRelease(e);\n    this.emit('parameterDynamics', 'axisScaledX', this._dynamics.x);\n    this.emit('parameterDynamics', 'axisScaledY', this._dynamics.y);\n  }\n\n  this._startEvent = false;\n  this._lastEvent = false;\n};\n\n\nDragControlMethod.prototype._updateDynamicsMove = function(e) {\n  var x = e.deltaX;\n  var y = e.deltaY;\n\n  // When a second finger touches the screen, panstart sometimes has a large\n  // offset at start; subtract that offset to prevent a sudden jump.\n  var eventToSubtract = this._lastEvent || this._startEvent;\n\n  if (eventToSubtract) {\n    x -= eventToSubtract.deltaX;\n    y -= eventToSubtract.deltaY;\n  }\n\n  var elementRect = this._element.getBoundingClientRect();\n  var width = elementRect.right - elementRect.left;\n  var height = elementRect.bottom - elementRect.top;\n\n  x /= width;\n  y /= height;\n\n  this._dynamics.x.reset();\n  this._dynamics.y.reset();\n  this._dynamics.x.offset = -x;\n  this._dynamics.y.offset = -y;\n\n  this._lastEvent = e;\n};\n\n\nvar tmpReleaseFriction = [ null, null ];\nDragControlMethod.prototype._updateDynamicsRelease = function(e) {\n  var elementRect = this._element.getBoundingClientRect();\n  var width = elementRect.right - elementRect.left;\n  var height = elementRect.bottom - elementRect.top;\n\n  var x = 1000 * e.velocityX / width;\n  var y = 1000 * e.velocityY / height;\n\n  this._dynamics.x.reset();\n  this._dynamics.y.reset();\n  this._dynamics.x.velocity = x;\n  this._dynamics.y.velocity = y;\n\n  maxFriction(this._opts.friction, this._dynamics.x.velocity, this._dynamics.y.velocity, this._opts.maxFrictionTime, tmpReleaseFriction);\n  this._dynamics.x.friction = tmpReleaseFriction[0];\n  this._dynamics.y.friction = tmpReleaseFriction[1];\n};\n\n\nmodule.exports = DragControlMethod;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar Dynamics = require('./Dynamics');\nvar HammerGestures = require('./HammerGestures');\nvar defaults = require('../util/defaults');\nvar maxFriction = require('./util').maxFriction;\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\n\nvar defaultOptions = {\n  speed: 8,\n  friction: 6,\n  maxFrictionTime: 0.3\n};\n\n\n/**\n * @class QtvrControlMethod\n * @implements ControlMethod\n * @classdesc\n *\n * Controls the view by holding the mouse button down and moving it.\n * Also known as \"QTVR\" control mode.\n *\n * @param {Element} element Element to listen for events.\n * @param {string} pointerType Which Hammer.js pointer type to use (e.g.\n * `mouse` or `touch`).\n * @param {Object} opts\n * @param {number} opts.speed\n * @param {number} opts.friction\n * @param {number} opts.maxFrictionTime\n */\n// TODO: allow speed not change linearly with distance to click spot.\n// Quadratic or other would allow a larger speed range.\nfunction QtvrControlMethod(element, pointerType, opts) {\n  this._element = element;\n\n  this._opts = defaults(opts || {}, defaultOptions);\n\n  this._active = false;\n\n  this._hammer = HammerGestures.get(element, pointerType);\n\n  this._dynamics = {\n    x: new Dynamics(),\n    y: new Dynamics()\n  };\n\n  this._hammer.on('panstart', this._handleStart.bind(this));\n  this._hammer.on('panmove', this._handleMove.bind(this));\n  this._hammer.on('panend', this._handleRelease.bind(this));\n  this._hammer.on('pancancel', this._handleRelease.bind(this));\n}\n\neventEmitter(QtvrControlMethod);\n\n/**\n * Destructor.\n */\nQtvrControlMethod.prototype.destroy = function() {\n  this._hammer.release();\n  clearOwnProperties(this);\n};\n\n\nQtvrControlMethod.prototype._handleStart = function(e) {\n  // Prevent event dragging other DOM elements and causing strange behavior on Chrome\n  e.preventDefault();\n\n  if (!this._active) {\n    this._active = true;\n    this.emit('active');\n  }\n};\n\n\nQtvrControlMethod.prototype._handleMove = function(e) {\n  // Prevent event dragging other DOM elements and causing strange behavior on Chrome\n  e.preventDefault();\n\n  this._updateDynamics(e, false);\n};\n\n\nQtvrControlMethod.prototype._handleRelease = function(e) {\n  // Prevent event dragging other DOM elements and causing strange behavior on Chrome\n  e.preventDefault();\n\n  this._updateDynamics(e, true);\n\n  if (this._active) {\n    this._active = false;\n    this.emit('inactive');\n  }\n};\n\n\nvar tmpReleaseFriction = [ null, null ];\nQtvrControlMethod.prototype._updateDynamics = function(e, release) {\n  var elementRect = this._element.getBoundingClientRect();\n  var width = elementRect.right - elementRect.left;\n  var height = elementRect.bottom - elementRect.top;\n  var maxDim = Math.max(width, height);\n\n  var x = e.deltaX / maxDim * this._opts.speed;\n  var y = e.deltaY / maxDim * this._opts.speed;\n\n  this._dynamics.x.reset();\n  this._dynamics.y.reset();\n  this._dynamics.x.velocity = x;\n  this._dynamics.y.velocity = y;\n\n  if (release) {\n    maxFriction(this._opts.friction, this._dynamics.x.velocity, this._dynamics.y.velocity, this._opts.maxFrictionTime, tmpReleaseFriction);\n    this._dynamics.x.friction = tmpReleaseFriction[0];\n    this._dynamics.y.friction = tmpReleaseFriction[1];\n  }\n\n  this.emit('parameterDynamics', 'x', this._dynamics.x);\n  this.emit('parameterDynamics', 'y', this._dynamics.y);\n};\n\n\nmodule.exports = QtvrControlMethod;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\n// Cross-browser mouse wheel event listener.\n// Adapted from: https://developer.mozilla.org/en-US/docs/Web/Events/wheel\n// This version requires eventShim.\nfunction WheelListener(elem, callback, useCapture) {\n  var eventName = getEventName();\n\n  if (eventName === 'wheel') {\n    this._fun = callback;\n    this._elem = elem;\n    this._elem.addEventListener('wheel', this._fun, useCapture);\n  } else if (eventName === 'mousewheel') {\n    this._fun = fallbackHandler(callback);\n    this._elem = elem;\n    this._elem.addEventListener('mousewheel', this._fun, useCapture);\n  } else {\n    throw new Error('Browser does not support mouse wheel events');\n  }\n}\n\n/**\n * Destructor.\n */\nWheelListener.prototype.destroy = function() {\n  this._elem.removeEventListener(getEventName(), this._fun);\n  clearOwnProperties(this);\n};\n\nfunction fallbackHandler(callback) {\n  return function handleWheelEvent(originalEvent) {\n    if (!originalEvent) {\n      originalEvent = window.event;\n    }\n\n    // Create a normalized event object.\n    var event = {\n      originalEvent: originalEvent,\n      target: originalEvent.target || originalEvent.srcElement,\n      type: \"wheel\",\n      deltaMode: 1,\n      deltaX: 0,\n      deltaZ: 0,\n      timeStamp: originalEvent.timeStamp || Date.now(),\n      preventDefault: originalEvent.preventDefault.bind(originalEvent)\n    };\n\n    // Calculate deltaY.\n    event.deltaY = - 1/40 * originalEvent.wheelDelta;\n    if (originalEvent.wheelDeltaX) {\n      // Calculate deltaX.\n      event.deltaX = - 1/40 * originalEvent.wheelDeltaX;\n    }\n\n    // Fire the callback.\n    return callback(event);\n  };\n}\n\n// Detect the supported wheel event name and cache the result.\nvar eventName;\nfunction getEventName() {\n  if (eventName !== undefined) {\n    return eventName;\n  }\n  if ('onwheel' in document.createElement('div')) {\n    // Modern browsers support 'wheel'.\n    return (eventName = 'wheel');\n  } else if (document.onmousewheel !== undefined) {\n    // Webkit and IE support at least 'mousewheel'.\n    return (eventName = 'mousewheel');\n  } else {\n    return (eventName = null);\n  }\n}\n\nmodule.exports = WheelListener;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar Dynamics = require('./Dynamics');\nvar WheelListener = require('./WheelListener');\nvar defaults = require('../util/defaults');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\nvar defaultOptions = {\n  frictionTime: 0.2,\n  zoomDelta: 0.001\n};\n\n/**\n * @class ScrollZoomControlMethod\n * @implements ControlMethod\n * @classdesc\n *\n * Controls the fov/zoom through the mouse wheel.\n *\n * @param {Element} element Element to listen for events.\n * @param {Object} opts\n * @param {number} [opts.frictionTime=0.2]\n * @param {number} [opts.zoomDelta=0.001]\n */\nfunction ScrollZoomControlMethod(element, opts) {\n  this._opts = defaults(opts || {}, defaultOptions);\n\n  this._dynamics = new Dynamics();\n\n  this._eventList = [];\n\n  var fn = this._opts.frictionTime ? this.withSmoothing : this.withoutSmoothing;\n  this._wheelListener = new WheelListener(element, fn.bind(this));\n}\n\neventEmitter(ScrollZoomControlMethod);\n\n/**\n * Destructor.\n */\nScrollZoomControlMethod.prototype.destroy = function() {\n  this._wheelListener.destroy();\n  clearOwnProperties(this);\n};\n\n\nScrollZoomControlMethod.prototype.withoutSmoothing = function(e) {\n  this._dynamics.offset = wheelEventDelta(e) * this._opts.zoomDelta;\n  this.emit('parameterDynamics', 'zoom', this._dynamics);\n\n  e.preventDefault();\n\n  this.emit('active');\n  this.emit('inactive');\n};\n\n\nScrollZoomControlMethod.prototype.withSmoothing = function(e) {\n  var currentTime = e.timeStamp;\n\n  // Record event.\n  this._eventList.push(e);\n\n  // Remove events whose smoothing has already expired.\n  while (this._eventList[0].timeStamp < currentTime - this._opts.frictionTime*1000) {\n    this._eventList.shift(0);\n  }\n\n  // Get the current velocity from the recorded events.\n  // Each wheel movement causes a velocity of change/frictionTime during frictionTime.\n  var velocity = 0;\n  for (var i = 0; i < this._eventList.length; i++) {\n    var zoomChangeFromEvent = wheelEventDelta(this._eventList[i]) * this._opts.zoomDelta;\n    velocity += zoomChangeFromEvent / this._opts.frictionTime;\n  }\n\n  this._dynamics.velocity = velocity;\n  this._dynamics.friction = Math.abs(velocity) / this._opts.frictionTime;\n\n  this.emit('parameterDynamics', 'zoom', this._dynamics);\n\n  e.preventDefault();\n\n  this.emit('active');\n  this.emit('inactive');\n};\n\n\nfunction wheelEventDelta(e) {\n  var multiplier = e.deltaMode == 1 ? 20 : 1;\n  return e.deltaY * multiplier;\n}\n\n\nmodule.exports = ScrollZoomControlMethod;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar Dynamics = require('./Dynamics');\nvar HammerGestures = require('./HammerGestures');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\n/**\n * @class PinchZoomControlMethod\n * @implements ControlMethod\n * @classdesc\n *\n * Control the view fov/zoom by pinching with two fingers.\n *\n * @param {Element} element Element to listen for events.\n * @param {string} pointerType Which Hammer.js pointer type to use\n * @param {Object} opts\n */\nfunction PinchZoomControlMethod(element, pointerType, opts) {\n  this._hammer = HammerGestures.get(element, pointerType);\n\n  this._lastEvent = null;\n\n  this._active = false;\n\n  this._dynamics = new Dynamics();\n\n  this._hammer.on('pinchstart', this._handleStart.bind(this));\n  this._hammer.on('pinch', this._handleEvent.bind(this));\n  this._hammer.on('pinchend', this._handleEnd.bind(this));\n  this._hammer.on('pinchcancel', this._handleEnd.bind(this));\n}\n\neventEmitter(PinchZoomControlMethod);\n\n/**\n * Destructor.\n */\nPinchZoomControlMethod.prototype.destroy = function() {\n  this._hammer.release();\n  clearOwnProperties(this);\n};\n\n\nPinchZoomControlMethod.prototype._handleStart = function() {\n  if (!this._active) {\n    this._active = true;\n    this.emit('active');\n  }\n};\n\n\nPinchZoomControlMethod.prototype._handleEnd = function() {\n  this._lastEvent = null;\n\n  if (this._active) {\n    this._active = false;\n    this.emit('inactive');\n  }\n};\n\n\nPinchZoomControlMethod.prototype._handleEvent = function(e) {\n  var scale = e.scale;\n\n  if (this._lastEvent) {\n    scale /= this._lastEvent.scale;\n  }\n\n  this._dynamics.offset = (scale - 1) * -1;\n  this.emit('parameterDynamics', 'zoom', this._dynamics);\n\n  this._lastEvent = e;\n};\n\n\nmodule.exports = PinchZoomControlMethod;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar Dynamics = require('./Dynamics');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\n/**\n * @class VelocityControlMethod\n * @implements ControlMethod\n * @classdesc\n *\n * Sets the velocity and friction of a single parameter.\n *\n * The user should emit 'active' and 'inactive' events if required.\n *\n * @param {String} parameter The parameter to be controlled (e.g. `x`, `y` or `zoom`)\n*/\nfunction VelocityControlMethod(parameter) {\n  if(!parameter) {\n    throw new Error(\"VelocityControlMethod: parameter must be defined\");\n  }\n\n  this._parameter = parameter;\n  this._dynamics = new Dynamics();\n}\neventEmitter(VelocityControlMethod);\n\n/**\n * Destructor.\n */\nVelocityControlMethod.prototype.destroy = function() {\n  clearOwnProperties(this);\n};\n\n/**\n * Set the parameter's velocity.\n * @param {Number} velocity\n */\nVelocityControlMethod.prototype.setVelocity = function(velocity) {\n  this._dynamics.velocity = velocity;\n  this.emit('parameterDynamics', this._parameter, this._dynamics);\n};\n\n/**\n * Set the parameter's friction.\n * @param {Number} friction\n */\nVelocityControlMethod.prototype.setFriction = function(friction) {\n  this._dynamics.friction = friction;\n  this.emit('parameterDynamics', this._parameter, this._dynamics);\n};\n\nmodule.exports = VelocityControlMethod;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar Dynamics = require('./Dynamics');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\n/**\n * @class ElementPressControlMethod\n * @implements ControlMethod\n * @classdesc\n *\n * Sets the velocity and friction of a single parameter by pressing and\n * unpressing a DOM element.\n *\n * @param {Element} element Element which activates the method when pressed\n * @param {string} parameter The parameter to be controlled (e.g. `x`, `y` or `zoom`)\n * @param {number} velocity Velocity at which the parameter changes. Use a\n * negative number for opposite direction\n * @param {number} friction Friction at which the parameter stops\n*/\nfunction ElementPressControlMethod(element, parameter, velocity, friction) {\n  if(!element) {\n    throw new Error(\"ElementPressControlMethod: element must be defined\");\n  }\n  if(!parameter) {\n    throw new Error(\"ElementPressControlMethod: parameter must be defined\");\n  }\n  if(!velocity) {\n    throw new Error(\"ElementPressControlMethod: velocity must be defined\");\n  }\n  if(!friction) {\n    throw new Error(\"ElementPressControlMethod: friction must be defined\");\n  }\n\n  this._element = element;\n\n  this._pressHandler = this._handlePress.bind(this);\n  this._releaseHandler = this._handleRelease.bind(this);\n\n  element.addEventListener('mousedown', this._pressHandler);\n  element.addEventListener('mouseup', this._releaseHandler);\n  element.addEventListener('mouseleave', this._releaseHandler);\n  element.addEventListener('touchstart', this._pressHandler);\n  element.addEventListener('touchmove', this._releaseHandler);\n  element.addEventListener('touchend', this._releaseHandler);\n\n  this._parameter = parameter;\n  this._velocity = velocity;\n  this._friction = friction;\n  this._dynamics = new Dynamics();\n\n  this._pressing = false;\n}\neventEmitter(ElementPressControlMethod);\n\n/**\n * Destructor.\n */\nElementPressControlMethod.prototype.destroy = function() {\n  this._element.removeEventListener('mousedown', this._pressHandler);\n  this._element.removeEventListener('mouseup', this._releaseHandler);\n  this._element.removeEventListener('mouseleave', this._releaseHandler);\n  this._element.removeEventListener('touchstart', this._pressHandler);\n  this._element.removeEventListener('touchmove', this._releaseHandler);\n  this._element.removeEventListener('touchend', this._releaseHandler);\n  clearOwnProperties(this);\n};\n\nElementPressControlMethod.prototype._handlePress = function() {\n  this._pressing = true;\n\n  this._dynamics.velocity = this._velocity;\n  this._dynamics.friction = 0;\n  this.emit('parameterDynamics', this._parameter, this._dynamics);\n  this.emit('active');\n};\n\nElementPressControlMethod.prototype._handleRelease = function() {\n  if(this._pressing) {\n    this._dynamics.friction = this._friction;\n    this.emit('parameterDynamics', this._parameter, this._dynamics);\n    this.emit('inactive');\n  }\n\n  this._pressing = false;\n};\n\nmodule.exports = ElementPressControlMethod;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar Dynamics = require('./Dynamics');\nvar now = require('../util/now');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\n/**\n * @class ControlComposer\n * @classdesc\n *\n * Combines changes in parameters triggered by multiple {@link ControlMethod}\n * instances.\n *\n * @listens ControlMethod#parameterDynamics\n */\nfunction ControlComposer(opts) {\n  opts = opts || {};\n\n  this._methods = [];\n\n  this._parameters = [ 'x' ,'y', 'axisScaledX', 'axisScaledY', 'zoom', 'yaw', 'pitch', 'roll' ];\n\n  this._now = opts.nowForTesting || now;\n\n  this._composedOffsets = { };\n\n  this._composeReturn = { offsets: this._composedOffsets, changing: null };\n}\n\neventEmitter(ControlComposer);\n\n\nControlComposer.prototype.add = function(instance) {\n  if (this.has(instance)) {\n    return;\n  }\n\n  var dynamics = {};\n  this._parameters.forEach(function(parameter) {\n    dynamics[parameter] = {\n      dynamics: new Dynamics(),\n      time: null\n    };\n  });\n\n  var parameterDynamicsHandler = this._updateDynamics.bind(this, dynamics);\n\n  var method = {\n    instance: instance,\n    dynamics: dynamics,\n    parameterDynamicsHandler: parameterDynamicsHandler\n  };\n\n  instance.addEventListener('parameterDynamics', parameterDynamicsHandler);\n\n  this._methods.push(method);\n};\n\n\nControlComposer.prototype.remove = function(instance) {\n  var index = this._indexOfInstance(instance);\n  if (index >= 0) {\n    var method = this._methods.splice(index, 1)[0];\n    method.instance.removeEventListener('parameterDynamics', method.parameterDynamicsHandler);\n  }\n};\n\n\nControlComposer.prototype.has = function(instance) {\n  return this._indexOfInstance(instance) >= 0;\n};\n\n\nControlComposer.prototype._indexOfInstance = function(instance) {\n  for (var i = 0; i < this._methods.length; i++) {\n    if (this._methods[i].instance === instance) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n\nControlComposer.prototype.list = function() {\n  var instances = [];\n  for (var i = 0; i < this._methods.length; i++) {\n    instances.push(this._methods[i].instance);\n  }\n  return instances;\n};\n\n\nControlComposer.prototype._updateDynamics = function(storedDynamics, parameter, dynamics) {\n  var parameterDynamics = storedDynamics[parameter];\n\n  if (!parameterDynamics) {\n    throw new Error(\"Unknown control parameter \" + parameter);\n  }\n\n  var newTime = this._now();\n  parameterDynamics.dynamics.update(dynamics, (newTime - parameterDynamics.time)/1000);\n  parameterDynamics.time = newTime;\n\n  this.emit('change');\n};\n\n\nControlComposer.prototype._resetComposedOffsets = function() {\n  for (var i = 0; i < this._parameters.length; i++) {\n    this._composedOffsets[this._parameters[i]] = 0;\n  }\n};\n\n\nControlComposer.prototype.offsets = function() {\n  var parameter;\n  var changing = false;\n\n  var currentTime = this._now();\n\n  this._resetComposedOffsets();\n\n  for (var i = 0; i < this._methods.length; i++) {\n    var methodDynamics = this._methods[i].dynamics;\n\n    for (var p = 0; p < this._parameters.length; p++) {\n      parameter = this._parameters[p];\n      var parameterDynamics = methodDynamics[parameter];\n      var dynamics = parameterDynamics.dynamics;\n\n\n      // Add offset to composed offset\n      if (dynamics.offset != null) {\n        this._composedOffsets[parameter] += dynamics.offset;\n        // Reset offset\n        dynamics.offset = null;\n      }\n\n      // Calculate offset from velocity and add it\n      var elapsed = (currentTime - parameterDynamics.time)/1000;\n      var offsetFromVelocity = dynamics.offsetFromVelocity(elapsed);\n\n      if(offsetFromVelocity) {\n        this._composedOffsets[parameter] += offsetFromVelocity;\n      }\n\n      // Update velocity on dynamics\n      var currentVelocity = dynamics.velocityAfter(elapsed);\n      dynamics.velocity = currentVelocity;\n\n      // If there is still a velocity, set changing\n      if(currentVelocity) {\n        changing = true;\n      }\n\n      parameterDynamics.time = currentTime;\n    }\n  }\n\n  this._composeReturn.changing = changing;\n  return this._composeReturn;\n};\n\n\nControlComposer.prototype.destroy = function() {\n  var instances = this.list();\n  for (var i = 0; i < instances.length; i++) {\n    this.remove(instances[i]);\n  }\n\n  clearOwnProperties(this);\n};\n\n\nmodule.exports = ControlComposer;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar Composer = require('./Composer');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\nvar debug = typeof MARZIPANODEBUG !== 'undefined' && MARZIPANODEBUG.controls;\n\n/**\n * @class Controls\n * @classdesc\n *\n * Set of controls which affect a view (e.g. keyboard, touch)\n *\n * {@link ControlMethod} instances can be registered on this class. The methods\n * are then combined to calculate the final parameters to change the {@link View}.\n *\n * Controls is attached to a {@link RenderLoop}. Currently it affects the\n * {@link view} of all {@link Layer} on the {@link Stage} of the\n * {@link RenderLoop} it is attached to. A more flexible API may be provided\n * in the future.\n *\n * The ControlMethod instances are registered with an id and may be enabled,\n * disabled and unregistered using that id. The whole Control can also be\n * enabled or disabled.\n *\n */\nfunction Controls(opts) {\n  opts = opts || {};\n\n  this._methods = {};\n  this._methodGroups = {};\n  this._composer = new Composer();\n\n  // Whether the controls are enabled.\n  this._enabled = (opts && opts.enabled) ? !!opts.enabled : true;\n\n  // How many control methods are enabled and in the active state.\n  this._activeCount = 0;\n\n  this.updatedViews_ = [];\n\n  this._attachedRenderLoop = null;\n}\n\neventEmitter(Controls);\n\n/**\n * Destructor.\n */\nControls.prototype.destroy = function() {\n  this.detach();\n  this._composer.destroy();\n  clearOwnProperties(this);\n};\n\n\n/**\n * @return {ControlMethod[]} List of registered @{link ControlMethod instances}\n */\nControls.prototype.methods = function() {\n  var obj = {};\n  for (var id in this._methods) {\n    obj[id] = this._methods[id];\n  }\n  return obj;\n};\n\n/**\n * @param {String} id\n * @return {ControlMethod}\n */\nControls.prototype.method = function(id) {\n  return this._methods[id];\n};\n\n/**\n * @param {String} id\n * @param {ControlMethod} instance\n * @param {Boolean} [enable=false]\n */\nControls.prototype.registerMethod = function(id, instance, enable) {\n  if (this._methods[id]) {\n    throw new Error('Control method already registered with id ' + id);\n  }\n\n  this._methods[id] = {\n    instance: instance,\n    enabled: false,\n    active: false,\n    activeHandler: this._handleActive.bind(this, id),\n    inactiveHandler: this._handleInactive.bind(this, id)\n  };\n\n  if(enable) {\n    this.enableMethod(id, instance);\n  }\n};\n\n\n/**\n * @param {String} id\n */\nControls.prototype.unregisterMethod = function(id) {\n  var method = this._methods[id];\n  if (!method) {\n    throw new Error('No control method registered with id ' + id);\n  }\n  if (method.enabled) {\n    this.disableMethod(id);\n  }\n  delete this._methods[id];\n};\n\n/**\n * @param {String} id\n */\nControls.prototype.enableMethod = function(id) {\n  var method = this._methods[id];\n  if (!method) {\n    throw new Error('No control method registered with id ' + id);\n  }\n  if (method.enabled) {\n    return;\n  }\n  method.enabled = true;\n  if (method.active) {\n    this._incrementActiveCount();\n  }\n  this._listen(id);\n  this._updateComposer();\n  this.emit('methodEnabled', id);\n};\n\n\n/**\n * @param {String} id\n */\nControls.prototype.disableMethod = function(id) {\n  var method = this._methods[id];\n  if (!method) {\n    throw new Error('No control method registered with id ' + id);\n  }\n  if (!method.enabled) {\n    return;\n  }\n  method.enabled = false;\n  if (method.active) {\n    this._decrementActiveCount();\n  }\n  this._unlisten(id);\n  this._updateComposer();\n  this.emit('methodDisabled', id);\n};\n\n\n/**\n * Create a method group, which can be used to more conveniently enable or\n * disable several control methods at once\n * @param {String} groupId\n * @param {String[]} methodIds\n */\nControls.prototype.addMethodGroup = function(groupId, methodIds) {\n  this._methodGroups[groupId] = methodIds;\n}\n\n/**\n * @param {String} groupId\n */\nControls.prototype.removeMethodGroup = function(id) {\n  delete this._methodGroups[id];\n}\n\n/**\n * @return {ControlMethodGroup[]} List of control method groups\n */\nControls.prototype.methodGroups = function() {\n  var obj = {};\n  for (var id in this._methodGroups) {\n    obj[id] = this._methodGroups[id];\n  }\n  return obj;\n}\n\n/**\n * Enables all the control methods in the group\n * @param {String} groupId\n */\nControls.prototype.enableMethodGroup = function(id) {\n  var self = this;\n  self._methodGroups[id].forEach(function(methodId) {\n    self.enableMethod(methodId);\n  });\n}\n\n/**\n * Disables all the control methods in the group\n * @param {String} groupId\n */\nControls.prototype.disableMethodGroup = function(id) {\n  var self = this;\n  self._methodGroups[id].forEach(function(methodId) {\n    self.disableMethod(methodId);\n  });\n}\n\n/**\n * @returns {Boolean}\n */\nControls.prototype.enabled = function() {\n  return this._enabled;\n};\n\n/**\n * Enables the controls\n */\nControls.prototype.enable = function() {\n  if (this._enabled) {\n    return;\n  }\n  this._enabled = true;\n  if (this._activeCount > 0) {\n    this.emit('active');\n  }\n  this.emit('enabled');\n  this._updateComposer();\n};\n\n\n/**\n * Disables the controls\n */\nControls.prototype.disable = function() {\n  if (!this._enabled) {\n    return;\n  }\n  this._enabled = false;\n  if (this._activeCount > 0) {\n    this.emit('inactive');\n  }\n  this.emit('disabled');\n  this._updateComposer();\n};\n\n\n\n/**\n * Attaches the controls to a {@link RenderLoop}. The RenderLoop will be woken\n * up when the controls are activated\n *\n * @param {RenderLoop}\n */\nControls.prototype.attach = function(renderLoop) {\n  if (this._attachedRenderLoop) {\n    this.detach();\n  }\n\n  this._attachedRenderLoop = renderLoop;\n  this._beforeRenderHandler = this._updateViewsWithControls.bind(this);\n  this._changeHandler = renderLoop.renderOnNextFrame.bind(renderLoop);\n\n  this._attachedRenderLoop.addEventListener('beforeRender', this._beforeRenderHandler);\n  this._composer.addEventListener('change', this._changeHandler);\n};\n\n/**\n * Detaches the controls\n */\nControls.prototype.detach = function() {\n  if (!this._attachedRenderLoop) {\n    return;\n  }\n\n  this._attachedRenderLoop.removeEventListener('beforeRender', this._beforeRenderHandler);\n  this._composer.removeEventListener('change', this._changeHandler);\n\n  this._beforeRenderHandler = null;\n  this._changeHandler = null;\n  this._attachedRenderLoop = null;\n};\n\n/**\n * @param {Boolean}\n */\nControls.prototype.attached = function() {\n  return this._attachedRenderLoop != null;\n};\n\n\nControls.prototype._listen = function(id) {\n  var method = this._methods[id];\n  if (!method) {\n    throw new Error('Bad method id');\n  }\n  method.instance.addEventListener('active', method.activeHandler);\n  method.instance.addEventListener('inactive', method.inactiveHandler);\n};\n\n\nControls.prototype._unlisten = function(id) {\n  var method = this._methods[id];\n  if (!method) {\n    throw new Error('Bad method id');\n  }\n  method.instance.removeEventListener('active', method.activeHandler);\n  method.instance.removeEventListener('inactive', method.inactiveHandler);\n};\n\n\nControls.prototype._handleActive = function(id) {\n  var method = this._methods[id];\n  if (!method) {\n    throw new Error('Bad method id');\n  }\n  if (!method.enabled) {\n    throw new Error('Should not receive event from disabled control method');\n  }\n  if (!method.active) {\n    method.active = true;\n    this._incrementActiveCount();\n  }\n};\n\n\nControls.prototype._handleInactive = function(id) {\n  var method = this._methods[id];\n  if (!method) {\n    throw new Error('Bad method id');\n  }\n  if (!method.enabled) {\n    throw new Error('Should not receive event from disabled control method');\n  }\n  if (method.active) {\n    method.active = false;\n    this._decrementActiveCount();\n  }\n};\n\n\nControls.prototype._incrementActiveCount = function() {\n  this._activeCount++;\n  if (debug) {\n    this._checkActiveCount();\n  }\n  if (this._enabled && this._activeCount === 1) {\n    this.emit('active');\n  }\n};\n\n\nControls.prototype._decrementActiveCount = function() {\n  this._activeCount--;\n  if (debug) {\n    this._checkActiveCount();\n  }\n  if (this._enabled && this._activeCount === 0) {\n    this.emit('inactive');\n  }\n};\n\n\nControls.prototype._checkActiveCount = function() {\n  var count = 0;\n  for (var id in this._methods) {\n    var method = this._methods[id];\n    if (method.enabled && method.active) {\n      count++;\n    }\n  }\n  if (count != this._activeCount) {\n    throw new Error('Bad control state');\n  }\n};\n\n\nControls.prototype._updateComposer = function() {\n  var composer = this._composer;\n\n  for (var id in this._methods) {\n    var method = this._methods[id];\n    var enabled = this._enabled && method.enabled;\n\n    if (enabled && !composer.has(method.instance)) {\n      composer.add(method.instance);\n    }\n    if (!enabled && composer.has(method.instance)) {\n      composer.remove(method.instance);\n    }\n  }\n};\n\n\nControls.prototype._updateViewsWithControls = function() {\n  var controlData = this._composer.offsets();\n  if (controlData.changing) {\n    this._attachedRenderLoop.renderOnNextFrame();\n  }\n\n  // Update each view at most once, even when shared by multiple layers.\n  // The number of views is expected to be small, so use an array to keep track.\n  this.updatedViews_.length = 0;\n\n  var layers = this._attachedRenderLoop.stage().listLayers();\n  for (var i = 0; i < layers.length; i++) {\n    var view = layers[i].view();\n    if (this.updatedViews_.indexOf(view) < 0) {\n      layers[i].view().updateWithControlParameters(controlData.offsets);\n      this.updatedViews_.push(view);\n    }\n  }\n};\n\n\nmodule.exports = Controls;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar cssSupported = require('../support/Css');\nvar setTransform = require('./dom').setTransform;\nvar setPixelPosition = require('./dom').setPixelPosition;\nvar decimal = require('./decimal');\n\n// This cannot belong in util/dom.js because support/Css also depends on it\n// and it would cause a circular dependency.\n\nfunction positionAbsolutely(element, x, y, extraTransforms) {\n  extraTransforms = extraTransforms || '';\n  if (cssSupported()) {\n    // Use CSS 3D transforms when the browser supports them.\n    // A translateZ(0) transform improves performance on Chrome by creating a\n    // new layer for the element, which prevents unnecessary repaints.\n    var transform = 'translateX(' + decimal(x) + 'px) translateY(' + decimal(y) + 'px) translateZ(0) ' + extraTransforms;\n    setTransform(element, transform);\n  } else {\n    // Fall back to absolute positioning.\n    setPixelPosition(element, x, y);\n  }\n}\n\nmodule.exports = positionAbsolutely;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar cssSupported = require('./support/Css');\nvar positionAbsolutely = require('./util/positionAbsolutely');\nvar setTransform = require('./util/dom').setTransform;\nvar clearOwnProperties = require('./util/clearOwnProperties');\n\n/**\n * @class Hotspot\n * @classdesc\n *\n * A Hotspot allows a DOM element to be placed at a fixed position in the\n * image. The position is updated automatically when the {@link View view}\n * changes.\n *\n * Positioning is performed with the `transform` CSS property when available,\n * falling back to the `position`, `left` and `top` properties when not.\n * In both cases, the top left corner of the element is placed in the requested\n * position; clients are expected to use additional children elements or other\n * CSS properties to achieve more sophisticated layouts.\n *\n * There are two kinds of hotspots: regular and embedded. A regular hotspot\n * does not change size depending on the zoom level. An embedded hotspot is\n * displayed at a fixed size relative to the panorama, always covering the\n * same portion of the image. Embedded hotspots require CSS 3D transform\n * support.\n *\n * Clients should call {@link HotspotContainer#createHotspot} instead of\n * invoking the constructor directly.\n *\n * @param {Element} domElement The DOM element.\n * @param {View} view The view.\n * @param {Object} coords The hotspot coordinates.\n *     Use {@link RectilinearViewCoords} for a {@link RectilinearView} or\n *     {@link FlatViewCoords} for a {@link FlatView}.\n * @param {Object} opts Additional options.\n * @param {Object} opts.perspective Perspective options for embedded hotspots.\n * @param {number} [opts.perspective.radius=null] If set, embed the hotspot\n *     into the image by transforming it into the surface of a sphere with this\n *     radius.\n * @param {string} [opts.perspective.extraTransforms=null] If set, append this\n *     value to the CSS `transform` property used to position the hotspot. This\n *     may be used to rotate an embedded hotspot.\n */\nfunction Hotspot(domElement, parentDomElement, view, coords, opts) {\n\n  opts = opts || {};\n  opts.perspective = opts.perspective || {};\n  opts.perspective.extraTransforms =\n      opts.perspective.extraTransforms != null ? opts.perspective.extraTransforms : \"\";\n\n  if ((opts.perspective.radius || opts.perspective.extraTransforms) && !cssSupported()) {\n    throw new Error('CSS transforms on hotspots are not supported on this browser');\n  }\n\n  this._domElement = domElement;\n  this._parentDomElement = parentDomElement;\n  this._view = view;\n  this._coords = {};\n  this._perspective = {};\n\n  this.setPosition(coords);\n\n  // Add hotspot into the DOM.\n  this._parentDomElement.appendChild(this._domElement);\n\n  this.setPerspective(opts.perspective);\n\n  // Whether the hotspot is visible.\n  // The hotspot may still be hidden if it's inside a hidden HotspotContainer.\n  this._visible = true;\n\n  // The current calculated screen position.\n  this._position = { x: 0, y: 0 };\n}\n\neventEmitter(Hotspot);\n\n\n/**\n * Destructor.\n * Clients should call {@link HotspotContainer#destroyHotspot} instead.\n */\nHotspot.prototype.destroy = function() {\n  this._parentDomElement.removeChild(this._domElement);\n  clearOwnProperties(this);\n};\n\n\n/**\n * @return {Element}\n */\nHotspot.prototype.domElement = function() {\n  return this._domElement;\n};\n\n\n/**\n * @return {Object}\n */\nHotspot.prototype.position = function() {\n  return this._coords;\n};\n\n\n/**\n * @param {Object} coords\n */\nHotspot.prototype.setPosition = function(coords) {\n  for (var key in coords) {\n    this._coords[key] = coords[key];\n  }\n  this._update();\n  // TODO: We should probably emit a hotspotsChange event on the parent\n  // HotspotContainer. What's the best way to do so?\n};\n\n\n/**\n * @return {Object}\n */\nHotspot.prototype.perspective = function() {\n  return this._perspective;\n};\n\n\n/**\n * @param {Object}\n */\nHotspot.prototype.setPerspective = function(perspective) {\n  for (var key in perspective) {\n    this._perspective[key] = perspective[key];\n  }\n  this._update();\n};\n\n\n/**\n * Show the hotspot\n */\nHotspot.prototype.show = function() {\n  if (!this._visible) {\n    this._visible = true;\n    this._update();\n  }\n};\n\n\n/**\n * Hide the hotspot\n */\nHotspot.prototype.hide = function() {\n  if (this._visible) {\n    this._visible = false;\n    this._update();\n  }\n};\n\n\nHotspot.prototype._update = function() {\n  var element = this._domElement;\n\n  var params = this._coords;\n  var position = this._position;\n  var x, y;\n\n  var isVisible = false;\n\n  if (this._visible) {\n    var view = this._view;\n\n    if (this._perspective.radius) {\n      // Hotspots that are embedded in the panorama may be visible even when\n      // positioned behind the camera.\n      isVisible = true;\n      this._setEmbeddedPosition(view, params);\n    } else {\n      // Regular hotspots are only visible when positioned in front of the\n      // camera. Note that they may be partially visible when positioned outside\n      // the viewport.\n      view.coordinatesToScreen(params, position);\n      x = position.x;\n      y = position.y;\n\n      if (x != null && y != null) {\n        isVisible = true;\n        this._setPosition(x, y);\n      }\n    }\n  }\n\n  // Show if visible, hide if not.\n  if (isVisible) {\n    element.style.display = 'block';\n    element.style.position = 'absolute';\n  }\n  else {\n    element.style.display = 'none';\n    element.style.position = '';\n  }\n\n};\n\n\nHotspot.prototype._setEmbeddedPosition = function(view, params) {\n  var transform = view.coordinatesToPerspectiveTransform(\n      params, this._perspective.radius, this._perspective.extraTransforms);\n  setTransform(this._domElement, transform);\n};\n\n\nHotspot.prototype._setPosition = function(x, y) {\n  positionAbsolutely(this._domElement, x, y, this._perspective.extraTransforms);\n};\n\n\nmodule.exports = Hotspot;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar browser = require('bowser');\n\n// Detect CSS pointer-events support.\nfunction checkCssPointerEventsSupported() {\n\n  // Check for existence of CSS property.\n  var style = document.createElement('a').style;\n  style.cssText = 'pointer-events:auto';\n  var hasCssProperty = style.pointerEvents === 'auto';\n\n  // The above result is spurious on emulation mode for IE 8-10.\n  var isOldIE = browser.msie && parseFloat(browser.version) < 11;\n\n  return hasCssProperty && !isOldIE;\n}\n\n// Cache result.\nvar supported;\nfunction cssPointerEventsSupported() {\n  if (supported !== undefined) {\n    return supported;\n  }\n  return (supported = checkCssPointerEventsSupported());\n}\n\nmodule.exports = cssPointerEventsSupported;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar Hotspot = require('./Hotspot');\nvar calcRect = require('./util/calcRect');\nvar cssPointerEventsSupported = require('./support/cssPointerEvents');\nvar positionAbsolutely = require('./util/positionAbsolutely');\nvar setAbsolute = require('./util/dom').setAbsolute;\nvar setOverflowHidden = require('./util/dom').setOverflowHidden;\nvar setOverflowVisible = require('./util/dom').setOverflowVisible;\nvar setNullSize = require('./util/dom').setNullSize;\nvar setPixelSize = require('./util/dom').setPixelSize;\nvar setPointerEvents = require('./util/dom').setWithVendorPrefix('pointer-events');\nvar clearOwnProperties = require('./util/clearOwnProperties');\n\n/**\n * Signals that a hotspot has been created or destroyed on the container.\n * @event HotspotContainer#hotspotsChange\n */\n\n/**\n * @class HotspotContainer\n * @classdesc\n *\n * Creates a DOM element to hold {@link Hotspot hotspots} and updates their\n * position when necessary.\n *\n * @param {Element} parentDomElement The DOM element inside which the container\n *     should be created.\n * @param {Stage} stage The underlying stage.\n * @param {View} view The view according to which the hotspots are positioned.\n * @param {RenderLoop} renderLoop The render loop indicating when the hotspots\n *     must be rendered.\n * @param {Object} opts\n * @param {RectSpec} opts.rect Rectangular region covered by the container. See\n *    {@link Effects#rect}.\n */\nfunction HotspotContainer(parentDomElement, stage, view, renderLoop, opts) {\n  opts = opts || {};\n\n  this._parentDomElement = parentDomElement;\n  this._stage = stage;\n  this._view = view;\n  this._renderLoop = renderLoop;\n\n  // Hotspot list.\n  this._hotspots = [];\n\n  // Whether the hotspot container should be visible.\n  // It may still be hidden if a rect effect is set on a browser without\n  // pointer-events support.\n  this._visible = true;\n\n  // The current rect.\n  this._rect = opts.rect;\n\n  // Whether the visibility or the rect have changed since the last DOM update.\n  this._visibilityOrRectChanged = true;\n\n  // The last seen stage dimensions.\n  this._stageWidth = null;\n  this._stageHeight = null;\n\n  // Temporary variable to hold the calculated position and size.\n  this._tmpRect = {};\n\n  // Wrapper element. When the rect effect is set, the wrapper will have nonzero\n  // dimensions and `pointer-events: none` so that hotspots outside the rect are\n  // hidden, but no mouse events are hijacked. The exception is browsers without\n  // pointer-events support, where we refuse to show the hotspots when a rect is\n  // set as it would prevent the controls from receiving mouse events.\n  this._hotspotContainerWrapper = document.createElement('div');\n  setAbsolute(this._hotspotContainerWrapper);\n  setPointerEvents(this._hotspotContainerWrapper, 'none');\n  this._parentDomElement.appendChild(this._hotspotContainerWrapper);\n\n  // Hotspot container element. It has zero dimensions and `pointer-events: all`\n  // to override the `pointer-events: none` on the wrapper and allow hotspots to\n  // be interacted with.\n  this._hotspotContainer = document.createElement('div');\n  setAbsolute(this._hotspotContainer);\n  setPointerEvents(this._hotspotContainer, 'all');\n  this._hotspotContainerWrapper.appendChild(this._hotspotContainer);\n\n  // Update when the hotspots change or scene is re-rendered.\n  this._updateHandler = this._update.bind(this);\n  this._renderLoop.addEventListener('afterRender', this._updateHandler);\n}\n\neventEmitter(HotspotContainer);\n\n\n/**\n * Destructor.\n */\nHotspotContainer.prototype.destroy = function() {\n  while (this._hotspots.length) {\n    this.destroyHotspot(this._hotspots[0]);\n  }\n\n  this._parentDomElement.removeChild(this._hotspotContainerWrapper);\n\n  this._renderLoop.removeEventListener('afterRender', this._updateHandler);\n\n  clearOwnProperties(this);\n};\n\n\n/**\n * @return {Element}\n */\nHotspotContainer.prototype.domElement = function() {\n  return this._hotspotContainer;\n};\n\n\n/**\n * @param {Rect} rect\n */\nHotspotContainer.prototype.setRect = function(rect) {\n  if (rect && !cssPointerEventsSupported() && typeof console !== 'undefined') {\n    console.warn(\n        \"Using a rect effect is not fully supported on this browser. \" +\n        \"Hotspots may not be shown.\")\n  }\n  this._rect = rect;\n  this._visibilityOrRectChanged = true;\n};\n\n\n/**\n * @return {Rect}\n */\nHotspotContainer.prototype.rect = function() {\n  return this._rect;\n};\n\n\n/**\n * Creates a new hotspot in this container.\n *\n * @param {Element} domElement DOM element to use for the hotspot\n * @param {Object} coords The hotspot coordinates.\n *     Use {@link RectilinearViewCoords}` for a {@link RectilinearView} or\n *     {@link FlatViewCoords} for a {@link FlatView}.\n * @param {Object} opts Options in the same format as the `opts` argument to\n *     the {@link Hotspot} constructor.\n * @return {Hotspot}\n */\nHotspotContainer.prototype.createHotspot = function(domElement, coords, opts) {\n  coords = coords || {};\n\n  var hotspot = new Hotspot(\n      domElement, this._hotspotContainer, this._view, coords, opts);\n  this._hotspots.push(hotspot);\n  hotspot._update();\n\n  this.emit('hotspotsChange');\n\n  return hotspot;\n};\n\n\n/**\n * @param {Hotspot} hotspot\n * @return {boolean}\n */\nHotspotContainer.prototype.hasHotspot = function(hotspot) {\n  return this._hotspots.indexOf(hotspot) >= 0;\n};\n\n\n/**\n * @return {Hotspot[]}\n */\nHotspotContainer.prototype.listHotspots = function() {\n  return [].concat(this._hotspots);\n};\n\n\n/**\n * Removes a hotspot from the container.\n *\n * @param {Hotspot} hotspot\n */\nHotspotContainer.prototype.destroyHotspot = function(hotspot) {\n  var i = this._hotspots.indexOf(hotspot);\n  if (i < 0) {\n    throw new Error('No such hotspot');\n  }\n  this._hotspots.splice(i, 1);\n\n  hotspot.destroy();\n  this.emit('hotspotsChange');\n};\n\n\n/**\n * Hide the container's DOM element, causing every contained {@link Hotspot} to\n * be hidden.\n */\nHotspotContainer.prototype.hide = function() {\n  if (this._visible) {\n    this._visible = false;\n    this._visibilityOrRectChanged = true;\n    this._update();\n  }\n};\n\n\n/**\n * Show the container's DOM element, causing every contained {@link Hotspot} to\n * be shown.\n */\nHotspotContainer.prototype.show = function() {\n  if (!this._visible) {\n    this._visible = true;\n    this._visibilityOrRectChanged = true;\n    this._update();\n  }\n};\n\n\nHotspotContainer.prototype._update = function() {\n  var wrapper = this._hotspotContainerWrapper;\n  var width = this._stage.width();\n  var height = this._stage.height();\n  var tmpRect = this._tmpRect;\n\n  // Avoid updating the wrapper DOM unless necessary.\n  if (this._visibilityOrRectChanged ||\n      (this._rect && (width !== this._stageWidth || height !== this._stageHeight))) {\n    var visible = this._visible && !(this._rect && !cssPointerEventsSupported());\n    wrapper.style.display = visible ? 'block' : 'none';\n\n    if (visible) {\n      if (this._rect) {\n        calcRect(width, height, this._rect, tmpRect);\n        positionAbsolutely(wrapper, width * tmpRect.x, height * tmpRect.y);\n        setPixelSize(wrapper, width * tmpRect.width, height * tmpRect.height);\n        setOverflowHidden(wrapper);\n      } else {\n        positionAbsolutely(wrapper, 0, 0);\n        setNullSize(wrapper);\n        setOverflowVisible(wrapper);\n      }\n    }\n\n    this._stageWidth = width;\n    this._stageHeight = height;\n    this._visibilityOrRectChanged = false;\n  }\n\n  // Update hotspots unconditionally, as the view parameters may have changed.\n  for (var i = 0; i < this._hotspots.length; i++) {\n    this._hotspots[i]._update();\n  }\n};\n\n\nmodule.exports = HotspotContainer;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar Layer = require('./Layer');\nvar TextureStore = require('./TextureStore');\nvar HotspotContainer = require('./HotspotContainer');\nvar eventEmitter = require('minimal-event-emitter');\nvar now = require('./util/now');\nvar noop = require('./util/noop');\nvar type = require('./util/type');\nvar defaults = require('./util/defaults');\nvar clearOwnProperties = require('./util/clearOwnProperties');\n\n/**\n * Signals that the scene's view has changed. See {@link View#event:change}.\n * @event Scene#viewChange\n */\n\n/**\n * Signals that the scene's layers have changed.\n * @event Scene#layerChange\n */\n\n/**\n * @class Scene\n * @classdesc\n *\n * A Scene is a stack of {@link Layer layers} sharing the same {@link View view}\n * and {@link HotspotContainer hotspot container}. It belongs to the\n * {@link Viewer viewer} inside which it is displayed.\n *\n * Clients should call {@link Viewer#createScene} instead of invoking the\n * constructor directly.\n *\n * @param {Viewer} viewer The viewer this scene belongs to.\n * @param {View} view The scene's underlying view.\n */\nfunction Scene(viewer, view) {\n  this._viewer = viewer;\n  this._view = view;\n  this._layers = [];\n\n  // Hotspot container. Assume it occupies a full rect.\n  this._hotspotContainer = new HotspotContainer(\n    viewer._controlContainer,\n    viewer.stage(),\n    this._view,\n    viewer.renderLoop());\n\n  // The current movement.\n  this._movement = null;\n  this._movementStartTime = null;\n  this._movementStep = null;\n  this._movementParams = null;\n  this._movementCallback = null;\n\n  // Event listener for updating the view according to the current movement.\n  // The listener is set/unset on the render loop when a movement starts/stops.\n  this._updateMovementHandler = this._updateMovement.bind(this);\n\n  // Show or hide hotspots when scene changes.\n  this._updateHotspotContainerHandler = this._updateHotspotContainer.bind(this);\n  this._viewer.addEventListener('sceneChange', this._updateHotspotContainerHandler);\n\n  // Emit event when view changes.\n  this._viewChangeHandler = this.emit.bind(this, 'viewChange');\n  this._view.addEventListener('change', this._viewChangeHandler);\n\n  // Update the hotspot container.\n  this._updateHotspotContainer();\n}\n\neventEmitter(Scene);\n\n\n/**\n * Destructor. Clients should call {@link Viewer#destroyScene} instead.\n */\nScene.prototype.destroy = function() {\n  this._view.removeEventListener('change', this._viewChangeHandler);\n  this._viewer.removeEventListener('sceneChange', this._updateHotspotContainerHandler);\n\n  if (this._movement) {\n    this.stopMovement();\n  }\n\n  this._hotspotContainer.destroy();\n\n  this.destroyAllLayers();\n\n  clearOwnProperties(this);\n};\n\n\n\n/**\n * Returns the {@link HotspotContainer hotspot container} for the scene.\n * @return {Layer}\n */\nScene.prototype.hotspotContainer = function() {\n  return this._hotspotContainer;\n};\n\n/**\n * Returns the first of the {@link Layer layers} belonging to the scene, or\n * null if the scene has no layers.\n *\n * This method is equivalent to `Scene#listLayers[0]`. It may be removed in the\n * future.\n *\n * @return {Layer}\n */\nScene.prototype.layer = function() {\n  return this._layers[0];\n};\n\n/**\n* Returns a list of all {@link Layer layers} belonging to the scene. The\n* returned list is in display order, background to foreground.\n* @return {Layer[]}\n */\nScene.prototype.listLayers = function() {\n  return [].concat(this._layers);\n};\n\n\n/**\n * Returns the scene's underlying {@link View view}.\n * @return {View}\n */\nScene.prototype.view = function() {\n  return this._view;\n};\n\n\n/**\n * Returns the {@link Viewer viewer} the scene belongs to.\n * @return {Viewer}\n */\nScene.prototype.viewer = function() {\n  return this._viewer;\n};\n\n\n/**\n * Returns whether the scene is currently visible.\n * @return {boolean}\n */\nScene.prototype.visible = function() {\n  return this._viewer.scene() === this;\n};\n\n\n/**\n * Creates a new {@link Layer layer} and adds it into the scene in the\n * foreground position.\n *\n * @param {Object} opts Layer creation options.\n * @param {Source} opts.source The layer's underlying {@link Source}.\n * @param {Source} opts.geometry The layer's underlying {@link Geometry}.\n * @param {boolean} [opts.pinFirstLevel=false] Whether to pin the first level to\n *     provide a fallback of last resort, at the cost of memory consumption.\n * @param {Object} [opts.textureStoreOpts={}] Options to pass to the\n *     {@link TextureStore} constructor.\n * @param {Object} [opts.layerOpts={}] Options to pass to the {@link Layer}\n *     constructor.\n * @return {Layer}\n */\nScene.prototype.createLayer = function(opts) {\n  opts = opts || {};\n\n  var textureStoreOpts = opts.textureStoreOpts || {};\n  var layerOpts = opts.layerOpts || {};\n\n  var source = opts.source;\n  var geometry = opts.geometry;\n  var view = this._view;\n  var stage = this._viewer.stage();\n  var textureStore = new TextureStore(source, stage, textureStoreOpts);\n  var layer = new Layer(source, geometry, view, textureStore, layerOpts);\n\n  this._layers.push(layer);\n\n  if (opts.pinFirstLevel) {\n    layer.pinFirstLevel();\n  }\n\n  // Signal that the layers have changed.\n  this.emit('layerChange');\n\n  return layer;\n};\n\n\n/**\n * Destroys a {@link Layer layer} and removes it from the scene.\n * @param {Layer} layer\n * @throws An error if the layer does not belong to the scene.\n */\nScene.prototype.destroyLayer = function(layer) {\n  var i = this._layers.indexOf(layer);\n  if (i < 0) {\n    throw new Error('No such layer in scene');\n  }\n\n  this._layers.splice(i, 1);\n\n  // Signal that the layers have changed.\n  this.emit('layerChange');\n\n  layer.textureStore().destroy();\n  layer.destroy();\n};\n\n\n/**\n * Destroys all {@link Layer layers} and removes them from the scene.\n */\nScene.prototype.destroyAllLayers = function() {\n  while (this._layers.length > 0) {\n    this.destroyLayer(this._layers[0]);\n  }\n};\n\n\n/**\n * Switches to the scene.\n *\n * This is equivalent to calling {@link Viewer#switchScene} on this scene.\n *\n * @param {Object} opts Options to pass into {@link Viewer#switchScene}.\n * @param {function} done Function to call when the switch is complete.\n */\nScene.prototype.switchTo = function(opts, done) {\n  return this._viewer.switchScene(this, opts, done);\n};\n\n\n/**\n * Tweens the scene's underlying {@link View view}.\n *\n * @param {Object} params Target view parameters.\n * @param {Object} opts Transition options.\n * @param {function} [opts.ease=easeInOutQuad] Tween easing function\n * @param {number} [opts.controlsInterrupt=false] allow controls to interrupt\n *     an ongoing tween.\n * @param {number} [opts.transitionDuration=1000] Tween duration, in\n *     milliseconds.\n * @param {number} [opts.closest=true] Whether to tween through the shortest\n *    path between the initial and final view parameters. This requires\n *    {@link View#normalizeToClosest} to be implemented, and does nothing\n *    otherwise.\n * @param {function} done Function to call when the tween finishes or is\n *    interrupted.\n */\nScene.prototype.lookTo = function(params, opts, done) {\n  opts = opts || {};\n  done = done || noop;\n\n  if (type(params) !== 'object') {\n    throw new Error(\"Target view parameters must be an object\");\n  }\n\n  // Quadratic in/out easing.\n  var easeInOutQuad = function (k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k;\n    }\n    return -0.5 * (--k * (k - 2) - 1);\n  };\n\n  var ease = opts.ease != null ? opts.ease : easeInOutQuad;\n  var controlsInterrupt = opts.controlsInterrupt != null ? opts.controlsInterrupt : false;\n  var duration = opts.transitionDuration != null ? opts.transitionDuration : 1000;\n  var shortest = opts.shortest != null ? opts.shortest : true;\n\n  var view = this._view;\n\n  var initialParams = view.parameters();\n\n  var finalParams = {};\n  defaults(finalParams, params);\n  defaults(finalParams, initialParams);\n\n  // Tween through the shortest path if requested.\n  // The view must implement the normalizeToClosest() method.\n  if (shortest && view.normalizeToClosest) {\n    view.normalizeToClosest(finalParams, finalParams);\n  }\n\n  var movement = function() {\n\n    var finalUpdate = false;\n\n    return function(params, elapsed) {\n\n      if (elapsed >= duration && finalUpdate) {\n        return null;\n      }\n\n      var delta = Math.min(elapsed / duration, 1);\n\n      for (var param in params) {\n        var start = initialParams[param];\n        var end = finalParams[param];\n        params[param] = start + ease(delta) * (end - start);\n      }\n\n      finalUpdate = elapsed >= duration;\n\n      return params;\n\n    };\n  };\n\n  var reenableControls = this._viewer.controls().enabled();\n\n  if (!controlsInterrupt) {\n    this._viewer.controls().disable();\n  }\n\n  this.startMovement(movement, function() {\n    if (reenableControls) {\n      this._viewer.controls().enable();\n    }\n    done();\n  });\n\n};\n\n\n/**\n * Starts a movement, possibly replacing the current movement.\n *\n * @param {function} fn The movement function.\n * @param {function} done Function to be called when the movement finishes or is\n *     interrupted.\n */\nScene.prototype.startMovement = function(fn, done) {\n\n  var renderLoop = this._viewer.renderLoop();\n\n  if (this._movement) {\n    this.stopMovement();\n  }\n\n  var step = fn();\n  if (typeof step !== 'function') {\n    throw new Error('Bad movement');\n  }\n\n  this._movement = fn;\n  this._movementStep = step;\n  this._movementStartTime = now();\n  this._movementParams = {};\n  this._movementCallback = done;\n\n  renderLoop.addEventListener('beforeRender', this._updateMovementHandler);\n  renderLoop.renderOnNextFrame();\n};\n\n\n/**\n * Stops the current movement.\n */\nScene.prototype.stopMovement = function() {\n\n  var renderLoop = this._viewer.renderLoop();\n\n  if (!this._movement) {\n    return;\n  }\n\n  if (this._movementCallback) {\n    this._movementCallback();\n  }\n\n  renderLoop.removeEventListener('beforeRender', this._updateMovementHandler);\n\n  this._movement = null;\n  this._movementStep = null;\n  this._movementStartTime = null;\n  this._movementParams = null;\n  this._movementCallback = null;\n};\n\n\n/**\n * Returns the current movement.\n * @return {function}\n */\nScene.prototype.movement = function() {\n  return this._movement;\n};\n\n\nScene.prototype._updateMovement = function() {\n\n  if (!this._movement) {\n    throw new Error('Should not call update');\n  }\n\n  var renderLoop = this._viewer.renderLoop();\n  var view = this._view;\n\n  var elapsed = now() - this._movementStartTime;\n  var step = this._movementStep;\n  var params = this._movementParams;\n\n  params = view.parameters(params);\n  params = step(params, elapsed);\n  if (params == null) {\n    this.stopMovement();\n  } else {\n    view.setParameters(params);\n    renderLoop.renderOnNextFrame();\n  }\n\n};\n\n\nScene.prototype._updateHotspotContainer = function() {\n  if (this.visible()) {\n    this._hotspotContainer.show();\n  } else {\n    this._hotspotContainer.hide();\n  }\n};\n\n\nmodule.exports = Scene;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar defaults = require('./util/defaults');\nvar now = require('./util/now');\n\nvar defaultOptions = {\n  duration: Infinity\n};\n\n\n/**\n * Signals a timeout.\n * @event Timer#timeout\n */\n\n\n/**\n * @class Timer\n * @classdesc\n *\n * A Timer provides a mechanism to receive an event after a timeout.\n *\n * A timer has a set duration, and is either started or stopped at a given time.\n * The timer is initially stopped. When the timer is started, a timeout event is\n * scheduled to fire once the set duration elapses. When the timer is stopped,\n * the scheduled timeout event is cancelled. When a timeout event fires, the\n * timer returns to the stopped state.\n *\n * @param {number} [opts.duration=Infinity] Timeout in milliseconds.\n */\nfunction Timer(opts) {\n\n  opts = defaults(opts || {}, defaultOptions);\n\n  this._duration = opts.duration;\n\n  this._startTime = null;\n\n  this._handle = null;\n\n  this._check = this._check.bind(this);\n\n}\n\neventEmitter(Timer);\n\n\n/**\n * Starts the timer. If the timer is already started, this has the effect of\n * stopping and starting again (i.e. resetting the timer).\n */\nTimer.prototype.start = function() {\n  this._startTime = now();\n  if (this._handle == null && this._duration < Infinity) {\n    this._setup(this._duration);\n  }\n};\n\n\n/**\n * Returns whether the timer is in the started state.\n * @return {boolean}\n */\nTimer.prototype.started = function() {\n  return this._startTime != null;\n};\n\n\n/**\n * Stops the timer.\n */\nTimer.prototype.stop = function() {\n  this._startTime = null;\n  if (this._handle != null) {\n    clearTimeout(this._handle);\n    this._handle = null;\n  }\n};\n\n\nTimer.prototype._setup = function(interval) {\n  this._handle = setTimeout(this._check, interval);\n};\n\n\nTimer.prototype._teardown = function() {\n  clearTimeout(this._handle);\n  this._handle = null;\n};\n\n\nTimer.prototype._check = function() {\n  var currentTime = now();\n  var elapsed = currentTime - this._startTime;\n  var remaining = this._duration - elapsed;\n\n  this._teardown();\n\n  if (remaining <= 0) {\n    this.emit('timeout');\n    this._startTime = null;\n  } else if (remaining < Infinity) {\n    this._setup(remaining);\n  }\n};\n\n\n/**\n * Returns the currently set duration.\n */\nTimer.prototype.duration = function() {\n  return this._duration;\n};\n\n\n/**\n * Sets the duration. If the timer is already started, the timeout event is\n * rescheduled to occur once the new duration has elapsed since the last call\n * to start. In particular, if an amount of time larger than the new duration\n * has already elapsed, the timeout event fires immediately.\n * @param {number}\n */\nTimer.prototype.setDuration = function(duration) {\n  this._duration = duration;\n  if (this._startTime != null) {\n    this._check();\n  }\n};\n\n\nmodule.exports = Timer;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar defaults = require('../util/defaults');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\nvar defaultOpts = {\n  active: 'move',\n  inactive: 'default',\n  disabled: 'default'\n};\n\n/**\n * @class ControlCursor\n * @classdesc\n *\n * Sets the CSS cursor on a DOM element according to the state of a\n * {@link ControlMethod}.\n *\n * @param {Controls} controls Controls instance containing the control method.\n * @param {string} id ID of the control method.\n * @param {Element} element DOM element where the cursor should be set.\n * @param {Object} opts The control cursors. Each field must be a valid value\n *     for the `cursor` CSS property.\n * @param {string} [opts.active='move'] Cursor to set when the control method\n *     is enabled and active.\n * @param {string} [opts.inactive='default'] Cursor to set when the control\n *     method is enabled and inactive.\n * @param {string} [opts.disabled='default'] Cursor to set when the control\n *     method is disabled.\n */\nfunction ControlCursor(controls, id, element, opts) {\n  opts = defaults(opts || {}, defaultOpts);\n\n  // TODO: This class may misbehave if the control method is unregistered and a\n  // different control method is registered under the same id.\n\n  this._element = element;\n  this._controls = controls;\n  this._id = id;\n\n  this._attached = false;\n\n  this._setActiveCursor = this._setCursor.bind(this, opts.active);\n  this._setInactiveCursor = this._setCursor.bind(this, opts.inactive);\n  this._setDisabledCursor = this._setCursor.bind(this, opts.disabled);\n  this._setOriginalCursor = this._setCursor.bind(this, this._element.style.cursor);\n\n  this._updateAttachmentHandler = this._updateAttachment.bind(this);\n\n  controls.addEventListener('methodEnabled', this._updateAttachmentHandler);\n  controls.addEventListener('methodDisabled', this._updateAttachmentHandler);\n  controls.addEventListener('enabled', this._updateAttachmentHandler);\n  controls.addEventListener('disabled', this._updateAttachmentHandler);\n\n  this._updateAttachment();\n}\n\n/**\n * Destructor.\n */\nControlCursor.prototype.destroy = function() {\n  this._detachFromControlMethod(this._controls.method(this._id));\n  this._setOriginalCursor();\n\n  this._controls.removeEventListener('methodEnabled',\n      this._updateAttachmentHandler);\n  this._controls.removeEventListener('methodDisabled',\n      this._updateAttachmentHandler);\n  this._controls.removeEventListener('enabled',\n      this._updateAttachmentHandler);\n  this._controls.removeEventListener('disabled',\n      this._updateAttachmentHandler);\n\n  clearOwnProperties(this);\n};\n\nControlCursor.prototype._updateAttachment = function() {\n  var controls = this._controls;\n  var id = this._id;\n  if (controls.enabled() && controls.method(id).enabled) {\n    this._attachToControlMethod(controls.method(id));\n  } else {\n    this._detachFromControlMethod(controls.method(id));\n  }\n};\n\nControlCursor.prototype._attachToControlMethod = function(controlMethod) {\n  if (!this._attached) {\n    controlMethod.instance.addEventListener('active', this._setActiveCursor);\n    controlMethod.instance.addEventListener('inactive', this._setInactiveCursor);\n\n    if (controlMethod.active) {\n      this._setActiveCursor();\n    } else {\n      this._setInactiveCursor();\n    }\n\n    this._attached = true;\n  }\n};\n\nControlCursor.prototype._detachFromControlMethod = function(controlMethod) {\n  if (this._attached) {\n    controlMethod.instance.removeEventListener('active', this._setActiveCursor);\n    controlMethod.instance.removeEventListener('inactive', this._setInactiveCursor);\n\n    this._setDisabledCursor();\n\n    this._attached = false;\n  }\n};\n\nControlCursor.prototype._setCursor = function(cursor) {\n  this._element.style.cursor = cursor;\n}\n\nmodule.exports = ControlCursor;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar defaults = require('../util/defaults');\nvar DragControlMethod = require('./Drag');\nvar QtvrControlMethod = require('./Qtvr');\nvar ScrollZoomControlMethod = require('./ScrollZoom');\nvar PinchZoomControlMethod = require('./PinchZoom');\nvar KeyControlMethod = require('./Key');\n\nvar defaultOptions = {\n  mouseViewMode: 'drag'\n};\n\n/**\n * Instantiate and register some commonly used {@link ControlMethod} instances.\n *\n * The following instances are registered:\n *   - mouseViewDrag\n *   - mouseViewQtvr\n *   - touchView\n *   - pinch\n *   - arrowKeys\n *   - plusMinusKeys\n *   - wasdKeys\n *   - qeKeys\n *\n * @param {Controls} controls Where to register the instances.\n * @param {Element} element Element to listen for events.\n * @param {Object} opts\n * @param {'drag'|'qtvr'} mouseViewMode\n */\nfunction registerDefaultControls(controls, element, opts) {\n  opts = defaults(opts || {}, defaultOptions);\n\n  var controlMethods = {\n    mouseViewDrag: new DragControlMethod(element, 'mouse'),\n    mouseViewQtvr: new QtvrControlMethod(element, 'mouse'),\n    touchView: new DragControlMethod(element, 'touch'),\n    pinch: new PinchZoomControlMethod(element, 'touch'),\n\n    leftArrowKey: new KeyControlMethod(37, 'x', -0.7, 3),\n    rightArrowKey: new KeyControlMethod(39, 'x', 0.7, 3),\n    upArrowKey: new KeyControlMethod(38, 'y', -0.7, 3),\n    downArrowKey: new KeyControlMethod(40, 'y', 0.7, 3),\n    plusKey: new KeyControlMethod(107, 'zoom', -0.7, 3),\n    minusKey: new KeyControlMethod(109, 'zoom', 0.7, 3),\n\n    wKey: new KeyControlMethod(87, 'y', -0.7, 3),\n    aKey: new KeyControlMethod(65, 'x', -0.7, 3),\n    sKey: new KeyControlMethod(83, 'y', 0.7, 3),\n    dKey: new KeyControlMethod(68, 'x', 0.7, 3),\n    qKey: new KeyControlMethod(81, 'roll', 0.7, 3),\n    eKey: new KeyControlMethod(69, 'roll', -0.7, 3)\n  };\n\n  if(opts.scrollZoom !== false) {\n    controlMethods.scrollZoom = new ScrollZoomControlMethod(element); //{ frictionTime: 0 }\n  }\n\n  var controlMethodGroups = {\n    arrowKeys: [ 'leftArrowKey', 'rightArrowKey', 'upArrowKey', 'downArrowKey' ],\n    plusMinusKeys: [ 'plusKey', 'minusKey' ],\n    wasdKeys: [ 'wKey', 'aKey', 'sKey', 'dKey' ],\n    qeKeys: [ 'qKey', 'eKey' ]\n  };\n\n\n  var enabledControls = [ 'scrollZoom', 'touchView', 'pinch' ];\n  switch (opts.mouseViewMode) {\n    case 'drag':\n      enabledControls.push('mouseViewDrag');\n      break;\n    case 'qtvr':\n      enabledControls.push('mouseViewQtvr');\n      break;\n    default:\n      throw new Error(\"Unknown mouse view mode: \" + opts.mouseViewMode);\n  }\n\n  for (var id in controlMethods) {\n    var method = controlMethods[id];\n    controls.registerMethod(id, method);\n    if (enabledControls.indexOf(id) >= 0) {\n      controls.enableMethod(id);\n    }\n  }\n\n  for (var groupId in controlMethodGroups) {\n    var methodGroup = controlMethodGroups[groupId];\n    controls.addMethodGroup(groupId, methodGroup);\n  }\n\n  return controlMethods;\n}\n\nmodule.exports = registerDefaultControls;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar now = require('./now');\n\nfunction tween(duration, update, done) {\n  var cancelled = false;\n\n  var startTime = now();\n\n  function runUpdate() {\n    if(cancelled) { return; }\n    var tweenVal = (now() - startTime)/duration;\n    if(tweenVal < 1) {\n      update(tweenVal);\n      requestAnimationFrame(runUpdate);\n    }\n    else {\n      update(1);\n      done();\n    }\n  }\n\n  update(0);\n  requestAnimationFrame(runUpdate);\n\n  return function cancel() {\n    cancelled = true;\n    done.apply(null, arguments);\n  }\n}\n\nmodule.exports = tween;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar browser = require('bowser');\nvar eventEmitter = require('minimal-event-emitter');\n\nvar RenderLoop = require('./RenderLoop');\nvar Controls = require('./controls/Controls');\nvar Scene = require('./Scene');\nvar Timer = require('./Timer');\n\nvar WebGlStage = require('./stages/WebGl');\nvar CssStage = require('./stages/Css');\nvar FlashStage = require('./stages/Flash');\n\nvar ControlCursor = require('./controls/ControlCursor');\nvar HammerGestures = require('./controls/HammerGestures');\n\nvar registerDefaultControls = require('./controls/registerDefaultControls');\nvar registerDefaultRenderers = require('./renderers/registerDefaultRenderers');\n\nvar setOverflowHidden = require('./util/dom').setOverflowHidden;\nvar setAbsolute = require('./util/dom').setAbsolute;\nvar setFullSize = require('./util/dom').setFullSize;\nvar setBlocking = require('./util/dom').setBlocking;\n\nvar tween = require('./util/tween');\nvar noop = require('./util/noop');\nvar clearOwnProperties = require('./util/clearOwnProperties');\n\nvar stageMap = {\n  webgl: WebGlStage,\n  css: CssStage,\n  flash: FlashStage\n};\n\nvar stagePrefList = [\n  WebGlStage,\n  CssStage,\n  FlashStage\n];\n\n/**\n * Signals that the current scene has changed.\n * @event Viewer#sceneChange\n */\n\n/**\n * Signals that the view of the current scene has changed. See\n * {@link View#event:change}.\n * @event Viewer#viewChange\n */\n\n/**\n * @class Viewer\n * @classdesc\n *\n * A Viewer is a container for multiple {@link Scene scenes} to be displayed\n * inside a {@link Stage stage} contained in the DOM.\n *\n * Scenes may be created by calling {@link Viewer#createScene}. Except during a\n * scene switch, a single one of them, called the current scene, is visible.\n * Calling {@link Viewer#switchScene} sets the current scene and switches to it.\n *\n * @param {Element} domElement The DOM element to contain the stage.\n * @param {Object} opts Viewer creation options.\n * @param {(null|'webgl'|'css'|'flash')} [opts.stageType=null] The type of stage\n *     to create. The default is to choose the most appropriate type depending\n *     on the browser capabilities.\n * @param {Object} opts.controls Options to be passed to\n *     {@link registerDefaultControls}.\n * @param {Object} opts.stage Options to be passed to the {@link Stage}\n *     constructor.\n * @param {Object} opts.cursors Cursor options.\n * @param {Object} opts.cursors.drag Drag cursor options to be passed to the\n *     {@link ControlCursor} constructor.\n */\nfunction Viewer(domElement, opts) {\n  opts = opts || {};\n\n  this._domElement = domElement;\n\n  // Add `overflow: hidden` to the domElement.\n  setOverflowHidden(domElement);\n\n  // Select the stage type to use.\n  var Stage;\n  if (opts.stageType) {\n    // If a specific stage type was specified, use that one.\n    Stage = stageMap[opts.stageType];\n    if (!Stage) {\n      throw new Error('Unknown stage type: ' + opts.stageType);\n    }\n  } else {\n    // Choose the best supported stage according to the default preference\n    // order. Note that this may yield an unsupported stage for some\n    // geometry/view combinations. Client code is expected to pass in a\n    // specific stage type in those cases.\n    for (var i = 0; i < stagePrefList.length; i++) {\n      if (stagePrefList[i].supported()) {\n        Stage = stagePrefList[i];\n        break;\n      }\n    }\n    if (!Stage) {\n      throw new Error('None of the stage types are supported');\n    }\n  }\n\n  // Create stage.\n  this._stage = new Stage(opts.stage);\n\n  // Register the default renderers for the selected stage.\n  registerDefaultRenderers(this._stage);\n\n  // Add the stage element into the DOM.\n  this._domElement.appendChild(this._stage.domElement());\n\n  // Create control container.\n  // Controls cannot be placed directly on the root DOM element because\n  // Hammer.js will prevent click events from reaching the elements beneath.\n\n  // The hotspot containers will be added inside the controls container.\n  this._controlContainer = document.createElement('div');\n  setAbsolute(this._controlContainer);\n  setFullSize(this._controlContainer);\n\n  // Prevent bounce scroll effect on iOS.\n  // Applied only for iOS, as Android's events must have the default action to allow interaction with hotspots.\n  if (browser.ios) {\n    this._controlContainer.addEventListener('touchmove', function(event) {\n      event.preventDefault();\n    });\n  }\n\n\n  // Old IE does not detect mouse events on elements without background\n  // Add a child element to the controls with full width, a background color\n  // and opacity 0\n  var controlCapture = document.createElement('div');\n  setAbsolute(controlCapture);\n  setFullSize(controlCapture);\n  setBlocking(controlCapture);\n\n  this._controlContainer.appendChild(controlCapture);\n  domElement.appendChild(this._controlContainer);\n\n  // Respond to window size changes.\n  this._size = {};\n  this.updateSize();\n  this._updateSizeListener = this.updateSize.bind(this);\n  window.addEventListener('resize', this._updateSizeListener);\n\n  // Create render loop.\n  this._renderLoop = new RenderLoop(this._stage);\n\n  // Create the controls and register them with the render loop.\n  this._controls = new Controls();\n  this._controlMethods = registerDefaultControls(this._controls, this._controlContainer, opts.controls);\n  this._controls.attach(this._renderLoop);\n\n  // Expose HammerJS.\n  this._hammerManagerTouch = HammerGestures.get(this._controlContainer, 'touch');\n  this._hammerManagerMouse = HammerGestures.get(this._controlContainer, 'mouse');\n\n  // Initialize drag cursor.\n  this._dragCursor = new ControlCursor(this._controls, 'mouseViewDrag', domElement, opts.cursors && opts.cursors.drag || {});\n\n  // Start the render loop.\n  this._renderLoop.start();\n\n  // Scene list.\n  this._scenes = [];\n\n  // The currently visible scene.\n  // During a scene transition, this is the scene being switched to.\n  this._currentScene = null;\n\n  // The scene being switched from during a scene transition.\n  // This is necessary to update the layers correctly when they are added or\n  // removed during a transition.\n  this._replacedScene = null;\n\n  // The current transition.\n  this._cancelCurrentTween = null;\n\n  // The event listener fired when the current scene layers change.\n  // This is attached to the correct scene whenever the current scene changes.\n  this._layerChangeHandler = this._updateSceneLayers.bind(this);\n\n  // The event listener fired when the current scene view changes.\n  // This is attached to the correct scene whenever the current scene changes.\n  this._viewChangeHandler = this.emit.bind(this, 'viewChange');\n\n  // Setup the idle timer.\n  // By default, the timer has an infinite duration so it does nothing.\n  this._idleTimer = new Timer();\n  this._idleTimer.start();\n\n  // Reset the timer whenever the view changes.\n  this._resetIdleTimerHandler = this._resetIdleTimer.bind(this);\n  this.addEventListener('viewChange', this._resetIdleTimerHandler);\n\n  // Start the idle movement when the idle timer fires.\n  this._triggerIdleTimerHandler = this._triggerIdleTimer.bind(this);\n  this._idleTimer.addEventListener('timeout', this._triggerIdleTimerHandler);\n\n  // Stop an ongoing movement when the controls are activated or when the\n  // scene changes.\n  this._stopMovementHandler = this.stopMovement.bind(this);\n  this._controls.addEventListener('active', this._stopMovementHandler);\n  this.addEventListener('sceneChange', this._stopMovementHandler);\n\n  // The currently programmed idle movement.\n  this._idleMovement = null;\n}\n\neventEmitter(Viewer);\n\n\n/**\n * Destructor.\n */\nViewer.prototype.destroy = function() {\n\n  window.removeEventListener('resize', this._updateSizeListener);\n\n  if (this._currentScene) {\n    this._removeSceneEventListeners(this._currentScene);\n  }\n\n  if (this._replacedScene) {\n    this._removeSceneEventListeners(this._replacedScene);\n  }\n\n  this._dragCursor.destroy();\n\n  for (var methodName in this._controlMethods) {\n    this._controlMethods[methodName].destroy();\n  }\n\n  while (this._scenes.length) {\n    this.destroyScene(this._scenes[0]);\n  }\n\n  // The Flash renderer must be torn down before the element is removed from\n  // the DOM, so all scenes must have been destroyed before this point.\n  this._domElement.removeChild(this._stage.domElement());\n\n  this._stage.destroy();\n  this._renderLoop.destroy();\n  this._controls.destroy();\n  this._controls = null;\n\n  if (this._cancelCurrentTween) {\n    this._cancelCurrentTween();\n  }\n\n  clearOwnProperties(this);\n};\n\n\n/**\n * Updates the stage size to fill the containing element.\n *\n * This method is automatically called when the browser window is resized.\n * Most clients won't need to explicitly call it to keep the size up to date.\n */\nViewer.prototype.updateSize = function() {\n  var size = this._size;\n  size.width = this._domElement.clientWidth;\n  size.height = this._domElement.clientHeight;\n  this._stage.setSize(size);\n};\n\n\n/**\n * Returns the underlying {@link Stage stage}.\n * @return {Stage}\n */\nViewer.prototype.stage = function() {\n  return this._stage;\n};\n\n\n/**\n * Returns the underlying {@link RenderLoop render loop}.\n * @return {RenderLoop}\n */\nViewer.prototype.renderLoop = function() {\n  return this._renderLoop;\n};\n\n\n/**\n * Returns the underlying {@link Controls controls}.\n * @return {Controls}\n */\nViewer.prototype.controls = function() {\n  return this._controls;\n};\n\n\n/**\n * Returns the underlying DOM element.\n * @return {Element}\n */\nViewer.prototype.domElement = function() {\n  return this._domElement;\n};\n\n\n/**\n * Creates a new {@link Scene scene} with a single layer and adds it to the\n * viewer.\n *\n * The current scene does not change. To switch to the scene, call\n * {@link Viewer#switchScene}.\n *\n * @param {Object} opts Scene creation options.\n * @param {View} opts.view The scene's underlying {@link View}.\n * @param {Source} opts.source The layer's underlying {@link Source}.\n * @param {Geometry} opts.geometry The layer's underlying {@link Geometry}.\n * @param {boolean} [opts.pinFirstLevel=false] Whether to pin the first level to\n *     provide a fallback of last resort, at the cost of memory consumption.\n * @param {Object} [opts.textureStoreOpts={}] Options to pass to the\n *     {@link TextureStore} constructor.\n * @param {Object} [opts.layerOpts={}] Options to pass to the {@link Layer}\n *     constructor.\n * @return {Scene}\n */\nViewer.prototype.createScene = function(opts) {\n  opts = opts || {};\n\n  var scene = this.createEmptyScene({ view: opts.view });\n\n  scene.createLayer({\n    source: opts.source,\n    geometry: opts.geometry,\n    pinFirstLevel: opts.pinFirstLevel,\n    textureStoreOpts: opts.textureStoreOpts,\n    layerOpts: opts.layerOpts\n  });\n\n  return scene;\n};\n\n\n/**\n * Creates a new {@link Scene scene} with no layers and adds it to the viewer.\n *\n * Layers may be added to the scene by calling {@link Scene#createLayer}.\n * However, if the scene has a single layer, it is simpler to call\n * {@link Viewer#createScene} instead of this method.\n *\n * The current scene does not change. To switch to the scene, call\n * {@link Viewer#switchScene}.\n *\n * @param {Object} opts Scene creation options.\n * @param {View} opts.view The scene's underlying {@link View}.\n * @return {Scene}\n */\nViewer.prototype.createEmptyScene = function(opts) {\n  opts = opts || {};\n\n  var scene = new Scene(this, opts.view);\n  this._scenes.push(scene);\n\n  return scene;\n};\n\n\nViewer.prototype._updateSceneLayers = function() {\n  var i;\n  var layer;\n\n  var stage = this._stage;\n  var currentScene = this._currentScene;\n  var replacedScene = this._replacedScene;\n\n  var oldLayers = stage.listLayers();\n\n  // The stage contains layers from at most two scenes: the current one, on top,\n  // and the one currently being switched away from, on the bottom.\n  var newLayers = [];\n  if (replacedScene) {\n    newLayers = newLayers.concat(replacedScene.listLayers());\n  }\n  if (currentScene) {\n    newLayers = newLayers.concat(currentScene.listLayers());\n  }\n\n  // A single layer can be added or removed from the scene at a time.\n  if (Math.abs(oldLayers.length - newLayers.length) !== 1) {\n    throw new Error('Stage and scene out of sync');\n  }\n\n  if (newLayers.length < oldLayers.length) {\n    // A layer was removed.\n    for (i = 0; i < oldLayers.length; i++) {\n      layer = oldLayers[i];\n      if (newLayers.indexOf(layer) < 0) {\n        this._removeLayerFromStage(layer);\n        break;\n      }\n    }\n  }\n  if (newLayers.length > oldLayers.length) {\n    // A layer was added.\n    for (i = 0; i < newLayers.length; i++) {\n      layer = newLayers[i];\n      if (oldLayers.indexOf(layer) < 0) {\n        this._addLayerToStage(layer, i);\n      }\n    }\n  }\n\n  // TODO: When in the middle of a scene transition, call the transition update\n  // function immediately to prevent an added layer from flashing with the wrong\n  // opacity.\n};\n\n\nViewer.prototype._addLayerToStage = function(layer, i) {\n  // Pin the first level to ensure a fallback while the layer is visible.\n  // Note that this is distinct from the `pinFirstLevel` option passed to\n  // createScene(), which pins the layer even when it's not visible.\n  layer.pinFirstLevel();\n  this._stage.addLayer(layer, i);\n};\n\n\nViewer.prototype._removeLayerFromStage = function(layer) {\n  this._stage.removeLayer(layer);\n  layer.unpinFirstLevel();\n  layer.textureStore().clearNotPinned();\n};\n\n\nViewer.prototype._addSceneEventListeners = function(scene) {\n  scene.addEventListener('layerChange', this._layerChangeHandler);\n  scene.addEventListener('viewChange', this._viewChangeHandler);\n};\n\n\nViewer.prototype._removeSceneEventListeners = function(scene) {\n  scene.removeEventListener('layerChange', this._layerChangeHandler);\n  scene.removeEventListener('viewChange', this._viewChangeHandler);\n};\n\n\n/**\n * Destroys a {@link Scene scene} and removes it from the viewer.\n * @param {Scene} scene\n */\nViewer.prototype.destroyScene = function(scene) {\n  var i = this._scenes.indexOf(scene);\n  if (i < 0) {\n    throw new Error('No such scene in viewer');\n  }\n\n  var j;\n  var layers;\n\n  if (this._currentScene === scene) {\n    // The destroyed scene is the current scene.\n    // Remove event listeners, remove layers from stage and cancel transition.\n    this._removeSceneEventListeners(scene);\n    layers = scene.listLayers();\n    for (j = 0; j < layers.length; j++) {\n      this._removeLayerFromStage(layers[j]);\n    }\n    if (this._cancelCurrentTween) {\n      this._cancelCurrentTween();\n      this._cancelCurrentTween = null;\n    }\n    this._currentScene = null;\n    this.emit('sceneChange');\n  }\n\n  if (this._replacedScene === scene) {\n    // The destroyed scene is being switched away from.\n    // Remove event listeners and remove layers from stage.\n    this._removeSceneEventListeners(scene);\n    layers = scene.listLayers();\n    for (j = 0; j < layers.length; j++) {\n      this._removeLayerFromStage(layers[j]);\n    }\n    this._replacedScene = null;\n  }\n\n  this._scenes.splice(i, 1);\n\n  scene.destroy();\n};\n\n\n/**\n * Destroys all {@link Scene scenes} and removes them from the viewer.\n */\nViewer.prototype.destroyAllScenes = function() {\n  while (this._scenes.length > 0) {\n    this.destroyScene(this._scenes[0]);\n  }\n};\n\n\n/**\n * Returns whether the viewer contains a {@link Scene scene}.\n * @param {Scene} scene\n * @return {boolean}\n */\nViewer.prototype.hasScene = function(scene) {\n  return this._scenes.indexOf(scene) >= 0;\n};\n\n\n/**\n * Returns a list of all {@link Scene scenes}.\n * @return {Scene[]}\n */\nViewer.prototype.listScenes = function() {\n  return [].concat(this._scenes);\n};\n\n\n/**\n * Returns the current {@link Scene scene}, or null if there isn't one.\n *\n * To change the current scene, call {@link Viewer#switchScene}.\n *\n * @return {Scene}\n */\nViewer.prototype.scene = function() {\n  return this._currentScene;\n};\n\n\n/**\n * Returns the {@link View view} for the current {@link Scene scene}, or null\n * if there isn't one.\n * @return {View}\n */\nViewer.prototype.view = function() {\n  var scene = this._currentScene;\n  if (scene) {\n    return scene.view();\n  }\n  return null;\n};\n\n\n/**\n * Tweens the {@link View view} for the current {@link Scene scene}.\n *\n * This method is equivalent to calling {@link Scene#lookTo} on the current\n * scene.\n *\n * @param {Object} opts Options to pass into {@link Scene#lookTo}.\n * @param {function} done Function to call when the tween is complete.\n */\nViewer.prototype.lookTo = function(params, opts, done) {\n  // TODO: is it an error to call lookTo when no scene is displayed?\n  var scene = this._currentScene;\n  if (scene) {\n    scene.lookTo(params, opts, done);\n  }\n};\n\n\n/**\n * Starts a movement, possibly replacing the current movement.\n *\n * This method is equivalent to calling {@link Scene#startMovement} on the\n * current scene. If there is no current scene, this is a no-op.\n *\n * @param {function} fn The movement function.\n * @param {function} done Function to be called when the movement finishes or is\n *     interrupted.\n */\nViewer.prototype.startMovement = function(fn, done) {\n  var scene = this._currentScene;\n  if (!scene) {\n    return;\n  }\n  scene.startMovement(fn, done);\n};\n\n\n/**\n * Stops the current movement.\n *\n * This method is equivalent to calling {@link Scene#stopMovement} on the\n * current scene. If there is no current scene, this is a no-op.\n */\nViewer.prototype.stopMovement = function() {\n  var scene = this._currentScene;\n  if (!scene) {\n    return;\n  }\n  scene.stopMovement();\n};\n\n\n/**\n * Returns the current movement.\n *\n * This method is equivalent to calling {@link Scene#movement} on the\n * current scene. If there is no current scene, this is a no-op.\n *\n * @return {function}\n */\nViewer.prototype.movement = function() {\n  var scene = this._currentScene;\n  if (!scene) {\n    return;\n  }\n  return scene.movement();\n};\n\n\n/**\n * Schedules an idle movement to be automatically started when the view remains\n * unchanged for the given timeout period.\n *\n * Changing the view while the idle movement is active stops the movement and\n * schedules it to start again after the same timeout period. To disable it\n * permanently, call with a null movement or an infinite timeout.\n *\n * @param {number} timeout Timeout period in milliseconds.\n * @param {function} movement Automatic movement function, or null to disable.\n */\nViewer.prototype.setIdleMovement = function(timeout, movement) {\n  this._idleTimer.setDuration(timeout);\n  this._idleMovement = movement;\n};\n\n\n/**\n * Stops the idle movement. It will be started again after the timeout set by\n * {@link Viewer#setIdleMovement}.\n */\nViewer.prototype.breakIdleMovement = function() {\n  this.stopMovement();\n  this._resetIdleTimer();\n};\n\n\nViewer.prototype._resetIdleTimer = function() {\n  this._idleTimer.start();\n};\n\n\nViewer.prototype._triggerIdleTimer = function() {\n  var idleMovement = this._idleMovement;\n  if (!idleMovement) {\n    return;\n  }\n  this.startMovement(idleMovement);\n};\n\n\nvar defaultSwitchDuration = 1000;\n\nfunction defaultTransitionUpdate(val, newScene, oldScene) {\n  var layers = newScene.listLayers();\n  layers.forEach(function(layer) {\n    layer.mergeEffects({ opacity: val });\n  });\n\n  newScene._hotspotContainer.domElement().style.opacity = val;\n}\n\n\n/**\n * Switches to another {@link Scene scene} with a fade transition. This scene\n * becomes the current one.\n *\n * If a transition is already taking place, it is interrupted before the new one\n * starts.\n *\n * @param {Scene} newScene The scene to switch to.\n * @param {Object} opts Transition options.\n * @param {number} [opts.transitionDuration=1000] Transition duration, in\n *     milliseconds.\n * @param {number} [opts.transitionUpdate=defaultTransitionUpdate]\n *     Transition update function, with signature `f(t, newScene, oldScene)`.\n *     This function is called on each frame with `t` increasing from 0 to 1.\n *     An initial call with `t=0` and a final call with `t=1` are guaranteed.\n *     The default function sets the opacity of the new scene to `t`.\n * @param {function} done Function to call when the transition finishes or is\n *     interrupted. If the new scene is equal to the old one, no transition\n *     takes place, but this function is still called.\n */\nViewer.prototype.switchScene = function(newScene, opts, done) {\n  var self = this;\n\n  opts = opts || {};\n  done = done || noop;\n\n  var stage = this._stage;\n\n  var oldScene = this._currentScene;\n\n  // Do nothing if the target scene is the current one.\n  if (oldScene === newScene) {\n    done();\n    return;\n  }\n\n  if (this._scenes.indexOf(newScene) < 0) {\n    throw new Error('No such scene in viewer');\n  }\n\n  // Cancel an already ongoing transition. This ensures that the stage contains\n  // layers from exactly one scene before the transition begins.\n  if (this._cancelCurrentTween) {\n    this._cancelCurrentTween();\n    this._cancelCurrentTween = null;\n  }\n\n  var oldSceneLayers = oldScene ? oldScene.listLayers() : [];\n  var newSceneLayers = newScene.listLayers();\n  var stageLayers = stage.listLayers();\n\n  // Check that the stage contains exactly as many layers as the current scene,\n  // and that the top layer is the right one. If this test fails, either there\n  // is a bug or the user tried to modify the stage concurrently.\n  if (oldScene && ((stageLayers.length !== oldSceneLayers.length) ||\n      (stageLayers.length > 1 && stageLayers[0] != oldSceneLayers[0]))) {\n    throw new Error('Stage not in sync with viewer');\n  }\n\n  // Get the transition parameters.\n  var duration = opts.transitionDuration != null ?\n      opts.transitionDuration : defaultSwitchDuration;\n  var update = opts.transitionUpdate != null ?\n      opts.transitionUpdate : defaultTransitionUpdate;\n\n  // Add new scene layers into the stage before starting the transition.\n  for (var i = 0; i < newSceneLayers.length; i++) {\n    this._addLayerToStage(newSceneLayers[i]);\n  }\n\n  // Update function to be called on every frame.\n  function tweenUpdate(val) {\n    update(val, newScene, oldScene);\n  }\n\n  // Once the transition is complete, remove old scene layers from the stage and\n  // remove the event listeners. If the old scene was destroyed during the\n  // transition, this has already been taken care of. Otherwise, we still need\n  // to get a fresh copy of the scene's layers, since they might have changed\n  // during the transition.\n  function tweenDone() {\n    if (self._replacedScene) {\n      self._removeSceneEventListeners(self._replacedScene);\n      oldSceneLayers = self._replacedScene.listLayers();\n      for (var i = 0; i < oldSceneLayers.length; i++) {\n        self._removeLayerFromStage(oldSceneLayers[i]);\n      }\n      self._replacedScene = null;\n    }\n    self._cancelCurrentTween = null;\n    done();\n  }\n\n  // Store the cancelable for the transition.\n  this._cancelCurrentTween = tween(duration, tweenUpdate, tweenDone);\n\n  // Update the current and replaced scene.\n  this._currentScene = newScene;\n  this._replacedScene = oldScene;\n\n  // Emit scene and view change events.\n  this.emit('sceneChange');\n  this.emit('viewChange');\n\n  // Add event listeners to the new scene.\n  // Note that event listeners can only be removed from the old scene once the\n  // transition is complete, since layers might get added or removed in the\n  // interim.\n  this._addSceneEventListeners(newScene);\n};\n\n\nmodule.exports = Viewer;\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar vec4 = require('gl-matrix').vec4;\nvar mat4 = require('gl-matrix').mat4;\n\n/**\n * Helper functions for color transformation {@link Effects}.\n *\n * References:\n *\n *   - [ColorMatrix Guide](http://docs.rainmeter.net/tips/colormatrix-guide)\n *   - [Matrix Operations for Image Processing](http://www.graficaobscura.com/matrix/index.html)\n *   - [WebGLImageFilter](https://github.com/phoboslab/WebGLImageFilter)\n *   - [glfx.js](https://github.com/evanw/glfx.js)\n *\n * @namespace colorEffects\n */\n\n/**\n * A vector and matrix corresponding to an identity transformation.\n *\n * @param {Object} result Object to store result\n * @param {vec4} result.colorOffset Array with zeroes.\n * @param {mat4} result.colorMatrix Identity matrix.\n *\n * @memberof colorEffects\n */\nfunction identity(resultArg) {\n  var result = resultArg || {};\n  result.colorOffset = result.colorOffset || vec4.create();\n  result.colorMatrix = result.colorMatrix || mat4.create();\n  return result;\n}\n\n/**\n * Apply color effects to a single pixel\n *\n * @param {vec4} pixel Values in range [0,1]\n * @param {Object} effect\n * @param {vec4} effect.colorOffset\n * @param {mat4} effect.colorMatrix\n * @param {vec4} result Object to store result\n *\n * @memberof colorEffects\n */\nfunction applyToPixel(pixel, effect, result) {\n  vec4TransformMat4Transposed(result, pixel, effect.colorMatrix);\n  vec4.add(result, result, effect.colorOffset);\n}\n\n// Oddly, the colorTransform matrix needs to be transposed to be used with\n// vec4.transformMat4. It is strange that transformMat4 dosn't work the same\n// way as multiplying on the shader.\n// TODO: investigate this further\nfunction vec4TransformMat4Transposed(out, a, m) {\n  var x = a[0], y = a[1], z = a[2], w = a[3];\n  out[0] = m[0] * x + m[1] * y + m[2] * z + m[3] * w;\n  out[1] = m[4] * x + m[5] * y + m[6] * z + m[7] * w;\n  out[2] = m[8] * x + m[9] * y + m[10] * z + m[11] * w;\n  out[3] = m[12] * x + m[13] * y + m[14] * z + m[15] * w;\n  return out;\n}\n\n/**\n * Apply color effects to an ImageData\n *\n * @param {ImageData} imageData This object will be mutated\n * @param {Object} effect\n * @param {vec4} effect.colorOffset\n * @param {mat4} effect.colorMatrix\n *\n * @memberof colorEffects\n */\nvar tmpPixel = vec4.create();\nfunction applyToImageData(imageData, effect) {\n  var width = imageData.width;\n  var height = imageData.height;\n  var data = imageData.data;\n\n  for(var i = 0; i < width * height; i++) {\n    vec4.set(tmpPixel, data[i*4+0]/255, data[i*4+1]/255, data[i*4+2]/255, data[i*4+3]/255);\n    applyToPixel(tmpPixel, effect, tmpPixel);\n    data[i*4+0] = tmpPixel[0]*255;\n    data[i*4+1] = tmpPixel[1]*255;\n    data[i*4+2] = tmpPixel[2]*255;\n    data[i*4+3] = tmpPixel[3]*255;\n  }\n}\n\nmodule.exports = {\n  identity: identity,\n  applyToPixel: applyToPixel,\n  applyToImageData: applyToImageData\n};\n","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar defaults = require('./util/defaults');\n\nvar defaultSpeed = 0.1;\nvar defaultAccel = 0.01;\n\nvar defaultOptions = {\n  yawSpeed: defaultSpeed,\n  pitchSpeed: defaultSpeed,\n  fovSpeed: defaultSpeed,\n  yawAccel: defaultAccel,\n  pitchAccel: defaultAccel,\n  fovAccel: defaultAccel,\n  targetPitch: 0,\n  targetFov: null\n};\n\n/**\n * @param {Object} opts\n * @param {Number} [opts.yawSpeed=0.1] Yaw maximum speed\n * @param {Number} [opts.pitchSpeed=0.1] Pitch maximum speed\n * @param {Number} [opts.fovSpeed=0.1] Fov maximum speed\n * @param {Number} [opts.yawAccel=0.01] Yaw acceleration\n * @param {Number} [opts.pitchAccel=0.01] Pitch acceleration\n * @param {Number} [opts.fovAccel=0.01] Fov acceleration\n * @param {Number} [opts.targetPitch=0] Value that pitch converges to. `null` means that the pitch will not change.\n * @param {Number} [opts.targetFov=null] Value that fov converges to. `null` means that the fov will not change.\n * @returns Movement function that can be passed to {@link Viewer#setIdleMovement} or {@link Scene#startMovement}\n*/\nfunction autorotate(opts) {\n\n  opts = defaults(opts || {}, defaultOptions);\n\n  var yawSpeed = opts.yawSpeed;\n  var pitchSpeed = opts.pitchSpeed;\n  var fovSpeed = opts.fovSpeed;\n  var yawAccel = opts.yawAccel;\n  var pitchAccel = opts.pitchAccel;\n  var fovAccel = opts.fovAccel;\n  var targetPitch = opts.targetPitch;\n  var targetFov = opts.targetFov;\n\n  return function start() {\n\n    var lastTime = 0;\n    var lastYawSpeed = 0;\n    var lastPitchSpeed = 0;\n    var lastFovSpeed = 0;\n\n    var currentYawSpeed = 0;\n    var currentPitchSpeed = 0;\n    var currentFovSpeed = 0;\n\n    var timeDelta;\n    var yawDelta;\n    var pitchDelta;\n    var fovDelta;\n\n    return function step(params, currentTime) {\n\n      timeDelta = (currentTime - lastTime) / 1000;\n      currentYawSpeed = Math.min(lastYawSpeed + timeDelta * yawAccel, yawSpeed);\n      yawDelta = currentYawSpeed * timeDelta;\n      params.yaw = params.yaw + yawDelta;\n\n      if (targetPitch != null && params.pitch !== targetPitch) {\n        var pitchThresh = 0.5 * lastPitchSpeed * lastPitchSpeed / pitchAccel;\n        if (Math.abs(targetPitch - params.pitch) > pitchThresh) {\n          // Acceleration phase\n          currentPitchSpeed = Math.min(lastPitchSpeed + timeDelta * pitchAccel, pitchSpeed);\n        } else {\n          // Deceleration phase\n          currentPitchSpeed = Math.max(lastPitchSpeed - timeDelta * pitchAccel, 0);\n        }\n        // currentPitchSpeed is the absolute value (>= 0)\n        pitchDelta = currentPitchSpeed * timeDelta;\n        if (targetPitch < params.pitch) {\n          params.pitch = Math.max(targetPitch, params.pitch - pitchDelta);\n        }\n        if (targetPitch > params.pitch) {\n          params.pitch = Math.min(targetPitch, params.pitch + pitchDelta);\n        }\n      }\n\n      if (targetFov != null && params.fov !== targetPitch) {\n        var fovThresh = 0.5 * lastFovSpeed * lastFovSpeed / fovAccel;\n        if (Math.abs(targetFov - params.fov) > fovThresh) {\n          // Acceleration phase\n          currentFovSpeed = Math.min(lastFovSpeed + timeDelta * fovAccel, fovSpeed);\n        } else {\n          // Deceleration phase\n          currentFovSpeed = Math.max(lastFovSpeed - timeDelta * fovAccel, 0);\n        }\n        // currentFovSpeed is the absolute value (>= 0)\n        fovDelta = currentFovSpeed * timeDelta;\n        if (targetFov < params.fov) {\n          params.fov = Math.max(targetFov, params.fov - fovDelta);\n        }\n        if (targetFov > params.fov) {\n          params.fov = Math.min(targetFov, params.fov + fovDelta);\n        }\n      }\n\n      lastTime = currentTime;\n      lastYawSpeed = currentYawSpeed;\n      lastPitchSpeed = currentPitchSpeed;\n      lastFovSpeed = currentFovSpeed;\n\n      return params;\n\n    };\n\n  };\n\n}\n\nmodule.exports = autorotate;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n/**\n * @memberof util\n * @param {number} deg\n * @return {number}\n */\nfunction degToRad(deg) {\n  return deg * Math.PI / 180;\n}\n\nmodule.exports = degToRad;","/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nmodule.exports = {\n\n  // Stages.\n  WebGlStage: require('./stages/WebGl'),\n  CssStage: require('./stages/Css'),\n  FlashStage: require('./stages/Flash'),\n\n  // Renderers.\n  WebGlCubeRenderer: require('./renderers/WebGlCube'),\n  WebGlFlatRenderer: require('./renderers/WebGlFlat'),\n  WebGlEquirectRenderer: require('./renderers/WebGlEquirect'),\n  CssCubeRenderer: require('./renderers/CssCube'),\n  CssFlatRenderer: require('./renderers/CssFlat'),\n  FlashCubeRenderer: require('./renderers/FlashCube'),\n  FlashFlatRenderer: require('./renderers/FlashFlat'),\n  registerDefaultRenderers: require('./renderers/registerDefaultRenderers'),\n\n  // Geometries.\n  CubeGeometry: require('./geometries/Cube'),\n  FlatGeometry: require('./geometries/Flat'),\n  EquirectGeometry: require('./geometries/Equirect'),\n\n  // Views.\n  RectilinearView: require('./views/Rectilinear'),\n  FlatView: require('./views/Flat'),\n\n  // Sources.\n  ImageUrlSource: require('./sources/ImageUrl'),\n  SingleAssetSource: require('./sources/SingleAsset'),\n\n  // Assets.\n  StaticAsset: require('./assets/Static'),\n  DynamicAsset: require('./assets/Dynamic'),\n\n  // Texture store.\n  TextureStore: require('./TextureStore'),\n\n  // Layer.\n  Layer: require('./Layer'),\n\n  // Render loop.\n  RenderLoop: require('./RenderLoop'),\n\n  // Controls.\n  KeyControlMethod: require('./controls/Key'),\n  DragControlMethod: require('./controls/Drag'),\n  QtvrControlMethod: require('./controls/Qtvr'),\n  ScrollZoomControlMethod: require('./controls/ScrollZoom'),\n  PinchZoomControlMethod: require('./controls/PinchZoom'),\n  VelocityControlMethod: require('./controls/Velocity'),\n  ElementPressControlMethod: require('./controls/ElementPress'),\n  Controls: require('./controls/Controls'),\n  Dynamics: require('./controls/Dynamics'),\n\n  // High-level API.\n  Viewer: require('./Viewer'),\n  Scene: require('./Scene'),\n\n  // Hotspots.\n  Hotspot: require('./Hotspot'),\n  HotspotContainer: require('./HotspotContainer'),\n\n  // Effects.\n  colorEffects: require('./colorEffects'),\n\n  // Miscellaneous functions.\n  registerDefaultControls: require('./controls/registerDefaultControls'),\n  autorotate: require('./autorotate'),\n\n  // Utility functions.\n  util: {\n    async: require('./util/async'),\n    cancelize: require('./util/cancelize'),\n    chain: require('./util/chain'),\n    clamp: require('./util/clamp'),\n    clearOwnProperties: require('./util/clearOwnProperties'),\n    cmp: require('./util/cmp'),\n    compose: require('./util/compose'),\n    convertFov: require('./util/convertFov'),\n    decimal: require('./util/decimal'),\n    defaults: require('./util/defaults'),\n    defer: require('./util/defer'),\n    degToRad: require('./util/degToRad'),\n    delay: require('./util/delay'),\n    dom: require('./util/dom'),\n    extend: require('./util/extend'),\n    hash: require('./util/hash'),\n    inherits: require('./util/inherits'),\n    mod: require('./util/mod'),\n    noop: require('./util/noop'),\n    now: require('./util/now'),\n    once: require('./util/once'),\n    pixelRatio: require('./util/pixelRatio'),\n    radToDeg: require('./util/radToDeg'),\n    real: require('./util/real'),\n    retry: require('./util/retry'),\n    tween: require('./util/tween'),\n    type: require('./util/type')\n  },\n\n  // Expose dependencies for clients to use.\n  dependencies: {\n    bowser: require('bowser'),\n    glMatrix: require('gl-matrix'),\n    eventEmitter: require('minimal-event-emitter'),\n    hammerjs: require('hammerjs')\n  }\n};\n","/*!\n* screenfull\n* v5.0.2 - 2020-02-13\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (element) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar onFullScreenEntered = function () {\n\t\t\t\t\tthis.off('change', onFullScreenEntered);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenEntered);\n\n\t\t\t\telement = element || document.documentElement;\n\n\t\t\t\tvar returnPromise = element[fn.requestFullscreen]();\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenEntered).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\texit: function () {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tif (!this.isFullscreen) {\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar onFullScreenExit = function () {\n\t\t\t\t\tthis.off('change', onFullScreenExit);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenExit);\n\n\t\t\t\tvar returnPromise = document[fn.exitFullscreen]();\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenExit).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\ttoggle: function (element) {\n\t\t\treturn this.isFullscreen ? this.exit() : this.request(element);\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = {isEnabled: false};\n\t\t} else {\n\t\t\twindow.screenfull = {isEnabled: false};\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tisEnabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n","export default {\n  \"scenes\": [\n    {\n      \"id\": \"0-room01_dirts\",\n      \"name\": \"Room01_Dirts\",\n      \"levels\": [\n        {\n          \"tileSize\": 256,\n          \"size\": 256,\n          \"fallbackOnly\": true\n        },\n        {\n          \"tileSize\": 512,\n          \"size\": 512\n        },\n        {\n          \"tileSize\": 512,\n          \"size\": 1024\n        },\n        {\n          \"tileSize\": 512,\n          \"size\": 2048\n        }\n      ],\n      \"faceSize\": 1728,\n      \"initialViewParameters\": {\n        \"yaw\": -2.807950514771427,\n        \"pitch\": 0.546950964339004,\n        \"fov\": 1.3834918748083818\n      },\n      \"linkHotspots\": [\n        {\n          \"yaw\": -0.9850157473897845,\n          \"pitch\": 0.014431965914120326,\n          \"rotation\": 0,\n          \"target\": \"2-room01_sink\"\n        }\n      ],\n      \"infoHotspots\": [\n        {\n          \"yaw\": 2.9875888884264983,\n          \"pitch\": 0.5774747948526766,\n          \"title\": \"Dirt Samples\",\n          \"text\": \"Discription goes here:&nbsp;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.&nbsp;\"\n        },\n        {\n          \"yaw\": -0.02391572681892029,\n          \"pitch\": 0.18620421504768103,\n          \"title\": \"Samples\",\n          \"text\": \"Discription goes here:&nbsp;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.&nbsp;\"\n        }\n      ]\n    },\n    {\n      \"id\": \"1-room01_samples\",\n      \"name\": \"Room01_Samples\",\n      \"levels\": [\n        {\n          \"tileSize\": 256,\n          \"size\": 256,\n          \"fallbackOnly\": true\n        },\n        {\n          \"tileSize\": 512,\n          \"size\": 512\n        },\n        {\n          \"tileSize\": 512,\n          \"size\": 1024\n        },\n        {\n          \"tileSize\": 512,\n          \"size\": 2048\n        }\n      ],\n      \"faceSize\": 1728,\n      \"initialViewParameters\": {\n        \"yaw\": 2.2539633342168344,\n        \"pitch\": 1.0132976473766462,\n        \"fov\": 1.3834918748083818\n      },\n      \"linkHotspots\": [\n        {\n          \"yaw\": -2.0363503970074994,\n          \"pitch\": 0.445336706720596,\n          \"rotation\": 0,\n          \"target\": \"0-room01_dirts\"\n        },\n        {\n          \"yaw\": -0.08944806103964531,\n          \"pitch\": 0.19510184853116286,\n          \"rotation\": 0,\n          \"target\": \"2-room01_sink\"\n        }\n      ],\n      \"infoHotspots\": [\n        {\n          \"yaw\": -3.0482887995547365,\n          \"pitch\": 0.9093130504504909,\n          \"title\": \"Three Samples\",\n          \"text\": \"Discription goes here:&nbsp;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.\"\n        },\n        {\n          \"yaw\": -0.7878686702052615,\n          \"pitch\": 0.4639815378663368,\n          \"title\": \"Operation Table\",\n          \"text\": \"Discription goes here: Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.&nbsp;\"\n        }\n      ]\n    },\n    {\n      \"id\": \"2-room01_sink\",\n      \"name\": \"Room01_Sink\",\n      \"levels\": [\n        {\n          \"tileSize\": 256,\n          \"size\": 256,\n          \"fallbackOnly\": true\n        },\n        {\n          \"tileSize\": 512,\n          \"size\": 512\n        },\n        {\n          \"tileSize\": 512,\n          \"size\": 1024\n        },\n        {\n          \"tileSize\": 512,\n          \"size\": 2048\n        }\n      ],\n      \"faceSize\": 1728,\n      \"initialViewParameters\": {\n        \"yaw\": -2.7413008054283967,\n        \"pitch\": 0.21126501293331046,\n        \"fov\": 1.3834918748083818\n      },\n      \"linkHotspots\": [\n        {\n          \"yaw\": -1.6518739527670032,\n          \"pitch\": 0.14602027549817187,\n          \"rotation\": 0,\n          \"target\": \"0-room01_dirts\"\n        },\n        {\n          \"yaw\": -1.870162892216845,\n          \"pitch\": 0.3220386674455664,\n          \"rotation\": 0,\n          \"target\": \"1-room01_samples\"\n        },\n        {\n          \"yaw\": -2.24731812845865,\n          \"pitch\": 0.08723079616738616,\n          \"rotation\": 0,\n          \"target\": \"4-room02_rightside\"\n        }\n      ],\n      \"infoHotspots\": [\n        {\n          \"yaw\": 3.101000401838757,\n          \"pitch\": 0.24833444529191695,\n          \"title\": \"Machine\",\n          \"text\": \"Discription goes here:&nbsp;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.&nbsp;\"\n        }\n      ]\n    },\n    {\n      \"id\": \"3-room02_operationside\",\n      \"name\": \"Room02_operationSide\",\n      \"levels\": [\n        {\n          \"tileSize\": 256,\n          \"size\": 256,\n          \"fallbackOnly\": true\n        },\n        {\n          \"tileSize\": 512,\n          \"size\": 512\n        },\n        {\n          \"tileSize\": 512,\n          \"size\": 1024\n        },\n        {\n          \"tileSize\": 512,\n          \"size\": 2048\n        }\n      ],\n      \"faceSize\": 1728,\n      \"initialViewParameters\": {\n        \"pitch\": 0,\n        \"yaw\": 0,\n        \"fov\": 1.5707963267948966\n      },\n      \"linkHotspots\": [\n        {\n          \"yaw\": -1.8765195182101593,\n          \"pitch\": 0.2502993331103909,\n          \"rotation\": 0,\n          \"target\": \"1-room01_samples\"\n        },\n        {\n          \"yaw\": -2.061443207535925,\n          \"pitch\": 0.5429849080188749,\n          \"rotation\": 0,\n          \"target\": \"4-room02_rightside\"\n        }\n      ],\n      \"infoHotspots\": [\n        {\n          \"yaw\": -2.6565479498938753,\n          \"pitch\": 0.08227744642221779,\n          \"title\": \"Samples\",\n          \"text\": \"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English.&nbsp;\"\n        },\n        {\n          \"yaw\": 0.27605150217843644,\n          \"pitch\": 0.27273705089885425,\n          \"title\": \"Operation Table\",\n          \"text\": \"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English.&nbsp;\"\n        }\n      ]\n    },\n    {\n      \"id\": \"4-room02_rightside\",\n      \"name\": \"Room02_rightSide\",\n      \"levels\": [\n        {\n          \"tileSize\": 256,\n          \"size\": 256,\n          \"fallbackOnly\": true\n        },\n        {\n          \"tileSize\": 512,\n          \"size\": 512\n        },\n        {\n          \"tileSize\": 512,\n          \"size\": 1024\n        },\n        {\n          \"tileSize\": 512,\n          \"size\": 2048\n        }\n      ],\n      \"faceSize\": 1728,\n      \"initialViewParameters\": {\n        \"yaw\": 0.37105829916129096,\n        \"pitch\": 0.5936090840828641,\n        \"fov\": 1.3834918748083818\n      },\n      \"linkHotspots\": [\n        {\n          \"yaw\": 0.29541070429976557,\n          \"pitch\": 0.008774865175208646,\n          \"rotation\": 0,\n          \"target\": \"3-room02_operationside\"\n        }\n      ],\n      \"infoHotspots\": [\n        {\n          \"yaw\": 0.5360967565832375,\n          \"pitch\": 0.7561237995898242,\n          \"title\": \"<div style=\\\"font-family: &quot;Segoe UI&quot;, system-ui, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, sans-serif; font-size: 14px;\\\">Cyanobacteria</div>\",\n          \"text\": \"Discription goes here:&nbsp;It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English.\"\n        }\n      ]\n    }\n  ],\n  \"name\": \"BioLab\",\n  \"settings\": {\n    \"mouseViewMode\": \"drag\",\n    \"autorotateEnabled\": false,\n    \"fullscreenButton\": false,\n    \"viewControlButtons\": false\n  }\n};\n","import Marzipano from \"marzipano\";\nimport screenfull from \"screenfull\";\nimport APP_DATA from \"./data\";\n\n(\"use strict\");\n\nconsole.log(APP_DATA);\n\nvar data = APP_DATA;\n\n// Grab elements from DOM.\nvar panoElement = document.querySelector(\"#pano\");\nvar sceneNameElement = document.querySelector(\"#titleBar .sceneName\");\nvar sceneListElement = document.querySelector(\"#sceneList\");\nvar sceneElements = document.querySelectorAll(\"#sceneList .scene\");\nvar sceneListToggleElement = document.querySelector(\"#sceneListToggle\");\nvar autorotateToggleElement = document.querySelector(\"#autorotateToggle\");\nvar fullscreenToggleElement = document.querySelector(\"#fullscreenToggle\");\n\n// Detect desktop or mobile mode.\nif (window.matchMedia) {\n  var setMode = function () {\n    if (mql.matches) {\n      document.body.classList.remove(\"desktop\");\n      document.body.classList.add(\"mobile\");\n    } else {\n      document.body.classList.remove(\"mobile\");\n      document.body.classList.add(\"desktop\");\n    }\n  };\n  var mql = matchMedia(\"(max-width: 500px), (max-height: 500px)\");\n  setMode();\n  mql.addListener(setMode);\n} else {\n  document.body.classList.add(\"desktop\");\n}\n\n// Detect whether we are on a touch device.\ndocument.body.classList.add(\"no-touch\");\nwindow.addEventListener(\"touchstart\", function () {\n  document.body.classList.remove(\"no-touch\");\n  document.body.classList.add(\"touch\");\n});\n\n// Viewer options.\nvar viewerOpts = {\n  controls: {\n    mouseViewMode: data.settings.mouseViewMode,\n    scrollZoom: false,\n  },\n};\n\n// Initialize viewer.\nvar viewer = new Marzipano.Viewer(panoElement, viewerOpts);\n\n// Create scenes.\nvar scenes = data.scenes.map(function (data) {\n  var urlPrefix = window.vt_env === \"prod\" ? \"https://www.gannett-cdn.com/labs/dev/virtualTour/tiles\" : \"tiles\";\n  var source = Marzipano.ImageUrlSource.fromString(urlPrefix + \"/\" + data.id + \"/{z}/{f}/{y}/{x}.jpg\", { cubeMapPreviewUrl: urlPrefix + \"/\" + data.id + \"/preview.jpg\" });\n  var geometry = new Marzipano.CubeGeometry(data.levels);\n\n  var limiter = Marzipano.RectilinearView.limit.traditional(data.faceSize, (100 * Math.PI) / 180, (120 * Math.PI) / 180);\n  var view = new Marzipano.RectilinearView(data.initialViewParameters, limiter);\n\n  var scene = viewer.createScene({\n    source: source,\n    geometry: geometry,\n    view: view,\n    pinFirstLevel: true,\n  });\n\n  // Create link hotspots.\n  data.linkHotspots.forEach(function (hotspot) {\n    var element = createLinkHotspotElement(hotspot);\n    scene.hotspotContainer().createHotspot(element, { yaw: hotspot.yaw, pitch: hotspot.pitch });\n  });\n\n  // Create info hotspots.\n  data.infoHotspots.forEach(function (hotspot) {\n    var element = createInfoHotspotElement(hotspot);\n    scene.hotspotContainer().createHotspot(element, { yaw: hotspot.yaw, pitch: hotspot.pitch });\n  });\n\n  return {\n    data: data,\n    scene: scene,\n    view: view,\n  };\n});\n\n// Set up autorotate, if enabled.\nvar autorotate = Marzipano.autorotate({\n  yawSpeed: 0.03,\n  targetPitch: 0,\n  targetFov: Math.PI / 2,\n});\nif (data.settings.autorotateEnabled) {\n  autorotateToggleElement.classList.add(\"enabled\");\n}\n\n// Set handler for autorotate toggle.\nautorotateToggleElement.addEventListener(\"click\", toggleAutorotate);\n\n// Set up fullscreen mode, if supported.\nif (screenfull.enabled && data.settings.fullscreenButton) {\n  document.body.classList.add(\"fullscreen-enabled\");\n  fullscreenToggleElement.addEventListener(\"click\", function () {\n    screenfull.toggle();\n  });\n  screenfull.on(\"change\", function () {\n    if (screenfull.isFullscreen) {\n      fullscreenToggleElement.classList.add(\"enabled\");\n    } else {\n      fullscreenToggleElement.classList.remove(\"enabled\");\n    }\n  });\n} else {\n  document.body.classList.add(\"fullscreen-disabled\");\n}\n\n// Set handler for scene list toggle.\nsceneListToggleElement.addEventListener(\"click\", toggleSceneList);\n\n// Start with the scene list open on desktop.\nif (!document.body.classList.contains(\"mobile\")) {\n  showSceneList();\n}\n\n// Set handler for scene switch.\nscenes.forEach(function (scene) {\n  var el = document.querySelector('#sceneList .scene[data-id=\"' + scene.data.id + '\"]');\n  el.addEventListener(\"click\", function () {\n    switchScene(scene);\n    // On mobile, hide scene list after selecting a scene.\n    if (document.body.classList.contains(\"mobile\")) {\n      hideSceneList();\n    }\n  });\n});\n\n// DOM elements for view controls.\nvar viewUpElement = document.querySelector(\"#viewUp\");\nvar viewDownElement = document.querySelector(\"#viewDown\");\nvar viewLeftElement = document.querySelector(\"#viewLeft\");\nvar viewRightElement = document.querySelector(\"#viewRight\");\nvar viewInElement = document.querySelector(\"#viewIn\");\nvar viewOutElement = document.querySelector(\"#viewOut\");\n\n// Dynamic parameters for controls.\nvar velocity = 0.7;\nvar friction = 3;\n\n// Associate view controls with elements.\nvar controls = viewer.controls();\ncontrols.registerMethod(\"upElement\", new Marzipano.ElementPressControlMethod(viewUpElement, \"y\", -velocity, friction), true);\ncontrols.registerMethod(\"downElement\", new Marzipano.ElementPressControlMethod(viewDownElement, \"y\", velocity, friction), true);\ncontrols.registerMethod(\"leftElement\", new Marzipano.ElementPressControlMethod(viewLeftElement, \"x\", -velocity, friction), true);\ncontrols.registerMethod(\"rightElement\", new Marzipano.ElementPressControlMethod(viewRightElement, \"x\", velocity, friction), true);\ncontrols.registerMethod(\"inElement\", new Marzipano.ElementPressControlMethod(viewInElement, \"zoom\", -velocity, friction), true);\ncontrols.registerMethod(\"outElement\", new Marzipano.ElementPressControlMethod(viewOutElement, \"zoom\", velocity, friction), true);\n\nfunction sanitize(s) {\n  return s.replace(\"&\", \"&amp;\").replace(\"<\", \"&lt;\").replace(\">\", \"&gt;\");\n}\n\nfunction switchScene(scene) {\n  stopAutorotate();\n  scene.view.setParameters(scene.data.initialViewParameters);\n  scene.scene.switchTo();\n  startAutorotate();\n  updateSceneName(scene);\n  updateSceneList(scene);\n}\n\nfunction updateSceneName(scene) {\n  sceneNameElement.innerHTML = sanitize(scene.data.name);\n}\n\nfunction updateSceneList(scene) {\n  for (var i = 0; i < sceneElements.length; i++) {\n    var el = sceneElements[i];\n    if (el.getAttribute(\"data-id\") === scene.data.id) {\n      el.classList.add(\"current\");\n    } else {\n      el.classList.remove(\"current\");\n    }\n  }\n}\n\nfunction showSceneList() {\n  sceneListElement.classList.add(\"enabled\");\n  sceneListToggleElement.classList.add(\"enabled\");\n}\n\nfunction hideSceneList() {\n  sceneListElement.classList.remove(\"enabled\");\n  sceneListToggleElement.classList.remove(\"enabled\");\n}\n\nfunction toggleSceneList() {\n  sceneListElement.classList.toggle(\"enabled\");\n  sceneListToggleElement.classList.toggle(\"enabled\");\n}\n\nfunction startAutorotate() {\n  if (!autorotateToggleElement.classList.contains(\"enabled\")) {\n    return;\n  }\n  viewer.startMovement(autorotate);\n  viewer.setIdleMovement(3000, autorotate);\n}\n\nfunction stopAutorotate() {\n  viewer.stopMovement();\n  viewer.setIdleMovement(Infinity);\n}\n\nfunction toggleAutorotate() {\n  if (autorotateToggleElement.classList.contains(\"enabled\")) {\n    autorotateToggleElement.classList.remove(\"enabled\");\n    stopAutorotate();\n  } else {\n    autorotateToggleElement.classList.add(\"enabled\");\n    startAutorotate();\n  }\n}\n\nfunction createLinkHotspotElement(hotspot) {\n  // Create wrapper element to hold icon and tooltip.\n  var wrapper = document.createElement(\"div\");\n  wrapper.classList.add(\"hotspot\");\n  wrapper.classList.add(\"link-hotspot\");\n\n  // Create image element.\n  var icon = document.createElement(\"img\");\n  icon.src = \"img/link.png\";\n  icon.classList.add(\"link-hotspot-icon\");\n\n  // Set rotation transform.\n  var transformProperties = [\"-ms-transform\", \"-webkit-transform\", \"transform\"];\n  for (var i = 0; i < transformProperties.length; i++) {\n    var property = transformProperties[i];\n    icon.style[property] = \"rotate(\" + hotspot.rotation + \"rad)\";\n  }\n\n  // Add click event handler.\n  wrapper.addEventListener(\"click\", function () {\n    switchScene(findSceneById(hotspot.target));\n  });\n\n  // Prevent touch and scroll events from reaching the parent element.\n  // This prevents the view control logic from interfering with the hotspot.\n  stopTouchAndScrollEventPropagation(wrapper);\n\n  // Create tooltip element.\n  var tooltip = document.createElement(\"div\");\n  tooltip.classList.add(\"hotspot-tooltip\");\n  tooltip.classList.add(\"link-hotspot-tooltip\");\n  tooltip.innerHTML = findSceneDataById(hotspot.target).name;\n\n  wrapper.appendChild(icon);\n  wrapper.appendChild(tooltip);\n\n  return wrapper;\n}\n\nfunction createInfoHotspotElement(hotspot) {\n  // Create wrapper element to hold icon and tooltip.\n  var wrapper = document.createElement(\"div\");\n  wrapper.classList.add(\"hotspot\");\n  wrapper.classList.add(\"info-hotspot\");\n\n  // Create hotspot/tooltip header.\n  var header = document.createElement(\"div\");\n  header.classList.add(\"info-hotspot-header\");\n\n  // Create image element.\n  var iconWrapper = document.createElement(\"div\");\n  iconWrapper.classList.add(\"info-hotspot-icon-wrapper\");\n  var icon = document.createElement(\"img\");\n  icon.src = \"img/info.png\";\n  icon.classList.add(\"info-hotspot-icon\");\n  iconWrapper.appendChild(icon);\n\n  // Create title element.\n  var titleWrapper = document.createElement(\"div\");\n  titleWrapper.classList.add(\"info-hotspot-title-wrapper\");\n  var title = document.createElement(\"div\");\n  title.classList.add(\"info-hotspot-title\");\n  title.innerHTML = hotspot.title;\n  titleWrapper.appendChild(title);\n\n  // Create close element.\n  var closeWrapper = document.createElement(\"div\");\n  closeWrapper.classList.add(\"info-hotspot-close-wrapper\");\n  var closeIcon = document.createElement(\"img\");\n  closeIcon.src = \"img/close.png\";\n  closeIcon.classList.add(\"info-hotspot-close-icon\");\n  closeWrapper.appendChild(closeIcon);\n\n  // Construct header element.\n  header.appendChild(iconWrapper);\n  header.appendChild(titleWrapper);\n  header.appendChild(closeWrapper);\n\n  // Create text element.\n  var text = document.createElement(\"div\");\n  text.classList.add(\"info-hotspot-text\");\n  text.innerHTML = hotspot.text;\n\n  // Place header and text into wrapper element.\n  wrapper.appendChild(header);\n  wrapper.appendChild(text);\n\n  // Create a modal for the hotspot content to appear on mobile mode.\n  const embedWrapper = document.querySelector(\"#virtual-tour-container\");\n  var modal = document.createElement(\"div\");\n  modal.innerHTML = wrapper.innerHTML;\n  modal.classList.add(\"info-hotspot-modal\");\n  embedWrapper.appendChild(modal);\n\n  var toggle = function () {\n    wrapper.classList.toggle(\"visible\");\n    modal.classList.toggle(\"visible\");\n  };\n\n  // Show content when hotspot is clicked.\n  wrapper.querySelector(\".info-hotspot-header\").addEventListener(\"click\", toggle);\n\n  // Hide content when close icon is clicked.\n  modal.querySelector(\".info-hotspot-close-wrapper\").addEventListener(\"click\", toggle);\n\n  // Prevent touch and scroll events from reaching the parent element.\n  // This prevents the view control logic from interfering with the hotspot.\n  stopTouchAndScrollEventPropagation(wrapper);\n\n  return wrapper;\n}\n\n// Prevent touch and scroll events from reaching the parent element.\nfunction stopTouchAndScrollEventPropagation(element, eventList) {\n  var eventList = [\"touchstart\", \"touchmove\", \"touchend\", \"touchcancel\", \"wheel\", \"mousewheel\"];\n  for (var i = 0; i < eventList.length; i++) {\n    element.addEventListener(eventList[i], function (event) {\n      event.stopPropagation();\n    });\n  }\n}\n\nfunction findSceneById(id) {\n  for (var i = 0; i < scenes.length; i++) {\n    if (scenes[i].data.id === id) {\n      return scenes[i];\n    }\n  }\n  return null;\n}\n\nfunction findSceneDataById(id) {\n  for (var i = 0; i < data.scenes.length; i++) {\n    if (data.scenes[i].id === id) {\n      return data.scenes[i];\n    }\n  }\n  return null;\n}\n\n// Display the initial scene.\nswitchScene(scenes[0]);\n\n// })();\n"]}